/**
 * Local plugin "Boost navigation fumbling" - JS code for collapsing nav drawer nodes
 *
 * @module     local_boostnavigation/collapsenavdrawernodes
 * @copyright  2017 Alexander Bias, Ulm University <alexander.bias@uni-ulm.de>
 * @copyright  2017 Kathrin Osswald, Ulm University <kathrin.osswald@uni-ulm.de>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_boostnavigation/collapsenavdrawernodes",["jquery"],(function($){function toggleClickHandler(node,nodename){node.click((function(e){if(e.preventDefault(),!1===node.hasClass("localboostnavigationcollapsedparent"))collapseNode(node,nodename);else if(!0===node.hasClass("localboostnavigationcollapsedparent")){!function(node,nodename){$(".list-group-item[data-parent-key="+nodename+"]").removeClass("localboostnavigationcollapsedchild"),node.removeClass("localboostnavigationcollapsedparent"),node.attr("aria-expanded","1"),M.util.set_user_preference("local_boostnavigation-collapse_"+nodename+"node",0)}(node,nodename);var accordionTarget=node.attr("data-localboostnavigation-accordion");void 0!==accordionTarget&&$('.list-group-item.localboostnavigationcollapsibleparent[data-key^="'+accordionTarget+'"]').each((function(){$(this).attr("data-key")!==node.attr("data-key")&&collapseNode($(this),$(this).attr("data-key"))}))}}))}function collapseNode(node,nodename){$(".list-group-item[data-parent-key="+nodename+"]").addClass("localboostnavigationcollapsedchild"),node.addClass("localboostnavigationcollapsedparent"),node.attr("aria-expanded","0"),M.util.set_user_preference("local_boostnavigation-collapse_"+nodename+"node",1)}function initToggleNodes(nodename){var node=$('.list-group-item[data-key="'+nodename+'"]');toggleClickHandler(node,nodename),function(node,nodename){var ids="";$(".list-group-item[data-parent-key="+nodename+"]").each((function(index,element){var id=$(element).attr("data-key");"localboost"!==id.substring(0,10)&&(id="localboostnavigation"+id),$(element).attr("id",id),ids=ids+id+" "})),""!==ids&&node.attr("aria-controls",ids.trim()),!1===node.hasClass("localboostnavigationcollapsedparent")?node.attr("aria-expanded","1"):!0===node.hasClass("localboostnavigationcollapsedparent")&&node.attr("aria-expanded","0")}(node,nodename),"mycourses"==nodename&&function(node){node.attr("tabindex","0"),node.keydown((function(e){13===e.which&&e.currentTarget.click()})),node.mousedown((function(){node.css("outline","none")})),node.mouseup((function(){node.css("outline",""),node.blur()}))}(node)}return{init:function(toggleNodes,accordionNodes){for(var i=0,tLen=toggleNodes.length;i<tLen;i++)initToggleNodes(toggleNodes[i]);for(var j=0,aLen=accordionNodes.length;j<aLen;j++)nodename=accordionNodes[j],$('.list-group-item.localboostnavigationcollapsibleparent[data-key^="'+nodename+'"]').attr("data-localboostnavigation-accordion",nodename);var nodename}}}));

//# sourceMappingURL=collapsenavdrawernodes.min.js.map