{"version":3,"sources":["../src/multilanguagequestion.js"],"names":["define","$","initLangSelectorWhenReady","taId","ta","document","getElementById","selector","on","lang","val","uiWrapper","data","uiInstance","setLanguage","ready"],"mappings":"AAcAA,OAAM,0CAAC,CAAC,QAAD,CAAD,CAAa,SAASC,CAAT,CAAY,CAgB3B,QAASC,CAAAA,CAAT,CAAmCC,CAAnC,CAAyC,CACrC,GAAIC,CAAAA,CAAE,CAAGH,CAAC,CAACI,QAAQ,CAACC,cAAT,CAAwBH,CAAxB,CAAD,CAAV,CACII,CAAQ,CAAGN,CAAC,CAAC,yBAAD,CADhB,CAkBAM,CAAQ,CAACC,EAAT,CAAY,QAAZ,CAZA,UAAsB,CAGlB,GAAIC,CAAAA,CAAI,CAAGF,CAAQ,CAACG,GAAT,EAAX,CACIC,CAAS,CAAGP,CAAE,CAACQ,IAAH,CAAQ,oBAAR,CADhB,CAGA,GAAID,CAAS,EAAIA,CAAS,CAACE,UAAvB,EAAiF,UAA5C,QAAOF,CAAAA,CAAS,CAACE,UAAV,CAAqBC,WAArE,CAAiG,CAE7FH,CAAS,CAACE,UAAV,CAAqBC,WAArB,CAAiCL,CAAjC,CACH,CACJ,CAED,CACH,CAED,MAAO,CAAC,iBAjCR,SAA0BN,CAA1B,CAAgC,CAC5BF,CAAC,GAAGc,KAAJ,CAAU,UAAW,CACjBb,CAAyB,CAACC,CAAD,CAC5B,CAFD,CAGH,CA6BM,CACV,CAvCK,CAAN","sourcesContent":["/******************************************************************************\n *\n * This module simply handles changes in the Language selection dropdown for\n * multilanguage questions as seen by students. It switches the Ace language\n * accordingly.\n * It should only be loaded in conjunction with the ui_ace module.\n *\n * @module qtype_coderunner/multilanguagequestion\n * @copyright  Richard Lobb, 2018, The University of Canterbury\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n *\n * TODO: is there a race problem here??\n */\n\ndefine(['jquery'], function($) {\n    /**\n     * Initialise the language selector dropdown when the document is ready.\n     * @param {string} taId The ID of the student answer box text area.\n     */\n    function initLangSelector(taId) {\n        $().ready(function() {\n            initLangSelectorWhenReady(taId);\n        });\n    }\n\n    /**\n     * Initialise the language selector. Called by initLanSelector when the\n     * document is ready so the name is a bit of a misnomer.\n     * @param {string} taId The ID of the student answer box text area.\n     */\n    function initLangSelectorWhenReady(taId) {\n        var ta = $(document.getElementById(taId)),  // The jquery text area element(s).\n            selector = $(\".coderunner-lang-select\");\n\n        /**\n         * Set the language for the Ace editor.\n         */\n        function setAceLang() {\n            // Set the language for the Ace plugin (or any other plugin if it\n            // has a setLanguage method).\n            var lang = selector.val(),\n                uiWrapper = ta.data('current-ui-wrapper'); // Currently-active UI wrapper on reqd ta.\n\n            if (uiWrapper && uiWrapper.uiInstance && typeof uiWrapper.uiInstance.setLanguage === 'function') {\n                // TODO: define setLanguage as a required method of all UI plugins.\n                uiWrapper.uiInstance.setLanguage(lang);\n            }\n        }\n\n        selector.on('change', setAceLang);\n    }\n\n    return {'initLangSelector' : initLangSelector};\n});"],"file":"multilanguagequestion.min.js"}