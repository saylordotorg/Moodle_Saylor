/**
 * JavaScript code for the gapfill question type.
 *
 * @copyright  2017 Marcus Green
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("qtype_gapfill/Item",["jquery"],(function($){return function Item(text,delimitchars){this.questionid=$("input[name=id]").val(),this.settings=function(){var settings=[],settingsdata=$("[name='itemsettings']").val();if(settingsdata>""){var obj=JSON.parse(settingsdata);for(var o in obj)settings.push(obj[o])}return settings}(),this.gaptext=text,this.delimitchars=delimitchars,this.l=delimitchars.substr(0,1),this.r=delimitchars.substr(1,1),this.len=this.gaptext.length,this.startchar=this.gaptext.substring(0,1),this.endchar=this.gaptext.substring(this.len-1,this.len),this.gaptextNodelim="",this.feedback={},this.instance=0,this.feedback.correct=$("#id_corecteditable").html(),this.feedback.incorrect=$("#id_incorrecteditable").html(),Item.prototype.striptags=function(gaptext){if(void 0===gaptext)return"";return gaptext.replace(/(<([^>]+)>)/gi,"")},this.stripdelim=function(){if(this.startchar===this.l&&(this.gaptextNodelim=this.gaptext.substring(1,this.len)),this.endchar===this.r){var len=this.gaptextNodelim.length;this.gaptextNodelim=this.gaptextNodelim.substring(0,len-1)}return this.gaptextNodelim};var itemsettings=[];Item.prototype.getItemSettings=function(target){var itemid=target.id,underscore=itemid.indexOf("_");for(var set in this.instance=itemid.substr(underscore+1),this.settings)text=this.stripdelim(),this.settings[set].gaptext===text&&(itemsettings=this.settings[set]);return itemsettings},this.updateJson=function(e){var found=!1,id=e.target.id;for(var set in this.settings)this.settings[set].gaptext===this.stripdelim()&&(this.settings[set].correctfeedback=$("#id_correcteditable")[0].innerHTML,this.settings[set].incorrectfeedback=$("#id_incorrecteditable")[0].innerHTML,found=!0);if(!1===found){var itemsettings={itemid:id,questionid:$("input[name=id]").val(),correctfeedback:$("#id_correcteditable").html(),incorrectfeedback:$("#id_incorrecteditable").html(),gaptext:this.stripdelim()};this.settings.push(itemsettings)}return JSON.stringify(this.settings)}}}));

//# sourceMappingURL=Item.min.js.map