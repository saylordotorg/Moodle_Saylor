{"version":3,"sources":["../src/dragdrop.js"],"names":["define","$","init","singleuse","on","dragShow","val","that","draggables","targetVal","i","length","sourceVal","textContent","removeClass","draggable","revert","helper","cursor","scroll","droppable","hoverClass","drop","event","ui","hasClass","value","text","css","addClass","dblclick"],"mappings":"AAuBAA,OAAM,0BAAC,CAAC,QAAD,CAAW,UAAX,CAAuB,8CAAvB,CAAD,CAAyE,SAASC,CAAT,CAAY,CACzF,MAAO,CACLC,IAAI,CAAE,cAASC,CAAT,CAAoB,CACxBF,CAAC,CAAC,aAAD,CAAD,CAAiBG,EAAjB,CAAoB,UAApB,CAAgC,UAAW,CACzC,GAAID,CAAJ,CAAe,CACbE,CAAQ,CAAC,IAAD,CAAR,CACAJ,CAAC,CAAC,IAAD,CAAD,CAAQK,GAAR,CAAY,EAAZ,CACD,CACF,CALD,EAaA,QAASD,CAAAA,CAAT,CAAkBE,CAAlB,CAAwB,IAClBC,CAAAA,CAAU,CAAGP,CAAC,CAAC,YAAD,CADI,CAElBQ,CAAS,CAAGR,CAAC,CAACM,CAAD,CAAD,CAAQD,GAAR,EAFM,CAGlBI,CAHkB,CAItB,IAAKA,CAAC,CAAG,CAAT,CAAYA,CAAC,CAAGF,CAAU,CAACG,MAA3B,CAAmCD,CAAC,EAApC,CAAwC,CACtC,GAAIE,CAAAA,CAAS,CAAGJ,CAAU,CAACE,CAAD,CAAV,CAAcG,WAA9B,CACA,GAAID,CAAS,EAAIH,CAAjB,CAA4B,CAC1BR,CAAC,CAACO,CAAU,CAACE,CAAD,CAAX,CAAD,CAAiBI,WAAjB,CAA6B,MAA7B,CACD,CACF,CACF,CAEDb,CAAC,CAAC,aAAD,CAAD,CAAiBG,EAAjB,CAAoB,cAApB,CAAoC,UAAW,CAC7CC,CAAQ,CAAC,IAAD,CACT,CAFD,EAIAJ,CAAC,CAAC,YAAD,CAAD,CAAgBc,SAAhB,CAA0B,CACxBC,MAAM,GADkB,CAExBC,MAAM,CAAE,OAFgB,CAGxBC,MAAM,CAAE,SAHgB,CAIxBC,MAAM,CAAE,OAJgB,CAA1B,EAOAlB,CAAC,CAAC,aAAD,CAAD,CAAiBmB,SAAjB,CAA2B,CACzBC,UAAU,CAAE,QADa,CAEzBC,IAAI,CAAE,cAASC,CAAT,CAAgBC,CAAhB,CAAoB,CACxB,GAAIvB,CAAC,CAACuB,CAAE,CAACT,SAAJ,CAAD,CAAgBU,QAAhB,CAAyB,UAAzB,CAAJ,CAA0C,CACxC,MACD,CACD,KAAKC,KAAL,CAAazB,CAAC,CAACuB,CAAE,CAACT,SAAJ,CAAD,CAAgBY,IAAhB,EAAb,CACA1B,CAAC,CAAC,IAAD,CAAD,CAAQ2B,GAAR,CAAY,kBAAZ,CAAgC,OAAhC,EACA3B,CAAC,CAAC,IAAD,CAAD,CAAQ4B,QAAR,CAAiB,SAAjB,EACA,GAAI1B,CAAJ,CAAe,CACbF,CAAC,CAACuB,CAAE,CAACT,SAAJ,CAAD,CAAgBc,QAAhB,CAAyB,MAAzB,CACD,CACF,CAZwB,CAA3B,EAcA5B,CAAC,CAAC,aAAD,CAAD,CAAiB6B,QAAjB,CAA0B,UAAW,CACnC7B,CAAC,CAAC,IAAD,CAAD,CAAQK,GAAR,CAAY,EAAZ,EACAL,CAAC,CAAC,IAAD,CAAD,CAAQa,WAAR,CAAoB,SAApB,EACAb,CAAC,CAAC,IAAD,CAAD,CAAQ2B,GAAR,CAAY,kBAAZ,CAAgC,OAAhC,CACF,CAJA,CAKD,CAzDI,CA2DR,CA5DK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JavaScript code for the gapfill question type.\n *\n * @package    qtype\n * @subpackage gapfill\n * @copyright  2020 Marcus Green\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'jqueryui', 'qtype_gapfill/jquery.ui.touch-punch-improved'], function($) {\n  return {\n    init: function(singleuse) {\n      $(\".droptarget\").on('dblclick', function() {\n        if (singleuse) {\n          dragShow(this);\n          $(this).val(\"\");\n        }\n      });\n\n    /**\n     * Reveal draggables that are not\n     * the the current one\n     *\n     * @param {*} that\n     */\n      function dragShow(that) {\n        var draggables = $(\".draggable\");\n        var targetVal = $(that).val();\n        var i;\n        for (i = 0; i < draggables.length; i++) {\n          var sourceVal = draggables[i].textContent;\n          if (sourceVal == targetVal) {\n            $(draggables[i]).removeClass(\"hide\");\n          }\n        }\n      }\n\n      $(\".droptarget\").on('keydown drop', function() {\n        dragShow(this);\n      });\n\n      $(\".draggable\").draggable({\n        revert: false,\n        helper: 'clone',\n        cursor: 'pointer',\n        scroll: 'false',\n      });\n\n      $(\".droptarget\").droppable({\n        hoverClass: 'active',\n        drop: function(event, ui) {\n          if ($(ui.draggable).hasClass('readonly')) {\n            return;\n          }\n          this.value = $(ui.draggable).text();\n          $(this).css(\"background-color\", \"white\");\n          $(this).addClass(\"dropped\");\n          if (singleuse) {\n            $(ui.draggable).addClass(\"hide\");\n          }\n        }\n      });\n      $(\".droptarget\").dblclick(function() {\n        $(this).val(\"\");\n        $(this).removeClass(\"dropped\");\n        $(this).css(\"background-color\", \"white\");\n     });\n    }\n  };\n});"],"file":"dragdrop.min.js"}