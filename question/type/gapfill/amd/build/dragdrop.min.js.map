{"version":3,"file":"dragdrop.min.js","sources":["../src/dragdrop.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JavaScript code for the gapfill question type.\n *\n * @copyright  2020 Marcus Green\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'jqueryui', 'qtype_gapfill/jquery.ui.touch-punch-improved'], function($) {\n  return {\n    init: function(singleuse) {\n      $(\".droptarget\").on('dblclick', function() {\n        if (singleuse) {\n          dragShow(this);\n          $(this).val(\"\");\n        }\n      });\n\n    /**\n     * Reveal draggables that are not\n     * the the current one\n     *\n     * @param {*} that\n     */\n      function dragShow(that) {\n        var draggables = $(\".draggable\");\n        var targetVal = $(that).val();\n        var i;\n        for (i = 0; i < draggables.length; i++) {\n          var sourceVal = draggables[i].textContent;\n          if (sourceVal == targetVal) {\n            $(draggables[i]).removeClass(\"hide\");\n          }\n        }\n      }\n\n      $(\".droptarget\").on('keydown drop', function() {\n        dragShow(this);\n      });\n\n      $(\".draggable\").draggable({\n        revert: false,\n        helper: 'clone',\n        cursor: 'pointer',\n        scroll: 'false',\n      });\n\n      $(\".droptarget\").droppable({\n        hoverClass: 'active',\n        drop: function(event, ui) {\n          if ($(ui.draggable).hasClass('readonly')) {\n            return;\n          }\n          this.value = $(ui.draggable).text();\n          $(this).css(\"background-color\", \"white\");\n          $(this).addClass(\"dropped\");\n          if (singleuse) {\n            $(ui.draggable).addClass(\"hide\");\n          }\n        }\n      });\n      $(\".droptarget\").dblclick(function() {\n        $(this).val(\"\");\n        $(this).removeClass(\"dropped\");\n        $(this).css(\"background-color\", \"white\");\n     });\n    }\n  };\n});"],"names":["define","$","init","singleuse","dragShow","that","i","draggables","targetVal","val","length","textContent","removeClass","on","this","draggable","revert","helper","cursor","scroll","droppable","hoverClass","drop","event","ui","hasClass","value","text","css","addClass","dblclick"],"mappings":";;;;;;AAqBAA,gCAAO,CAAC,SAAU,WAAY,iDAAiD,SAASC,SAC/E,CACLC,KAAM,SAASC,oBAcJC,SAASC,UAGZC,EAFAC,WAAaN,EAAE,cACfO,UAAYP,EAAEI,MAAMI,UAEnBH,EAAI,EAAGA,EAAIC,WAAWG,OAAQJ,IAAK,CACtBC,WAAWD,GAAGK,aACbH,WACfP,EAAEM,WAAWD,IAAIM,YAAY,SApBnCX,EAAE,eAAeY,GAAG,YAAY,WAC1BV,YACFC,SAASU,MACTb,EAAEa,MAAML,IAAI,QAsBhBR,EAAE,eAAeY,GAAG,gBAAgB,WAClCT,SAASU,SAGXb,EAAE,cAAcc,UAAU,CACxBC,QAAQ,EACRC,OAAQ,QACRC,OAAQ,UACRC,OAAQ,UAGVlB,EAAE,eAAemB,UAAU,CACzBC,WAAY,SACZC,KAAM,SAASC,MAAOC,IAChBvB,EAAEuB,GAAGT,WAAWU,SAAS,mBAGxBC,MAAQzB,EAAEuB,GAAGT,WAAWY,OAC7B1B,EAAEa,MAAMc,IAAI,mBAAoB,SAChC3B,EAAEa,MAAMe,SAAS,WACb1B,WACFF,EAAEuB,GAAGT,WAAWc,SAAS,YAI/B5B,EAAE,eAAe6B,UAAS,WACxB7B,EAAEa,MAAML,IAAI,IACZR,EAAEa,MAAMF,YAAY,WACpBX,EAAEa,MAAMc,IAAI,mBAAoB"}