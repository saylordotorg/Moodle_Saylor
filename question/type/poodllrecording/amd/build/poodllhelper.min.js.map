{"version":3,"sources":["../src/poodllhelper.js"],"names":["define","$","log","debug","init","window","prquestion","evt","filename","updatecontrol","prquestionUploaded","CustomEvent","details","document","dispatchEvent","upc","length","parent","get","value","trigger"],"mappings":"AAAAA,OAAM,sCAAC,CAAC,QAAD,CAAW,UAAX,CAAD,CAAyB,SAAUC,CAAV,CAAaC,CAAb,CAAkB,CAC7C,aAEAA,CAAG,CAACC,KAAJ,CAAU,6BAAV,EAEA,MAAO,CAGHC,IAAI,CAAE,eAAgB,CA4BlBC,MAAM,CAACC,UAAP,CA3BiB,QAAbA,CAAAA,UAAa,CAAUC,CAAV,CAAe,CAC5B,GAAGA,CAAG,EAAY,eAAR,EAAAA,CAAG,CAAC,CAAD,CAAb,CAAkC,IAC1BC,CAAAA,CAAQ,CAAGD,CAAG,CAAC,CAAD,CADY,CAE1BE,CAAa,CAAGF,CAAG,CAAC,CAAD,CAFO,CAI1BG,CAAkB,CAAG,GAAIC,CAAAA,WAAJ,CAAgB,oBAAhB,CAAsC,CAACC,OAAO,CAAEL,CAAV,CAAtC,CAJK,CAK9BM,QAAQ,CAACC,aAAT,CAAuBJ,CAAvB,EAGA,GAAIK,CAAAA,CAAG,CAAG,EAAV,CACA,GAA6B,WAAzB,QAAON,CAAAA,CAAP,EAA0D,EAAlB,GAAAA,CAA5C,CAAkE,CAC9DM,CAAG,CAAGd,CAAC,CAAC,SAAUQ,CAAV,CAA0B,KAA3B,CAGV,CACD,GAAiB,CAAb,CAAAM,CAAG,CAACC,MAAR,CAAoB,CAChBD,CAAG,CAAGd,CAAC,CAAC,SAAUQ,CAAV,CAA0B,KAA3B,CAAiCJ,MAAM,CAACY,MAAP,CAAcJ,QAA/C,CACV,CACD,GAAiB,CAAb,CAAAE,CAAG,CAACC,MAAR,CAAoB,CAChBD,CAAG,CAACG,GAAJ,CAAQ,CAAR,EAAWC,KAAX,CAAmBX,CACtB,CAFD,IAEO,CACHN,CAAG,CAACC,KAAJ,CAAU,kBAAV,EACA,QACH,CACDY,CAAG,CAACK,OAAJ,CAAY,QAAZ,CACH,CACJ,CAGJ,CAjCE,CAoCV,CAzCK,CAAN","sourcesContent":["define([\"jquery\", \"core/log\"], function ($, log) {\n    \"use strict\"; // jshint ;_;\n\n    log.debug(\"poodll helper: initialising\");\n\n    return {\n\n\n        init: function (opts) {\n            var prquestion = function (evt) {\n                if(evt && evt[1]=='filesubmitted'){\n                    var filename = evt[2];\n                    var updatecontrol = evt[3];\n                    // post a custom event that a filter template might be interested in\n                    var prquestionUploaded = new CustomEvent(\"prquestionUploaded\", {details: evt});\n                    document.dispatchEvent(prquestionUploaded);\n\n                    //poke the filename\n                    var upc = '';\n                    if (typeof updatecontrol !== 'undefined' && updatecontrol !== '') {\n                        upc = $('[id=\"' + updatecontrol + '\"]');\n                        //the code below used to work until odd chars in question id annoyed jquery 3\n                        //upc = $('#' + uploader.config.updatecontrol);\n                    }\n                    if (upc.length < 1) {\n                        upc = $('[id=\"' + updatecontrol + '\"]', window.parent.document);\n                    }\n                    if (upc.length > 0) {\n                        upc.get(0).value = filename;\n                    } else {\n                        log.debug('upload failed #2');\n                        return false;\n                    }\n                    upc.trigger('change');\n                }\n            }; //end of callback function\n            window.prquestion = prquestion;\n\n        } //end of cp init\n\n    };//end of return object\n});"],"file":"poodllhelper.min.js"}