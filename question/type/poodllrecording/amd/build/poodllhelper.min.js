define(["jquery","core/log"],(function($,log){return log.debug("poodll helper: initialising"),{init:function(opts){var that=this;window.prquestion=function(evt){if(evt)switch(evt[1]){case"filesubmitted":var filename=evt[2],updatecontrol=evt[3],prquestionUploaded=new CustomEvent("prquestionUploaded",{details:evt});if(document.dispatchEvent(prquestionUploaded),1==opts.safesave){var nextbtn=$(".submitbtns .mod_quiz-next-nav");nextbtn.removeClass("qtype_poodllrecording_disabledbtn"),nextbtn.removeAttr("disabled","disabled"),$(window).off("beforeunload",that.preventPrematureLeaving)}var upc="";if(void 0!==updatecontrol&&""!==updatecontrol&&(upc=$('[id="'+updatecontrol+'"]')),upc.length<1&&(upc=$('[id="'+updatecontrol+'"]',window.parent.document)),!(upc.length>0))return log.debug("upload failed #2"),!1;upc.get(0).value=filename,upc.trigger("change");break;case"started":if(1==opts.safesave){var savebtn=$(".submitbtns .mod_quiz-next-nav");savebtn.addClass("qtype_poodllrecording_disabledbtn"),savebtn.attr("disabled","disabled"),$(window).on("beforeunload",that.preventPrematureLeaving)}}}},preventPrematureLeaving:function(e){return log.debug("preventPrematureLeaving has been called"),e.preventDefault(),e.returnValue="Your recording has not been uploaded. Cancel to stay on this page.",e.returnValue}}}));

//# sourceMappingURL=poodllhelper.min.js.map