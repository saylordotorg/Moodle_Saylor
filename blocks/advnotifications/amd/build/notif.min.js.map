{"version":3,"sources":["../src/notif.js"],"names":["define","$","initialise","document","ready","on","dismiss","attr","slideUp","remove","callpath","M","cfg","wwwroot","sesskey","post","call","fail","console","error","done"],"mappings":"AAWAA,OAAM,gCAAC,CAAC,QAAD,CAAD,CAAa,SAASC,CAAT,CAAY,CAG3B,MAAO,CACHC,UAAU,CAAE,qBAAW,CAEnBD,CAAC,CAACE,QAAD,CAAD,CAAYC,KAAZ,CAAkB,UAAW,CAEzBH,CAAC,CAAC,yBAAD,CAAD,CAA6BI,EAA7B,CAAgC,OAAhC,CAAyC,cAAzC,CAAyD,UAAW,CAEhE,GAAIC,CAAAA,CAAO,CAAGL,CAAC,CAAC,IAAD,CAAD,CAAQM,IAAR,CAAa,cAAb,CAAd,CAEAN,CAAC,CAAC,IAAD,CAAD,CAAQO,OAAR,CAAgB,KAAhB,CAAuB,UAAW,CAC9BP,CAAC,CAAC,IAAD,CAAD,CAAQQ,MAAR,EACH,CAFD,EAJgE,GAa5DC,CAAAA,CAAQ,CAAGC,CAAC,CAACC,GAAF,CAAMC,OAAN,CAAgB,qDAAhB,CAAwEF,CAAC,CAACC,GAAF,CAAME,OAb7B,CAgBhEb,CAAC,CAACc,IAAF,CAAOL,CAAP,CAPe,CACNM,IADM,CACC,MADD,CAENV,OAFM,CAEIA,CAFJ,CAOf,EAA2BW,IAA3B,CAAgC,UAAW,CACvCC,OAAO,CAACC,KAAR,CAAc,iCAAd,CACH,CAFD,EAEGC,IAFH,CAEQ,UAAW,CAElB,CAJD,CAKH,CArBD,CAsBH,CAxBD,CAyBH,CA5BE,CA8BV,CAjCK,CAAN","sourcesContent":["/* eslint no-console: [\"error\", { allow: [\"error\"] }], max-nested-callbacks: [\"error\", 7] */\n/**\n * @package    block_advnotifications\n * @copyright  2019 onwards LearningWorks Ltd {@link https://learningworks.co.nz/}\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author     Zander Potgieter <zander.potgieter@learningworks.co.nz>\n */\n\n/**\n * @module block_advnotifications/notif\n */\ndefine(['jquery'], function($) {\n    // JQuery is available via $.\n\n    return {\n        initialise: function() {\n            // Module initialised.\n            $(document).ready(function() {\n                // USER DISMISSING/CLICKING ON A NOTIFICATION.\n                $('.block_advnotifications').on('click', '.dismissible', function() {\n\n                    var dismiss = $(this).attr('data-dismiss');\n\n                    $(this).slideUp('150', function() {\n                        $(this).remove();\n                    });\n\n                    // TODO - Move ajax call to Moodle's ajax/webservice call.\n                    var senddata = {}; // Data Object.\n                    senddata.call = 'ajax';\n                    senddata.dismiss = dismiss;\n\n                    var callpath = M.cfg.wwwroot + \"/blocks/advnotifications/pages/process.php?sesskey=\" + M.cfg.sesskey;\n\n                    // Update user preferences.\n                    $.post(callpath, senddata).fail(function() {\n                        console.error(\"No 'dismiss' response received.\");\n                    }).done(function() {\n                        // User dismissed notification. Do something maybe...\n                    });\n                });\n            });\n        }\n    };\n});"],"file":"notif.min.js"}