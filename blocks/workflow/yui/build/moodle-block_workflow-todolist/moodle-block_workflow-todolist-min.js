YUI.add("moodle-block_workflow-todolist",function(i,o){var t="blocks_workflow_todolist",e="/blocks/workflow/ajax.php",r="stateid",s="block-workflow-todotask",n="block-workflow-todoid",l=function(){l.superclass.constructor.apply(this,arguments)};i.extend(l,i.Base,{initializer:function(){i.all("a."+s).each(function(o){o.ancestor("li").on("click",this.toggle,this,o),o.setAttribute("href","#")},this)},toggle:function(s,l){var o,t;s.halt(),o=new RegExp(n+"-(\\d{1,})"),t={sesskey:M.cfg.sesskey,action:"toggletaskdone",stateid:this.get(r),todoid:l.getAttribute("id").match(o)[1]},i.io(M.cfg.wwwroot+e,{method:"POST",data:build_querystring(t),on:{complete:function(o,t){var e;try{if((e=i.JSON.parse(t.responseText)).error)return new M.core.ajaxException(e)}catch(s){new M.core.exception(s)}e.response.iscompleted?l.get("parentNode").addClass("completed"):l.get("parentNode").removeClass("completed")}}})}},{NAME:t,ATTRS:{stateid:{value:null}}}),M.blocks_workflow=M.blocks_workflow||{},M.blocks_workflow.init_todolist=function(o){return new l(o)}},"@VERSION@",{requires:["base","node","event"]});