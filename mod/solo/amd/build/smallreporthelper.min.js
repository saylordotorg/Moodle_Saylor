define ("mod_solo/smallreporthelper",["jquery","core/log","mod_solo/definitions","core/str","core/ajax","core/notification"],function(a,b,c,d,e,f){"use strict";b.debug("Small Report Helper: initialising");return{controls:{},ready:!1,remotetranscribe:!1,attemptid:0,checking:"... checking ...",secstillcheck:"Checking again in: ",notgradedyet:"Your reading has not been evaluated yet.",evaluated:"Your reading has been evaluated.",init:function init(a){this.attemptid=a;this.ready=!1;this.init_strings();this.register_controls();this.register_events();if(!this.ready&&this.attemptid){this.check_for_results(this,15)}},init_strings:function init_strings(){var a=this;d.get_string("checking","mod_solo").done(function(b){a.checking=b});d.get_string("secs_till_check","mod_solo").done(function(b){a.secstillcheck=b});d.get_string("notgradedyet","mod_solo").done(function(b){a.notgradedyet=b});d.get_string("evaluatedmessage","mod_solo").done(function(b){a.evaluated=b})},register_controls:function register_controls(){this.controls.placeholdertext=a("."+c.smallreportplaceholdertext);this.controls.placeholderspinner=a("."+c.smallreportplaceholderspinner)},register_events:function register_events(){this},check_for_results:function check_for_results(a,c){c=c-1;if(0<c){setTimeout(a.check_for_results,1e3,a,c);var d=(" 0"+c).slice(-2);a.controls.placeholdertext.html(a.secstillcheck+"<br>"+d);return}a.controls.placeholdertext.text(a.checking);a.controls.placeholderspinner.show();e.call([{methodname:"mod_solo_check_for_results",args:{attemptid:a.attemptid},done:function done(d){var e=JSON.parse(d);if(e){switch(e.ready){case!0:location.reload();break;case!1:default:b.debug("result not fetched");setTimeout(a.check_for_results,1e3,a,15);a.controls.placeholdertext.text(a.secstillcheck+c);}}a.controls.placeholderspinner.hide()},fail:f.exception}])}}});
//# sourceMappingURL=smallreporthelper.min.js.map
