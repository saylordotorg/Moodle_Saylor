define ("mod_solo/playerhelper",["jquery","mod_solo/conversationconstants"],function(a,b){return{controls:{},init:function init(a){this.initControls(a);this.registerEvents()},initControls:function initControls(c){if(c===b.mediatype_video){this.controls.mediaPlayer=a(b.videoplayer)}else{this.controls.mediaPlayer=a(b.audioplayer)}this.controls.playBtn=a(b.playbutton);this.controls.prevBtn=a(b.prevbutton);this.controls.nextBtn=a(b.nextbutton);this.controls.progressBar=a(b.progressbar);this.controls.progressLine=a(b.progressline);this.controls.greenProgress=a(b.greenprogress);this.controls.progressMarker=a(b.progressmarker);this.controls.mediaDuration=0;this.controls.timeTotal=a(b.timetotal);this.controls.timeCurrent=a(b.timecurrent)},toTimeString:function toTimeString(a){var a=a.toTimeString().split(" ")[0];a=a.slice(3,8);return a},moveSlider:function moveSlider(){},stepBack:function stepBack(){var a=this.controls.mediaPlayer[0].currentTime;if(5<a){a-=5}else{a=0}this.controls.mediaPlayer[0].currentTime=a},stepForward:function stepForward(){var a=this.controls.mediaPlayer[0].currentTime,b=this.controls.mediaPlayer[0].duration;if(a<=b-5){a+=5}else{a=b}this.controls.mediaPlayer[0].currentTime=a},getCoords:function getCoords(a){var b=a.getBoundingClientRect();return{top:b.top+pageYOffset,left:b.left+pageXOffset}},registerEvents:function registerEvents(){var b=this.controls,c=this;b.playBtn.click(function(a){a.preventDefault();var c=b.mediaPlayer[0].readyState;if("4"==c){if(b.playBtn.hasClass("playing")){b.mediaPlayer[0].pause()}else{b.mediaPlayer[0].play()}b.playBtn.toggleClass("playing")}else{alert("No media..")}});b.prevBtn.click(function(a){a.preventDefault();c.stepBack()});b.nextBtn.click(function(a){a.preventDefault();c.stepForward()});b.progressLine.click(function(d){d.preventDefault();var e=a(d.target);if(e.hasClass("progress-marker")){return!1}var f=d.offsetX,g=b.progressLine.width(),h=f/g,i=100*h;b.greenProgress.width(i+"%");b.progressMarker.css({left:i+"%",opacity:1});b.mediaPlayer[0].currentTime=b.mediaDuration*h;var j=new Date(0,0,0,0,0,0,1e3*(b.mediaDuration*h));b.timeCurrent.text(c.toTimeString(j))});b.mediaPlayer.on("loadeddata",function(){b.mediaDuration=b.mediaPlayer[0].duration;if(!isNaN(b.mediaDuration)&&isFinite(b.mediaDuration)){var a=new Date(0,0,0,0,0,0,1e3*b.mediaDuration);b.timeTotal.text(c.toTimeString(a))}b.timeCurrent.text("0:00");b.progressMarker.css({left:"0%",opacity:1});b.mediaPlayer.on("timeupdate",function(){var a=b.mediaPlayer[0],d=a.currentTime/a.duration,e=100*d+"%";b.greenProgress.width(e);b.progressMarker.css({left:e,opacity:1});var f=new Date(0,0,0,0,0,0,1e3*a.currentTime);f=c.toTimeString(f);b.timeCurrent.text(f)})});b.mediaPlayer.on("durationchange",function(){b.mediaDuration=b.mediaPlayer[0].duration;if(!isNaN(b.mediaDuration)&&isFinite(b.mediaDuration)){var a=new Date(0,0,0,0,0,0,1e3*b.mediaDuration);b.timeTotal.text(c.toTimeString(a))}});var d=b.progressLine[0],f=b.progressMarker[0];f.onmousedown=function(){var a=c.getCoords(d);document.onmousemove=function(g){var e=g.pageX-a.left;if(0>e){e=0}var h=d.offsetWidth;if(e>h){e=h}f.style.left=e+"px";b.greenProgress.width(e+"px");b.mediaPlayer[0].currentTime=b.mediaDuration*(e/h);var i=new Date(0,0,0,0,0,0,1e3*(b.mediaDuration*(e/h)));b.timeCurrent.text(c.toTimeString(i))};document.onmouseup=function(){document.onmousemove=document.onmouseup=null}};f.ondragstart=function(){return!1}}}});
//# sourceMappingURL=playerhelper.min.js.map
