{"version":3,"file":"postattemptbuttons.min.js","sources":["../src/postattemptbuttons.js"],"sourcesContent":["define(['jquery', 'core/log','core/modal_factory','core/str','core/modal_events'], function($, log,ModalFactory, str, ModalEvents) {\n  \"use strict\"; // jshint ;_;\n\n  /*\n  This file is to manage the quiz stage\n   */\n\n  log.debug('Poodll Solo Post attempt buttons page: initialising');\n\n  return {\n\n    strings: {},\n\n    //for making multiple instances\n      clone: function () {\n          return $.extend(true, {}, this);\n     },\n\n    init: function() {\n        this.init_strings();\n        this.register_events();\n\n    },\n\n    register_events(){\n        var that = this;\n        $('body').on('click','.solo_reattempt_btn',function(e) {\n\n            e.preventDefault();\n            var buttonhref= $(this).data('href');\n\n            //if its not a reattempt ... proceed\n            if($(this).data('action')!=='reattempt') {\n                window.location.href = buttonhref;\n                return;\n            }\n\n            //if its a reattempt, confirm and proceed\n            ModalFactory.create({\n                type: ModalFactory.types.SAVE_CANCEL,\n                title: that.strings.reattempttitle,\n                body: that.strings.reattemptbody\n            })\n            .then(function(modal) {\n                modal.setSaveButtonText(that.strings.reattempt);\n                var root = modal.getRoot();\n                root.on(ModalEvents.save, function() {\n                    window.location.href = buttonhref;\n                });\n                modal.show();\n            });\n      }\n        );\n    },\n\n    init_strings: function(){\n        var that = this;\n        // set up strings\n        str.get_strings([\n            {\"key\": \"reattempttitle\",       \"component\": 'mod_solo'},\n            {\"key\": \"reattemptbody\",           \"component\": 'mod_solo'},\n            {\"key\": \"reattempt\",           \"component\": 'mod_solo'}\n\n        ]).done(function(s) {\n            var i = 0;\n            that.strings.reattempttitle = s[i++];\n            that.strings.reattemptbody = s[i++];\n            that.strings.reattempt = s[i++];\n        });\n    }\n  }\n});"],"names":["define","$","log","ModalFactory","str","ModalEvents","debug","strings","clone","extend","this","init","init_strings","register_events","that","on","e","preventDefault","buttonhref","data","create","type","types","SAVE_CANCEL","title","reattempttitle","body","reattemptbody","then","modal","setSaveButtonText","reattempt","getRoot","save","window","location","href","show","get_strings","done","s","i"],"mappings":"AAAAA,qCAAO,CAAC,SAAU,WAAW,qBAAqB,WAAW,sBAAsB,SAASC,EAAGC,IAAIC,aAAcC,IAAKC,oBAOpHH,IAAII,MAAM,uDAEH,CAELC,QAAS,GAGPC,MAAO,kBACIP,EAAEQ,QAAO,EAAM,GAAIC,OAGhCC,KAAM,gBACGC,oBACAC,mBAITA,+BACQC,KAAOJ,KACXT,EAAE,QAAQc,GAAG,QAAQ,uBAAsB,SAASC,GAEhDA,EAAEC,qBACEC,WAAYjB,EAAES,MAAMS,KAAK,QAGD,cAAzBlB,EAAES,MAAMS,KAAK,UAMhBhB,aAAaiB,OAAO,CAChBC,KAAMlB,aAAamB,MAAMC,YACzBC,MAAOV,KAAKP,QAAQkB,eACpBC,KAAMZ,KAAKP,QAAQoB,gBAEtBC,MAAK,SAASC,OACXA,MAAMC,kBAAkBhB,KAAKP,QAAQwB,WAC1BF,MAAMG,UACZjB,GAAGV,YAAY4B,MAAM,WACtBC,OAAOC,SAASC,KAAOlB,cAE3BW,MAAMQ,UAhBNH,OAAOC,SAASC,KAAOlB,eAsBnCN,aAAc,eACNE,KAAOJ,KAEXN,IAAIkC,YAAY,CACZ,KAAQ,2BAAqC,YAC7C,KAAQ,0BAAwC,YAChD,KAAQ,sBAAoC,cAE7CC,MAAK,SAASC,OACTC,EAAI,EACR3B,KAAKP,QAAQkB,eAAiBe,EAAEC,KAChC3B,KAAKP,QAAQoB,cAAgBa,EAAEC,KAC/B3B,KAAKP,QAAQwB,UAAYS,EAAEC"}