define ("mod_solo/correctionsmarkup",["jquery","core/log"],function(a,b){"use strict";b.debug("Corrections Markup: initialising");return{controls:{},cd:{correctionscontainer:"mod_solo_corrections_cont",wordclass:"mod_solo_grading_correctionsword",suggestionclass:"mod_solo_corrections_suggestedword",aiunmatched:"mod_solo_aiunmatched"},options:{errorwords:{},grammarmatches:{}},init:function init(c){var d="#"+c.id,e=a(d).get(0);if(e){var f=JSON.parse(e.value);b.debug(f);a(d).remove()}else{b.debug("Corrections Markup js: No config found on page. Giving up.");return}this.register_controls();if(""!==f.sessionerrors){this.options.suggestedwords=JSON.parse(f.sessionerrors)}else{this.options.suggestedwords={}}if(""!==f.sessionmatches){this.options.grammarmatches=JSON.parse(f.sessionmatches)}else{this.options.grammarmatches={}}b.debug(this.options);this.markup_suggestedwords();this.markup_unmatchedwords();this.register_events()},register_controls:function register_controls(){this.controls.correctionscontainer=a("."+this.cd.correctionscontainer)},register_events:function register_events(){this;this.controls.correctionscontainer.on("click","."+this.cd.wordclass,function(){var c=parseInt(a(this).attr("data-wordnumber"));b.debug(c)})},markup_suggestedwords:function markup_suggestedwords(){var c=this;a.each(c.options.suggestedwords,function(d){b.debug("."+c.cd.correctionscontainer+" #"+c.cd.wordclass+"_"+c.options.suggestedwords[d].wordnumber);a("."+c.cd.correctionscontainer+" #"+c.cd.wordclass+"_"+c.options.suggestedwords[d].wordnumber).addClass(c.cd.suggestionclass)})},markup_unmatchedwords:function markup_unmatchedwords(){var b=this;if(this.options.grammarmatches){var c=0;a.each(this.options.grammarmatches,function(d,e){if(1<e.tposition-c){for(var f=e.tposition-c-1,g=0,h;g<f;g++){h=e.tposition-1-g;a("#"+b.cd.wordclass+"_"+h).addClass(b.cd.suggestionclass)}}c=e.tposition})}}}});
//# sourceMappingURL=correctionsmarkup.min.js.map
