{"version":3,"sources":["../src/popoverhelper.js"],"names":["define","$","log","debug","lastitem","dispose","transcripttitle","M","util","get_string","init","register_events","disposeWord","version","fn","popover","Constructor","hasOwnProperty","VERSION","charAt","remove","item","isShowing","addTranscript","transcript","title","content","trigger","placement"],"mappings":"AAAAA,OAAM,0BAAC,CAAC,QAAD,CAAW,UAAX,CAAuB,2BAAvB,CAAoD,qBAApD,CAAD,CAA6E,SAAUC,CAAV,CAAaC,CAAb,CAAkB,CACjG,aAMAA,CAAG,CAACC,KAAJ,CAAU,mCAAV,EAEA,MAAO,CAEHC,QAAQ,GAFL,CAGHC,OAAO,GAHJ,CAIHC,eAAe,CAAEC,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,OAAlB,CAA0B,UAA1B,CAJd,CAMHC,IAAI,CAAE,eAAY,CACd,KAAKC,eAAL,EACH,CARE,CAUHA,eAAe,CAAE,0BAAY,CAE5B,CAZE,CAgBHC,WAAW,CAAE,sBAAY,CACrB,GAAI,KAAKP,OAAT,CAAkB,CACd,MAAO,MAAKA,OACf,CACD,GAAIQ,CAAAA,CAAO,CAAG,GAAd,CACA,GAAIZ,CAAC,CAACa,EAAF,CAAKC,OAAL,CAAaC,WAAb,CAAyBC,cAAzB,CAAwC,SAAxC,CAAJ,CAAwD,CACpDJ,CAAO,CAAGZ,CAAC,CAACa,EAAF,CAAKC,OAAL,CAAaC,WAAb,CAAyBE,OAAzB,CAAiCC,MAAjC,CAAwC,CAAxC,CACb,CACD,OAAQN,CAAR,EACI,IAAK,GAAL,CACI,KAAKR,OAAL,CAAe,SAAf,CACA,MACJ,IAAK,GAAL,CACA,QACI,KAAKA,OAAL,CAAe,SAAf,CACA,MAPR,CASA,MAAO,MAAKA,OACf,CAlCE,CAoCHe,MAAM,CAAE,gBAAUC,CAAV,CAAgB,CACpB,GAAIA,CAAJ,CAAU,CACNpB,CAAC,CAACoB,CAAD,CAAD,CAAQN,OAAR,CAAgB,KAAKH,WAAL,EAAhB,CACH,CAFD,IAEO,IAAI,KAAKR,QAAT,CAAmB,CACtBH,CAAC,CAAC,KAAKG,QAAN,CAAD,CAAiBW,OAAjB,CAAyB,KAAKH,WAAL,EAAzB,EACA,KAAKR,QAAL,GACH,CACJ,CA3CE,CA6CHkB,SAAS,CAAE,mBAASD,CAAT,CAAc,CACrB,GAAG,KAAKjB,QAAL,GAAkBiB,CAArB,CAA2B,CACvB,QACH,CAFD,IAEK,CACD,QACH,CACJ,CAnDE,CAqDHE,aAAa,CAAE,uBAAUF,CAAV,CAAgBG,CAAhB,CAA4B,CAGvC,GAAI,KAAKpB,QAAL,GAAkBiB,CAAtB,CAA4B,CACxBpB,CAAC,CAAC,KAAKG,QAAN,CAAD,CAAiBW,OAAjB,CAAyB,KAAKH,WAAL,EAAzB,EACA,KAAKR,QAAL,IACA,MACH,CAGD,GAAI,KAAKA,QAAT,CAAmB,CACfH,CAAC,CAAC,KAAKG,QAAN,CAAD,CAAiBW,OAAjB,CAAyB,KAAKH,WAAL,EAAzB,EACA,KAAKR,QAAL,GACH,CACD,KAAKA,QAAL,CAAgBiB,CAAhB,CAGApB,CAAC,CAACoB,CAAD,CAAD,CAAQN,OAAR,CAAgB,CACZU,KAAK,CAAE,KAAKnB,eADA,CAEZoB,OAAO,CAAEF,CAFG,CAGZG,OAAO,CAAE,QAHG,CAIZC,SAAS,CAAE,KAJC,CAAhB,EAMA3B,CAAC,CAACoB,CAAD,CAAD,CAAQN,OAAR,CAAgB,MAAhB,CACH,CA7EE,CAgFV,CAzFK,CAAN","sourcesContent":["define(['jquery', 'core/log', 'mod_solo/dependencyloader', 'theme_boost/popover'], function ($, log) {\n    \"use strict\"; // jshint ;_;\n\n    /*\n    This file is to manage the transcript popover\n     */\n\n    log.debug('solo Popover helper: initialising');\n\n    return {\n\n        lastitem: false,\n        dispose: false, //Bv4 = dispose  Bv3 = destroy\n        transcripttitle: M.util.get_string('heard','mod_solo'),\n\n        init: function () {\n            this.register_events();\n        },\n\n        register_events: function () {\n           return;\n        },\n\n        //different bootstrap/popover versions have a different word for \"dispose\" so this method bridges that.\n        //we can not be sure what version is installed\n        disposeWord: function () {\n            if (this.dispose) {\n                return this.dispose;\n            }\n            var version = '3';\n            if ($.fn.popover.Constructor.hasOwnProperty('VERSION')) {\n                version = $.fn.popover.Constructor.VERSION.charAt(0);\n            }\n            switch (version) {\n                case '4':\n                    this.dispose = 'dispose';\n                    break;\n                case '3':\n                default:\n                    this.dispose = 'destroy';\n                    break;\n            }\n            return this.dispose;\n        },\n\n        remove: function (item) {\n            if (item) {\n                $(item).popover(this.disposeWord());\n            } else if (this.lastitem) {\n                $(this.lastitem).popover(this.disposeWord());\n                this.lastitem = false;\n            }\n        },\n\n        isShowing: function(item){\n            if(this.lastitem === item) {\n                return true;\n            }else{\n                return false;\n            }\n        },\n\n        addTranscript: function (item, transcript) {\n\n            //if we are already showing this item then dispose of it, set last item to null and go home\n            if (this.lastitem === item) {\n                $(this.lastitem).popover(this.disposeWord());\n                this.lastitem = false;\n                return;\n            }\n\n            //dispose of previous popover, and remember this one\n            if (this.lastitem) {\n                $(this.lastitem).popover(this.disposeWord());\n                this.lastitem = false;\n            }\n            this.lastitem = item;\n\n            //lets add the popover\n            $(item).popover({\n                title: this.transcripttitle,\n                content: transcript,\n                trigger: 'manual',\n                placement: 'top'\n            });\n            $(item).popover('show');\n        }\n\n    };//end of return value\n});"],"file":"popoverhelper.min.js"}