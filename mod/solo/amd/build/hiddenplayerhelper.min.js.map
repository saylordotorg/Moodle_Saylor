{"version":3,"sources":["../src/hiddenplayerhelper.js"],"names":["define","$","log","def","debug","controls","hiddenplayer","hiddenplayerbutton","hiddenplayerbuttonactive","hiddenplayerbuttonpaused","hiddenplayerbuttonplaying","init","register_controls","register_events","playercontrols","that","audioplayer","click","audiosrc","attr","prop","dohiddenstop","removeClass","addClass","find","dohiddenplay","m","pause","load","pp","play","then","catch","dobuttonicons","theaudiosrc","each","activebutton"],"mappings":"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","sourcesContent":["define(['jquery', 'core/log', 'mod_solo/definitions'], function ($, log, def) {\n    \"use strict\"; // jshint ;_;\n\n    log.debug('Poodll Solo hidden player helper: initialising');\n\n    return {\n\n        controls: {},\n        hiddenplayer: def.hiddenplayer,\n        hiddenplayerbutton: def.hiddenplayerbutton,\n        hiddenplayerbuttonactive: def.hiddenplayerbuttonactive,\n        hiddenplayerbuttonpaused: def.hiddenplayerbuttonpaused,\n        hiddenplayerbuttonplaying: def.hiddenplayerbuttonpaused,\n\n        init: function (opts) {\n            this.register_controls();\n            this.register_events();\n        },\n\n        register_controls: function () {\n            this.controls.hiddenplayer = $('.' + this.hiddenplayer);\n            this.controls.hiddenplayerbutton = $('.' + this.hiddenplayerbutton);\n            this.controls.playercontrols = $('.' + this.hiddenplayerbutton + ' i');\n        },\n\n        register_events: function () {\n            var that = this;\n            var audioplayer = this.controls.hiddenplayer;\n            //handle the button click\n            this.controls.hiddenplayerbutton.click(function (e) {\n                var audiosrc = $(this).attr('data-audiosource');\n                if (audiosrc === audioplayer.attr('src') && !(audioplayer.prop('paused'))) {\n                    that.dohiddenstop();\n                    that.controls.playercontrols.removeClass('fa-stop-circle');\n                    that.controls.playercontrols.addClass('fa-play-circle');\n                } else {\n                    that.controls.playercontrols.removeClass('fa-stop-circle');\n                    that.controls.playercontrols.addClass('fa-play-circle');\n                    $(this).find('i').addClass('fa-stop-circle');\n                    that.dohiddenplay(audiosrc);\n                }\n            });\n\n        },\n\n\n        dohiddenplay: function (audiosrc) {\n            var m = this;\n            var audioplayer = m.controls.hiddenplayer;\n            audioplayer.attr('src', audiosrc);\n            audioplayer[0].pause();\n            audioplayer[0].load();\n            var pp = audioplayer[0].play();\n            if (pp !== undefined) {\n                pp.then(function () {\n                    // Yay we are playing\n                }).catch(function (error) {\n                    // somethings up ... but we can ignore it\n                });\n            }\n            m.dobuttonicons();\n        },\n        dohiddenstop: function () {\n            var m = this;\n            var audioplayer = m.controls.hiddenplayer;\n            audioplayer[0].pause();\n            m.dobuttonicons();\n        },\n\n        dobuttonicons: function (theaudiosrc) {\n            var m = this;\n            var audioplayer = m.controls.hiddenplayer;\n            if (!theaudiosrc) {\n                theaudiosrc = audioplayer.attr('src');\n            }\n            m.controls.hiddenplayerbutton.each(function (index) {\n                var audiosrc = $(this).attr('data-audiosource');\n                if (audiosrc === theaudiosrc) {\n                    $(this).addClass(m.activebutton);\n                    if (audioplayer.prop('paused')) {\n                        $(this).removeClass(m.hiddenplayerbuttonplaying);\n                        $(this).addClass(m.hiddenplayerbuttonpaused);\n                        //for now we make it look like no button is selected\n                        //later we can implement better controls\n                        $(this).removeClass(m.hiddenplayerbuttonactive);\n                    } else {\n                        $(this).removeClass(m.hiddenplayerbuttonpaused);\n                        $(this).addClass(m.hiddenplayerbuttonplaying);\n                    }\n                } else {\n                    $(this).removeClass(m.hiddenplayerbuttonactive);\n                    $(this).removeClass(m.hiddenplayerbuttonplaying);\n                    $(this).removeClass(m.hiddenplayerbuttonpaused);\n                }\n            });\n        }\n    };//end of return object\n\n});"],"file":"hiddenplayerhelper.min.js"}