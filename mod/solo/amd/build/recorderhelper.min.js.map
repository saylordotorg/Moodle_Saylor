{"version":3,"file":"recorderhelper.min.js","sources":["../src/recorderhelper.js"],"sourcesContent":["define(['jquery','core/log','mod_solo/cloudpoodllloader'], function($,log, cloudpoodll) {\n    \"use strict\"; // jshint ;_;\n/*\nThis file sets up the cloud poodll recorder and passes on events to registered handlers\n */\n\n    log.debug('Recorder helper: initialising');\n\n    return{\n\n        status: 'stopped',\n\n        init: function(opts,on_recording_start,\n            on_recording_end,\n            on_media_processing,\n            on_speech,\n            on_file_submitted,\n            on_upload_details){\n\n            var that = this;\n            cloudpoodll.init(opts['recorderid'],\n\n                function(message){\n                    //console.log(message);\n                    switch(message.type){\n                        case 'recording':\n                            if(message.action==='started'){\n                                that.startbuttonclick();\n                                on_recording_start(message);\n\n                            }else if(message.action==='stopped'){\n                                that.stopbuttonclick();\n                                on_recording_end(message);\n                            }\n                            break;\n                        case 'awaitingprocessing':\n                            //awaitingprocessing fires often, but we only want to post once\n                            if(that.status!='posted') {\n                                on_media_processing(message);\n                            }\n                            that.status='posted';\n                            break;\n\n                        case 'filesubmitted':\n                            on_file_submitted();\n                            break;\n\n                        case 'speech':\n                            on_speech(message);\n                            break;\n\n                        case 'uploaddetails':\n                            on_upload_details(message)\n                            break;\n\n                        case 'error':\n                            alert('PROBLEM:' + message.message);\n                            break;\n                    }\n                }\n            );\n        },\n        stopbuttonclick: function(){\n            this.status='stopped';\n            //do something\n        },\n        startbuttonclick: function(){\n            this.status='started';\n           //do something\n        }\n\n    };//end of return value\n});"],"names":["define","$","log","cloudpoodll","debug","status","init","opts","on_recording_start","on_recording_end","on_media_processing","on_speech","on_file_submitted","on_upload_details","that","this","message","type","action","startbuttonclick","stopbuttonclick","alert"],"mappings":"AAAAA,iCAAO,CAAC,SAAS,WAAW,+BAA+B,SAASC,EAAEC,IAAKC,oBAMvED,IAAIE,MAAM,iCAEJ,CAEFC,OAAQ,UAERC,KAAM,SAASC,KAAKC,mBAChBC,iBACAC,oBACAC,UACAC,kBACAC,uBAEIC,KAAOC,KACXZ,YAAYG,KAAKC,KAAI,YAEjB,SAASS,gBAEEA,QAAQC,UACN,YACmB,YAAjBD,QAAQE,QACPJ,KAAKK,mBACLX,mBAAmBQ,UAEG,YAAjBA,QAAQE,SACbJ,KAAKM,kBACLX,iBAAiBO,oBAGpB,qBAEe,UAAbF,KAAKT,QACJK,oBAAoBM,SAExBF,KAAKT,OAAO,mBAGX,gBACDO,8BAGC,SACDD,UAAUK,mBAGT,gBACDH,kBAAkBG,mBAGjB,QACDK,MAAM,WAAaL,QAAQA,cAM/CI,gBAAiB,gBACRf,OAAO,WAGhBc,iBAAkB,gBACTd,OAAO"}