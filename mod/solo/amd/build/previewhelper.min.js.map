{"version":3,"file":"previewhelper.min.js","sources":["../src/previewhelper.js"],"sourcesContent":["define([\"jquery\",\"mod_solo/conversationconstants\"], function($, constants) {\n\n    //Preview helper manipulates the audio/video and passing on media events and info to other parts of app\n\n  return {\n\n      controls: {},\n      mediatype: constants.mediatype_audio,\n\n      init: function(){\n            this.initControls();\n      },\n\n      initControls: function(){\n          this.controls.videoplayer = $(constants.videoplayer);\n          this.controls.audioplayer = $(constants.audioplayer);\n          this.controls.root = $(constants.root);\n          if(this.mediatype===constants.mediatype_audio){\n              this.controls.mediaplayer = this.controls.audioplayer\n          }else {\n              this.controls.mediaplayer = this.controls.videoplayer\n          }\n          this.controls.mediaplayer.show();\n      },\n\n\n\n      fetchCurrentTime: function(){\n         return Math.floor(1000 * this.controls.mediaplayer[0].currentTime);//milliseconds\n      },\n\n      setMediaURL: function(mediaurl){\n        if(!mediaurl | mediaurl.trim()==''){return;}\n        switch(this.mediatype){\n            case constants.mediatype_audio:\n                this.mediatype=constants.mediatype_audio;\n                this.controls.mediaplayer.off('timeupdate');\n                this.controls.mediaplayer = this.controls.audioplayer;\n                this.controls.root.addClass('player-audio');\n                break;\n\n            default:\n                this.mediatype=constants.mediatype_video;\n                this.controls.mediaplayer.off('timeupdate');\n                this.controls.mediaplayer = this.controls.videoplayer;\n                this.controls.root.removeClass('player-audio');\n        }\n        this.controls.mediaplayer.attr(\"src\",mediaurl);\n        this.controls.mediaplayer[0].load();\n      }\n    }\n});\n"],"names":["define","$","constants","controls","mediatype","mediatype_audio","init","initControls","videoplayer","audioplayer","root","this","mediaplayer","show","fetchCurrentTime","Math","floor","currentTime","setMediaURL","mediaurl","trim","off","addClass","mediatype_video","removeClass","attr","load"],"mappings":"AAAAA,gCAAO,CAAC,SAAS,mCAAmC,SAASC,EAAGC,iBAIvD,CAEHC,SAAU,GACVC,UAAWF,UAAUG,gBAErBC,KAAM,gBACKC,gBAGXA,aAAc,gBACLJ,SAASK,YAAcP,EAAEC,UAAUM,kBACnCL,SAASM,YAAcR,EAAEC,UAAUO,kBACnCN,SAASO,KAAOT,EAAEC,UAAUQ,MAC9BC,KAAKP,YAAYF,UAAUG,qBACrBF,SAASS,YAAcD,KAAKR,SAASM,iBAErCN,SAASS,YAAcD,KAAKR,SAASK,iBAEzCL,SAASS,YAAYC,QAK9BC,iBAAkB,kBACRC,KAAKC,MAAM,IAAOL,KAAKR,SAASS,YAAY,GAAGK,cAGzDC,YAAa,SAASC,gBAChBA,SAA4B,IAAjBA,SAASC,YACjBT,KAAKP,YACHF,UAAUG,qBACND,UAAUF,UAAUG,qBACpBF,SAASS,YAAYS,IAAI,mBACzBlB,SAASS,YAAcD,KAAKR,SAASM,iBACrCN,SAASO,KAAKY,SAAS,0BAIvBlB,UAAUF,UAAUqB,qBACpBpB,SAASS,YAAYS,IAAI,mBACzBlB,SAASS,YAAcD,KAAKR,SAASK,iBACrCL,SAASO,KAAKc,YAAY,qBAElCrB,SAASS,YAAYa,KAAK,MAAMN,eAChChB,SAASS,YAAY,GAAGc"}