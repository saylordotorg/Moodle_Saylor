{"version":3,"sources":["../src/updateselectedtopic.js"],"names":["define","$","log","def","ajax","notification","debug","init","opts","register_events","activityid","container","topicscontainer","on","topiccheckbox","topicNode","topicid","data","addClass","call","then","result","Deferred","reject","fail","exception","always","removeClass","all_selected","defs","find","length"],"mappings":"AAAAA,OAAM,gCAAC,CAAC,QAAD,CAAU,UAAV,CAAqB,sBAArB,CAA4C,WAA5C,CAAyD,mBAAzD,CAAD,CAAgF,SAASC,CAAT,CAAWC,CAAX,CAAgBC,CAAhB,CAAqBC,CAArB,CAA2BC,CAA3B,CAAyC,CAC3H,aAMAH,CAAG,CAACI,KAAJ,CAAU,2CAAV,EAEA,MAAM,CAEFC,IAAI,CAAE,cAASC,CAAT,CAAe,CAEjB,KAAKC,eAAL,CAAqBD,CAAI,WAAzB,CAEH,CANC,CAQFC,eAAe,CAAE,yBAASC,CAAT,CAAoB,CACjC,GAAIC,CAAAA,CAAS,CAAGV,CAAC,CAAC,IAAME,CAAG,CAACS,eAAX,CAAjB,CACAD,CAAS,CAACE,EAAV,CAAa,OAAb,CAAsB,IAAMV,CAAG,CAACW,aAAhC,CAA+C,UAAY,IAGnDC,CAAAA,CAAS,CAAGd,CAAC,CAAC,IAAD,CAHsC,CAInDe,CAAO,CAAGD,CAAS,CAACE,IAAV,CAAe,SAAf,CAJyC,CAMvDF,CAAS,CAACG,QAAV,CAAmB,cAAnB,EACAd,CAAI,CAACe,IAAL,CAAU,CAAC,CACP,WAAc,gCADP,CAEP,KAAQ,CACJ,QAAWH,CADP,CAEJ,WAAcN,CAFV,CAFD,CAAD,CAAV,EAMI,CANJ,EAMOU,IANP,CAMY,SAASC,CAAT,CAAiB,CACzB,GAAI,CAACA,CAAL,CAAa,CACT,MAAOpB,CAAAA,CAAC,CAACqB,QAAF,GAAaC,MAAb,EACV,CACDR,CAAS,CAACG,QAAV,CAAmB,WAAnB,CACH,CAXD,EAYKM,IAZL,CAYUnB,CAAY,CAACoB,SAZvB,EAaKC,MAbL,CAaY,UAAW,CACfX,CAAS,CAACY,WAAV,CAAsB,cAAtB,CACH,CAfL,CAgBH,CAvBD,CAwBH,CAlCC,CAqCNC,YAAY,CAAE,uBAAW,CACrB,GAAIjB,CAAAA,CAAS,CAAGV,CAAC,CAAC,IAAM4B,IAAI,CAACjB,eAAZ,CAAjB,CACA,MAAOD,CAAAA,CAAS,CAACmB,IAAV,CAAe,IAAMD,IAAI,CAACf,aAA1B,EAAyCiB,MAAzC,GAAoDpB,CAAS,CAACmB,IAAV,CAAe,iBAAf,EAAkCC,MAChG,CAxCK,CA2CT,CApDK,CAAN","sourcesContent":["define(['jquery','core/log','mod_solo/definitions','core/ajax', 'core/notification'], function($,log, def, ajax, notification) {\n    \"use strict\"; // jshint ;_;\n\n/*\nThis file contains class and ID definitions.\n */\n\n    log.debug('solo Updated Selected Topic: initialising');\n\n    return{\n\n        init: function(opts) {\n\n            this.register_events(opts['activityid']);\n\n        },\n\n        register_events: function(activityid){\n            var container = $('.' + def.topicscontainer);\n            container.on('click', '.' + def.topiccheckbox, function(e) {\n             //   e.preventDefault();\n\n                var topicNode = $(this);\n                var topicid = topicNode.data('topicid');\n\n                topicNode.addClass('term-loading');\n                ajax.call([{\n                    'methodname': 'mod_solo_toggle_topic_selected',\n                    'args': {\n                        'topicid': topicid,\n                        'activityid': activityid,\n                    }\n                }])[0].then(function(result) {\n                    if (!result) {\n                        return $.Deferred().reject();\n                    }\n                    topicNode.addClass('term-seen');\n                })\n                    .fail(notification.exception)\n                    .always(function() {\n                        topicNode.removeClass('term-loading');\n                    });\n            });\n        },\n\n\n    all_selected: function() {\n        var container = $('.' + defs.topicscontainer);\n        return container.find('.' + defs.topiccheckbox).length === container.find('.term.term-seen').length\n    }\n\n};//end of return value\n});\n\n"],"file":"updateselectedtopic.min.js"}