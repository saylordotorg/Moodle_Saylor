{"version":3,"file":"updateselectedtopic.min.js","sources":["../src/updateselectedtopic.js"],"sourcesContent":["define(['jquery','core/log','mod_solo/definitions','core/ajax', 'core/notification'], function($,log, def, ajax, notification) {\n    \"use strict\"; // jshint ;_;\n\n/*\nThis file contains class and ID definitions.\n */\n\n    log.debug('solo Updated Selected Topic: initialising');\n\n    return{\n\n        init: function(opts) {\n\n            this.register_events(opts['activityid']);\n\n        },\n\n        register_events: function(activityid){\n            var container = $('.' + def.topicscontainer);\n            container.on('click', '.' + def.topiccheckbox, function(e) {\n             //   e.preventDefault();\n\n                var topicNode = $(this);\n                var topicid = topicNode.data('topicid');\n\n                topicNode.addClass('term-loading');\n                ajax.call([{\n                    'methodname': 'mod_solo_toggle_topic_selected',\n                    'args': {\n                        'topicid': topicid,\n                        'activityid': activityid,\n                    }\n                }])[0].then(function(result) {\n                    if (!result) {\n                        return $.Deferred().reject();\n                    }\n                    topicNode.addClass('term-seen');\n                })\n                    .fail(notification.exception)\n                    .always(function() {\n                        topicNode.removeClass('term-loading');\n                    });\n            });\n        },\n\n\n    all_selected: function() {\n        var container = $('.' + defs.topicscontainer);\n        return container.find('.' + defs.topiccheckbox).length === container.find('.term.term-seen').length\n    }\n\n};//end of return value\n});\n\n"],"names":["define","$","log","def","ajax","notification","debug","init","opts","register_events","activityid","topicscontainer","on","topiccheckbox","e","topicNode","this","topicid","data","addClass","call","then","result","Deferred","reject","fail","exception","always","removeClass","all_selected","container","defs","find","length"],"mappings":"AAAAA,sCAAO,CAAC,SAAS,WAAW,uBAAuB,YAAa,sBAAsB,SAASC,EAAEC,IAAKC,IAAKC,KAAMC,qBAO7GH,IAAII,MAAM,6CAEJ,CAEFC,KAAM,SAASC,WAENC,gBAAgBD,KAAI,aAI7BC,gBAAiB,SAASC,YACNT,EAAE,IAAME,IAAIQ,iBAClBC,GAAG,QAAS,IAAMT,IAAIU,eAAe,SAASC,OAGhDC,UAAYd,EAAEe,MACdC,QAAUF,UAAUG,KAAK,WAE7BH,UAAUI,SAAS,gBACnBf,KAAKgB,KAAK,CAAC,YACO,sCACN,SACOH,mBACGP,eAElB,GAAGW,MAAK,SAASC,YACZA,cACMrB,EAAEsB,WAAWC,SAExBT,UAAUI,SAAS,gBAElBM,KAAKpB,aAAaqB,WAClBC,QAAO,WACJZ,UAAUa,YAAY,uBAM1CC,aAAc,eACNC,UAAY7B,EAAE,IAAM8B,KAAKpB,wBACtBmB,UAAUE,KAAK,IAAMD,KAAKlB,eAAeoB,SAAWH,UAAUE,KAAK,mBAAmBC"}