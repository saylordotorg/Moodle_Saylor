define("mod_minilesson/popoverhelper",["jquery","core/log","mod_minilesson/definitions","mod_minilesson/dependencyloader","theme_boost/popover"],(function($,log,def){return log.debug("Popover helper: initialising"),{lastitem:!1,okbuttonclass:def.okbuttonclass,ngbuttonclass:def.ngbuttonclass,msvclosebuttonclass:def.msvclosebuttonclass,s_buttonclass:def.s_buttonclass,m_buttonclass:def.m_buttonclass,v_buttonclass:def.v_buttonclass,correctbuttonclass:def.correctbuttonclass,errorbuttonclass:def.errorbuttonclass,selfcorrectbuttonclass:def.selfcorrectbuttonclass,msvgradebuttonclass:def.msvgradebutton,msvcontainerclass:def.msvcontainerclass,msvbuttonsbox:def.msvbuttonsbox,quickgradecontainer:def.quickgradecontainerclass,stateerror:def.stateerror,statecorrect:def.statecorrect,stateselfcorrect:def.stateselfcorrect,quickgradetitle:M.util.get_string("quickgrade",def.component),transcripttitle:M.util.get_string("transcript",def.component),msvtitle:M.util.get_string("msv",def.component),oklabel:M.util.get_string("ok",def.component),nglabel:M.util.get_string("ng",def.component),msvcloselabel:M.util.get_string("msvcloselabel",def.component),s_label:M.util.get_string("s_label",def.component),m_label:M.util.get_string("m_label",def.component),v_label:M.util.get_string("v_label",def.component),errorlabel:M.util.get_string("error",def.component),correctlabel:M.util.get_string("correct",def.component),selfcorrectlabel:M.util.get_string("selfcorrect",def.component),dispose:!1,init:function(){this.register_events()},register_events:function(){var that=this;$(document).on("click","."+this.okbuttonclass,this.onAccept),$(document).on("click","."+this.ngbuttonclass,this.onReject),$(document).on("click","."+this.msvclosebuttonclass,this.onMSVClose),$(document).on("click","."+this.msvgradebuttonclass,(function(){$('input[name="msvitem"]:checked').val()!==that.statecorrect&&("0"==$(this).attr("data-checked")?$(this).attr("data-checked","1"):$(this).attr("data-checked","0"))})),$(document).on("change",".msvtoggleform",(function(){$('input[name="msvitem"]:checked').val()===that.statecorrect&&($("."+that.s_buttonclass).attr("data-checked","0"),$("."+that.m_buttonclass).attr("data-checked","0"),$("."+that.v_buttonclass).attr("data-checked","0"))}))},disposeWord:function(){if(this.dispose)return this.dispose;var version="3";if($.fn.popover.Constructor.hasOwnProperty("VERSION")&&(version=$.fn.popover.Constructor.VERSION.charAt(0)),"4"===version)this.dispose="dispose";else this.dispose="destroy";return this.dispose},remove:function(item){item?$(item).popover(this.disposeWord()):this.lastitem&&($(this.lastitem).popover(this.disposeWord()),this.lastitem=!1)},addQuickGrader:function(item){this.lastitem&&this.lastitem!==item&&($(this.lastitem).popover(this.disposeWord()),this.lastitem=!1),this.lastitem=item;var that=this;$(item).popover({title:this.quickgradetitle,content:function(){var wordnumber=$(this).attr("data-wordnumber"),okbutton="<button type='button' class='btn "+that.okbuttonclass+"' data-wordnumber='"+wordnumber+"'><i class='fa fa-check'></i> "+that.oklabel+"</button>",ngbutton="<button type='button' class='btn "+that.ngbuttonclass+"' data-wordnumber='"+wordnumber+"'><i class='fa fa-close'></i> "+that.nglabel+"</button>";return"<div class='"+that.quickgradecontainerclass+"'>"+okbutton+ngbutton+"</div>"},trigger:"manual",placement:"top",html:!0}),$(item).popover("show")},addMSVGrader:function(item,currentmsv){this.lastitem&&this.lastitem!==item&&($(this.lastitem).popover(this.disposeWord()),this.lastitem=!1),this.lastitem=item;var that=this;$(item).popover({title:this.msvtitle,content:function(){var wordnumber=$(this).attr("data-wordnumber"),toggle='<form class="msvtoggleform">';toggle+='<div class="btn-group btn-group-toggle" data-toggle="buttons">';var checked=currentmsv.state===that.statecorrect?"checked":"",active=currentmsv.state===that.statecorrect?"active":"";toggle+='<label for="'+that.correctbuttonclass+'" class="btn btn-secondary  '+active+'">',toggle+='<input id="'+that.correctbuttonclass+'" name="msvitem" type="radio" '+checked+' value="'+that.statecorrect+'">',toggle+=that.correctlabel+"</label>",checked=currentmsv.state===that.stateerror?"checked":"",active=currentmsv.state===that.stateerror?"active":"",toggle+='<label for="'+that.errorbuttonclass+'" class="btn btn-secondary '+active+'">',toggle+='<input id="'+that.errorbuttonclass+'" name="msvitem" type="radio" '+checked+'  value="'+that.stateerror+'">',toggle+=that.errorlabel+"</label>",checked=currentmsv.state===that.stateselfcorrect?"checked":"",active=currentmsv.state===that.stateselfcorrect?"active":"",toggle+='<label for="'+that.selfcorrectbuttonclass+'" class="btn btn-secondary '+active+'">',toggle+='<input id="'+that.selfcorrectbuttonclass+'" name="msvitem" type="radio" '+checked+' value="'+that.stateselfcorrect+'">',toggle+=that.selfcorrectlabel+"</label>",toggle+="</div>",toggle+="</form>";var msvbuttons="<button type='button' data-checked='"+currentmsv.msv.m+"' class='btn "+that.m_buttonclass+" "+that.msvgradebuttonclass+"'>"+that.m_label+"</button>";msvbuttons+="<button type='button' data-checked='"+currentmsv.msv.s+"' class='btn "+that.s_buttonclass+" "+that.msvgradebuttonclass+"'>"+that.s_label+"</button>",msvbuttons+="<button type='button' data-checked='"+currentmsv.msv.v+"' class='btn "+that.v_buttonclass+" "+that.msvgradebuttonclass+"'>"+that.v_label+"</button>";var msvbuttonsdiv="<div class='"+that.msvbuttonsbox+"'>"+msvbuttons+"</div>",closebutton="<button type='button' class='btn "+that.msvclosebuttonclass+"' data-wordnumber='"+wordnumber+"'>"+that.msvcloselabel+"</button>";return"<div class='"+that.msvcontainerclass+"'>"+toggle+msvbuttonsdiv+closebutton+"</div>"},trigger:"manual",placement:"top",html:!0}),$(item).popover("show")},fetchMSVResults:function(){var ret={msv:{}};return ret.msv.m=$("."+this.m_buttonclass).attr("data-checked"),ret.msv.s=$("."+this.s_buttonclass).attr("data-checked"),ret.msv.v=$("."+this.v_buttonclass).attr("data-checked"),ret.state=$('input[name="msvitem"]:checked').val(),ret},addTranscript:function(item,transcript){if(this.lastitem==item)return $(this.lastitem).popover(this.disposeWord()),void(this.lastitem=!1);this.lastitem&&($(this.lastitem).popover(this.disposeWord()),this.lastitem=!1),this.lastitem=item,$(item).popover({title:this.transcripttitle,content:transcript,trigger:"manual",placement:"top"}),$(item).popover("show")},onAccept:function(){alert($(this).attr("data-wordnumber"))},onReject:function(){alert($(this).attr("data-wordnumber"))},onMSVClose:function(){alert($(this).attr("data-wordnumber"))}}}));

//# sourceMappingURL=popoverhelper.min.js.map