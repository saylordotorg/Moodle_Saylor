/**
 * Add a modal to manage question adding and editing to the page.
 *
 * @module     mod_minilesson/modalpreviewhelper
 * @class      modalpreviewhelper
 * @package    mod_minilesson
 * @copyright  2020 Justin Hunt <poodllsupport@moodle.com>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define(["jquery","core/log","core/str","core/modal_factory","core/modal_events","core/fragment","core/ajax","core/yui"],(function($,log,Str,ModalFactory,ModalEvents,Fragment,Ajax,Y){var TheForm=function(selector,contextid,callback){this.contextid=contextid,this.callback=callback,this.preinit(selector)};return TheForm.prototype.modal=null,TheForm.prototype.contextid=-1,TheForm.prototype.itemid=-1,TheForm.prototype.preinit=function(selector){$(selector);var dd=this;$("body").on("click",selector,(function(e){e.preventDefault(),dd.itemid=$(this).data("id"),ModalFactory.create({type:ModalFactory.types.CANCEL,body:dd.getBody({})}).then((function(modal){return dd.modal=modal,dd.modal.setLarge(),dd.modal.getRoot().on(ModalEvents.hidden,function(){dd.callback()}.bind(dd)),dd.modal.getRoot().on(ModalEvents.shown,(function(){dd.modal.getRoot().append("<style>.minilesson_nextbutton { display: none ! important; }</style>"),dd.modal.getRoot().append("<style>.minilesson_quiz_progress { display: none ! important; }</style>")})),dd.modal.show(),dd.modal}))}))},TheForm.prototype.getBody=function(){var params={itemid:this.itemid};return Fragment.loadFragment("mod_minilesson","preview",this.contextid,params)},{init:function(selector,contextid,callback){return new TheForm(selector,contextid,callback)}}}));

//# sourceMappingURL=modalpreviewhelper.min.js.map