{"version":3,"sources":["../src/multichoice.js"],"names":["define","$","log","debug","clone","extend","init","index","itemdata","quizhelper","register_events","next_question","percent","self","stepdata","hasgrade","totalitems","correctitems","grade","do_next","uniqueid","on","hasClass","checked","data","addClass","show","correctanswer","hide","prop","setTimeout"],"mappings":"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","sourcesContent":["define(['jquery', 'core/log', 'mod_minilesson/definitions', 'mod_minilesson/pollyhelper'], function($, log, def, polly) {\n  \"use strict\"; // jshint ;_;\n\n  /*\n  This file is to manage the quiz stage\n   */\n\n  log.debug('MiniLesson Multichoice: initialising');\n\n  return {\n\n    //for making multiple instances\n      clone: function () {\n          return $.extend(true, {}, this);\n     },\n\n    init: function(index, itemdata, quizhelper) {\n      this.register_events(index, itemdata, quizhelper);\n    },\n    next_question: function(percent) {\n      var self = this;\n      var stepdata = {};\n      stepdata.index = self.index;\n      stepdata.hasgrade = true;\n      stepdata.totalitems = 1;\n      stepdata.correctitems = percent>0?1:0;\n      stepdata.grade = percent;\n      self.quizhelper.do_next(stepdata);\n    },\n    register_events: function(index, itemdata, quizhelper) {\n      \n      var self = this;\n      self.index = index;\n      self.quizhelper = quizhelper;\n      \n      $(\"#\" + itemdata.uniqueid + \"_container .minilesson_nextbutton\").on('click', function(e) {\n        self.next_question(0);\n      });\n      \n      $(\"#\" + itemdata.uniqueid + \"_container .minilesson_mc_response\").on('click', function(e) {\n        //if disabled =>just return (already answered)\n          if($(\"#\" + itemdata.uniqueid + \"_container .minilesson_mc_response\").hasClass('minilesson_mc_disabled')){\n            return;\n          }\n\n          //get selected item index\n          var checked = $(this).data('index');\n\n          //disable the answers, cos its answered\n          $(\"#\" + itemdata.uniqueid + \"_container .minilesson_mc_response\").addClass('minilesson_mc_disabled');\n\n        //reveal answers\n        $(\"#\" + itemdata.uniqueid + \"_container .minilesson_mc_wrong\").show();\n        $(\"#\" + itemdata.uniqueid + \"_option\" + itemdata.correctanswer + \" .minilesson_mc_wrong\").hide();\n        $(\"#\" + itemdata.uniqueid + \"_option\" + itemdata.correctanswer + \" .minilesson_mc_right\").show();\n        \n        //highlight selected answers\n        $(\"#\" + itemdata.uniqueid + \"_option\" + checked).addClass('minilesson_mc_selected');\n\n\n        var percent = checked == itemdata.correctanswer ? 100 : 0;\n        \n        $(\".minilesson_nextbutton\").prop(\"disabled\", true);\n        setTimeout(function() {\n          $(\".minilesson_nextbutton\").prop(\"disabled\", false);\n          self.next_question(percent);\n        }, 2000);\n        \n      });\n      \n    }\n  };\n});"],"file":"multichoice.min.js"}