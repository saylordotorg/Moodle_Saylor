{"version":3,"sources":["../src/quizfinished.js"],"names":["define","$","log","ModalFactory","str","ModalEvents","debug","strings","clone","extend","init","init_strings","register_events","that","on","e","preventDefault","buttonhref","data","window","location","href","create","type","types","SAVE_CANCEL","title","reattempttitle","body","reattemptbody","then","modal","setSaveButtonText","reattempt","root","getRoot","save","show","get_strings","done","s","i"],"mappings":"AAAAA,OAAM,+BAAC,CAAC,QAAD,CAAW,UAAX,CAAsB,oBAAtB,CAA2C,UAA3C,CAAsD,mBAAtD,CAA0E,4BAA1E,CAAD,CAA2G,SAASC,CAAT,CAAYC,CAAZ,CAAgBC,CAAhB,CAA8BC,CAA9B,CAAmCC,CAAnC,CAAqD,CACpK,aAMAH,CAAG,CAACI,KAAJ,CAAU,+CAAV,EAEA,MAAO,CAELC,OAAO,CAAE,EAFJ,CAKHC,KAAK,CAAE,gBAAY,CACf,MAAOP,CAAAA,CAAC,CAACQ,MAAF,IAAe,EAAf,CAAmB,IAAnB,CACX,CAPG,CASLC,IAAI,CAAE,eAAW,CACb,KAAKC,YAAL,GACA,KAAKC,eAAL,EAEH,CAbI,CAeLA,eAAe,CAAE,0BAAU,CACvB,GAAIC,CAAAA,CAAI,CAAG,IAAX,CACAZ,CAAC,CAAC,MAAD,CAAD,CAAUa,EAAV,CAAa,OAAb,CAAqB,uBAArB,CAA6C,SAASC,CAAT,CAAY,CAErDA,CAAC,CAACC,cAAF,GACA,GAAIC,CAAAA,CAAU,CAAEhB,CAAC,CAAC,IAAD,CAAD,CAAQiB,IAAR,CAAa,MAAb,CAAhB,CAGA,GAA4B,WAAzB,GAAAjB,CAAC,CAAC,IAAD,CAAD,CAAQiB,IAAR,CAAa,QAAb,CAAH,CAAyC,CACrCC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuBJ,CAAvB,CACA,MACH,CAGDd,CAAY,CAACmB,MAAb,CAAoB,CAChBC,IAAI,CAAEpB,CAAY,CAACqB,KAAb,CAAmBC,WADT,CAEhBC,KAAK,CAAEb,CAAI,CAACN,OAAL,CAAaoB,cAFJ,CAGhBC,IAAI,CAAEf,CAAI,CAACN,OAAL,CAAasB,aAHH,CAApB,EAKCC,IALD,CAKM,SAASC,CAAT,CAAgB,CAClBA,CAAK,CAACC,iBAAN,CAAwBnB,CAAI,CAACN,OAAL,CAAa0B,SAArC,EACA,GAAIC,CAAAA,CAAI,CAAGH,CAAK,CAACI,OAAN,EAAX,CACAD,CAAI,CAACpB,EAAL,CAAQT,CAAW,CAAC+B,IAApB,CAA0B,UAAW,CACjCjB,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuBJ,CAC1B,CAFD,EAGAc,CAAK,CAACM,IAAN,EACH,CAZD,CAaL,CAzBC,CA2BH,CA5CI,CA8CL1B,YAAY,CAAE,uBAAU,CACpB,GAAIE,CAAAA,CAAI,CAAG,IAAX,CAEAT,CAAG,CAACkC,WAAJ,CAAgB,CACZ,CAAC,IAAO,gBAAR,CAAgC,UAAa,gBAA7C,CADY,CAEZ,CAAC,IAAO,eAAR,CAAmC,UAAa,gBAAhD,CAFY,CAGZ,CAAC,IAAO,WAAR,CAA+B,UAAa,gBAA5C,CAHY,CAAhB,EAKGC,IALH,CAKQ,SAASC,CAAT,CAAY,CAChB,GAAIC,CAAAA,CAAC,CAAG,CAAR,CACA5B,CAAI,CAACN,OAAL,CAAaoB,cAAb,CAA8Ba,CAAC,CAACC,CAAC,EAAF,CAA/B,CACA5B,CAAI,CAACN,OAAL,CAAasB,aAAb,CAA6BW,CAAC,CAACC,CAAC,EAAF,CAA9B,CACA5B,CAAI,CAACN,OAAL,CAAa0B,SAAb,CAAyBO,CAAC,CAACC,CAAC,EAAF,CAC7B,CAVD,CAWH,CA5DI,CA8DR,CAvEK,CAAN","sourcesContent":["define(['jquery', 'core/log','core/modal_factory','core/str','core/modal_events','mod_minilesson/definitions' ], function($, log,ModalFactory, str, ModalEvents, def) {\n  \"use strict\"; // jshint ;_;\n\n  /*\n  This file is to manage the quiz stage\n   */\n\n  log.debug('Poodll Minilesson Finished page: initialising');\n\n  return {\n\n    strings: {},\n\n    //for making multiple instances\n      clone: function () {\n          return $.extend(true, {}, this);\n     },\n\n    init: function() {\n        this.init_strings();\n        this.register_events();\n\n    },\n\n    register_events: function(){\n        var that = this;\n        $('body').on('click','.btn_finished_attempt',function(e) {\n\n            e.preventDefault();\n            var buttonhref= $(this).data('href');\n\n            //if its not a reattempt ... proceed\n            if($(this).data('action')!=='reattempt') {\n                window.location.href = buttonhref;\n                return;\n            }\n\n            //if its a reattempt, confirm and proceed\n            ModalFactory.create({\n                type: ModalFactory.types.SAVE_CANCEL,\n                title: that.strings.reattempttitle,\n                body: that.strings.reattemptbody\n            })\n            .then(function(modal) {\n                modal.setSaveButtonText(that.strings.reattempt);\n                var root = modal.getRoot();\n                root.on(ModalEvents.save, function() {\n                    window.location.href = buttonhref;\n                });\n                modal.show();\n            });\n      }\n        );\n    },\n\n    init_strings: function(){\n        var that = this;\n        // set up strings\n        str.get_strings([\n            {\"key\": \"reattempttitle\",       \"component\": 'mod_minilesson'},\n            {\"key\": \"reattemptbody\",           \"component\": 'mod_minilesson'},\n            {\"key\": \"reattempt\",           \"component\": 'mod_minilesson'}\n\n        ]).done(function(s) {\n            var i = 0;\n            that.strings.reattempttitle = s[i++];\n            that.strings.reattemptbody = s[i++];\n            that.strings.reattempt = s[i++];\n        });\n    }\n  }\n});"],"file":"quizfinished.min.js"}