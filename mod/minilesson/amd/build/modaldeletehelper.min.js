define ("mod_minilesson/modaldeletehelper",["jquery","core/log","core/str","core/modal_factory","core/modal_events","core/ajax","core/notification"],function(a,b,c,d,e,f,g){var h=function(a,b,c,d){this.contextid=b;this.formname=c;this.callback=d;this.preinit(a)};h.prototype.modal=null;h.prototype.contextid=-1;h.prototype.itemname="";h.prototype.itemid=-1;h.prototype.formname="";h.prototype.formmessage="Really delete:";h.prototype.preinit=function(b){var f=a(b),g=this;c.get_string(this.formname,"mod_minilesson").then(function(a){g.formtitle=a});c.get_string(this.formname+"_message","mod_minilesson").then(function(a){g.formmessage=a});c.get_string("deletebuttonlabel","mod_minilesson").then(function(a){g.deletebuttonlabel=a});a("body").on("click",b,function(b){b.preventDefault();var c=a(b.currentTarget),f=c.data("id");g.itemid=f;var h=c.data("name");d.create({type:d.types.SAVE_CANCEL,title:g.formtitle,body:g.formmessage+"<i>"+h+"</i>"}).then(function(a){g.modal=a;g.modal.setSaveButtonText(g.deletebuttonlabel);var b=g.modal.getRoot();b.on(e.save,g.submitForm.bind(g));g.modal.show();return g.modal})})};h.prototype.submitForm=function(a){a.preventDefault();var c=this;b.debug("deleting:"+c.formname);f.call([{methodname:"mod_minilesson_delete_item",args:{itemid:c.itemid,contextid:c.contextid,formname:c.formname},done:function done(a){var d=JSON.parse(a);if(d){b.debug(d);switch(d.error){case!1:c.callback(c.itemid);break;case!0:default:b.debug("that was an error: ");}}c.modal.hide()},fail:g.exception}])};return{init:function init(a,b,c,d){return new h(a,b,c,d)}}});
//# sourceMappingURL=modaldeletehelper.min.js.map
