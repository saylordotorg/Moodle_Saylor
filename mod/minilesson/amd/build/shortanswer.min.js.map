{"version":3,"sources":["../src/shortanswer.js"],"names":["define","$","log","debug","clone","extend","init","index","itemdata","quizhelper","register_events","next_question","percent","self","stepdata","hasgrade","totalitems","correctitems","grade","do_next","uniqueid","on","prop","html","correctanswer","checked","data","setTimeout"],"mappings":"AAAAA,OAAM,8BAAC,CAAC,QAAD,CAAW,UAAX,CAAuB,4BAAvB,CAAqD,4BAArD,CAAD,CAAqF,SAASC,CAAT,CAAYC,CAAZ,CAA6B,CACtH,aAMAA,CAAG,CAACC,KAAJ,CAAU,sCAAV,EAEA,MAAO,CAGHC,KAAK,CAAE,gBAAY,CACf,MAAOH,CAAAA,CAAC,CAACI,MAAF,IAAe,EAAf,CAAmB,IAAnB,CACX,CALG,CAOLC,IAAI,CAAE,cAASC,CAAT,CAAgBC,CAAhB,CAA0BC,CAA1B,CAAsC,CAC1C,KAAKC,eAAL,CAAqBH,CAArB,CAA4BC,CAA5B,CAAsCC,CAAtC,CACD,CATI,CAULE,aAAa,CAAE,uBAASC,CAAT,CAAkB,IAC3BC,CAAAA,CAAI,CAAG,IADoB,CAE3BC,CAAQ,CAAG,EAFgB,CAG/BA,CAAQ,CAACP,KAAT,CAAiBM,CAAI,CAACN,KAAtB,CACAO,CAAQ,CAACC,QAAT,IACAD,CAAQ,CAACE,UAAT,CAAsB,CAAtB,CACAF,CAAQ,CAACG,YAAT,CAAgC,CAAR,CAAAL,CAAO,CAAG,CAAH,CAAK,CAApC,CACAE,CAAQ,CAACI,KAAT,CAAiBN,CAAjB,CACAC,CAAI,CAACJ,UAAL,CAAgBU,OAAhB,CAAwBL,CAAxB,CACD,CAnBI,CAoBLJ,eAAe,CAAE,yBAASH,CAAT,CAAgBC,CAAhB,CAA0BC,CAA1B,CAAsC,CAErD,GAAII,CAAAA,CAAI,CAAG,IAAX,CACAA,CAAI,CAACN,KAAL,CAAaA,CAAb,CACAM,CAAI,CAACJ,UAAL,CAAkBA,CAAlB,CAEAR,CAAC,CAAC,IAAMO,CAAQ,CAACY,QAAf,CAA0B,mCAA3B,CAAD,CAAiEC,EAAjE,CAAoE,OAApE,CAA6E,UAAY,CACvFR,CAAI,CAACF,aAAL,CAAmB,CAAnB,CACD,CAFD,EAIAV,CAAC,CAAC,IAAMO,CAAQ,CAACY,QAAf,CAA0B,cAA1B,CAA2CZ,CAAQ,CAACY,QAApD,CAA+D,SAAhE,CAAD,CAA4EC,EAA5E,CAA+E,OAA/E,CAAwF,UAAY,CAElGpB,CAAC,CAAC,IAAMO,CAAQ,CAACY,QAAf,CAA0B,SAA3B,CAAD,CAAuCE,IAAvC,CAA4C,UAA5C,KACArB,CAAC,CAAC,IAAMO,CAAQ,CAACY,QAAf,CAA0B,KAA3B,CAAD,CAAmCG,IAAnC,CAAwC,gDAAxC,EACAtB,CAAC,CAAC,IAAMO,CAAQ,CAACY,QAAf,CAA0B,SAA1B,CAAsCZ,CAAQ,CAACgB,aAA/C,CAA+D,KAAhE,CAAD,CAAwED,IAAxE,CAA6E,kDAA7E,EAJkG,GAM9FE,CAAAA,CAAO,CAAGxB,CAAC,CAAC,cAAcO,CAAQ,CAACY,QAAvB,CAAgC,mBAAjC,CAAD,CAAuDM,IAAvD,CAA4D,OAA5D,CANoF,CAO9Fd,CAAO,CAAGa,CAAO,EAAIjB,CAAQ,CAACgB,aAApB,CAAoC,GAApC,CAA0C,CAP0C,CASlGvB,CAAC,CAAC,wBAAD,CAAD,CAA4BqB,IAA5B,CAAiC,UAAjC,KACAK,UAAU,CAAC,UAAW,CACpB1B,CAAC,CAAC,wBAAD,CAAD,CAA4BqB,IAA5B,CAAiC,UAAjC,KACAT,CAAI,CAACF,aAAL,CAAmBC,CAAnB,CACD,CAHS,CAGP,GAHO,CAKX,CAfD,CAiBD,CA/CI,CAiDR,CA1DK,CAAN","sourcesContent":["define(['jquery', 'core/log', 'mod_minilesson/definitions', 'mod_minilesson/pollyhelper'], function($, log, def, polly) {\n  \"use strict\"; // jshint ;_;\n\n  /*\n  This file is to manage the quiz stage\n   */\n\n  log.debug('MiniLesson ShortAnswer: initialising');\n\n  return {\n\n    //for making multiple instances\n      clone: function () {\n          return $.extend(true, {}, this);\n     },\n\n    init: function(index, itemdata, quizhelper) {\n      this.register_events(index, itemdata, quizhelper);\n    },\n    next_question: function(percent) {\n      var self = this;\n      var stepdata = {};\n      stepdata.index = self.index;\n      stepdata.hasgrade = true;\n      stepdata.totalitems = 1;\n      stepdata.correctitems = percent>0?1:0;\n      stepdata.grade = percent;\n      self.quizhelper.do_next(stepdata);\n    },\n    register_events: function(index, itemdata, quizhelper) {\n      \n      var self = this;\n      self.index = index;\n      self.quizhelper = quizhelper;\n      \n      $(\"#\" + itemdata.uniqueid + \"_container .minilesson_nextbutton\").on('click', function(e) {\n        self.next_question(0);\n      });\n      \n      $(\"#\" + itemdata.uniqueid + \"_container .\" + itemdata.uniqueid + \"_option\").on('click', function(e) {\n        \n        $(\".\" + itemdata.uniqueid + \"_option\").prop(\"disabled\", true);\n        $(\".\" + itemdata.uniqueid + \"_fb\").html(\"<i style='color:red;' class='fa fa-times'></i>\");\n        $(\".\" + itemdata.uniqueid + \"_option\" + itemdata.correctanswer + \"_fb\").html(\"<i style='color:green;' class='fa fa-check'></i>\");\n        \n        var checked = $('input[name='+itemdata.uniqueid+'_options]:checked').data('index');\n        var percent = checked == itemdata.correctanswer ? 100 : 0;\n        \n        $(\".minilesson_nextbutton\").prop(\"disabled\", true);\n        setTimeout(function() {\n          $(\".minilesson_nextbutton\").prop(\"disabled\", false);\n          self.next_question(percent);\n        }, 2000);\n        \n      });\n      \n    }\n  };\n});"],"file":"shortanswer.min.js"}