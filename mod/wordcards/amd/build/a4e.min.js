define("mod_wordcards/a4e",["jquery","core/log","core/ajax","mod_wordcards/flip","mod_wordcards/textfit","core/templates","mod_wordcards/pollyhelper"],(function($,log,Ajax,flip,textFit,templates,polly){var a4e={face:!0,register_events:function(){console.log("register_events within a4e.js")},init_audio:function(token,region,owner){polly.init(token,region,owner),polly.onnewpollyurl=function(theurl){var theplayer=$("#poodll_vocabplayer");theplayer.attr("src",theurl),theplayer[0].play()},$(document.body).on("click",".a4e-flashcards-container .play-tts, span.model-sentence-play-tts,.definitions-container .definition-play-tts ",(function(){var theplayer=$("#poodll_vocabplayer"),audiourl=$(this).attr("data-modelaudio");!audiourl||0!==audiourl.indexOf("http:")&&0!==audiourl.indexOf("https:")?polly.fetch_polly_url($(this).attr("data-tts"),"text",$(this).attr("data-ttsvoice")):(theplayer.attr("src",audiourl),theplayer[0].play())}))},progress_dots:function(results,terms){var code="";terms.forEach((function(o,i){var color="darkgray";void 0!==results[i]&&(color=results[i].points?"green":"red"),code+='<i style="color:'+color+';" class="fa fa-circle"></i>'})),$("#wordcards-progress-dots").html(code)},shuffle:function(a){var j,x,i;for(i=a.length;i;i-=1)j=Math.floor(Math.random()*i),x=a[i-1],a[i-1]=a[j],a[j]=x},pretty_print_secs:function(time){var minutes=Math.floor(time/60),seconds=time-60*minutes;return a4e.str_pad_left(minutes,"0",2)+":"+a4e.str_pad_left(seconds,"0",2)},list_vocab:function(target,terms,frontfaceflip){var tdata=[];tdata.terms=terms,templates.render("mod_wordcards/vocablist",tdata).then((function(html,js){$(target).html(html);var cards=$(".a4e-flashcards-container .a4e-card"),faces=$(".front,.back");setTimeout((function(){cards.flip({axis:"x"}),textFit(faces,{multiLine:!0,maxFontSize:50,alignHoriz:!0,alignVert:!0})}),100),$(".a4e-flashcards-container .mod_wordcards_matching_frontbtn").on("click",(function(){$(".a4e-flashcards-container .a4e-card").flip(a4e.face),a4e.face=!a4e.face}))}))},calc_total_points:function(results){var total=0;return $.each(results,(function(i,o){null!=o.points&&(total+=o.points)})),total},basic_feedback:function(results){var total=0,total_time=0;$.each(results,(function(i,o){null!=o.time&&(total_time+=o.time),null!=o.points&&(total+=o.points)}));var code="<div class='a4e-basic_feedback'><h2>";return code+="<i class='fa fa-trophy'></i> "+total+" points",0!=total_time&&(code+="<hr/><i class='fa fa-clock-o'></i> "+a4e.pretty_print_secs(total_time)),code+="</h2></div>"},detailed_feedback:function(results){var color,code="<div style='text-align:center;'>";return $.each(results,(function(i,o){color="",color=o.points>0?"a4e-correct":"a4e-incorrect",code+="<div class='a4e-detailed_feedback_div "+color+"'>",code+="<h3 style='margin-bottom:10px;margin-top:5px;'>"+(i+1)+"</h3>",$.each(o,(function(k,v){code+="time"==k?"<p><strong>"+a4e.ucfirst(k)+"</strong>:<br/>"+a4e.pretty_print_secs(v)+"</p>":"<p><strong>"+a4e.ucfirst(k)+"</strong>:<br/>"+(""==v?"N/A":v)+"</p>"})),code+="</div>"})),code+="</div>"},str_pad_left:function(string,pad,length){return(new Array(length+1).join(pad)+string).slice(-length)},ucfirst:function(str){return(str+="").charAt(0).toUpperCase()+str.substr(1)}};return a4e}));

//# sourceMappingURL=a4e.min.js.map