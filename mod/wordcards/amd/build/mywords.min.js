define("mod_wordcards/mywords",["jquery","core/ajax","core/str"],(function($,ajax,str){var SELECTOR_DATA_SET='*[data-action="wordcards-set-my-words"]',SELECTOR_MY_WORDS_DIV="#my-words-ids",SELECTOR_MY_WORDS_ACTION_BTN_ID=".wordcards-mywords-action-",SELECTOR_WORDPOOL_COUNTS=".wordpool-count",CLASS_DISABLED="disabled",CLASS_BTN_NOT_IN_MY_WORDS="btn-outline-primary",CLASS_BTN_IN_MY_WORDS="btn-primary",EVENT_CLICK="click",DATA_TERM_ID="data-termid",DATA_MY_WORDS_IDS="data-my-words-term-ids",stringStore={},initStrings=function(callback){str.get_strings([{key:"addtomywords",component:"mod_wordcards"},{key:"removefrommywords",component:"mod_wordcards"}]).done((function(strings){stringStore=strings,"function"==typeof callback&&callback()}))},initButtonListeners=function(){$(SELECTOR_DATA_SET).on(EVENT_CLICK,(function(e){var currTar=$(e.currentTarget),buttons=$(SELECTOR_MY_WORDS_ACTION_BTN_ID+currTar.attr(DATA_TERM_ID)),termId=buttons.attr(DATA_TERM_ID);if(!currTar.hasClass(CLASS_DISABLED)){e.preventDefault(),buttons.addClass(CLASS_DISABLED),$(SELECTOR_WORDPOOL_COUNTS).fadeOut();var newStatus=buttons.hasClass(CLASS_BTN_IN_MY_WORDS)?0:1;ajax.call([{methodname:"mod_wordcards_set_my_words",args:{termid:termId,newstatus:newStatus}}])[0].done((function(response){response.success&&(buttons.removeClass(CLASS_DISABLED),response.newStatus?(buttons.addClass(CLASS_BTN_IN_MY_WORDS),buttons.removeClass(CLASS_BTN_NOT_IN_MY_WORDS),buttons.attr("title",stringStore[1])):(buttons.removeClass(CLASS_BTN_IN_MY_WORDS),buttons.addClass(CLASS_BTN_NOT_IN_MY_WORDS),buttons.attr("title",stringStore[0])))})).fail((function(){buttons.removeClass(CLASS_DISABLED)}))}}))},applyButtonStatuses=function(){var myWordsDiv=$(SELECTOR_MY_WORDS_DIV);if(myWordsDiv)return JSON.parse(myWordsDiv.attr(DATA_MY_WORDS_IDS)).forEach((function(id){var btn=$(SELECTOR_MY_WORDS_ACTION_BTN_ID+id);btn.hasClass(CLASS_BTN_IN_MY_WORDS)||btn.addClass(CLASS_BTN_IN_MY_WORDS).removeClass(CLASS_BTN_NOT_IN_MY_WORDS).attr("title",stringStore[1])})),!0};return{init:function(){$(document).ready((function(){initStrings(),initButtonListeners()}))},initFromFeedbackPage:function(){initStrings(applyButtonStatuses),initButtonListeners()}}}));

//# sourceMappingURL=mywords.min.js.map