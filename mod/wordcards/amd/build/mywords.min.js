define ("mod_wordcards/mywords",["jquery","core/ajax","core/str"],function(a,b,c){var d={DATA_SET:"*[data-action=\"wordcards-set-my-words\"]",MY_WORDS_DIV:"#my-words-ids",MY_WORDS_ACTION_BTN_ID:".wordcards-mywords-action-",WORDPOOL_COUNTS:".wordpool-count"},f={DISABLED:"disabled",BTN_NOT_IN_MY_WORDS:"btn-outline-primary",BTN_IN_MY_WORDS:"btn-primary"},g={CLICK:"click"},h={TERM_ID:"data-termid",VALUE:"data-value",ADD:"data-add",REMOVE:"data-remove",MY_WORDS_IDS:"data-my-words-term-ids"},i={},j=function(a){c.get_strings([{key:"addtomywords",component:"mod_wordcards"},{key:"removefrommywords",component:"mod_wordcards"}]).done(function(b){i=b;if("function"==typeof a){a()}})},k=function(){a(d.DATA_SET).on(g.CLICK,function(c){var e=a(c.currentTarget),g=a(d.MY_WORDS_ACTION_BTN_ID+e.attr(h.TERM_ID)),j=g.attr(h.TERM_ID);if(!e.hasClass(f.DISABLED)){c.preventDefault();g.addClass(f.DISABLED);a(d.WORDPOOL_COUNTS).fadeOut();var k=g.hasClass(f.BTN_IN_MY_WORDS)?0:1;b.call([{methodname:"mod_wordcards_set_my_words",args:{termid:j,newstatus:k}}])[0].done(function(a){if(a.success){g.removeClass(f.DISABLED);if(a.newStatus){g.addClass(f.BTN_IN_MY_WORDS);g.removeClass(f.BTN_NOT_IN_MY_WORDS);g.attr("title",i[1])}else{g.removeClass(f.BTN_IN_MY_WORDS);g.addClass(f.BTN_NOT_IN_MY_WORDS);g.attr("title",i[0])}}}).fail(function(){g.removeClass(f.DISABLED)})}})},l=function(){var b=a(d.MY_WORDS_DIV);if(b){var c=JSON.parse(b.attr(h.MY_WORDS_IDS));c.forEach(function(b){var c=a(d.MY_WORDS_ACTION_BTN_ID+b);if(!c.hasClass(f.BTN_IN_MY_WORDS)){c.addClass(f.BTN_IN_MY_WORDS).removeClass(f.BTN_NOT_IN_MY_WORDS).attr("title",i[1])}});return!0}};return{init:function init(){a(document).ready(function(){j();k()})},initFromFeedbackPage:function initFromFeedbackPage(){j(l);k()}}});
//# sourceMappingURL=mywords.min.js.map
