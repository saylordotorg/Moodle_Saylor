define ("mod_wordcards/flip",["jquery"],function(a){var b=function(){var a,b=document.createElement("fakeelement"),c={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in c){if(b.style[a]!==void 0){return c[a]}}},c=function(b,c,d){this.setting={axis:"y",reverse:!1,trigger:"click",speed:500,forceHeight:!1,forceWidth:!1,autoSize:!0,front:".front",back:".back"};this.setting=a.extend(this.setting,c);if("string"==typeof c.axis&&("x"===c.axis.toLowerCase()||"y"===c.axis.toLowerCase())){this.setting.axis=c.axis.toLowerCase()}if("boolean"==typeof c.reverse){this.setting.reverse=c.reverse}if("string"==typeof c.trigger){this.setting.trigger=c.trigger.toLowerCase()}var e=parseInt(c.speed);if(!isNaN(e)){this.setting.speed=e}if("boolean"==typeof c.forceHeight){this.setting.forceHeight=c.forceHeight}if("boolean"==typeof c.forceWidth){this.setting.forceWidth=c.forceWidth}if("boolean"==typeof c.autoSize){this.setting.autoSize=c.autoSize}if("string"==typeof c.front||c.front instanceof a){this.setting.front=c.front}if("string"==typeof c.back||c.back instanceof a){this.setting.back=c.back}this.element=b;this.frontElement=this.getFrontElement();this.backElement=this.getBackElement();this.isFlipped=!1;this.init(d)};a.extend(c.prototype,{flipDone:function flipDone(a){var c=this;c.element.one(b(),function(){c.element.trigger("flip:done");if("function"==typeof a){a.call(c.element)}})},flip:function flip(a){if(this.isFlipped){return}this.isFlipped=!0;var b="rotate"+this.setting.axis;this.frontElement.css({transform:b+(this.setting.reverse?"(-180deg)":"(180deg)"),"z-index":"0"});this.backElement.css({transform:b+"(0deg)","z-index":"1"});this.flipDone(a)},unflip:function unflip(a){if(!this.isFlipped){return}this.isFlipped=!1;var b="rotate"+this.setting.axis;this.frontElement.css({transform:b+"(0deg)","z-index":"1"});this.backElement.css({transform:b+(this.setting.reverse?"(180deg)":"(-180deg)"),"z-index":"0"});this.flipDone(a)},getFrontElement:function getFrontElement(){if(this.setting.front instanceof a){return this.setting.front}else{return this.element.find(this.setting.front)}},getBackElement:function getBackElement(){if(this.setting.back instanceof a){return this.setting.back}else{return this.element.find(this.setting.back)}},init:function init(a){var b=this,c=b.frontElement.add(b.backElement),d="rotate"+b.setting.axis,e=2*b.element["outer"+("rotatex"===d?"Height":"Width")](),f={perspective:e,position:"relative"},g={transform:d+"("+(b.setting.reverse?"180deg":"-180deg")+")","z-index":"0",position:"relative"},h={"backface-visibility":"hidden","transform-style":"preserve-3d",position:"absolute","z-index":"1"};if(b.setting.forceHeight){c.outerHeight(b.element.height())}else if(b.setting.autoSize){h.height="100%"}if(b.setting.forceWidth){c.outerWidth(b.element.width())}else if(b.setting.autoSize){h.width="100%"}if((window.chrome||window.Intl&&Intl.v8BreakIterator)&&"CSS"in window){f["-webkit-transform-style"]="preserve-3d"}c.css(h).find("*").css({"backface-visibility":"hidden"});b.element.css(f);b.backElement.css(g);setTimeout(function(){var d=b.setting.speed/1e3||.5;c.css({transition:"all "+d+"s ease-out"});if("function"==typeof a){a.call(b.element)}},20);b.attachEvents()},clickHandler:function clickHandler(b){if(!b){b=window.event}if(this.element.find(a(b.target).closest("button, a, input[type=\"submit\"]")).length){return}if(this.isFlipped){this.unflip()}else{this.flip()}},hoverHandler:function hoverHandler(){var b=this;b.element.off("mouseleave.flip");b.flip();setTimeout(function(){b.element.on("mouseleave.flip",a.proxy(b.unflip,b));if(!b.element.is(":hover")){b.unflip()}},b.setting.speed+150)},attachEvents:function attachEvents(){var b=this;if("click"===b.setting.trigger){b.element.on(a.fn.tap?"tap.flip":"click.flip",a.proxy(b.clickHandler,b))}else if("hover"===b.setting.trigger){b.element.on("mouseenter.flip",a.proxy(b.hoverHandler,b));b.element.on("mouseleave.flip",a.proxy(b.unflip,b))}},flipChanged:function flipChanged(a){this.element.trigger("flip:change");if("function"==typeof a){a.call(this.element)}},changeSettings:function changeSettings(a,b){var c=this,d=!1;if(a.axis!==void 0&&c.setting.axis!==a.axis.toLowerCase()){c.setting.axis=a.axis.toLowerCase();d=!0}if(a.reverse!==void 0&&c.setting.reverse!==a.reverse){c.setting.reverse=a.reverse;d=!0}if(d){var e=c.frontElement.add(c.backElement),f=e.css(["transition-property","transition-timing-function","transition-duration","transition-delay"]);e.css({transition:"none"});var g="rotate"+c.setting.axis;if(c.isFlipped){c.frontElement.css({transform:g+(c.setting.reverse?"(-180deg)":"(180deg)"),"z-index":"0"})}else{c.backElement.css({transform:g+(c.setting.reverse?"(180deg)":"(-180deg)"),"z-index":"0"})}setTimeout(function(){e.css(f);c.flipChanged(b)},0)}else{c.flipChanged(b)}}});a.fn.flip=function(b,d){if("function"==typeof b){d=b}if("string"==typeof b||"boolean"==typeof b){this.each(function(){var c=a(this).data("flip-model");if("toggle"===b){b=!c.isFlipped}if(b){c.flip(d)}else{c.unflip(d)}})}else{this.each(function(){if(a(this).data("flip-model")){var e=a(this).data("flip-model");if(b&&(b.axis!==void 0||b.reverse!==void 0)){e.changeSettings(b,d)}}else{a(this).data("flip-model",new c(a(this),b||{},d))}})}return this}});
//# sourceMappingURL=flip.min.js.map
