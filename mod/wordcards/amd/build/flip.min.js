define(["jquery"],(function($){var Flip=function($el,options,callback){this.setting={axis:"y",reverse:!1,trigger:"click",speed:500,forceHeight:!1,forceWidth:!1,autoSize:!0,front:".front",back:".back"},this.setting=$.extend(this.setting,options),"string"!=typeof options.axis||"x"!==options.axis.toLowerCase()&&"y"!==options.axis.toLowerCase()||(this.setting.axis=options.axis.toLowerCase()),"boolean"==typeof options.reverse&&(this.setting.reverse=options.reverse),"string"==typeof options.trigger&&(this.setting.trigger=options.trigger.toLowerCase());var speed=parseInt(options.speed);isNaN(speed)||(this.setting.speed=speed),"boolean"==typeof options.forceHeight&&(this.setting.forceHeight=options.forceHeight),"boolean"==typeof options.forceWidth&&(this.setting.forceWidth=options.forceWidth),"boolean"==typeof options.autoSize&&(this.setting.autoSize=options.autoSize),("string"==typeof options.front||options.front instanceof $)&&(this.setting.front=options.front),("string"==typeof options.back||options.back instanceof $)&&(this.setting.back=options.back),this.element=$el,this.frontElement=this.getFrontElement(),this.backElement=this.getBackElement(),this.isFlipped=!1,this.init(callback)};$.extend(Flip.prototype,{flipDone:function(callback){var self=this;self.element.one(function(){var t,el=document.createElement("fakeelement"),transitions={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in transitions)if(void 0!==el.style[t])return transitions[t]}(),(function(){self.element.trigger("flip:done"),"function"==typeof callback&&callback.call(self.element)}))},flip:function(callback){if(!this.isFlipped){this.isFlipped=!0;var rotateAxis="rotate"+this.setting.axis;this.frontElement.css({transform:rotateAxis+(this.setting.reverse?"(-180deg)":"(180deg)"),"z-index":"0"}),this.backElement.css({transform:rotateAxis+"(0deg)","z-index":"1"}),this.flipDone(callback)}},unflip:function(callback){if(this.isFlipped){this.isFlipped=!1;var rotateAxis="rotate"+this.setting.axis;this.frontElement.css({transform:rotateAxis+"(0deg)","z-index":"1"}),this.backElement.css({transform:rotateAxis+(this.setting.reverse?"(180deg)":"(-180deg)"),"z-index":"0"}),this.flipDone(callback)}},getFrontElement:function(){return this.setting.front instanceof $?this.setting.front:this.element.find(this.setting.front)},getBackElement:function(){return this.setting.back instanceof $?this.setting.back:this.element.find(this.setting.back)},init:function(callback){var self=this,faces=self.frontElement.add(self.backElement),rotateAxis="rotate"+self.setting.axis,elementCss={perspective:2*self.element["outer"+("rotatex"===rotateAxis?"Height":"Width")](),position:"relative"},backElementCss={transform:rotateAxis+"("+(self.setting.reverse?"180deg":"-180deg")+")","z-index":"0",position:"relative"},faceElementCss={"backface-visibility":"hidden","transform-style":"preserve-3d",position:"absolute","z-index":"1"};self.setting.forceHeight?faces.outerHeight(self.element.height()):self.setting.autoSize&&(faceElementCss.height="100%"),self.setting.forceWidth?faces.outerWidth(self.element.width()):self.setting.autoSize&&(faceElementCss.width="100%"),(window.chrome||window.Intl&&Intl.v8BreakIterator)&&"CSS"in window&&(elementCss["-webkit-transform-style"]="preserve-3d"),faces.css(faceElementCss).find("*").css({"backface-visibility":"hidden"}),self.element.css(elementCss),self.backElement.css(backElementCss),setTimeout((function(){var speedInSec=self.setting.speed/1e3||.5;faces.css({transition:"all "+speedInSec+"s ease-out"}),"function"==typeof callback&&callback.call(self.element)}),20),self.attachEvents()},clickHandler:function(event){event||(event=window.event),this.element.find($(event.target).closest('button, a, input[type="submit"]')).length||(this.isFlipped?this.unflip():this.flip())},hoverHandler:function(){var self=this;self.element.off("mouseleave.flip"),self.flip(),setTimeout((function(){self.element.on("mouseleave.flip",$.proxy(self.unflip,self)),self.element.is(":hover")||self.unflip()}),self.setting.speed+150)},attachEvents:function(){"click"===this.setting.trigger?this.element.on($.fn.tap?"tap.flip":"click.flip",$.proxy(this.clickHandler,this)):"hover"===this.setting.trigger&&(this.element.on("mouseenter.flip",$.proxy(this.hoverHandler,this)),this.element.on("mouseleave.flip",$.proxy(this.unflip,this)))},flipChanged:function(callback){this.element.trigger("flip:change"),"function"==typeof callback&&callback.call(this.element)},changeSettings:function(options,callback){var self=this,changeNeeded=!1;if(void 0!==options.axis&&self.setting.axis!==options.axis.toLowerCase()&&(self.setting.axis=options.axis.toLowerCase(),changeNeeded=!0),void 0!==options.reverse&&self.setting.reverse!==options.reverse&&(self.setting.reverse=options.reverse,changeNeeded=!0),changeNeeded){var faces=self.frontElement.add(self.backElement),savedTrans=faces.css(["transition-property","transition-timing-function","transition-duration","transition-delay"]);faces.css({transition:"none"});var rotateAxis="rotate"+self.setting.axis;self.isFlipped?self.frontElement.css({transform:rotateAxis+(self.setting.reverse?"(-180deg)":"(180deg)"),"z-index":"0"}):self.backElement.css({transform:rotateAxis+(self.setting.reverse?"(180deg)":"(-180deg)"),"z-index":"0"}),setTimeout((function(){faces.css(savedTrans),self.flipChanged(callback)}),0)}else self.flipChanged(callback)}}),$.fn.flip=function(options,callback){return"function"==typeof options&&(callback=options),"string"==typeof options||"boolean"==typeof options?this.each((function(){var flip=$(this).data("flip-model");"toggle"===options&&(options=!flip.isFlipped),options?flip.flip(callback):flip.unflip(callback)})):this.each((function(){if($(this).data("flip-model")){var flip=$(this).data("flip-model");!options||void 0===options.axis&&void 0===options.reverse||flip.changeSettings(options,callback)}else $(this).data("flip-model",new Flip($(this),options||{},callback))})),this}}));

//# sourceMappingURL=flip.min.js.map