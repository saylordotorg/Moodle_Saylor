{"version":3,"file":"flip.min.js","sources":["../src/flip.js"],"sourcesContent":["/**\r\n * JQuery Flip plugin module.\r\n *\r\n * @package mod_wordcards\r\n * @author  Justin Hunt - poodll.com\r\n * (based on https://github.com/nnattawat/flip)\r\n */\r\n\r\ndefine([\r\n    'jquery'\r\n], function($) {\r\n\r\n    /*! flip - v1.1.2 - 2016-10-20\r\n    * https://github.com/nnattawat/flip\r\n    * Copyright (c) 2016 Nattawat Nonsung; Licensed MIT */\r\n\r\n\r\n        /*\r\n         * Private attributes and method\r\n         */\r\n\r\n        // Function from David Walsh: http://davidwalsh.name/css-animation-callback licensed with http://opensource.org/licenses/MIT\r\n        var whichTransitionEvent = function() {\r\n            var t, el = document.createElement(\"fakeelement\"),\r\n                transitions = {\r\n                    \"transition\"      : \"transitionend\",\r\n                    \"OTransition\"     : \"oTransitionEnd\",\r\n                    \"MozTransition\"   : \"transitionend\",\r\n                    \"WebkitTransition\": \"webkitTransitionEnd\"\r\n                };\r\n\r\n            for (t in transitions) {\r\n                if (el.style[t] !== undefined) {\r\n                    return transitions[t];\r\n                }\r\n            }\r\n        };\r\n\r\n        /*\r\n         * Model declaration\r\n         */\r\n        var Flip = function($el, options, callback) {\r\n            // Define default setting\r\n            this.setting = {\r\n                axis: \"y\",\r\n                reverse: false,\r\n                trigger: \"click\",\r\n                speed: 500,\r\n                forceHeight: false,\r\n                forceWidth: false,\r\n                autoSize: true,\r\n                front: '.front',\r\n                back: '.back'\r\n            };\r\n\r\n            this.setting = $.extend(this.setting, options);\r\n\r\n            if (typeof options.axis === 'string' && (options.axis.toLowerCase() === 'x' || options.axis.toLowerCase() === 'y')) {\r\n                this.setting.axis = options.axis.toLowerCase();\r\n            }\r\n\r\n            if (typeof options.reverse === \"boolean\") {\r\n                this.setting.reverse = options.reverse;\r\n            }\r\n\r\n            if (typeof options.trigger === 'string') {\r\n                this.setting.trigger = options.trigger.toLowerCase();\r\n            }\r\n\r\n            var speed = parseInt(options.speed);\r\n            if (!isNaN(speed)) {\r\n                this.setting.speed = speed;\r\n            }\r\n\r\n            if (typeof options.forceHeight === \"boolean\") {\r\n                this.setting.forceHeight = options.forceHeight;\r\n            }\r\n\r\n            if (typeof options.forceWidth === \"boolean\") {\r\n                this.setting.forceWidth = options.forceWidth;\r\n            }\r\n\r\n            if (typeof options.autoSize === \"boolean\") {\r\n                this.setting.autoSize = options.autoSize;\r\n            }\r\n\r\n            if (typeof options.front === 'string' || options.front instanceof $) {\r\n                this.setting.front = options.front;\r\n            }\r\n\r\n            if (typeof options.back === 'string' || options.back instanceof $) {\r\n                this.setting.back = options.back;\r\n            }\r\n\r\n            // Other attributes\r\n            this.element = $el;\r\n            this.frontElement = this.getFrontElement();\r\n            this.backElement = this.getBackElement();\r\n            this.isFlipped = false;\r\n\r\n            this.init(callback);\r\n        };\r\n\r\n        /*\r\n         * Public methods\r\n         */\r\n        $.extend(Flip.prototype, {\r\n\r\n            flipDone: function(callback) {\r\n                var self = this;\r\n                // Providing a nicely wrapped up callback because transform is essentially async\r\n                self.element.one(whichTransitionEvent(), function() {\r\n                    self.element.trigger('flip:done');\r\n                    if (typeof callback === 'function') {\r\n                        callback.call(self.element);\r\n                    }\r\n                });\r\n            },\r\n\r\n            flip: function(callback) {\r\n                if (this.isFlipped) {\r\n                    return;\r\n                }\r\n\r\n                this.isFlipped = true;\r\n\r\n                var rotateAxis = \"rotate\" + this.setting.axis;\r\n                this.frontElement.css({\r\n                    transform: rotateAxis + (this.setting.reverse ? \"(-180deg)\" : \"(180deg)\"),\r\n                    \"z-index\": \"0\"\r\n                });\r\n\r\n                this.backElement.css({\r\n                    transform: rotateAxis + \"(0deg)\",\r\n                    \"z-index\": \"1\"\r\n                });\r\n                this.flipDone(callback);\r\n            },\r\n\r\n            unflip: function(callback) {\r\n                if (!this.isFlipped) {\r\n                    return;\r\n                }\r\n\r\n                this.isFlipped = false;\r\n\r\n                var rotateAxis = \"rotate\" + this.setting.axis;\r\n                this.frontElement.css({\r\n                    transform: rotateAxis + \"(0deg)\",\r\n                    \"z-index\": \"1\"\r\n                });\r\n\r\n                this.backElement.css({\r\n                    transform: rotateAxis + (this.setting.reverse ? \"(180deg)\" : \"(-180deg)\"),\r\n                    \"z-index\": \"0\"\r\n                });\r\n                this.flipDone(callback);\r\n            },\r\n\r\n            getFrontElement: function() {\r\n                if (this.setting.front instanceof $) {\r\n                    return this.setting.front;\r\n                } else {\r\n                    return this.element.find(this.setting.front);\r\n                }\r\n            },\r\n\r\n            getBackElement: function() {\r\n                if (this.setting.back instanceof $) {\r\n                    return this.setting.back;\r\n                } else {\r\n                    return this.element.find(this.setting.back);\r\n                }\r\n            },\r\n\r\n            init: function(callback) {\r\n                var self = this;\r\n\r\n                var faces = self.frontElement.add(self.backElement);\r\n                var rotateAxis = \"rotate\" + self.setting.axis;\r\n                var perspective = self.element[\"outer\" + (rotateAxis === \"rotatex\" ? \"Height\" : \"Width\")]() * 2;\r\n                var elementCss = {\r\n                    'perspective': perspective,\r\n                    'position': 'relative'\r\n                };\r\n                var backElementCss = {\r\n                    \"transform\": rotateAxis + \"(\" + (self.setting.reverse ? \"180deg\" : \"-180deg\") + \")\",\r\n                    \"z-index\": \"0\",\r\n                    \"position\": \"relative\"\r\n                };\r\n                var faceElementCss = {\r\n                    \"backface-visibility\": \"hidden\",\r\n                    \"transform-style\": \"preserve-3d\",\r\n                    \"position\": \"absolute\",\r\n                    \"z-index\": \"1\"\r\n                };\r\n\r\n                if (self.setting.forceHeight) {\r\n                    faces.outerHeight(self.element.height());\r\n                } else if (self.setting.autoSize) {\r\n                    faceElementCss.height = '100%';\r\n                }\r\n\r\n                if (self.setting.forceWidth) {\r\n                    faces.outerWidth(self.element.width());\r\n                } else if (self.setting.autoSize) {\r\n                    faceElementCss.width = '100%';\r\n                }\r\n\r\n                // Back face always visible on Chrome #39\r\n                if ((window.chrome || (window.Intl && Intl.v8BreakIterator)) && 'CSS' in window) {\r\n                    //Blink Engine, add preserve-3d to self.element\r\n                    elementCss[\"-webkit-transform-style\"] = \"preserve-3d\";\r\n                }\r\n\r\n\r\n                faces.css(faceElementCss).find('*').css({\r\n                    \"backface-visibility\": \"hidden\"\r\n                });\r\n\r\n                self.element.css(elementCss);\r\n                self.backElement.css(backElementCss);\r\n\r\n                // #39\r\n                // not forcing width/height may cause an initial flip to show up on\r\n                // page load when we apply the style to reverse the backface...\r\n                // To prevent self we first apply the basic styles and then give the\r\n                // browser a moment to apply them. Only afterwards do we add the transition.\r\n                setTimeout(function() {\r\n                    // By now the browser should have applied the styles, so the transition\r\n                    // will only affect subsequent flips.\r\n                    var speedInSec = self.setting.speed / 1000 || 0.5;\r\n                    faces.css({\r\n                        \"transition\": \"all \" + speedInSec + \"s ease-out\"\r\n                    });\r\n\r\n                    // This allows flip to be called for setup with only a callback (default settings)\r\n                    if (typeof callback === 'function') {\r\n                        callback.call(self.element);\r\n                    }\r\n\r\n                    // While this used to work with a setTimeout of zero, at some point that became\r\n                    // unstable and the initial flip returned. The reason for this is unknown but we\r\n                    // will temporarily use a short delay of 20 to mitigate this issue.\r\n                }, 20);\r\n\r\n                self.attachEvents();\r\n            },\r\n\r\n            clickHandler: function(event) {\r\n                if (!event) { event = window.event; }\r\n                if (this.element.find($(event.target).closest('button, a, input[type=\"submit\"]')).length) {\r\n                    return;\r\n                }\r\n\r\n                if (this.isFlipped) {\r\n                    this.unflip();\r\n                } else {\r\n                    this.flip();\r\n                }\r\n            },\r\n\r\n            hoverHandler: function() {\r\n                var self = this;\r\n                self.element.off('mouseleave.flip');\r\n\r\n                self.flip();\r\n\r\n                setTimeout(function() {\r\n                    self.element.on('mouseleave.flip', $.proxy(self.unflip, self));\r\n                    if (!self.element.is(\":hover\")) {\r\n                        self.unflip();\r\n                    }\r\n                }, (self.setting.speed + 150));\r\n            },\r\n\r\n            attachEvents: function() {\r\n                var self = this;\r\n                if (self.setting.trigger === \"click\") {\r\n                    self.element.on($.fn.tap ? \"tap.flip\" : \"click.flip\", $.proxy(self.clickHandler, self));\r\n                } else if (self.setting.trigger === \"hover\") {\r\n                    self.element.on('mouseenter.flip', $.proxy(self.hoverHandler, self));\r\n                    self.element.on('mouseleave.flip', $.proxy(self.unflip, self));\r\n                }\r\n            },\r\n\r\n            flipChanged: function(callback) {\r\n                this.element.trigger('flip:change');\r\n                if (typeof callback === 'function') {\r\n                    callback.call(this.element);\r\n                }\r\n            },\r\n\r\n            changeSettings: function(options, callback) {\r\n                var self = this;\r\n                var changeNeeded = false;\r\n\r\n                if (options.axis !== undefined && self.setting.axis !== options.axis.toLowerCase()) {\r\n                    self.setting.axis = options.axis.toLowerCase();\r\n                    changeNeeded = true;\r\n                }\r\n\r\n                if (options.reverse !== undefined && self.setting.reverse !== options.reverse) {\r\n                    self.setting.reverse = options.reverse;\r\n                    changeNeeded = true;\r\n                }\r\n\r\n                if (changeNeeded) {\r\n                    var faces = self.frontElement.add(self.backElement);\r\n                    var savedTrans = faces.css([\"transition-property\", \"transition-timing-function\", \"transition-duration\", \"transition-delay\"]);\r\n\r\n                    faces.css({\r\n                        transition: \"none\"\r\n                    });\r\n\r\n                    // This sets up the first flip in the new direction automatically\r\n                    var rotateAxis = \"rotate\" + self.setting.axis;\r\n\r\n                    if (self.isFlipped) {\r\n                        self.frontElement.css({\r\n                            transform: rotateAxis + (self.setting.reverse ? \"(-180deg)\" : \"(180deg)\"),\r\n                            \"z-index\": \"0\"\r\n                        });\r\n                    } else {\r\n                        self.backElement.css({\r\n                            transform: rotateAxis + (self.setting.reverse ? \"(180deg)\" : \"(-180deg)\"),\r\n                            \"z-index\": \"0\"\r\n                        });\r\n                    }\r\n                    // Providing a nicely wrapped up callback because transform is essentially async\r\n                    setTimeout(function() {\r\n                        faces.css(savedTrans);\r\n                        self.flipChanged(callback);\r\n                    }, 0);\r\n                } else {\r\n                    // If we didnt have to set the axis we can just call back.\r\n                    self.flipChanged(callback);\r\n                }\r\n            }\r\n\r\n        });\r\n\r\n        /*\r\n         * jQuery collection methods\r\n         */\r\n        $.fn.flip = function (options, callback) {\r\n            if (typeof options === 'function') {\r\n                callback = options;\r\n            }\r\n\r\n            if (typeof options === \"string\" || typeof options === \"boolean\") {\r\n                this.each(function() {\r\n                    var flip = $(this).data('flip-model');\r\n\r\n                    if (options === \"toggle\") {\r\n                        options = !flip.isFlipped;\r\n                    }\r\n\r\n                    if (options) {\r\n                        flip.flip(callback);\r\n                    } else {\r\n                        flip.unflip(callback);\r\n                    }\r\n                });\r\n            } else {\r\n                this.each(function() {\r\n                    if ($(this).data('flip-model')) { // The element has been initiated, all we have to do is change applicable settings\r\n                        var flip = $(this).data('flip-model');\r\n\r\n                        if (options && (options.axis !== undefined || options.reverse !== undefined)) {\r\n                            flip.changeSettings(options, callback);\r\n                        }\r\n                    } else { // Init\r\n                        $(this).data('flip-model', new Flip($(this), (options || {}), callback));\r\n                    }\r\n                });\r\n            }\r\n\r\n            return this;\r\n        };\r\n});\r\n"],"names":["define","$","Flip","$el","options","callback","setting","axis","reverse","trigger","speed","forceHeight","forceWidth","autoSize","front","back","extend","this","toLowerCase","parseInt","isNaN","element","frontElement","getFrontElement","backElement","getBackElement","isFlipped","init","prototype","flipDone","self","one","t","el","document","createElement","transitions","undefined","style","whichTransitionEvent","call","flip","rotateAxis","css","transform","unflip","find","faces","add","elementCss","backElementCss","faceElementCss","outerHeight","height","outerWidth","width","window","chrome","Intl","v8BreakIterator","setTimeout","speedInSec","attachEvents","clickHandler","event","target","closest","length","hoverHandler","off","on","proxy","is","fn","tap","flipChanged","changeSettings","changeNeeded","savedTrans","transition","each","data"],"mappings":"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"}