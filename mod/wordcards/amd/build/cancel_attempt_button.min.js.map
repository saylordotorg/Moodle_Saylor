{"version":3,"sources":["../src/cancel_attempt_button.js"],"names":["define","$","Ajax","Notification","ModalFactory","str","ModalEvents","strings","init","init_strings","register_events","container","btn","find","that","click","e","preventDefault","buttonhref","data","create","type","types","SAVE_CANCEL","title","cancelattempttitle","body","cancelattemptbody","then","modal","setSaveButtonText","cancelattempt","root","getRoot","on","save","window","location","href","show","get_strings","done","s","i"],"mappings":"AAAAA,OAAM,uCAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,mBAAxB,CAA4C,oBAA5C,CAAiE,UAAjE,CAA4E,mBAA5E,CAAiG,mBAAjG,CAAD,CACF,SAASC,CAAT,CAAYC,CAAZ,CAAkBC,CAAlB,CAA+BC,CAA/B,CAA6CC,CAA7C,CAAkDC,CAAlD,CAAoE,CACtE,aAEA,MAAO,CAELC,OAAO,CAAE,EAFJ,CAILC,IAAI,CAAE,eAAe,CAGvB,KAAKC,YAAL,GAEA,KAAKC,eAAL,EAEA,CAXO,CAaRA,eAAe,CAAE,0BAAW,IACvBC,CAAAA,CAAS,CAAGV,CAAC,CAAC,mCAAD,CADU,CAEvBW,CAAG,CAAGD,CAAS,CAACE,IAAV,CAAe,wBAAf,CAFiB,CAGvBC,CAAI,CAAG,IAHgB,CAI3BF,CAAG,CAACG,KAAJ,CAAU,SAASC,CAAT,CAAY,CACrBA,CAAC,CAACC,cAAF,GACA,GAAIC,CAAAA,CAAU,CAAEjB,CAAC,CAAC,IAAD,CAAD,CAAQkB,IAAR,CAAa,MAAb,CAAhB,CAGAf,CAAY,CAACgB,MAAb,CAAoB,CACnBC,IAAI,CAAEjB,CAAY,CAACkB,KAAb,CAAmBC,WADN,CAEnBC,KAAK,CAAEV,CAAI,CAACP,OAAL,CAAakB,kBAFD,CAGnBC,IAAI,CAAEZ,CAAI,CAACP,OAAL,CAAaoB,iBAHA,CAApB,EAKEC,IALF,CAKO,SAASC,CAAT,CAAgB,CACrBA,CAAK,CAACC,iBAAN,CAAwBhB,CAAI,CAACP,OAAL,CAAawB,aAArC,EACA,GAAIC,CAAAA,CAAI,CAAGH,CAAK,CAACI,OAAN,EAAX,CACAD,CAAI,CAACE,EAAL,CAAQ5B,CAAW,CAAC6B,IAApB,CAA0B,UAAW,CACpCC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuBpB,CACvB,CAFD,EAGAW,CAAK,CAACU,IAAN,EACA,CAZF,CAcA,CAnBD,CAoBA,CArCO,CAuCL9B,YAAY,CAAE,uBAAU,CACpB,GAAIK,CAAAA,CAAI,CAAG,IAAX,CAEAT,CAAG,CAACmC,WAAJ,CAAgB,CACZ,CAAC,IAAO,oBAAR,CAAoC,UAAa,eAAjD,CADY,CAEZ,CAAC,IAAO,mBAAR,CAAuC,UAAa,eAApD,CAFY,CAGZ,CAAC,IAAO,eAAR,CAAmC,UAAa,eAAhD,CAHY,CAAhB,EAKGC,IALH,CAKQ,SAASC,CAAT,CAAY,CAChB,GAAIC,CAAAA,CAAC,CAAG,CAAR,CACA7B,CAAI,CAACP,OAAL,CAAakB,kBAAb,CAAkCiB,CAAC,CAACC,CAAC,EAAF,CAAnC,CACA7B,CAAI,CAACP,OAAL,CAAaoB,iBAAb,CAAiCe,CAAC,CAACC,CAAC,EAAF,CAAlC,CACA7B,CAAI,CAACP,OAAL,CAAawB,aAAb,CAA6BW,CAAC,CAACC,CAAC,EAAF,CACjC,CAVD,CAWH,CArDI,CAyDR,CA7DK,CAAN","sourcesContent":["define(['jquery', 'core/ajax', 'core/notification','core/modal_factory','core/str','core/modal_events', 'mod_wordcards/a4e'],\r\n    function($, Ajax, Notification,ModalFactory, str, ModalEvents, a4e) {\r\n  \"use strict\"; // jshint ;_;\r\n\r\n  return {\r\n\r\n    strings: {},\r\n\r\n    init: function(opts) {\r\n\r\n\t\t//init strings\r\n\t\tthis.init_strings();\r\n\t\t//register events\r\n\t\tthis.register_events();\r\n\r\n\t},\r\n\r\n\tregister_events: function() {\r\n\t\tvar container = $('.mod_wordcards_cancelattempt_cont');\r\n\t\tvar btn = container.find('.cancel_attempt_button');\r\n\t\tvar that = this;\r\n\t\tbtn.click(function(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\tvar buttonhref= $(this).data('href');\r\n\r\n\t\t\t//if its a reattempt, confirm and proceed\r\n\t\t\tModalFactory.create({\r\n\t\t\t\ttype: ModalFactory.types.SAVE_CANCEL,\r\n\t\t\t\ttitle: that.strings.cancelattempttitle,\r\n\t\t\t\tbody: that.strings.cancelattemptbody\r\n\t\t\t})\r\n\t\t\t\t.then(function(modal) {\r\n\t\t\t\t\tmodal.setSaveButtonText(that.strings.cancelattempt);\r\n\t\t\t\t\tvar root = modal.getRoot();\r\n\t\t\t\t\troot.on(ModalEvents.save, function() {\r\n\t\t\t\t\t\twindow.location.href = buttonhref;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tmodal.show();\r\n\t\t\t\t});\r\n\r\n\t\t});\r\n\t},\r\n\r\n    init_strings: function(){\r\n        var that = this;\r\n        // set up strings\r\n        str.get_strings([\r\n            {\"key\": \"cancelattempttitle\",       \"component\": 'mod_wordcards'},\r\n            {\"key\": \"cancelattemptbody\",           \"component\": 'mod_wordcards'},\r\n            {\"key\": \"cancelattempt\",           \"component\": 'mod_wordcards'}\r\n\r\n        ]).done(function(s) {\r\n            var i = 0;\r\n            that.strings.cancelattempttitle = s[i++];\r\n            that.strings.cancelattemptbody = s[i++];\r\n            that.strings.cancelattempt = s[i++];\r\n        });\r\n    }\r\n\r\n  }\r\n\r\n});\r\n"],"file":"cancel_attempt_button.min.js"}