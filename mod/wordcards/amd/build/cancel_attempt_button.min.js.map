{"version":3,"file":"cancel_attempt_button.min.js","sources":["../src/cancel_attempt_button.js"],"sourcesContent":["define(['jquery', 'core/ajax', 'core/notification','core/modal_factory','core/str','core/modal_events', 'mod_wordcards/a4e'],\r\n    function($, Ajax, Notification,ModalFactory, str, ModalEvents, a4e) {\r\n  \"use strict\"; // jshint ;_;\r\n\r\n  return {\r\n\r\n    strings: {},\r\n\r\n    init: function(opts) {\r\n\r\n\t\t//init strings\r\n\t\tthis.init_strings();\r\n\t\t//register events\r\n\t\tthis.register_events();\r\n\r\n\t},\r\n\r\n\tregister_events: function() {\r\n\t\tvar container = $('.mod_wordcards_cancelattempt_cont');\r\n\t\tvar btn = container.find('.cancel_attempt_button');\r\n\t\tvar that = this;\r\n\t\tbtn.click(function(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\tvar buttonhref= $(this).data('href');\r\n\r\n\t\t\t//confirm cancel and maybe proceed\r\n\t\t\tModalFactory.create({\r\n\t\t\t\ttype: ModalFactory.types.SAVE_CANCEL,\r\n\t\t\t\ttitle: that.strings.cancelattempttitle,\r\n\t\t\t\tbody: that.strings.cancelattemptbody\r\n\t\t\t})\r\n\t\t\t\t.then(function(modal) {\r\n\t\t\t\t\tmodal.setSaveButtonText(that.strings.cancelattempt);\r\n\t\t\t\t\tvar root = modal.getRoot();\r\n\t\t\t\t\troot.on(ModalEvents.save, function() {\r\n\t\t\t\t\t\twindow.location.href = buttonhref;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tmodal.show();\r\n\t\t\t\t});\r\n\r\n\t\t});\r\n\t},\r\n\r\n    init_strings: function(){\r\n        var that = this;\r\n        // set up strings\r\n        str.get_strings([\r\n            {\"key\": \"cancelattempttitle\",       \"component\": 'mod_wordcards'},\r\n            {\"key\": \"cancelattemptbody\",           \"component\": 'mod_wordcards'},\r\n            {\"key\": \"cancelattempt\",           \"component\": 'mod_wordcards'}\r\n\r\n        ]).done(function(s) {\r\n            var i = 0;\r\n            that.strings.cancelattempttitle = s[i++];\r\n            that.strings.cancelattemptbody = s[i++];\r\n            that.strings.cancelattempt = s[i++];\r\n        });\r\n    }\r\n\r\n  }\r\n\r\n});\r\n"],"names":["define","$","Ajax","Notification","ModalFactory","str","ModalEvents","a4e","strings","init","opts","init_strings","register_events","btn","find","that","this","click","e","preventDefault","buttonhref","data","create","type","types","SAVE_CANCEL","title","cancelattempttitle","body","cancelattemptbody","then","modal","setSaveButtonText","cancelattempt","getRoot","on","save","window","location","href","show","get_strings","done","s","i"],"mappings":"AAAAA,6CAAO,CAAC,SAAU,YAAa,oBAAoB,qBAAqB,WAAW,oBAAqB,sBACpG,SAASC,EAAGC,KAAMC,aAAaC,aAAcC,IAAKC,YAAaC,WAG1D,CAELC,QAAS,GAETC,KAAM,SAASC,WAGZC,oBAEAC,mBAINA,gBAAiB,eAEZC,IADYZ,EAAE,qCACEa,KAAK,0BACrBC,KAAOC,KACXH,IAAII,OAAM,SAASC,GAClBA,EAAEC,qBACEC,WAAYnB,EAAEe,MAAMK,KAAK,QAG7BjB,aAAakB,OAAO,CACnBC,KAAMnB,aAAaoB,MAAMC,YACzBC,MAAOX,KAAKP,QAAQmB,mBACpBC,KAAMb,KAAKP,QAAQqB,oBAElBC,MAAK,SAASC,OACdA,MAAMC,kBAAkBjB,KAAKP,QAAQyB,eAC1BF,MAAMG,UACZC,GAAG7B,YAAY8B,MAAM,WACzBC,OAAOC,SAASC,KAAOnB,cAExBW,MAAMS,cAMP7B,aAAc,eACNI,KAAOC,KAEXX,IAAIoC,YAAY,CACZ,KAAQ,+BAAyC,iBACjD,KAAQ,8BAA4C,iBACpD,KAAQ,0BAAwC,mBAEjDC,MAAK,SAASC,OACTC,EAAI,EACR7B,KAAKP,QAAQmB,mBAAqBgB,EAAEC,KACpC7B,KAAKP,QAAQqB,kBAAoBc,EAAEC,KACnC7B,KAAKP,QAAQyB,cAAgBU,EAAEC"}