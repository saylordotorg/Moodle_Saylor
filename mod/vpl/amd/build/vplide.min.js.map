{"version":3,"sources":["../src/vplide.js"],"names":["define","$","jqui","VPLUtil","VPLFile","VPLIDEButtons","VPLTerminal","VPLVNCClient","vplIdeInstance","VPLIDE","rootId","options","self","fileManager","adjustTabsTitles","autoResizeTab","showErrorMessage","updateMenu","executionActions","minNumberOfFiles","minfiles","maxNumberOfFiles","maxfiles","restrictedEdit","restrictededitor","example","readOnly","isTeacher","fullScreen","scrollBarWidth","str","rootObj","append","Error","optionsToCheck","loadajaxurl","ajaxurl","activateModification","new","rename","delete","comments","acetheme","sort","multidelete","import","isOptionAllowed","op","console","fontSize","parseInt","dragoverHandler","e","originalEvent","dataTransfer","dropEffect","preventDefault","dropHandler","stopImmediatePropagation","dt","files","length","readSelectedFiles","file","addFile","fileListVisibleIfNeeded","on","restrictedPaste","stopPropagation","menu","menuButtons","tr","fileListContainer","fileList","fileListContent","tabsUl","tabs","resultContainer","result","vplMinWidth","avoidSelectGrade","event","ui","newHeader","hasClass","FileManager","openFiles","modified","version","setVersion","v","getVersion","updateFileList","generateFileList","fileNameExists","name","checkName","toLowerCase","i","getFileName","fileNameIncluded","nameMod","indexOf","twoBlockly","oldname","newname","isBlockly","localClipboard","setClipboard","t","getClipboard","getTabPos","getTheme","theme","setTheme","addTab","fid","removeTab","find","remove","open","pos","isOpen","getId","push","setGetkeys","delay","close","ptab","splice","fileListVisible","getFilePosById","gotoFile","isClosed","b","vplVisible","show","hide","isFileListVisible","setFontSize","size","terminal","getFontSize","replace","ok","showError","validPath","setContent","contents","setModified","getUniqueId","newfile","encoding","extendToBinary","extendToBlockly","extendToCodeEditor","setFileName","renameFile","isBinary","fileExtension","deleteFile","currentFile","id","arguments","action","fun","args","Array","prototype","slice","shift","apply","currentPos","getFileTab","l","gotoLine","focus","gotoFileLink","a","tag","fname","data","fpos","line","getFilesToSave","ret","getContent","resetModified","isModified","clearAnnotations","getFile","getFiles","getDirectoryStructure","structure","isDir","content","addFilePath","fileName","path","split","curdir","p","hasOwnProperty","part","lister","dir","indent","lines","fd","iconFolder","sanitizeText","sname","attrs","iconModified","iconRequired","html","getAction","updateEvaluationNumber","res","nevaluations","text","reductionbyevaluation","freeevaluations","setExtracontent","lastResult","getTerminal","setResultGrade","raw","titleclass","contentclass","titleTag","replaceWith","setResultTab","contentTag","HTMLcontent","setResult","go","fileNames","hasContent","grade","gradeShow","formated","variables","processResult","compilation","evaluation","execution","window","VPLDescription","MathJax","math","Hub","Queue","accordion","anot","getAnnotations","j","type","row","heightStyle","header","animate","beforeActivate","width","currentTarget","addClass","tabsAir","getTabsAir","outerWidth","resizeTabWidth","diffLeft","position","left","originalPosition","maxWidth","resizable","vplOriginalWidth","diffWidth","originalSize","resizableOptions","containment","resize","start","off","stop","handles","updateTabsHandles","index","disable","resizeHeight","newHeight","outerHeight","offset","top","height","panelHeight","center","newWidth","tabsUlWidth","last","children","parentScrollLeft","parent","scrollLeft","fileTab","getTabNameId","scroll","finish","oldWidth","planb","css","rigth","rel","wfl","focusCurrentFile","dialogbaseOptions","extend","showMessage","message","dialogNew","newFileHandler","keyCode","dialog","val","dialogButtons","title","buttons","setDialogTitleIcon","dialogRename","renameHandler","dialogComments","aboutDialog","OKButtons","shortcutDialog","getShortcuts","next","filter","button","dialogSort","dialogSortButtons","sorted","newOrder","each","orig","list","sortable","items","placeholder","item","removeClass","disableSelection","maxHeight","dialogMultidelete","dialogMultideleteButtons","prop","toDeleteList","labelList","label","dialogFontsize","fontsizeSlider","dialogFontFizeButtons","value","slider","ajax","async","url","JSON","stringify","contentType","dataType","min","max","change","dialogAceTheme","acethemeSelect","dialogAceThemeButtons","setUserPreferences","aceTheme","modal","VNCClient","lastConsole","fileSelect","fileSelectHandler","add","originalAction","bindKey","win","mac","filename","icon","trigger","print","editorName","tags","setText","scrollTop","username","setTimeout","location","download","resetFiles","requestAction","done","response","doNothing","fail","postMaxSize","doSave","requestsconfirmation","question","yes","setTimeLeft","monitorRunning","processid","getProcessId","executionRequest","acting","isConnected","webSocketMonitor","runAction","XGEOMETRY","getCanvasSize","setLastAction","debugAction","evaluateAction","toggleTimeLeft","is","menuHtml","getHTML","controlgroup","alwaysActive","enable","nfiles","running","sel","hasUndo","hasRedo","hasSelectAll","hasFind","hasFindReplace","hasNext","coninfo","ws","parsed","exec","connect","executionURL","URLfavicon","secure","server","portToUse","imgFavicon","attr","VNCpassword","executionPath","URL","log","lastAction","jw","oldMenuWidth","checkMenuWidth","newMenuWidth","setInterval","allOK","showFileList","r","compilationexecution","saved","afterAll","init"],"mappings":"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","sourcesContent":["// This file is part of VPL for Moodle - http://vpl.dis.ulpgc.es/\n//\n// VPL for Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// VPL for Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with VPL for Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * IDE Control\n *\n * @copyright 2017 Juan Carlos Rodríguez-del-Pino\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author Juan Carlos Rodríguez-del-Pino <jcrodriguez@dis.ulpgc.es>\n */\n\n/* globals MathJax */\n\ndefine(\n    [\n        'jquery',\n        'jqueryui',\n        'mod_vpl/vplutil',\n        'mod_vpl/vplidefile',\n        'mod_vpl/vplidebutton',\n        'mod_vpl/vplterminal',\n        'mod_vpl/vplvnc',\n    ],\n    function($, jqui, VPLUtil, VPLFile, VPLIDEButtons, VPLTerminal, VPLVNCClient) {\n        if (typeof VPLIDE !== 'undefined') {\n            return VPLIDE;\n        }\n        var vplIdeInstance;\n        var VPLIDE = function(rootId, options) {\n            var self = this;\n            var fileManager;\n            var adjustTabsTitles;\n            var autoResizeTab;\n            var showErrorMessage;\n            var updateMenu;\n            var executionActions;\n            var minNumberOfFiles = options.minfiles || 0;\n            var maxNumberOfFiles = options.maxfiles || 0;\n            var restrictedEdit = options.restrictededitor || options.example;\n            var readOnly = options.example;\n            var isTeacher = options.isTeacher;\n            var fullScreen = false;\n            var scrollBarWidth = VPLUtil.scrollBarWidth();\n            var str = VPLUtil.str;\n            var rootObj = $('#' + rootId);\n            $(\"head\").append('<meta name=\"viewport\" content=\"initial-scale=1\">')\n                          .append('<meta name=\"viewport\" width=\"device-width\">')\n                          .append('<link rel=\"stylesheet\" href=\"../editor/VPLIDE.css\"/>');\n            if (typeof rootObj != 'object') {\n                throw new Error(\"VPL: constructor tag_id not found\");\n            }\n            var optionsToCheck = {\n                'new': true,\n                'rename': true,\n                'delete': true,\n                'save': true,\n                'run': true,\n                'edit': true,\n                'debug': true,\n                'evaluate': true,\n                'import': true,\n                'resetfiles': true,\n                'sort': true,\n                'multidelete': true,\n                'acetheme': true,\n                'console': true,\n                'comments': true\n            };\n            if ((typeof options.loadajaxurl) == 'undefined') {\n                options.loadajaxurl = options.ajaxurl;\n            }\n            (function() {\n                var activateModification = (minNumberOfFiles < maxNumberOfFiles);\n                options.new = activateModification;\n                options.rename = activateModification;\n                options.delete = activateModification;\n                options.comments = options.comments && !options.example;\n                options.acetheme = true;\n            })();\n            options.sort = (maxNumberOfFiles - minNumberOfFiles >= 2);\n            options.multidelete = options.sort;\n            options.import = !restrictedEdit;\n            var isOptionAllowed = function(op) {\n                if (!optionsToCheck[op]) {\n                    return true;\n                }\n                return options[op];\n            };\n            options.console = isOptionAllowed('run') || isOptionAllowed('debug');\n            if ((typeof options.fontSize) == 'undefined') {\n                options.fontSize = 12;\n            }\n            options.fontSize = parseInt(options.fontSize);\n            /**\n             * Handler for dragover event.\n             * @param {object} e event.\n             */\n            function dragoverHandler(e) {\n                if (restrictedEdit) {\n                    e.originalEvent.dataTransfer.dropEffect = 'none';\n                } else {\n                    e.originalEvent.dataTransfer.dropEffect = 'copy';\n                }\n                e.preventDefault();\n            }\n            /**\n             * Handler for drop event.\n             * @param {object} e event.\n             * @returns {boolean}\n             */\n            function dropHandler(e) {\n                if (restrictedEdit) { // No drop allowed.\n                    e.stopImmediatePropagation();\n                    return false;\n                }\n                var dt = e.originalEvent.dataTransfer;\n                // Drop files.\n                if (dt.files.length > 0) {\n                    VPLUtil.readSelectedFiles(dt.files, function(file) {\n                        return fileManager.addFile(file, true, updateMenu, showErrorMessage);\n                    },\n                    function() {\n                        fileManager.fileListVisibleIfNeeded();\n                    });\n                    e.stopImmediatePropagation();\n                    return false;\n                }\n                return false;\n            }\n            rootObj.on('drop', dropHandler);\n            rootObj.on('dragover', dragoverHandler);\n            /**\n             * Handler for paste limited by restrictedEdit var.\n             * @param {object} e event.\n             * @returns {boolean}\n             */\n            function restrictedPaste(e) {\n                if (restrictedEdit) {\n                    e.stopPropagation();\n                    return false;\n                }\n                return true;\n            }\n            // Init editor vars.\n            var menu = $('#vpl_menu');\n            var menuButtons = new VPLIDEButtons(menu, isOptionAllowed);\n            var tr = $('#vpl_tr');\n            var fileListContainer = $('#vpl_filelist');\n            var fileList = $('#vpl_filelist_header');\n            var fileListContent = $('#vpl_filelist_content');\n            var tabsUl = $('#vpl_tabs_ul');\n            var tabs = $('#vpl_tabs');\n            var resultContainer = $('#vpl_results');\n            var result = $('#vpl_results_accordion');\n            fileListContainer.vplMinWidth = 80;\n            resultContainer.vplMinWidth = 100;\n            /**\n             * Avoids selecting grade.\n             * @param {object} event Unuse.\n             * @param {object} ui UI origen.\n             * @returns {boolean}\n             */\n            function avoidSelectGrade(event, ui) {\n                if (\"newHeader\" in ui) {\n                    if (ui.newHeader.hasClass('vpl_ide_accordion_t_grade')) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n            /**\n             * Constructor of FileManager objects\n             */\n            function FileManager() {\n                var tabsUl = $('#vpl_tabs_ul');\n                $('#vpl_tabs').tabs();\n                var tabs = $('#vpl_tabs').tabs(\"widget\");\n                var files = [];\n                var openFiles = [];\n                var modified = true;\n                var self = this;\n                (function() {\n                    var version;\n                    self.setVersion = function(v) {\n                       version = v;\n                    };\n                    self.getVersion = function() {\n                       return version;\n                    };\n                })();\n                this.updateFileList = function() {\n                    self.generateFileList();\n                };\n                this.fileNameExists = function(name) {\n                    var checkName = name.toLowerCase();\n                    for (var i = 0; i < files.length; i++) {\n                        if (files[i].getFileName().toLowerCase() == checkName) {\n                            return i;\n                        }\n                    }\n                    return -1;\n                };\n                /**\n                 * Checks if name is included in current files names\n                 * @param {string} name Name of file\n                 * @returns {boolean} if found or not found\n                 */\n                function fileNameIncluded(name) {\n                    var checkName = name.toLowerCase() + '/';\n                    for (var i = 0; i < files.length; i++) {\n                        var nameMod = files[i].getFileName().toLowerCase() + '/';\n                        // Check for name as directory existent.\n                        if (nameMod.indexOf(checkName) === 0 || checkName.indexOf(nameMod) === 0) {\n                            return true;\n                        }\n                    }\n                    return false;\n                }\n                /**\n                 * Checks if changing file name results in two blovkly files\n                 * @param {string} oldname The old file name\n                 * @param {string} newname The new file name\n                 * @returns {boolean} if results two two blovkly files\n                 */\n                function twoBlockly(oldname, newname) {\n                    if (VPLUtil.isBlockly(oldname)) {\n                        return false;\n                    }\n                    if (VPLUtil.isBlockly(newname)) {\n                        for (var i = 0; i < files.length; i++) {\n                            if (VPLUtil.isBlockly(files[i].getFileName())) {\n                                return true;\n                            }\n                        }\n                    }\n                    return false;\n                }\n                this.restrictedPaste = restrictedPaste;\n                this.dropHandler = dropHandler;\n                this.dragoverHandler = dragoverHandler;\n                this.readOnly = readOnly;\n                this.restrictedEdit = restrictedEdit;\n                this.adjustTabsTitles = adjustTabsTitles;\n                this.minNumberOfFiles = minNumberOfFiles;\n                this.scrollBarWidth = scrollBarWidth;\n                var localClipboard = \"\";\n                this.setClipboard = function(t) {\n                    localClipboard = t;\n                };\n                this.getClipboard = function() {\n                    return localClipboard;\n                };\n                this.getTabPos = function(file) {\n                    for (var i = 0; i < openFiles.length; i++) {\n                        if (openFiles[i] == file) {\n                            return i;\n                        }\n                    }\n                    return openFiles.length;\n                };\n                this.getTheme = function() {\n                    return options.theme;\n                };\n                this.setTheme = function(theme) {\n                    options.theme = theme;\n                    for (var i = 0; i < files.length; i++) {\n                        files[i].setTheme(theme);\n                    }\n                };\n                this.addTab = function(fid) {\n                    var hlink = '<a href=\"#vpl_file' + fid + '\"></a>';\n                    tabsUl.append('<li id=\"vpl_tab_name' + fid + '\">' + hlink + '</li>');\n                    tabs.append('<div id=\"vpl_file' + fid + '\" class=\"vpl_ide_file\"></div>');\n                };\n                this.removeTab = function(fid) {\n                    tabsUl.find('#vpl_tab_name' + fid).remove();\n                    tabs.find('#vpl_file' + fid).remove();\n                };\n                this.open = function(pos) {\n                    var file;\n                    if (typeof pos == 'object') {\n                        file = pos;\n                    } else {\n                        file = files[pos];\n                    }\n                    if (file.isOpen()) {\n                        return;\n                    }\n                    var fid = file.getId();\n                    self.addTab(fid);\n                    openFiles.push(file);\n                    menuButtons.setGetkeys(file.open());\n                    tabs.tabs('refresh');\n                    adjustTabsTitles(false);\n                    VPLUtil.delay('updateFileList', self.updateFileList);\n                    VPLUtil.delay('updateMenu', updateMenu);\n                };\n                this.close = function(file) {\n                    if (!file.isOpen()) {\n                        return;\n                    }\n                    var pos;\n                    var fid = file.getId();\n                    file.close();\n                    self.removeTab(fid);\n                    var ptab = self.getTabPos(file);\n                    openFiles.splice(ptab, 1);\n                    tabs.tabs('refresh');\n                    adjustTabsTitles(false);\n                    self.fileListVisible(true);\n                    VPLUtil.delay('updateFileList', self.updateFileList);\n                    VPLUtil.delay('adjustTabsTitles', adjustTabsTitles, false);\n                    if (openFiles.length > ptab) {\n                        pos = self.getFilePosById(openFiles[ptab].getId());\n                        self.gotoFile(pos, 'c');\n                        return;\n                    }\n                    if (ptab > 0) {\n                        pos = self.getFilePosById(openFiles[ptab - 1].getId());\n                        self.gotoFile(pos, 'c');\n                        return;\n                    }\n                };\n                this.isClosed = function(pos) {\n                    return !files[pos].isOpen();\n                };\n                this.fileListVisible = function(b) {\n                    if (b === fileListContainer.vplVisible) {\n                        return;\n                    }\n                    if (b) {\n                        VPLUtil.delay('fileListVisible', function() {\n                            fileListContainer.vplVisible = true;\n                            self.updateFileList();\n                            fileListContainer.show();\n                            autoResizeTab();\n                         });\n                    } else {\n                        VPLUtil.delay('fileListVisible', function() {\n                            fileListContainer.vplVisible = false;\n                            fileListContainer.hide();\n                            autoResizeTab();\n                         });\n                    }\n                };\n                this.isFileListVisible = function() {\n                    return fileListContainer.vplVisible;\n                };\n                this.fileListVisibleIfNeeded = function() {\n                    if (this.isFileListVisible()) {\n                        return;\n                    }\n                    for (var i = 0; i < files.length; i++) {\n                        if (!files[i].isOpen()) {\n                            this.fileListVisible(true);\n                            return;\n                        }\n                    }\n                };\n                this.setFontSize = function(size) {\n                    options.fontSize = size;\n                    for (var i = 0; i < files.length; i++) {\n                        files[i].setFontSize(size);\n                    }\n                    terminal.setFontSize(size);\n                };\n                this.getFontSize = function() {\n                    return options.fontSize;\n                };\n                this.addFile = function(file, replace, ok, showError) {\n                    if ((typeof file.name != 'string') || !VPLUtil.validPath(file.name)) {\n                        showError(str('incorrect_file_name') + ' (' + file.name + ')');\n                        return false;\n                    }\n                    if (replace !== true) {\n                        replace = false;\n                    }\n                    var pos = this.fileNameExists(file.name);\n                    if (pos != -1) {\n                        if (replace) {\n                            files[pos].setContent(file.contents);\n                            self.setModified();\n                            ok();\n                            VPLUtil.delay('updateFileList', self.updateFileList);\n                            return file;\n                        } else {\n                            showError(str('filenotadded', file.name));\n                            return false;\n                        }\n                    }\n                    if (fileNameIncluded(file.name) || twoBlockly('', file.name)) {\n                        showError(str('filenotadded', file.name));\n                        return false;\n                    }\n                    if (files.length >= maxNumberOfFiles) {\n                        showError(str('maxfilesexceeded') + ' (' + maxNumberOfFiles + ')');\n                        return false;\n                    }\n                    var fid = VPLUtil.getUniqueId();\n                    var newfile = new VPLFile(fid, file.name, file.contents, this, vplIdeInstance);\n                    if (file.encoding == 1) {\n                        newfile.extendToBinary();\n                    } else {\n                        if (VPLUtil.isBlockly(file.name)) {\n                            newfile.extendToBlockly();\n                        } else {\n                            newfile.extendToCodeEditor();\n                        }\n                    }\n                    newfile.setFileName(file.name);\n                    files.push(newfile);\n                    self.setModified();\n                    if (files.length > 5) {\n                        self.fileListVisible(true);\n                    }\n                    ok();\n                    return newfile;\n                };\n                this.renameFile = function(oldname, newname, showError) {\n                    var pos = this.fileNameExists(oldname);\n                    try {\n                        if (pos == -1) {\n                            throw new Error(\"Internal error: File name not found\");\n                        }\n                        if (pos < minNumberOfFiles) {\n                            throw new Error(\"Internal error: Renaming requested filename\");\n                        }\n                        if (files[pos].getFileName() == newname) {\n                            return true; // Equals name file.\n                        }\n                        if (!VPLUtil.validPath(newname) ||\n                               fileNameIncluded(newname) ||\n                               twoBlockly(oldname, newname)) {\n                            throw str('incorrect_file_name');\n                        }\n                        if (VPLUtil.isBinary(oldname) && VPLUtil.fileExtension(oldname) != VPLUtil.fileExtension(newname)) {\n                            throw str('incorrect_file_name');\n                        }\n                        if (VPLUtil.isBlockly(oldname) != VPLUtil.isBlockly(newname)) {\n                            throw str('incorrect_file_name');\n                        }\n                        files[pos].setFileName(newname);\n                    } catch (e) {\n                        showError(str('filenotrenamed', newname) + ': ' + e);\n                        return false;\n                    }\n                    self.setModified();\n                    adjustTabsTitles(false);\n                    VPLUtil.delay('updateFileList', self.updateFileList);\n                    return true;\n                };\n                this.deleteFile = function(name, ok, showError) {\n                    var pos = this.fileNameExists(name);\n                    if (pos == -1) {\n                        showError(str('filenotdeleted', name));\n                        return false;\n                    }\n                    if (pos < minNumberOfFiles) {\n                        showError(str('filenotdeleted', name));\n                        return false;\n                    }\n                    self.setModified();\n                    self.close(files[pos]);\n                    files.splice(pos, 1);\n                    VPLUtil.delay('updateFileList', self.updateFileList);\n                    return true;\n                };\n                this.currentFile = function() {\n                    var id = tabs.tabs('option', 'active');\n                    if (id in openFiles) {\n                        var file = openFiles[id];\n                        if (arguments.length === 0) {\n                            return file;\n                        }\n                        var action = arguments[0];\n                        if (typeof file[action] === 'function') {\n                            var fun = file[action];\n                            var args = Array.prototype.slice(arguments);\n                            args.shift();\n                            return fun.apply(file, args);\n                        }\n                    }\n                    return false;\n                };\n                this.currentPos = function() {\n                    return tabs.tabs('option', 'active');\n                };\n                this.getFileTab = function(id) {\n                    for (var i = 0; i < openFiles.length; i++) {\n                        if (openFiles[i].getId() == id) {\n                            return i;\n                        }\n                    }\n                    return -1;\n                };\n                this.getFilePosById = function(id) {\n                    for (var i = 0; i < files.length; i++) {\n                        if (files[i].getId() == id) {\n                            return i;\n                        }\n                    }\n                    return -1;\n                };\n                this.gotoFile = function(pos, l) {\n                    var file = files[pos];\n                    self.open(file);\n                    tabs.tabs('option', 'active', self.getFileTab(file.getId()));\n                    if (l !== 'c') {\n                        file.gotoLine(parseInt(l, 10));\n                    }\n                    file.focus();\n                };\n                this.gotoFileLink = function(a) {\n                    var tag = $(a);\n                    var fname = tag.data('file');\n                    var fpos = -1;\n                    if (fname > '') {\n                        fpos = this.fileNameExists(fname);\n                    } else {\n                        fpos = self.getFilePosById(tag.data('fileid'));\n                    }\n                    if (fpos >= 0) {\n                        var line = tag.data('line');\n                        if (typeof line == 'undefined') {\n                            line = 'c';\n                        }\n                        self.gotoFile(fpos, line);\n                        return true;\n                    }\n                    return false;\n                };\n                this.getFilesToSave = function() {\n                    var ret = [];\n                    for (var i = 0; i < files.length; i++) {\n                        var file = {};\n                        file.name = files[i].getFileName();\n                        file.contents = files[i].getContent();\n                        file.encoding = files[i].isBinary() ? 1 : 0;\n                        ret.push(file);\n                    }\n                    return ret;\n                };\n                this.resetModified = function() {\n                    modified = false;\n                    for (var i = 0; i < files.length; i++) {\n                        files[i].resetModified();\n                    }\n                    VPLUtil.delay('updateMenu', updateMenu);\n                    VPLUtil.delay('updateFileList', self.updateFileList);\n                };\n                this.setModified = function() {\n                    modified = true;\n                    VPLUtil.delay('updateFileList', self.updateFileList);\n                    VPLUtil.delay('updateMenu', updateMenu);\n                };\n                this.isModified = function() {\n                    return modified;\n                };\n                this.length = function() {\n                    return files.length;\n                };\n                this.clearAnnotations = function() {\n                    for (var i = 0; i < files.length; i++) {\n                        files[i].clearAnnotations();\n                    }\n                };\n                this.getFile = function(i) {\n                    return files[i];\n                };\n                this.getFiles = function() {\n                    return files;\n                };\n                this.getDirectoryStructure = function() {\n                    var structure = {\n                        isDir: true,\n                        content: {}\n                    };\n                    /**\n                     * Adds a new file the structure of directories\n                     * @param {int} i Index of file to add in the file array\n                     */\n                    function addFilePath(i) {\n                        var file = files[i];\n                        var fileName = file.getFileName();\n                        var path = fileName.split(\"/\");\n                        var curdir = structure;\n                        for (var p in path) {\n                            if (path.hasOwnProperty(p)) {\n                                var part = path[p];\n                                if (p == path.length - 1) { // File.\n                                    curdir.content[part] = {\n                                        isDir: false,\n                                        content: file,\n                                        pos: i\n                                    };\n                                } else {\n                                    if (!curdir.content[part]) { // New dir.\n                                        curdir.content[part] = {\n                                            isDir: true,\n                                            content: {}\n                                        };\n                                    }\n                                    // Descend Dir.\n                                    curdir = curdir.content[part];\n                                }\n                            }\n                        }\n                    }\n                    for (var i in files) {\n                        if (files.hasOwnProperty(i)) {\n                            addFilePath(i);\n                        }\n                    }\n                    return structure;\n                };\n                this.generateFileList = function() {\n                    if (!self.isFileListVisible()) {\n                        return;\n                    }\n                    var dirIndent = '<span class=\"vpl_ide_dirindent\"></span>';\n                    /**\n                     * Generates an array of string with the HTML code to represent the list of IDE files\n                     * @param {Object} dir Current directory\n                     * @param {int} indent Html code to indent subdirectories\n                     * @param {Array} lines Output. Each line contains the HTML to represent an IDE file\n                     */\n                    function lister(dir, indent, lines) {\n                        for (var name in dir.content) {\n                            if (dir.content.hasOwnProperty(name)) {\n                                var fd = dir.content[name];\n                                if (fd.isDir) {\n                                    lines.push(indent + VPLUtil.iconFolder() + VPLUtil.sanitizeText(name));\n                                    lister(fd, indent + dirIndent, lines);\n                                } else {\n                                    var file = fd.content;\n                                    var sname = VPLUtil.sanitizeText(name);\n                                    var path = VPLUtil.sanitizeText(file.getFileName());\n                                    if (file.isOpen()) {\n                                        sname = '<b>' + sname + '</b>';\n                                    }\n                                    var attrs = 'href=\"#\" data-fileid=\"' + file.getId() + '\" title=\"' + path + '\"';\n                                    var line = '<a ' + attrs + '>' + sname + '</a>';\n                                    if (file.isModified()) {\n                                        line = VPLUtil.iconModified() + line;\n                                    }\n                                    if (fd.pos < minNumberOfFiles) {\n                                        line = line + VPLUtil.iconRequired();\n                                    }\n                                    lines.push(indent + line);\n                                }\n                            }\n                        }\n                    }\n\n                    var structure = self.getDirectoryStructure();\n                    var lines = [];\n                    var html = '';\n                    lister(structure, '', lines);\n                    for (var i = 0; i < lines.length; i++) {\n                        html += lines[i] + '<br>';\n                    }\n                    fileListContent.html('<div>' + html + '</div>');\n                };\n                tabsUl.on('click', 'span.vpl_ide_closeicon', function() {\n                    fileManager.close(fileManager.currentFile());\n                });\n                tabsUl.on('dblclick', 'span.vpl_ide_closeicon', menuButtons.getAction('delete'));\n                tabsUl.on('dblclick', 'a', menuButtons.getAction('rename'));\n                fileListContent.on('dblclick', 'a', menuButtons.getAction('rename'));\n\n            }\n            this.updateEvaluationNumber = function(res) {\n                if (typeof res.nevaluations != 'undefined') {\n                    var text = res.nevaluations;\n                    if (typeof res.reductionbyevaluation != 'undefined'\n                         && res.reductionbyevaluation > ''\n                         && res.reductionbyevaluation != 0) {\n                        if (res.freeevaluations != 0) {\n                            text = text + '/' + res.freeevaluations;\n                        }\n                        text = text + ' -' + res.reductionbyevaluation;\n                    }\n                    menuButtons.setExtracontent('evaluate', text);\n                }\n            };\n            this.lastResult = null;\n            this.getTerminal = function() {\n                return terminal;\n            };\n            this.setResultGrade = function(content, raw) {\n                var name = 'grade';\n                var titleclass = 'vpl_ide_accordion_t_' + name;\n                var contentclass = 'vpl_ide_accordion_c_' + name;\n                if (result.find('.' + contentclass).length == 0) {\n                    result.append('<div class=\"' + titleclass + '\"></div>');\n                    result.append('<div class=\"' + contentclass + '\"></div>');\n                }\n                if (typeof raw == 'undefined') {\n                    return result.find('h4.' + titleclass).length > 0;\n                }\n                var titleTag = result.find('.' + titleclass);\n                if (content > '') {\n                    titleTag.replaceWith('<h4 class=\"' + titleclass + '\">' + content + '</h4>');\n                    return true;\n                } else {\n                    titleTag.replaceWith('<div class=\"' + titleclass + '\"></div>');\n                    return false;\n                }\n            };\n            this.setResultTab = function(name, content, raw) {\n                var titleclass = 'vpl_ide_accordion_t_' + name;\n                var contentclass = 'vpl_ide_accordion_c_' + name;\n                if (result.find('.' + contentclass).length == 0) {\n                    result.append('<div class=\"' + titleclass + '\"></div>');\n                    result.append('<div class=\"' + contentclass + '\"></div>');\n                }\n                if (typeof raw == 'undefined') {\n                    return result.find('h4.' + titleclass).length > 0;\n                }\n                var titleTag = result.find('.' + titleclass);\n                var contentTag = result.find('.' + contentclass);\n                var HTMLcontent = $('<div>' + content + '</div>');\n                HTMLcontent.find('h4').replaceWith(function() {\n                    return $(\"<h5>\").append($(this).contents());\n                });\n                if (contentTag.html() == HTMLcontent.html()) {\n                    return content > '';\n                }\n                if (content > '') {\n                    titleTag.replaceWith('<h4 class=\"' + titleclass + '\">' + str(name) + '</h4>');\n                    contentTag.replaceWith('<div class=\"ui-widget ' + contentclass + '\">' + HTMLcontent.html() + '</div>');\n                    return true;\n                } else {\n                    titleTag.replaceWith('<div class=\"' + titleclass + '\"></div>');\n                    contentTag.replaceWith('<div class=\"' + contentclass + '\"></div>');\n                    return false;\n                }\n            };\n            this.setResult = function(res, go) {\n                self.updateEvaluationNumber(res);\n                var files = fileManager.getFiles();\n                var fileNames = [];\n                var i;\n                for (i = 0; i < files.length; i++) {\n                    fileNames[i] = files[i].getFileName();\n                    files[i].clearAnnotations();\n                }\n                var show = false;\n                var hasContent;\n                var grade = VPLUtil.sanitizeText(res.grade);\n                var gradeShow;\n                var formated;\n                gradeShow = self.setResultGrade(grade, res.grade);\n                show = show || gradeShow;\n                hasContent = self.setResultTab('variables', res.variables, res.variables);\n                show = show || hasContent;\n                formated = VPLUtil.processResult(res.compilation, fileNames, files, true, false);\n                hasContent = self.setResultTab('compilation', formated, res.compilation);\n                show = show || hasContent;\n                formated = VPLUtil.processResult(res.evaluation, fileNames, files, false, false);\n                hasContent = self.setResultTab('comments', formated, res.evaluation);\n                show = show || hasContent;\n                formated = VPLUtil.sanitizeText(res.execution);\n                hasContent = self.setResultTab('execution', formated, res.execution);\n                show = show || hasContent;\n                hasContent = self.setResultTab('description', window.VPLDescription, window.VPLDescription);\n                if (hasContent && typeof MathJax == 'object') { // MathJax workaround.\n                    var math = result.find(\".vpl_ide_accordion_c_description\")[0];\n                    MathJax.Hub.Queue([\"Typeset\", MathJax.Hub, math]);\n                }\n                show = show || hasContent;\n                if (show) {\n                    resultContainer.show();\n                    resultContainer.vplVisible = true;\n                    result.accordion(\"refresh\");\n                    result.accordion('option', 'active', gradeShow ? 1 : 0);\n                    for (i = 0; i < files.length; i++) {\n                        var anot = files[i].getAnnotations();\n                        for (var j = 0; j < anot.length; j++) {\n                            if (go || anot[j].type == 'error') {\n                                fileManager.gotoFile(i, anot[j].row + 1);\n                                break;\n                            }\n                        }\n                    }\n                } else {\n                    resultContainer.hide();\n                    resultContainer.vplVisible = false;\n                }\n                VPLUtil.delay('autoResizeTab', autoResizeTab);\n            };\n\n            result.accordion({\n                heightStyle: 'fill',\n                header: 'h4',\n                animate: false,\n                beforeActivate: avoidSelectGrade,\n            });\n            resultContainer.width(2 * resultContainer.vplMinWidth);\n            result.on('click', 'a', function(event) {\n                if (fileManager.gotoFileLink(event.currentTarget)) {\n                    event.preventDefault();\n                }\n            });\n            resultContainer.vplVisible = false;\n            resultContainer.hide();\n\n            fileListContainer.addClass('ui-tabs ui-widget ui-widget-content ui-corner-all');\n            fileList.text(str('filelist'));\n            fileList.html(VPLUtil.iconFolder() + fileList.html());\n            fileList.addClass(\"ui-widget-header ui-button-text-only ui-corner-all\");\n            fileListContent.addClass(\"ui-widget ui-corner-all\");\n            fileListContainer.width(2 * fileListContainer.vplMinWidth);\n            fileListContainer.on('click', 'a', function(event) {\n                event.preventDefault();\n                fileManager.gotoFileLink(event.currentTarget);\n            });\n            fileListContainer.vplVisible = false;\n            fileListContainer.hide();\n            var tabsAir = false;\n            /**\n             * Returns separation space\n             * @returns {int} size in pixels\n             */\n            function getTabsAir() {\n                if (tabsAir === false) {\n                    tabsAir = (tabs.outerWidth(true) - tabs.width()) / 2;\n                }\n                return tabsAir;\n            }\n            /**\n             * Resize tab width\n             * @param {Event} e Unused\n             * @param {Object} ui UI object\n             */\n            function resizeTabWidth(e, ui) {\n                var diffLeft = ui.position.left - ui.originalPosition.left;\n                var maxWidth;\n                if (diffLeft !== 0) {\n                    maxWidth = tabs.width() + fileListContainer.width() - fileListContainer.vplMinWidth;\n                    tabs.resizable('option', 'maxWidth', maxWidth);\n                    fileListContainer.width(fileListContainer.vplOriginalWidth + diffLeft);\n                } else {\n                    maxWidth = tabs.width() + resultContainer.width() - resultContainer.vplMinWidth;\n                    tabs.resizable('option', 'maxWidth', maxWidth);\n                    var diffWidth = ui.size.width - ui.originalSize.width;\n                    resultContainer.width(resultContainer.vplOriginalWidth - diffWidth);\n                }\n                fileManager.currentFile('adjustSize');\n            }\n            var resizableOptions = {\n                containment: 'parent',\n                resize: resizeTabWidth,\n                start: function() {\n                    $(window).off('resize', autoResizeTab);\n                    tabs.resizable('option', 'minWidth', 100);\n                    if (resultContainer.vplVisible) {\n                        resultContainer.vplOriginalWidth = resultContainer.width();\n                    }\n                    if (fileListContainer.vplVisible) {\n                        fileListContainer.vplOriginalWidth = fileListContainer.width();\n                    }\n                },\n                stop: function(e, ui) {\n                    resizeTabWidth(e, ui);\n                    tabs.resizable('option', 'maxWidth', 100000);\n                    tabs.resizable('option', 'minWidth', 0);\n                    autoResizeTab();\n                    $(window).on('resize', autoResizeTab);\n                },\n                handles: \"\"\n            };\n            tabs.resizable(resizableOptions);\n             /**\n              * Updates handles for internal IDE resize\n              */\n            function updateTabsHandles() {\n                var handles = ['e', 'w', 'e', 'e, w'];\n                var index = 0;\n                index += fileListContainer.vplVisible ? 1 : 0;\n                index += resultContainer.vplVisible ? 2 : 0;\n                tabs.resizable('destroy');\n                resizableOptions.handles = handles[index];\n                resizableOptions.disable = index === 0;\n                tabs.resizable(resizableOptions);\n            }\n            /**\n             * Resize the IDE height\n             */\n            function resizeHeight() {\n                var newHeight = $(window).outerHeight();\n                newHeight -= menu.offset().top + menu.height() + (fullScreen ? getTabsAir() : 20);\n                if (newHeight < 150) {\n                    newHeight = 150;\n                }\n                tr.height(newHeight);\n                var panelHeight = newHeight - 3 * getTabsAir();\n                tabs.height(panelHeight);\n                if (resultContainer.vplVisible) {\n                    resultContainer.height(panelHeight + getTabsAir());\n                    result.accordion('refresh');\n                }\n                if (fileListContainer.vplVisible) {\n                    fileListContent.height(panelHeight - (fileList.outerHeight() + getTabsAir()));\n                    fileListContainer.height(panelHeight);\n                }\n            }\n            adjustTabsTitles = function(center) {\n                var newWidth = tabs.width();\n                var tabsUlWidth = 0;\n                tabsUl.width(100000);\n                var last = tabsUl.children('li:visible').last();\n                if (last.length) {\n                    var parentScrollLeft = tabsUl.parent().scrollLeft();\n                    tabsUlWidth = parentScrollLeft + last.position().left + last.width() + tabsAir;\n                    tabsUl.width(tabsUlWidth);\n                    var file = fileManager.currentFile();\n                    if (file && center) {\n                        var fileTab = $(file.getTabNameId());\n                        var scroll = parentScrollLeft + fileTab.position().left;\n                        scroll -= (newWidth - fileTab.outerWidth()) / 2;\n                        if (scroll < 0) {\n                            scroll = 0;\n                        }\n                        tabsUl.parent().finish().animate({\n                            scrollLeft: scroll\n                        }, 'slow');\n                    }\n                }\n                if (tabsUlWidth < newWidth) {\n                    tabsUl.width('');\n                }\n            };\n            autoResizeTab = function() {\n                var oldWidth = tabs.width();\n                var newWidth = menu.width();\n                var planb = false;\n                updateTabsHandles();\n                tr.width(menu.outerWidth());\n                if (fileListContainer.vplVisible) {\n                    var left = fileListContainer.outerWidth() + tabsAir;\n                    oldWidth += left;\n                    if (left >= 100) {\n                        newWidth -= left;\n                        tabs.css('left', left);\n                    } else {\n                        planb = true;\n                    }\n                } else {\n                    tabs.css('left', 0);\n                }\n                if (resultContainer.vplVisible) {\n                    var rigth = resultContainer.outerWidth() + tabsAir;\n                    oldWidth += rigth;\n                    newWidth -= rigth;\n                    if (newWidth < 100) {\n                        planb = true;\n                    }\n                }\n                if (planb) {\n                    var rel = menu.width() / oldWidth;\n                    var wfl = 0;\n                    if (fileListContainer.vplVisible) {\n                        wfl = fileListContainer.width() * rel;\n                        fileListContainer.width(wfl - tabsAir);\n                        wfl += tabsAir;\n                        tabs.css('left', wfl);\n                    }\n                    tabs.width(tabs.width() * rel);\n                    if (resultContainer.vplVisible) {\n                        resultContainer.width(menu.width() - (wfl + tabs.width() + tabsAir));\n                    }\n                } else {\n                    tabs.width(newWidth);\n                }\n                adjustTabsTitles(true);\n                resizeHeight();\n                fileManager.currentFile('adjustSize');\n            };\n            /**\n             * Transfer focus to current file\n             */\n            function focusCurrentFile() {\n                fileManager.currentFile('focus');\n            }\n            var dialogbaseOptions = $.extend({}, {\n                close: focusCurrentFile\n            }, VPLUtil.dialogbaseOptions);\n            /**\n             * Shows a dialog with a message.\n             * @param {string} message\n             * @param {Object} options icon, title, actions handler (ok, yes, no, close)\n             * @returns {JQuery} JQueryUI Dialog object already open\n             */\n            function showMessage(message, options) {\n                return VPLUtil.showMessage(message, $.extend({}, dialogbaseOptions, options));\n            }\n            showErrorMessage = function(message) {\n                return VPLUtil.showErrorMessage(message, {\n                    close: focusCurrentFile\n                });\n            };\n\n            var dialogNew = $('#vpl_ide_dialog_new');\n            /**\n             * The event handler for the new file action\n             * @param {Object} event\n             * @return {boolean}\n             */\n            function newFileHandler(event) {\n                if (!(event.type == 'click' || ((event.type == 'keypress') && event.keyCode == 13))) {\n                    return true;\n                }\n                dialogNew.dialog('close');\n                var file = {\n                    name: $('#vpl_ide_input_newfilename').val(),\n                    contents: '',\n                    encoding: 0\n                };\n                var newfile = fileManager.addFile(file, false, updateMenu, showErrorMessage);\n                if (newfile) {\n                    fileManager.open(newfile);\n                    tabs.tabs('option', 'active', fileManager.getTabPos(newfile));\n                    newfile.focus();\n                    return true;\n                }\n                return false;\n            }\n\n            var dialogButtons = {};\n            dialogButtons[str('ok')] = newFileHandler;\n            dialogButtons[str('cancel')] = function() {\n                $(this).dialog('close');\n            };\n            dialogNew.find('input').on('keypress', newFileHandler);\n            dialogNew.dialog($.extend({}, dialogbaseOptions, {\n                title: str('create_new_file'),\n                buttons: dialogButtons\n            }));\n            VPLUtil.setDialogTitleIcon(dialogNew, 'new');\n\n            var dialogRename = $('#vpl_ide_dialog_rename');\n            /**\n             * The event handler for the rename current file action\n             * @param {Object} event\n             */\n            function renameHandler(event) {\n                if (!(event.type == 'click' || ((event.type == 'keypress') && event.keyCode == 13))) {\n                    return;\n                }\n                dialogRename.dialog('close');\n                fileManager.renameFile(fileManager.currentFile('getFileName'),\n                        $('#vpl_ide_input_renamefilename').val(), showErrorMessage);\n                event.preventDefault();\n            }\n            dialogRename.find('input').on('keypress', renameHandler);\n            dialogButtons[str('ok')] = renameHandler;\n            dialogRename.dialog($.extend({}, dialogbaseOptions, {\n                open: function() {\n                    $('#vpl_ide_input_renamefilename').val(fileManager.currentFile('getFileName'));\n                },\n                title: str('rename_file'),\n                buttons: dialogButtons\n            }));\n            VPLUtil.setDialogTitleIcon(dialogRename, 'rename');\n\n            dialogButtons[str('ok')] = function() {\n                $(this).dialog('close');\n            };\n            var dialogComments = $('#vpl_ide_dialog_comments');\n            dialogComments.dialog($.extend({}, dialogbaseOptions, {\n                title: str('comments'),\n                width: '40em',\n                buttons: dialogButtons\n            }));\n            VPLUtil.setDialogTitleIcon(dialogComments, 'comments');\n\n            $('#vpl_ide_input_comments').width('30em');\n            var aboutDialog = $('#vpl_ide_dialog_about');\n            var OKButtons = {};\n            OKButtons[str('ok')] = function() {\n                $(this).dialog('close');\n            };\n            var shortcutDialog = $('#vpl_ide_dialog_shortcuts');\n            shortcutDialog.dialog($.extend({}, dialogbaseOptions, {\n                open: function() {\n                    var html = menuButtons.getShortcuts(fileManager.currentFile('getEditor'));\n                    $('#vpl_ide_dialog_shortcuts').html(html);\n                },\n                title: str('shortcuts'),\n                width: 400,\n                height: 300,\n                buttons: OKButtons\n            }));\n            shortcutDialog.dialog('option', 'height', 300);\n            VPLUtil.setDialogTitleIcon(shortcutDialog, 'shortcuts');\n\n            OKButtons[str('shortcuts')] = function() {\n                $(this).dialog('close');\n                shortcutDialog.dialog('open');\n            };\n            aboutDialog.dialog($.extend({}, dialogbaseOptions, {\n                open: function() {\n                    var html = menuButtons.getShortcuts(fileManager.currentFile('getEditor'));\n                    aboutDialog.next().find(\"button\").filter(\n                        function() {\n                            return $(this).text() == str('shortcuts');\n                        }\n                  ).button(html != '' ? 'enable' : 'disable');\n                },\n                title: str('about'),\n                width: 400,\n                height: 300,\n                buttons: OKButtons\n            }));\n            aboutDialog.dialog('option', 'height', 300);\n            VPLUtil.setDialogTitleIcon(aboutDialog, 'about');\n\n            var dialogSort = $('#vpl_ide_dialog_sort');\n            var dialogSortButtons = {};\n            dialogSortButtons[str('ok')] = function() {\n                var files = fileManager.getFiles();\n                var regNoNumber = /[^\\d]*/;\n                var sorted = [];\n                var i = 0;\n                var newOrder = $('#vpl_sort_list li');\n                if (newOrder.length != files.length) {\n                    return;\n                }\n                newOrder.each(function() {\n                    var orig = parseInt(this.id.replace(regNoNumber, ''));\n                    sorted.push(files[orig]);\n                });\n                for (i = 0; i < newOrder.length; i++) {\n                    files[i] = sorted[i];\n                }\n                fileManager.setModified();\n                $(this).dialog('close');\n            };\n            dialogSortButtons[str('cancel')] = function() {\n                $(this).dialog('close');\n            };\n            dialogSort.dialog($.extend({}, dialogbaseOptions, {\n                title: str('sort'),\n                buttons: dialogSortButtons,\n                open: function() {\n                    var list = $('#vpl_sort_list');\n                    list.html('');\n                    var files = fileManager.getFiles();\n                    for (var i = 0; i < files.length; i++) {\n                        var file = $('<li id=\"vpl_fsort_' + i + '\"class=\"ui-widget-content\"></li>');\n                        if (i < minNumberOfFiles) {\n                            file.addClass('ui-state-disabled');\n                        }\n                        file.text((i + 1) + '-' + files[i].getFileName());\n                        list.append(file);\n                    }\n                    list.sortable({\n                        items: \"li:not(.ui-state-disabled)\",\n                        placeholder: \"ui-state-highlight\",\n                        start: function(event, ui) {\n                            ui.item.addClass('ui-state-highlight');\n                        },\n                        stop: function(event, ui) {\n                            ui.item.removeClass('ui-state-highlight');\n                        },\n                    });\n                    list.disableSelection();\n                },\n                maxHeight: 400\n            }));\n            VPLUtil.setDialogTitleIcon(dialogSort, 'sort');\n\n            var dialogMultidelete = $('#vpl_ide_dialog_multidelete');\n            var dialogMultideleteButtons = {};\n            dialogMultideleteButtons[str('selectall')] = function() {\n                $(this).find('input').prop(\"checked\", true);\n            };\n            dialogMultideleteButtons[str('deselectall')] = function() {\n                $(this).find('input').prop(\"checked\", false);\n            };\n            dialogMultideleteButtons[str('deleteselected')] = function() {\n                var files = fileManager.getFiles();\n                var toDeleteList = [];\n                var labelList = $('#vpl_multidelete_list label');\n                labelList.each(function() {\n                    var label = $(this);\n                    if (label.find('input').prop('checked')) {\n                        var id = label.data('fileid');\n                        toDeleteList.push(files[id].getFileName());\n                    }\n                });\n                for (var i = 0; i < toDeleteList.length; i++) {\n                    fileManager.deleteFile(toDeleteList[i], false, showErrorMessage);\n                }\n                VPLUtil.delay('updateMenu', updateMenu);\n                VPLUtil.delay('updateFileList', fileManager.updateFileList);\n                $(this).dialog('close');\n            };\n            dialogMultideleteButtons[str('cancel')] = function() {\n                $(this).dialog('close');\n            };\n            dialogMultidelete.dialog($.extend({}, dialogbaseOptions, {\n                title: str('multidelete'),\n                buttons: dialogMultideleteButtons,\n                open: function() {\n                    var list = $('#vpl_multidelete_list');\n                    list.html('');\n                    var files = fileManager.getFiles();\n                    for (var i = minNumberOfFiles; i < files.length; i++) {\n                        var name = VPLUtil.sanitizeText(files[i].getFileName());\n                        var file = $('<label><input type=\"checkbox\"> ' + name + '</label>');\n                        file.data('fileid', i);\n                        list.append(file);\n                        list.append('<br>');\n                    }\n                    list.find('label').button();\n                },\n                maxHeight: 400,\n                maxWidth: 400\n            }));\n            VPLUtil.setDialogTitleIcon(dialogMultidelete, 'multidelete');\n\n            var dialogFontsize = $('#vpl_ide_dialog_fontsize');\n            var fontsizeSlider = $('#vpl_ide_dialog_fontsize .vpl_fontsize_slider');\n            var dialogFontFizeButtons = {};\n            dialogFontFizeButtons[str('ok')] = function() {\n                var value = fontsizeSlider.slider(\"value\");\n                fileManager.setFontSize(value);\n                $(this).dialog('close');\n                $.ajax({\n                    async: true,\n                    type: \"POST\",\n                    url: '../editor/userpreferences.json.php',\n                    'data': JSON.stringify({fontSize: value}),\n                    contentType: \"application/json; charset=utf-8\",\n                    dataType: \"json\"\n                });\n            };\n            dialogFontFizeButtons[str('cancel')] = function() {\n                fileManager.setFontSize(fontsizeSlider.data(\"vpl_fontsize\"));\n                $(this).dialog('close');\n            };\n            dialogFontFizeButtons[str('reset')] = function() {\n                fontsizeSlider.slider('value', 12);\n            };\n            dialogFontsize.dialog($.extend({}, dialogbaseOptions, {\n                title: str('fontsize'),\n                buttons: dialogFontFizeButtons,\n                open: function() {\n                    fontsizeSlider.data(\"vpl_fontsize\", fileManager.getFontSize());\n                    fontsizeSlider.slider('value', fileManager.getFontSize());\n                },\n            }));\n            fontsizeSlider.slider({\n                min: 1,\n                max: 48,\n                change: function() {\n                    var value = fontsizeSlider.slider(\"value\");\n                    fileManager.setFontSize(value);\n                    dialogFontsize.find('.vpl_fontsize_slider_value').text(value);\n                }\n            });\n            VPLUtil.setDialogTitleIcon(dialogFontsize, 'fontsize');\n\n            var dialogAceTheme = $('#vpl_ide_dialog_acetheme');\n            var acethemeSelect = $('#vpl_ide_dialog_acetheme select');\n            var dialogAceThemeButtons = {};\n            dialogAceThemeButtons[str('ok')] = function() {\n                fileManager.setTheme(acethemeSelect.val());\n                $(this).dialog('close');\n                VPLUtil.setUserPreferences({aceTheme: acethemeSelect.val()});\n            };\n            dialogAceThemeButtons[str('cancel')] = function() {\n                fileManager.setTheme(acethemeSelect.data(\"acetheme\"));\n                $(this).dialog('close');\n            };\n            dialogAceThemeButtons[str('reset')] = function() {\n                acethemeSelect.val(acethemeSelect.data(\"acetheme\"));\n                fileManager.setTheme(acethemeSelect.val());\n            };\n            dialogAceTheme.dialog($.extend({}, dialogbaseOptions, {\n                title: str('theme'),\n                buttons: dialogAceThemeButtons,\n                modal: false,\n                open: function() {\n                    acethemeSelect.data(\"acetheme\", fileManager.getTheme());\n                    acethemeSelect.val(fileManager.getTheme());\n                },\n            }));\n            acethemeSelect.on('change', function() {\n                    fileManager.setTheme(acethemeSelect.val());\n            });\n            VPLUtil.setDialogTitleIcon(dialogAceTheme, 'theme');\n\n            var terminal = new VPLTerminal('vpl_dialog_terminal', 'vpl_terminal', str);\n            var VNCClient = new VPLVNCClient('vpl_dialog_vnc', str);\n            var lastConsole = terminal;\n            var fileSelect = $('#vpl_ide_input_file');\n            var fileSelectHandler = function() {\n                VPLUtil.readSelectedFiles(this.files, function(file) {\n                    return fileManager.addFile(file, true, updateMenu, showErrorMessage);\n                },\n                function() {\n                    fileManager.fileListVisibleIfNeeded();\n                });\n            };\n            fileSelect.on('change', fileSelectHandler);\n            // Menu acctions.\n            menuButtons.add({\n                name: 'filelist',\n                originalAction: function() {\n                    fileManager.fileListVisible(!fileManager.isFileListVisible());\n                    VPLUtil.delay('updateMenu', updateMenu);\n                    VPLUtil.delay('autoResizeTab', autoResizeTab);\n                    VPLUtil.delay('updateFileList', fileManager.updateFileList);\n                },\n                bindKey: {\n                    win: 'Ctrl-L',\n                    mac: 'Ctrl-L'\n                }\n            });\n\n            menuButtons.add({\n                name: 'new',\n                originalAction: function() {\n                    if (fileManager.length() < maxNumberOfFiles) {\n                        dialogNew.dialog('open');\n                    }\n                },\n                bindKey: {\n                    win: 'Alt-N',\n                    mac: 'Option-N'\n                }\n            });\n            menuButtons.add({\n                name: 'rename',\n                originalAction: function() {\n                    var file = fileManager.currentFile();\n                    if (file && fileManager.getFilePosById(file.getId()) >= minNumberOfFiles) {\n                        dialogRename.dialog('open');\n                    }\n                },\n                bindKey: {\n                    win: 'Ctrl-R',\n                    mac: 'Ctrl-R'\n                }\n            });\n            menuButtons.add({\n                name: 'delete',\n                originalAction: function() {\n                    var file = fileManager.currentFile();\n                    if (!file) {\n                        return;\n                    }\n                    var filename = file.getFileName();\n                    var message = str('delete_file_fq', filename);\n                    showMessage(message, {\n                        ok: function() {\n                            fileManager.deleteFile(filename, showErrorMessage);\n                        },\n                        title: str('delete_file_q'),\n                        icon: 'trash'\n                    });\n                },\n                bindKey: {\n                    win: 'Ctrl-D',\n                    mac: 'Ctrl-D'\n                }\n            });\n            menuButtons.add({\n                name: 'close',\n                originalAction: function() {\n                    var file = fileManager.currentFile();\n                    if (!file) {\n                        return;\n                    }\n                    fileManager.close(file);\n                },\n                bindKey: {\n                    win: 'Alt-W',\n                    mac: 'Option-W'\n                }\n            });\n            menuButtons.add({\n                name: 'import',\n                originalAction: function() {\n                    fileSelect.val('');\n                    fileSelect.trigger('click');\n                },\n                bindKey: {\n                    win: 'Ctrl-I',\n                    mac: 'Ctrl-I'\n                }\n            });\n            menuButtons.add({\n                name: 'sort',\n                originalAction: function() {\n                    dialogSort.dialog('open');\n                },\n                bindKey: {\n                    win: 'Ctrl-O',\n                    mac: 'Ctrl-O'\n                }\n            });\n            menuButtons.add({\n                name: 'multidelete',\n                originalAction: function() {\n                    dialogMultidelete.dialog('open');\n                }\n            });\n            menuButtons.add({\n                name: 'fontsize',\n                originalAction: function() {\n                    dialogFontsize.dialog('open');\n                }\n            });\n            menuButtons.add({\n                name: 'theme',\n                originalAction: function() {\n                    dialogAceTheme.dialog('open');\n                }\n            });\n            menuButtons.add({\n                name: 'print',\n                originalAction: function() {\n                    window.print();\n                },\n                bindKey: {\n                    win: 'Alt-P',\n                    mac: 'Command-P'\n                }\n            });\n            menuButtons.add({\n                name: 'undo',\n                originalAction: function() {\n                    fileManager.currentFile('undo');\n                }\n            });\n            menuButtons.add({\n                name: 'redo',\n                originalAction: function() {\n                    fileManager.currentFile('redo');\n                }\n            });\n            menuButtons.add({\n                name: 'select_all',\n                editorName: 'selectall',\n                originalAction: function() {\n                    fileManager.currentFile('selectAll');\n                }\n            });\n            menuButtons.add({\n                name: 'find',\n                originalAction: function() {\n                    fileManager.currentFile('find');\n                }\n            });\n            menuButtons.add({\n                name: 'find_replace',\n                editorName: 'replace',\n                originalAction: function() {\n                    fileManager.currentFile('replace');\n                }\n            });\n            menuButtons.add({\n                name: 'next',\n                editorName: 'findnext',\n                originalAction: function() {\n                    fileManager.currentFile('next');\n                }\n            });\n            menuButtons.add({\n                name: 'fullscreen',\n                originalAction: function() {\n                    var tags = 'header, nav, footer, aside, .dropdown, #page-header, div.navbar, #nav-drawer';\n                    tags += ', div.tabtree, #dock, .breadcrumb-nav, .moodle-actionmenu';\n                    if (fullScreen) {\n                        rootObj.removeClass('vpl_ide_root_fullscreen');\n                        $('body').removeClass('vpl_body_fullscreen');\n                        menuButtons.setText('fullscreen', 'fullscreen');\n                        $(tags).show();\n                        $('#vpl_ide_user').hide();\n                        fullScreen = false;\n                    } else {\n                        $('body').addClass('vpl_body_fullscreen').scrollTop(0);\n                        $(tags).hide();\n                        rootObj.addClass('vpl_ide_root_fullscreen');\n                        menuButtons.setText('fullscreen', 'regularscreen');\n                        if (options.username) {\n                            $('#vpl_ide_user').show();\n                        }\n                        fullScreen = true;\n                    }\n                    focusCurrentFile();\n                    setTimeout(autoResizeTab, 10);\n                },\n                bindKey: {\n                    win: 'Alt-F',\n                    mac: 'Ctrl-F'\n                }\n            });\n            menuButtons.add({\n                name: 'download',\n                originalAction: function() {\n                    window.location = options.download;\n                }\n            });\n            /**\n             * Reset files action\n             */\n            function resetFiles() {\n                VPLUtil.requestAction('resetfiles', '', {}, options.ajaxurl)\n                .done(function(response) {\n                    var files = response.files;\n                    for (var fileName in files) {\n                        if (files.hasOwnProperty(fileName)) {\n                            fileManager.addFile(files[fileName], true, VPLUtil.doNothing, showErrorMessage);\n                        }\n                    }\n                    fileManager.fileListVisibleIfNeeded();\n                    VPLUtil.delay('updateMenu', updateMenu);\n                }).fail(showErrorMessage);\n            }\n            menuButtons.add({\n                name: 'resetfiles',\n                originalAction: function() {\n                    showMessage(str('sureresetfiles'), {\n                        title: str('resetfiles'),\n                        ok: resetFiles,\n                        icon: 'resetfiles'\n                    });\n                }\n            });\n            menuButtons.add({\n                name: 'save',\n                originalAction: function() {\n                    var data = {\n                        files: fileManager.getFilesToSave(),\n                        comments: $('#vpl_ide_input_comments').val(),\n                        version: fileManager.getVersion()\n                    };\n                    if (JSON.stringify(data).length > options.postMaxSize) {\n                        showErrorMessage(str('maxpostsizeexceeded'));\n                        return;\n                    }\n                    /**\n                     * Save action\n                     */\n                    function doSave() {\n                        VPLUtil.requestAction('save', 'saving', data, options.ajaxurl)\n                        .done(function(response) {\n                            if (response.requestsconfirmation) {\n                                showMessage(response.question, {\n                                    title: str('saving'),\n                                    icon: 'alert',\n                                    yes: function() {\n                                        data.version = response.version;\n                                        doSave();\n                                    }\n                                });\n                            } else {\n                                fileManager.resetModified();\n                                fileManager.setVersion(response.version);\n                                menuButtons.setTimeLeft(response);\n                                VPLUtil.delay('updateMenu', updateMenu);\n                                if (VPLUtil.monitorRunning()) {\n                                    data.processid = VPLUtil.getProcessId();\n                                    VPLUtil.requestAction('update', 'updating', data, options.ajaxurl);\n                                }\n                            }\n                        }).fail(showErrorMessage);\n                    }\n                    doSave();\n                },\n                bindKey: {\n                    win: 'Ctrl-S',\n                    mac: 'Command-S'\n                }\n            });\n\n            /**\n             * Launches the action\n             *\n             * @param {string} action Action 'run', 'debug', 'evaluate'\n             * @param {string} acting I18n for the action in progress\n             * @param {string} data Data attached to the action\n             */\n            function executionRequest(action, acting, data) {\n                if (!data) {\n                    data = {};\n                }\n                if (!lastConsole.isConnected()) {\n                    VPLUtil.requestAction(action, '', data, options.ajaxurl)\n                    .done(function(response) {\n                        VPLUtil.webSocketMonitor(response, action, acting, executionActions);\n                    })\n                    .fail(showErrorMessage);\n                }\n            }\n            /**\n             * Launches the run action\n             */\n            function runAction() {\n                executionRequest('run', 'running', {\n                    XGEOMETRY: VNCClient.getCanvasSize()\n                });\n            }\n            menuButtons.add({\n                name: 'run',\n                originalAction: function() {\n                    executionActions.setLastAction(runAction);\n                    runAction();\n                },\n                bindKey: {\n                    win: 'Ctrl-F11',\n                    mac: 'Command-U'\n                }\n            });\n            /**\n             * Launches the debug action\n             */\n            function debugAction() {\n                executionRequest('debug', 'debugging', {\n                    XGEOMETRY: VNCClient.getCanvasSize()\n                });\n            }\n            menuButtons.add({\n                name: 'debug',\n                originalAction: function() {\n                    executionActions.setLastAction(debugAction);\n                    debugAction();\n                },\n                bindKey: {\n                    win: 'Alt-F11',\n                    mac: 'Option-U'\n                }\n            });\n            /**\n             * Launches the evaluate action\n             */\n            function evaluateAction() {\n                executionRequest('evaluate', 'evaluating');\n            }\n            menuButtons.add({\n                name: 'evaluate',\n                originalAction: function() {\n                    executionActions.setLastAction(evaluateAction);\n                    evaluateAction();\n                },\n                bindKey: {\n                    win: 'Shift-F11',\n                    mac: 'Command-Option-U'\n                }\n            });\n            menuButtons.add({\n                name: 'comments',\n                originalAction: function() {\n                    dialogComments.dialog('open');\n                },\n            });\n            menuButtons.add({\n                name: 'console',\n                originalAction: function() {\n                    if (lastConsole.isOpen()) {\n                        lastConsole.close();\n                    } else {\n                        lastConsole.show();\n                    }\n                }\n            });\n            menuButtons.add({name: 'user'});\n            menuButtons.add({\n                name: 'about',\n                originalAction: function() {\n                    aboutDialog.dialog('open');\n                }\n            });\n            menuButtons.add({\n                name: 'timeleft',\n                originalAction: function() {\n                    menuButtons.toggleTimeLeft();\n                }\n            });\n            menuButtons.add({\n                name: 'more',\n                originalAction: function() {\n                    var tag = $('#vpl_ide_menuextra');\n                    if (tag.is(\":visible\")) {\n                        menuButtons.setText('more', 'more', VPLUtil.str('more'));\n                        tag.hide();\n                    } else {\n                        menuButtons.setText('more', 'less', VPLUtil.str('less'));\n                        tag.show();\n                    }\n                    VPLUtil.delay('updateMenu', updateMenu);\n                    VPLUtil.delay('autoResizeTab', autoResizeTab);\n                }\n            });\n            menu.addClass(\"ui-widget-header ui-corner-all\");\n            var menuHtml = \"\";\n            menuHtml += menuButtons.getHTML('more');\n            menuHtml += menuButtons.getHTML('save');\n            menuHtml += \"<span id='vpl_ide_mexecution'>\";\n            menuHtml += menuButtons.getHTML('run');\n            menuHtml += menuButtons.getHTML('debug');\n            menuHtml += menuButtons.getHTML('evaluate');\n            menuHtml += menuButtons.getHTML('comments');\n            menuHtml += menuButtons.getHTML('console');\n            menuHtml += \"</span> \";\n            menuHtml += \"<span id='vpl_ide_menuextra'>\";\n            menuHtml += \"<span id='vpl_ide_file'>\";\n            // TODO autosave not implemented.\n            menuHtml += menuButtons.getHTML('filelist');\n            menuHtml += menuButtons.getHTML('new');\n            menuHtml += menuButtons.getHTML('rename');\n            menuHtml += menuButtons.getHTML('delete');\n            menuHtml += menuButtons.getHTML('import');\n            menuHtml += menuButtons.getHTML('download');\n            menuHtml += menuButtons.getHTML('resetfiles');\n            menuHtml += menuButtons.getHTML('sort');\n            menuHtml += menuButtons.getHTML('multidelete');\n            menuHtml += menuButtons.getHTML('fontsize');\n            menuHtml += menuButtons.getHTML('theme');\n            menuHtml += \"</span> \";\n            // TODO print still not implemented.\n            menuHtml += \"<span id='vpl_ide_edit'>\";\n            menuHtml += menuButtons.getHTML('undo');\n            menuHtml += menuButtons.getHTML('redo');\n            menuHtml += menuButtons.getHTML('select_all');\n            menuHtml += menuButtons.getHTML('find');\n            menuHtml += menuButtons.getHTML('find_replace');\n            menuHtml += menuButtons.getHTML('next');\n            menuHtml += \"</span> \";\n            menuHtml += \"</span> \";\n            menuHtml += menuButtons.getHTML('fullscreen') + ' ';\n            menuHtml += menuButtons.getHTML('about') + ' ';\n            menuHtml += menuButtons.getHTML('user') + ' ';\n            menuHtml += menuButtons.getHTML('timeleft');\n            menuHtml += '<div class=\"clearfix\"></div>';\n            menu.append(menuHtml);\n            $('#vpl_ide_more').button();\n            $('#vpl_ide_save').button();\n            $('#vpl_ide_menuextra').hide();\n            $('#vpl_ide_file').controlgroup();\n            $('#vpl_ide_edit').controlgroup();\n            $('#vpl_ide_mexecution').controlgroup();\n            $('#vpl_ide_fullscreen').button();\n            $('#vpl_ide_acetheme').button();\n            $('#vpl_ide_about').button();\n            $('#vpl_ide_user').button().css('float', 'right').hide();\n            $('#vpl_ide_timeleft').button().css('float', 'right').hide();\n            $('#vpl_menu .ui-button').css('padding', '6px');\n            $('#vpl_menu .ui-button-text').css('padding', '0');\n            var alwaysActive = ['filelist', 'more', 'fullscreen', 'about', 'resetfiles',\n                                'download', 'comments', 'console', 'import',\n                                'fontsize', 'timeleft'];\n            for (var i = 0; i < alwaysActive.length; i++) {\n                menuButtons.enable(alwaysActive[i], true);\n            }\n            menuButtons.setExtracontent('user', options.username);\n            menuButtons.setTimeLeft(options);\n            updateMenu = function() {\n                var i;\n                var file = fileManager.currentFile();\n                var nfiles = fileManager.length();\n                if (nfiles) {\n                    tabs.show();\n                } else {\n                    tabs.hide();\n                }\n                if (fileManager.isFileListVisible()) {\n                    menuButtons.setText('filelist', 'filelistclose', VPLUtil.str('filelist'));\n                } else {\n                    menuButtons.setText('filelist', 'filelist', VPLUtil.str('filelist'));\n                }\n                var modified = fileManager.isModified();\n                menuButtons.enable('save', modified);\n                var running = VPLUtil.monitorRunning();\n                if (running) {\n                    menuButtons.setText('run', 'running');\n                } else {\n                    menuButtons.setText('run', 'run');\n                }\n                menuButtons.enable('run', !running && (!modified || options.example) && isOptionAllowed('run'));\n                menuButtons.enable('debug', !running && (!modified || options.example) && isOptionAllowed('debug'));\n                menuButtons.enable('evaluate', !running && (!modified || options.example) && isOptionAllowed('evaluate'));\n                menuButtons.enable('download', !modified);\n                menuButtons.enable('new', nfiles < maxNumberOfFiles);\n                menuButtons.enable('sort', nfiles - minNumberOfFiles > 1);\n                menuButtons.enable('multidelete', nfiles - minNumberOfFiles > 1);\n                menuButtons.enable('theme', true);\n                var sel;\n                if (!file || nfiles === 0) {\n                    sel = ['rename', 'delete', 'undo', 'redo', 'select_all', 'find', 'find_replace', 'next'];\n                    for (i = 0; i < sel.length; i++) {\n                        menuButtons.enable(sel[i], false);\n                    }\n                    return;\n                }\n                var id = fileManager.getFilePosById(file.getId());\n                menuButtons.enable('rename', id >= minNumberOfFiles && nfiles !== 0);\n                menuButtons.enable('delete', id >= minNumberOfFiles && nfiles !== 0);\n                menuButtons.enable('undo', file.hasUndo());\n                menuButtons.enable('redo', file.hasRedo());\n                menuButtons.enable('select_all', file.hasSelectAll());\n                menuButtons.enable('find', file.hasFind());\n                menuButtons.enable('find_replace', file.hasFindReplace());\n                menuButtons.enable('next', file.hasNext());\n                VPLUtil.delay('updateFileList', fileManager.updateFileList);\n            };\n\n            executionActions = {\n                'open': updateMenu,\n                'close': updateMenu,\n                'getConsole': function() {\n                    return lastConsole;\n                },\n                'setResult': self.setResult,\n                'ajaxurl': options.ajaxurl,\n                'run': function(content, coninfo, ws) {\n                    var parsed = /^([^:]*):?(.*)/i.exec(content);\n                    var type = parsed[1];\n                    if (type == 'terminal' || type == 'webterminal') {\n                        if (lastConsole && lastConsole.isOpen()) {\n                            lastConsole.close();\n                        }\n                        lastConsole = terminal;\n                        terminal.connect(coninfo.executionURL, function() {\n                            ws.close();\n                            focusCurrentFile();\n                        });\n                        if (type == 'webterminal') {\n                            var URLfavicon = (coninfo.secure ? \"https\" : \"http\") + \"://\" + coninfo.server + \":\" + coninfo.portToUse;\n                            URLfavicon += \"/favicon.ico\";\n                            var imgFavicon = $('<img>');\n                            imgFavicon.attr('src', URLfavicon);\n                            imgFavicon.attr('style', 'display:none');\n                            $('body').append(imgFavicon);\n                        }\n                    } else if (type == 'vnc') {\n                        if (lastConsole && lastConsole.isOpen()) {\n                            lastConsole.close();\n                        }\n                        lastConsole = VNCClient;\n                        VNCClient.connect(coninfo.secure, coninfo.server, coninfo.portToUse, coninfo.VNCpassword,\n                                coninfo.executionPath, function() {\n                                    ws.close();\n                                    focusCurrentFile();\n                                });\n                    } else if (type == \"browser\") {\n                        var URL = (coninfo.secure ? \"https\" : \"http\") + \"://\" + coninfo.server + \":\" + coninfo.portToUse + \"/\";\n                        URL += parsed[2] + \"/httpPassthrough\";\n                        if (isTeacher) {\n                            URL += \"?private\";\n                        }\n                        var message = '<a href=\"' + URL + '\" target=\"_blank\">';\n                        message += VPLUtil.str('open') + '</a>';\n                        var options = {\n                            width: 200,\n                            icon: 'run',\n                            title: VPLUtil.str('run'),\n                        };\n                        showMessage(message, options);\n                    } else {\n                        VPLUtil.log(\"Type of run error \" + content, true);\n                    }\n                },\n                'lastAction': false,\n                'getLastAction': function() {\n                    var ret = this.lastAction;\n                    this.lastAction = false;\n                    return ret;\n                },\n                'setLastAction': function(action) {\n                    this.lastAction = action;\n                }\n            };\n\n            tabs.on(\"tabsactivate\", function() {\n                fileManager.currentFile('focus');\n                VPLUtil.delay('updateMenu', updateMenu);\n                VPLUtil.delay('autoResizeTab', autoResizeTab);\n            });\n\n            // VPLIDE resize view control.\n            var jw = $(window);\n            jw.on('resize', autoResizeTab);\n            // Save? before exit.\n            if (!options.example) {\n                jw.on('beforeunload', function() {\n                    if (fileManager.isModified()) {\n                        return str('changesNotSaved');\n                    }\n                    return undefined;\n                });\n            }\n            fileManager = new FileManager();\n\n            autoResizeTab();\n            // Checks menu width every 1 sec as it can change without event.\n            (function() {\n                var oldMenuWidth = menu.width();\n                /**\n                 * Checks menu width change\n                 */\n                function checkMenuWidth() {\n                    var newMenuWidth = menu.width();\n                    if (oldMenuWidth != newMenuWidth) {\n                        oldMenuWidth = newMenuWidth;\n                        autoResizeTab();\n                    }\n                }\n                checkMenuWidth();\n                setInterval(checkMenuWidth, 1000);\n            }());\n            fileManager.resetModified();\n            VPLUtil.requestAction('load', 'loading', options, options.loadajaxurl)\n            .done(function(response) {\n                var allOK = true;\n                var files = response.files;\n                var showFileList = false;\n                for (var i = 0; i < files.length; i++) {\n                    var file = files[i];\n                    var r = fileManager.addFile(file, false, updateMenu, showErrorMessage);\n                    if (r) {\n                        r.resetModified();\n                        if (i < minNumberOfFiles || files.length <= 5) {\n                            fileManager.open(r);\n                        } else {\n                            showFileList = true;\n                        }\n                    } else {\n                        allOK = false;\n                    }\n                }\n                tabs.tabs('option', 'active', 0);\n\n                if (response.compilationexecution) {\n                    self.setResult(response.compilationexecution, false);\n                }\n                menuButtons.setTimeLeft(response);\n                if (response.comments > '') {\n                    $('#vpl_ide_input_comments').val(response.comments);\n                }\n                if (allOK) {\n                    fileManager.resetModified();\n                } else {\n                    fileManager.setModified();\n                }\n                if (fileManager.length() === 0 && maxNumberOfFiles > 0) {\n                    menuButtons.getAction('new')();\n                } else if (!options.saved) {\n                    fileManager.setModified();\n                }\n                fileManager.setFontSize(options.fontSize);\n                fileManager.setVersion(response.version);\n                fileManager.fileListVisible(showFileList);\n                VPLUtil.afterAll('AfterLoadFiles', function() {\n                    updateMenu();\n                    autoResizeTab();\n                    adjustTabsTitles(true);\n                });\n            })\n            .fail(showErrorMessage);\n        };\n        window.VPLIDE = VPLIDE;\n        return {\n            init: function(rootId, options) {\n                vplIdeInstance = new VPLIDE(rootId, options);\n            }\n        };\n    }\n);\n"],"file":"vplide.min.js"}