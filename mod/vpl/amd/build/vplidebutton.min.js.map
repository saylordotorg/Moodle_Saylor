{"version":3,"sources":["../src/vplidebutton.js"],"names":["define","$","jqui","VPLUtil","VPLIDEButtons","menuElement","isOptionAllowed","self","buttons","notAdded","buttonName","setText","icon","title","str","hasOwnProperty","key","attr","replaceWith","genIcon","setExtracontent","html","btag","find","length","append","add","button","name","active","editorName","originalAction","doNothing","Error","setAction","command","bindKey","exec","action","platform","navigator","startsWith","getHTML","enable","bw","data","addClass","removeClass","getAction","launchAction","setGetkeys","editor","commands","Key","getShortcuts","on","event","actionid","replace","setTimeout","stopImmediatePropagation","check","strkey","shiftKey","altKey","ctrlKey","metaKey","which","char","String","fromCharCode","toLowerCase","preventDefault","multiple","v","m","start","lastLap","interval","hour","show","element","precision","checkt","timeLeft","updatePrecision","updateTimeLeft","now","getCurrentTime","tl","cssclass","thtml","getTimeLeft","toggleTimeLeft","setTimeLeft","options","clearInterval","sync","setInterval","hide","window"],"mappings":"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","sourcesContent":["// This file is part of VPL for Moodle - http://vpl.dis.ulpgc.es/\n//\n// VPL for Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// VPL for Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with VPL for Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * IDE Buttons\n *\n * @copyright 2016 Juan Carlos Rodríguez-del-Pino\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author Juan Carlos Rodríguez-del-Pino <jcrodriguez@dis.ulpgc.es>\n */\n\ndefine(\n    [\n        'jquery',\n        'jqueryui',\n        'mod_vpl/vplutil',\n    ],\n    function($, jqui, VPLUtil) {\n        if (typeof VPLIDEButtons !== 'undefined') {\n            return VPLIDEButtons;\n        }\n        var VPLIDEButtons = function(menuElement, isOptionAllowed) {\n            var self = this;\n            var buttons = {};\n\n            this.notAdded = function(buttonName) {\n                return !buttons[buttonName];\n            };\n            this.setText = function(buttonName, icon, title) {\n                if (self.notAdded(buttonName)) {\n                    return;\n                }\n                if (!icon) {\n                    icon = buttons[buttonName].icon;\n                }\n                if (!title) {\n                    title = buttons[buttonName].title;\n                }\n                if (!title) {\n                    title = VPLUtil.str(icon);\n                }\n                buttons[buttonName].icon = icon;\n                buttons[buttonName].title = title;\n                if (buttons[buttonName].hasOwnProperty('key')) {\n                    title += ' (' + buttons[buttonName].key + ')';\n                }\n                $('#vpl_ide_' + buttonName).attr('title', title);\n                $('#vpl_ide_' + buttonName + ' i').replaceWith(VPLUtil.genIcon(icon));\n            };\n            this.setExtracontent = function(buttonName, html) {\n                if (self.notAdded(buttonName)) {\n                    return;\n                }\n                var cl = 'bt_extrahtml';\n                var btag = $('#vpl_ide_' + buttonName + ' i');\n                if (btag.find('.' + cl).length == 0) {\n                    btag.append(' <span class=\"' + cl + '\"><span>');\n                }\n                btag.find('.' + cl).html(html);\n            };\n            this.add = function(button) {\n                if (typeof button === 'string') {\n                    var name = button;\n                    button = {\n                        'name': name\n                    };\n                }\n                if (!isOptionAllowed(button.name)) {\n                    return;\n                }\n                if (!button.hasOwnProperty('icon')) {\n                    button.icon = button.name;\n                }\n                if (!button.hasOwnProperty('title')) {\n                    button.title = VPLUtil.str(button.name);\n                }\n                if (!button.hasOwnProperty('active')) {\n                    button.active = true;\n                }\n                if (!button.hasOwnProperty('editorName')) {\n                    button.editorName = button.name;\n                }\n                if (!button.hasOwnProperty('originalAction')) {\n                    button.originalAction = VPLUtil.doNothing;\n                }\n                if (self.notAdded(button.name)) {\n                    buttons[button.name] = button;\n                } else {\n                    throw new Error(\"Button already set \" + button.name);\n                }\n                self.setAction(button.name, button.originalAction);\n                if (button.hasOwnProperty('bindKey')) {\n                    button.command = {\n                        name: button.editorName,\n                        bindKey: button.bindKey,\n                        exec: button.action\n                    };\n                    var platform = \"win\";\n                    if (navigator.platform.startsWith(\"Mac\")) {\n                        platform = \"mac\";\n                    }\n                    button.key = button.bindKey[platform];\n                }\n            };\n            this.getHTML = function(buttonName) {\n                if (self.notAdded(buttonName)) {\n                    return '';\n                } else {\n                    var title = buttons[buttonName].title;\n                    if (buttons[buttonName].hasOwnProperty('key')) {\n                        title += ' (' + buttons[buttonName].key + ')';\n                    }\n\n                    var html = \"<a id='vpl_ide_\" + buttonName + \"' href='#' title='\" + title + \"'>\";\n                    html += VPLUtil.genIcon(buttonName) + \"</a>\";\n                    return html;\n                }\n            };\n\n            this.enable = function(buttonName, active) {\n                if (self.notAdded(buttonName)) {\n                    return;\n                }\n                var bw = $('#vpl_ide_' + buttonName);\n                buttons[buttonName].active = active;\n                bw.data(\"vpl-active\", active);\n                if (!active) {\n                    bw.addClass('ui-button-disabled ui-state-disabled');\n                } else {\n                    bw.removeClass('ui-button-disabled ui-state-disabled');\n                }\n            };\n            this.setAction = function(buttonName, action) {\n                if (self.notAdded(buttonName)) {\n                    return;\n                }\n                buttons[buttonName].originalAction = action;\n                buttons[buttonName].action = function() {\n                    if (buttons[buttonName].active) {\n                        action();\n                    }\n                };\n            };\n            this.getAction = function(buttonName) {\n                if (self.notAdded(buttonName)) {\n                    return VPLUtil.doNothing;\n                }\n                return buttons[buttonName].action;\n            };\n            this.launchAction = function(buttonName) {\n                if (self.notAdded(buttonName)) {\n                    return;\n                }\n                buttons[buttonName].originalAction();\n            };\n            this.setGetkeys = function(editor) {\n                if (!editor) {\n                    return;\n                }\n                var commands = editor.commands.commands;\n                var platform = editor.commands.platform;\n                for (var buttonName in buttons) {\n                    if (buttons.hasOwnProperty(buttonName)) {\n                        var editorName = buttons[buttonName].editorName;\n                        if (commands[editorName] && commands[editorName].bindKey && !buttons[buttonName].Key) {\n                            buttons[buttonName].key = commands[editorName].bindKey[platform];\n                            self.setText(buttonName);\n                        } else {\n                            if (buttons[buttonName].bindKey &&\n                                !buttons[buttonName].hasOwnProperty('key')) {\n                                buttons[buttonName].key = buttons[buttonName].bindKey[platform];\n                                self.setText(buttonName);\n                            }\n                        }\n                    }\n                }\n            };\n            this.getShortcuts = function(editor) {\n                var html = '<ul>';\n                for (var buttonName in buttons) {\n                    if (buttons[buttonName].hasOwnProperty('key')) {\n                        html += '<li>';\n                        html += buttons[buttonName].title + ' (' + buttons[buttonName].key + ')';\n                        html += '</li>';\n                    }\n                }\n                html += '</ul>';\n                if (editor) {\n                    html += '<h5>' + VPLUtil.str('edit') + '</h5>';\n                    var commands = editor.commands.commands;\n                    var platform = editor.commands.platform;\n                    html += '<ul>';\n                    for (var editorName in commands) {\n                        if (commands[editorName].hasOwnProperty('bindKey') && commands[editorName].bindKey[platform] > '') {\n                            html += '<li>';\n                            html += editorName + ' (' + commands[editorName].bindKey[platform] + ')';\n                            html += '</li>';\n                        }\n                    }\n                    html += '</ul>';\n                }\n                if (html == '<ul></ul>') {\n                    return '';\n                }\n                return html;\n            };\n            $(menuElement).on(\"click\", \"a\", function(event) {\n                if ($(this).data(\"vpl-active\")) {\n                    var actionid = $(this).attr('id');\n                    if (typeof actionid === 'string' && actionid.startsWith('vpl_ide_')) {\n                        actionid = actionid.replace('vpl_ide_', '');\n                    } else {\n                        return true;\n                    }\n                    if (self.notAdded(actionid)) {\n                        return true;\n                    }\n                    if (buttons[actionid] && !buttons[actionid].active) {\n                        return true;\n                    }\n                    var action = self.getAction(actionid);\n                    if (actionid != 'import') {\n                        setTimeout(action, 10);\n                    } else {\n                        action();\n                    }\n                }\n                event.stopImmediatePropagation();\n                return false;\n            });\n\n            $('body').on('keydown', function(event) {\n                var check = false;\n                var strkey = '';\n                if (event.shiftKey) {\n                    strkey += 'shift-';\n                }\n                if (event.altKey) {\n                    strkey += 'alt-';\n                    check = true;\n                }\n                if (event.ctrlKey) {\n                    strkey += 'ctrl-';\n                    check = true;\n                }\n                if (event.metaKey) {\n                    strkey += 'meta-';\n                    check = true;\n                }\n                if (event.which >= 112 && event.which <= 123) {\n                    strkey += 'f' + (event.which - 111);\n                    check = true;\n                } else {\n                    var char = String.fromCharCode(event.which).toLowerCase();\n                    if (char < 'a' || char > 'z') {\n                        check = false;\n                    } else {\n                        strkey += char;\n                    }\n                }\n                if (check) {\n                    for (var buttonName in buttons) {\n                        if (buttons[buttonName].hasOwnProperty('key')) {\n                            if (strkey == buttons[buttonName].key.toLowerCase()) {\n                                event.preventDefault();\n                                event.stopImmediatePropagation();\n                                buttons[buttonName].action();\n                                return false;\n                            }\n                        }\n                    }\n                }\n                return true;\n            });\n            this.multiple = function(v, m) {\n                return v - (v % m);\n            };\n\n            (function() {\n                var start = 0;\n                var lastLap = 0;\n                var interval = false;\n                var hour = 60 * 60;\n                var day = hour * 24;\n                var cssclasses = 'vpl_buttonleft_orange vpl_buttonleft_red vpl_buttonleft_black';\n                var show = false;\n                var element = null;\n                var precision = 5;\n                var checkt = 1000;\n                var timeLeft = 0;\n                var updatePrecision = function(timeLeft) {\n                    precision = 5;\n                    checkt = 1000;\n                    if (timeLeft > hour) {\n                        precision = 60;\n                        checkt = 5000;\n                    } else if (timeLeft > day) {\n                        precision = 5 * 60;\n                        checkt = 5 * 5000;\n                    }\n                };\n                var updateTimeLeft = function() {\n                    var now = self.multiple(VPLUtil.getCurrentTime(), precision);\n                    if (now === lastLap || element === null) {\n                        return;\n                    }\n                    lastLap = now;\n                    var tl = timeLeft - (lastLap - start);\n                    var cssclass = '';\n                    if (tl <= 0) {\n                        cssclass = 'vpl_buttonleft_black';\n                    } else if (tl <= 5 * 60) {\n                        show = true;\n                        cssclass = 'vpl_buttonleft_red';\n                    } else if (tl <= 15 * 60) {\n                        cssclass = 'vpl_buttonleft_orange';\n                    } else {\n                        updatePrecision(tl);\n                    }\n                    var thtml = '<span class=\"' + cssclass + '\">' + VPLUtil.genIcon('timeleft');\n                    if (show) {\n                        thtml += ' ' + VPLUtil.getTimeLeft(tl);\n                    }\n                    thtml += '</span>';\n                    element.html(thtml);\n                    element.removeClass(cssclasses);\n                    element.addClass(cssclass);\n                };\n                self.toggleTimeLeft = function() {\n                    show = !show;\n                    lastLap = 0;\n                    updateTimeLeft();\n                };\n                self.setTimeLeft = function(options) {\n                    element = $('#vpl_ide_timeleft');\n                    if (interval !== false) {\n                        clearInterval(interval);\n                        interval = false;\n                    }\n                    if (options.hasOwnProperty('timeLeft')) {\n                        timeLeft = options.timeLeft;\n                        updatePrecision(timeLeft);\n                        var sync = timeLeft % precision;\n                        timeLeft = self.multiple(timeLeft, precision);\n                        start = self.multiple(VPLUtil.getCurrentTime(), precision);\n                        lastLap = start - precision;\n                        setTimeout(function() {\n                            interval = setInterval(updateTimeLeft, checkt);\n                        }, sync * 1000);\n                        $('#vpl_ide_timeleft').show();\n                        updateTimeLeft();\n\n                    } else {\n                        $('#vpl_ide_timeleft').hide();\n                    }\n                };\n            })();\n        };\n        window.VPLIDEButtons = VPLIDEButtons;\n        return VPLIDEButtons;\n    }\n);\n"],"file":"vplidebutton.min.js"}