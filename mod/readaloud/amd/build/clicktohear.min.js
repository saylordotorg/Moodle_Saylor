define(["jquery","core/log","mod_readaloud/definitions","mod_readaloud/pollyhelper"],(function($,log,def,pollyhelper){return log.debug("Click to hear: initialising"),{controls:{},ttsvoice:"Amy",cd:{hiddenplayerclass:def.hiddenplayer,wordclass:def.wordclass,passagecontainer:def.passagecontainer},init:function(opts){pollyhelper.init(opts.token,opts.region,opts.owner),this.ttsvoice=opts.ttsvoice,this.register_controls(),this.register_events()},register_controls:function(){this.controls.audioplayer=$("#"+this.cd.hiddenplayerclass),this.controls.eachword=$("."+this.cd.wordclass),this.controls.eachspace=$("."+this.cd.spaceclass),this.controls.passagecontainer=$("."+this.cd.passagecontainer)},register_events:function(){var that=this,aplayer=this.controls.audioplayer;pollyhelper.onnewpollyurl=function(theurl){aplayer.attr("src",theurl),aplayer[0].play()},this.controls.eachword.click((function(){var wordnumber=parseInt($(this).attr("data-wordnumber")),text=$("#"+that.cd.wordclass+"_"+wordnumber).text();pollyhelper.fetch_polly_url(text,"text",that.ttsvoice)}))}}}));

//# sourceMappingURL=clicktohear.min.js.map