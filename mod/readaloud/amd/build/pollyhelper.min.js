define ("mod_readaloud/pollyhelper",["jquery","core/log"],function(a,b){"use strict";b.debug("Polly helper: initialising");return{token:"",region:"",owner:"",init:function init(a,b,c){this.token=a;this.region=b;this.owner=c},fetch_polly_url:function fetch_polly_url(a,c,d){var e=new XMLHttpRequest,f=this;e.onreadystatechange=function(){if(4===this.readyState){if(200==e.status){var a=e.responseText,c=JSON.parse(a);if(c){if(0<c.returnCode){b.debug(c.returnMessage);return!1}else if(0===c.returnCode){var d=c.returnMessage;f.onnewpollyurl(d)}else{b.debug("Polly Signed URL Request failed:");b.debug(c)}}else{b.debug("Polly Signed URL Request something bad happened")}}else{b.debug("Polly Signed URL Request Not 200 response:"+e.status)}}};var g="wstoken="+this.token+"&wsfunction="+"local_cpapi_fetch_polly_url"+"&moodlewsrestformat=json&text="+encodeURIComponent(a)+"&texttype="+c+"&voice="+d+"&appid=mod_readaloud&owner="+this.owner+"&region="+this.region;e.open("POST","https://cloud.poodll.com/webservice/rest/server.php",!0);e.setRequestHeader("Cache-Control","no-cache");e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");e.send(g)},onnewpollyurl:function onnewpollyurl(a){b.debug(a)}}});
//# sourceMappingURL=pollyhelper.min.js.map
