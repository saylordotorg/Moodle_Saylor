{"version":3,"sources":["../src/clicktohear.js"],"names":["define","$","log","def","pollyhelper","debug","controls","ttsvoice","cd","hiddenplayerclass","hiddenplayer","wordclass","passagecontainer","init","opts","token","region","owner","register_controls","register_events","audioplayer","eachword","eachspace","spaceclass","that","aplayer","onnewpollyurl","theurl","attr","play","click","wordnumber","parseInt","word","text","fetch_polly_url"],"mappings":"AAAAA,OAAM,6BAAC,CAAC,QAAD,CAAW,UAAX,CAAsB,2BAAtB,CAAmD,2BAAnD,CAAD,CAAkF,SAAUC,CAAV,CAAaC,CAAb,CAAkBC,CAAlB,CAAsBC,CAAtB,CAAmC,CACvH,aAKAF,CAAG,CAACG,KAAJ,CAAU,6BAAV,EAEA,MAAO,CAEHC,QAAQ,CAAE,EAFP,CAGHC,QAAQ,CAAE,KAHP,CAMHC,EAAE,CAAE,CACAC,iBAAiB,CAAEN,CAAG,CAACO,YADvB,CAEAC,SAAS,CAAER,CAAG,CAACQ,SAFf,CAGAC,gBAAgB,CAAET,CAAG,CAACS,gBAHtB,CAND,CAaHC,IAAI,CAAE,cAASC,CAAT,CAAc,CAChBV,CAAW,CAACS,IAAZ,CAAiBC,CAAI,CAACC,KAAtB,CAA4BD,CAAI,CAACE,MAAjC,CAAwCF,CAAI,CAACG,KAA7C,EACA,KAAKV,QAAL,CAAcO,CAAI,CAACP,QAAnB,CACA,KAAKW,iBAAL,GACA,KAAKC,eAAL,EACH,CAlBE,CAqBHD,iBAAiB,CAAE,4BAAU,CACzB,KAAKZ,QAAL,CAAcc,WAAd,CAA4BnB,CAAC,CAAC,IAAM,KAAKO,EAAL,CAAQC,iBAAf,CAA7B,CACA,KAAKH,QAAL,CAAce,QAAd,CAAyBpB,CAAC,CAAC,IAAM,KAAKO,EAAL,CAAQG,SAAf,CAA1B,CACA,KAAKL,QAAL,CAAcgB,SAAd,CAA0BrB,CAAC,CAAC,IAAM,KAAKO,EAAL,CAAQe,UAAf,CAA3B,CACA,KAAKjB,QAAL,CAAcM,gBAAd,CAAiCX,CAAC,CAAC,IAAM,KAAKO,EAAL,CAAQI,gBAAf,CACrC,CA1BE,CA6BHO,eAAe,CAAE,0BAAW,IACpBK,CAAAA,CAAI,CAAG,IADa,CAIpBC,CAAO,CAAG,KAAKnB,QAAL,CAAcc,WAJJ,CAKxBhB,CAAW,CAACsB,aAAZ,CAA0B,SAASC,CAAT,CAAgB,CACtCF,CAAO,CAACG,IAAR,CAAa,KAAb,CAAmBD,CAAnB,EACAF,CAAO,CAAC,CAAD,CAAP,CAAWI,IAAX,EACH,CAHD,CAMA,KAAKvB,QAAL,CAAce,QAAd,CAAuBS,KAAvB,CAA6B,UAAY,IACjCC,CAAAA,CAAU,CAAGC,QAAQ,CAAC/B,CAAC,CAAC,IAAD,CAAD,CAAQ2B,IAAR,CAAa,iBAAb,CAAD,CADY,CAEjCK,CAAI,CAAGhC,CAAC,CAAC,IAAMuB,CAAI,CAAChB,EAAL,CAAQG,SAAd,CAA0B,GAA1B,CAAgCoB,CAAjC,CAFyB,CAGjCG,CAAI,CAAGD,CAAI,CAACC,IAAL,EAH0B,CAIrC9B,CAAW,CAAC+B,eAAZ,CAA4BD,CAA5B,CAAiC,MAAjC,CAAwCV,CAAI,CAACjB,QAA7C,CACH,CALD,CAMH,CA9CE,CAiDV,CAzDK,CAAN","sourcesContent":["define(['jquery', 'core/log','mod_readaloud/definitions', 'mod_readaloud/pollyhelper'], function ($, log, def,pollyhelper) {\n    \"use strict\"; // jshint ;_;\n    /*\n    This file helps you get Polly URLs at runtime\n     */\n\n    log.debug('Click to hear: initialising');\n\n    return {\n        //controls\n        controls: {},\n        ttsvoice: 'Amy',\n\n        //class definitions\n        cd: {\n            hiddenplayerclass: def.hiddenplayer,\n            wordclass: def.wordclass,\n            passagecontainer: def.passagecontainer,\n        },\n\n        //init the module\n        init: function(opts){\n            pollyhelper.init(opts.token,opts.region,opts.owner);\n            this.ttsvoice=opts.ttsvoice;\n            this.register_controls();\n            this.register_events();\n        },\n\n        //load all the controls so we do not have to do it later\n        register_controls: function(){\n            this.controls.audioplayer = $('#' + this.cd.hiddenplayerclass);\n            this.controls.eachword = $('.' + this.cd.wordclass);\n            this.controls.eachspace = $('.' + this.cd.spaceclass);\n            this.controls.passagecontainer = $(\".\" + this.cd.passagecontainer);\n        },\n\n        //attach the various event handlers we need\n        register_events: function() {\n            var that = this;\n\n            // Get the audio element\n            var aplayer = this.controls.audioplayer;\n            pollyhelper.onnewpollyurl=function(theurl){\n                aplayer.attr('src',theurl);\n                aplayer[0].play();\n            };\n\n            //register click listener\n            this.controls.eachword.click(function () {\n                var wordnumber = parseInt($(this).attr('data-wordnumber'));\n                var word = $('#' + that.cd.wordclass + '_' + wordnumber);\n                var text = word.text();\n                pollyhelper.fetch_polly_url(text,\"text\",that.ttsvoice);\n            });\n        }//end of register events\n\n    };//end of return value\n});"],"file":"clicktohear.min.js"}