function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}(function(a,b){if("function"==typeof define&&define.amd){define ("mod_readaloud/tether",b)}else if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))){module.exports=b(require,exports,module)}else{a.Tether=b()}})(this,function(){'use strict';var a=function(){function a(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}return function(b,c,d){if(c)a(b.prototype,c);if(d)a(b,d);return b}}();function b(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}var c;if("undefined"==typeof c){c={modules:[]}}var d=null;function e(a){var b=a.getBoundingClientRect(),c={};for(var d in b){c[d]=b[d]}if(a.ownerDocument!==document){var f=a.ownerDocument.defaultView.frameElement;if(f){var g=e(f);c.top+=g.top;c.bottom+=g.top;c.left+=g.left;c.right+=g.left}}return c}function f(a){var b=getComputedStyle(a)||{},c=b.position,d=[];if("fixed"===c){return[a]}var e=a;while((e=e.parentNode)&&e&&1===e.nodeType){var f=void 0;try{f=getComputedStyle(e)}catch(a){}if("undefined"==typeof f||null===f){d.push(e);return d}var g=f,h=g.overflow,i=g.overflowX,j=g.overflowY;if(/(auto|scroll)/.test(h+j+i)){if("absolute"!==c||0<=["relative","absolute","fixed"].indexOf(f.position)){d.push(e)}}}d.push(a.ownerDocument.body);if(a.ownerDocument!==document){d.push(a.ownerDocument.defaultView)}return d}var g=function(){var a=0;return function(){return++a}}(),h={},i=function(){var a=d;if(!a){a=document.createElement("div");a.setAttribute("data-tether-id",g());n(a.style,{top:0,left:0,position:"absolute"});document.body.appendChild(a);d=a}var b=a.getAttribute("data-tether-id");if("undefined"==typeof h[b]){h[b]=e(a);v(function(){delete h[b]})}return h[b]};function j(){if(d){document.body.removeChild(d)}d=null}function k(a){var b;if(a===document){b=document;a=document.documentElement}else{b=a.ownerDocument}var c=b.documentElement,d=e(a),f=i();d.top-=f.top;d.left-=f.left;if("undefined"==typeof d.width){d.width=document.body.scrollWidth-d.left-d.right}if("undefined"==typeof d.height){d.height=document.body.scrollHeight-d.top-d.bottom}d.top=d.top-c.clientTop;d.left=d.left-c.clientLeft;d.right=b.body.clientWidth-d.width-d.left;d.bottom=b.body.clientHeight-d.height-d.top;return d}function l(a){return a.offsetParent||document.documentElement}function m(){var a=document.createElement("div");a.style.width="100%";a.style.height="200px";var b=document.createElement("div");n(b.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"});b.appendChild(a);document.body.appendChild(b);var c=a.offsetWidth;b.style.overflow="scroll";var d=a.offsetWidth;if(c===d){d=b.clientWidth}document.body.removeChild(b);var e=c-d;return{width:e,height:e}}function n(){var a=0>=arguments.length||arguments[0]===void 0?{}:arguments[0],b=[];Array.prototype.push.apply(b,arguments);b.slice(1).forEach(function(b){if(b){for(var c in b){if({}.hasOwnProperty.call(b,c)){a[c]=b[c]}}}});return a}function o(a,b){if("undefined"!=typeof a.classList){b.split(" ").forEach(function(b){if(b.trim()){a.classList.remove(b)}})}else{var c=new RegExp("(^| )"+b.split(" ").join("|")+"( |$)","gi"),d=r(a).replace(c," ");s(a,d)}}function p(a,b){if("undefined"!=typeof a.classList){b.split(" ").forEach(function(b){if(b.trim()){a.classList.add(b)}})}else{o(a,b);var c=r(a)+(" "+b);s(a,c)}}function q(a,b){if("undefined"!=typeof a.classList){return a.classList.contains(b)}var c=r(a);return new RegExp("(^| )"+b+"( |$)","gi").test(c)}function r(a){if(a.className instanceof a.ownerDocument.defaultView.SVGAnimatedString){return a.className.baseVal}return a.className}function s(a,b){a.setAttribute("class",b)}function t(a,b,c){c.forEach(function(c){if(-1===b.indexOf(c)&&q(a,c)){o(a,c)}});b.forEach(function(b){if(!q(a,b)){p(a,b)}})}var u=[],v=function(a){u.push(a)},w=function(){var a;while(a=u.pop()){a()}},x=function(){function c(){b(this,c)}a(c,[{key:"on",value:function(a,b,c){var d=3>=arguments.length||arguments[3]===void 0?!1:arguments[3];if("undefined"==typeof this.bindings){this.bindings={}}if("undefined"==typeof this.bindings[a]){this.bindings[a]=[]}this.bindings[a].push({handler:b,ctx:c,once:d})}},{key:"once",value:function(a,b,c){this.on(a,b,c,!0)}},{key:"off",value:function(a,b){if("undefined"==typeof this.bindings||"undefined"==typeof this.bindings[a]){return}if("undefined"==typeof b){delete this.bindings[a]}else{var c=0;while(c<this.bindings[a].length){if(this.bindings[a][c].handler===b){this.bindings[a].splice(c,1)}else{++c}}}}},{key:"trigger",value:function(a){if("undefined"!=typeof this.bindings&&this.bindings[a]){for(var b=0,c=arguments.length,d=Array(1<c?c-1:0),e=1;e<c;e++){d[e-1]=arguments[e]}while(b<this.bindings[a].length){var f=this.bindings[a][b],g=f.handler,h=f.ctx,j=f.once,k=h;if("undefined"==typeof k){k=this}g.apply(k,d);if(j){this.bindings[a].splice(b,1)}else{++b}}}}}]);return c}();c.Utils={getActualBoundingClientRect:e,getScrollParents:f,getBounds:k,getOffsetParent:l,extend:n,addClass:p,removeClass:o,hasClass:q,updateClasses:t,defer:v,flush:w,uniqueId:g,Evented:x,getScrollBarSize:m,removeUtilElements:j};var y=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(d=(h=g.next()).done);d=!0){c.push(h.value);if(b&&c.length===b)break}}catch(a){e=!0;f=a}finally{try{if(!d&&g["return"])g["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b)){return b}else if(Symbol.iterator in Object(b)){return a(b,c)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}(),a=function(){function a(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}return function(b,c,d){if(c)a(b.prototype,c);if(d)a(b,d);return b}}(),z=function(a,b,c){var d=!0;_function:while(d){var e=a,f=b,g=c;d=!1;if(null===e)e=Function.prototype;var h=Object.getOwnPropertyDescriptor(e,f);if(h===void 0){var i=Object.getPrototypeOf(e);if(null===i){return}else{a=i;b=f;c=g;d=!0;h=i=void 0;continue _function}}else if("value"in h){return h.value}else{var j=h.get;if(j===void 0){return}return j.call(g)}}};function b(a,c){if(!(a instanceof c)){throw new TypeError("Cannot call a class as a function")}}function A(a,b){if("function"!=typeof b&&null!==b){throw new TypeError("Super expression must either be null or a function, not "+_typeof(b))}a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});if(b)Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b}if("undefined"==typeof c){throw new Error("You must include the utils.js file before tether.js")}var B=c.Utils,f=B.getScrollParents,k=B.getBounds,l=B.getOffsetParent,n=B.extend,p=B.addClass,o=B.removeClass,t=B.updateClasses,v=B.defer,w=B.flush,m=B.getScrollBarSize,j=B.removeUtilElements;function C(c,a){var b=2>=arguments.length||arguments[2]===void 0?1:arguments[2];return c+b>=a&&a>=c-b}var D=function(){if("undefined"==typeof document){return""}for(var a=document.createElement("div"),b=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],c=0,d;c<b.length;++c){d=b[c];if(a.style[d]!==void 0){return d}}}(),E=[],F=function(){E.forEach(function(a){a.position(!1)});w()};function G(){if("undefined"!=typeof performance&&"undefined"!=typeof performance.now){return performance.now()}return+new Date}(function(){var a=null,b=null,c=null,d=function d(){if("undefined"!=typeof b&&16<b){b=Math.min(b-16,250);c=setTimeout(d,250);return}if("undefined"!=typeof a&&10>G()-a){return}if(null!=c){clearTimeout(c);c=null}a=G();F();b=G()-a};if("undefined"!=typeof window&&"undefined"!=typeof window.addEventListener){["resize","scroll","touchmove"].forEach(function(a){window.addEventListener(a,d)})}})();var H={center:"center",left:"right",right:"left"},I={middle:"middle",top:"bottom",bottom:"top"},J={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},K=function(a,b){var c=a.left,d=a.top;if("auto"===c){c=H[b.left]}if("auto"===d){d=I[b.top]}return{left:c,top:d}},L=function(a){var b=a.left,c=a.top;if("undefined"!=typeof J[a.left]){b=J[a.left]}if("undefined"!=typeof J[a.top]){c=J[a.top]}return{left:b,top:c}};function M(){for(var a={top:0,left:0},b=arguments.length,c=Array(b),d=0;d<b;d++){c[d]=arguments[d]}c.forEach(function(b){var c=b.top,d=b.left;if("string"==typeof c){c=parseFloat(c,10)}if("string"==typeof d){d=parseFloat(d,10)}a.top+=c;a.left+=d});return a}function N(a,b){if("string"==typeof a.left&&-1!==a.left.indexOf("%")){a.left=parseFloat(a.left,10)/100*b.width}if("string"==typeof a.top&&-1!==a.top.indexOf("%")){a.top=parseFloat(a.top,10)/100*b.height}return a}var O=function(a){var b=a.split(" "),c=y(b,2),d=c[0],e=c[1];return{top:d,left:e}},P=O,Q=function(d){A(e,d);function e(a){var d=this;b(this,e);z(Object.getPrototypeOf(e.prototype),"constructor",this).call(this);this.position=this.position.bind(this);E.push(this);this.history=[];this.setOptions(a,!1);c.modules.forEach(function(a){if("undefined"!=typeof a.initialize){a.initialize.call(d)}});this.position()}a(e,[{key:"getClass",value:function(){var a=0>=arguments.length||arguments[0]===void 0?"":arguments[0],b=this.options.classes;if("undefined"!=typeof b&&b[a]){return this.options.classes[a]}else if(this.options.classPrefix){return this.options.classPrefix+"-"+a}else{return a}}},{key:"setOptions",value:function(a){var b=this,c=1>=arguments.length||arguments[1]===void 0?!0:arguments[1];this.options=n({offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},a);var d=this.options,e=d.element,g=d.target,h=d.targetModifier;this.element=e;this.target=g;this.targetModifier=h;if("viewport"===this.target){this.target=document.body;this.targetModifier="visible"}else if("scroll-handle"===this.target){this.target=document.body;this.targetModifier="scroll-handle"}["element","target"].forEach(function(a){if("undefined"==typeof b[a]){throw new Error("Tether Error: Both element and target must be defined")}if("undefined"!=typeof b[a].jquery){b[a]=b[a][0]}else if("string"==typeof b[a]){b[a]=document.querySelector(b[a])}});p(this.element,this.getClass("element"));if(!(!1===this.options.addTargetClasses)){p(this.target,this.getClass("target"))}if(!this.options.attachment){throw new Error("Tether Error: You must provide an attachment")}this.targetAttachment=P(this.options.targetAttachment);this.attachment=P(this.options.attachment);this.offset=O(this.options.offset);this.targetOffset=O(this.options.targetOffset);if("undefined"!=typeof this.scrollParents){this.disable()}if("scroll-handle"===this.targetModifier){this.scrollParents=[this.target]}else{this.scrollParents=f(this.target)}if(!(!1===this.options.enabled)){this.enable(c)}}},{key:"getTargetBounds",value:function(){if("undefined"!=typeof this.targetModifier){if("visible"===this.targetModifier){if(this.target===document.body){return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}}else{var a=k(this.target),b={height:a.height,width:a.width,top:a.top,left:a.left};b.height=Math.min(b.height,a.height-(pageYOffset-a.top));b.height=Math.min(b.height,a.height-(a.top+a.height-(pageYOffset+innerHeight)));b.height=Math.min(innerHeight,b.height);b.height-=2;b.width=Math.min(b.width,a.width-(pageXOffset-a.left));b.width=Math.min(b.width,a.width-(a.left+a.width-(pageXOffset+innerWidth)));b.width=Math.min(innerWidth,b.width);b.width-=2;if(b.top<pageYOffset){b.top=pageYOffset}if(b.left<pageXOffset){b.left=pageXOffset}return b}}else if("scroll-handle"===this.targetModifier){var a=void 0,c=this.target;if(c===document.body){c=document.documentElement;a={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}}else{a=k(c)}var d=getComputedStyle(c),e=c.scrollWidth>c.clientWidth||0<=[d.overflow,d.overflowX].indexOf("scroll")||this.target!==document.body,f=0;if(e){f=15}var g=a.height-parseFloat(d.borderTopWidth)-parseFloat(d.borderBottomWidth)-f,b={width:15,height:.975*g*(g/c.scrollHeight),left:a.left+a.width-parseFloat(d.borderLeftWidth)-15},h=0;if(408>g&&this.target===document.body){h=-11e-5*Math.pow(g,2)-.00727*g+22.58}if(this.target!==document.body){b.height=Math.max(b.height,24)}var i=this.target.scrollTop/(c.scrollHeight-g);b.top=i*(g-b.height-h)+a.top+parseFloat(d.borderTopWidth);if(this.target===document.body){b.height=Math.max(b.height,24)}return b}}else{return k(this.target)}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(a,b){if("undefined"==typeof this._cache){this._cache={}}if("undefined"==typeof this._cache[a]){this._cache[a]=b.call(this)}return this._cache[a]}},{key:"enable",value:function(){var a=this,b=0>=arguments.length||arguments[0]===void 0?!0:arguments[0];if(!(!1===this.options.addTargetClasses)){p(this.target,this.getClass("enabled"))}p(this.element,this.getClass("enabled"));this.enabled=!0;this.scrollParents.forEach(function(b){if(b!==a.target.ownerDocument){b.addEventListener("scroll",a.position)}});if(b){this.position()}}},{key:"disable",value:function(){var a=this;o(this.target,this.getClass("enabled"));o(this.element,this.getClass("enabled"));this.enabled=!1;if("undefined"!=typeof this.scrollParents){this.scrollParents.forEach(function(b){b.removeEventListener("scroll",a.position)})}}},{key:"destroy",value:function(){var a=this;this.disable();E.forEach(function(b,c){if(b===a){E.splice(c,1)}});if(0===E.length){j()}}},{key:"updateAttachClasses",value:function(a,b){var c=this;a=a||this.attachment;b=b||this.targetAttachment;if("undefined"!=typeof this._addAttachClasses&&this._addAttachClasses.length){this._addAttachClasses.splice(0,this._addAttachClasses.length)}if("undefined"==typeof this._addAttachClasses){this._addAttachClasses=[]}var d=this._addAttachClasses;if(a.top){d.push(this.getClass("element-attached")+"-"+a.top)}if(a.left){d.push(this.getClass("element-attached")+"-"+a.left)}if(b.top){d.push(this.getClass("target-attached")+"-"+b.top)}if(b.left){d.push(this.getClass("target-attached")+"-"+b.left)}var e=[];["left","top","bottom","right","middle","center"].forEach(function(a){e.push(c.getClass("element-attached")+"-"+a);e.push(c.getClass("target-attached")+"-"+a)});v(function(){if(!("undefined"!=typeof c._addAttachClasses)){return}t(c.element,c._addAttachClasses,e);if(!(!1===c.options.addTargetClasses)){t(c.target,c._addAttachClasses,e)}delete c._addAttachClasses})}},{key:"position",value:function(){var a=this,b=0>=arguments.length||arguments[0]===void 0?!0:arguments[0];if(!this.enabled){return}this.clearCache();var d=K(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,d);var e=this.cache("element-bounds",function(){return k(a.element)}),f=e.width,g=e.height;if(0===f&&0===g&&"undefined"!=typeof this.lastSize){var h=this.lastSize;f=h.width;g=h.height}else{this.lastSize={width:f,height:g}}var j=this.cache("target-bounds",function(){return a.getTargetBounds()}),n=j,o=N(L(this.attachment),{width:f,height:g}),p=N(L(d),n),q=N(this.offset,{width:f,height:g}),r=N(this.targetOffset,n);o=M(o,q);p=M(p,r);for(var s=j.left+p.left-o.left,t=j.top+p.top-o.top,u=0;u<c.modules.length;++u){var v=c.modules[u],x=v.position.call(this,{left:s,top:t,targetAttachment:d,targetPos:j,elementPos:e,offset:o,targetOffset:p,manualOffset:q,manualTargetOffset:r,scrollbarSize:B,attachment:this.attachment});if(!1===x){return!1}else if("undefined"==typeof x||"object"!==_typeof(x)){continue}else{t=x.top;s=x.left}}var y={page:{top:t,left:s},viewport:{top:t-pageYOffset,bottom:pageYOffset-t-g+innerHeight,left:s-pageXOffset,right:pageXOffset-s-f+innerWidth}},z=this.target.ownerDocument,A=z.defaultView,B=void 0;if(z.body.scrollWidth>A.innerWidth){B=this.cache("scrollbar-size",m);y.viewport.bottom-=B.height}if(z.body.scrollHeight>A.innerHeight){B=this.cache("scrollbar-size",m);y.viewport.right-=B.width}if(-1===["","static"].indexOf(z.body.style.position)||-1===["","static"].indexOf(z.body.parentElement.style.position)){y.page.bottom=z.body.scrollHeight-t-g;y.page.right=z.body.scrollWidth-s-f}if("undefined"!=typeof this.options.optimizations&&!1!==this.options.optimizations.moveElement&&!("undefined"!=typeof this.targetModifier)){(function(){var b=a.cache("target-offsetparent",function(){return l(a.target)}),c=a.cache("target-offsetparent-bounds",function(){return k(b)}),d=getComputedStyle(b),e=c,f={};["Top","Left","Bottom","Right"].forEach(function(a){f[a.toLowerCase()]=parseFloat(d["border"+a+"Width"])});c.right=z.body.scrollWidth-c.left-e.width+f.right;c.bottom=z.body.scrollHeight-c.top-e.height+f.bottom;if(y.page.top>=c.top+f.top&&y.page.bottom>=c.bottom){if(y.page.left>=c.left+f.left&&y.page.right>=c.right){var g=b.scrollTop,h=b.scrollLeft;y.offset={top:y.page.top-c.top+g-f.top,left:y.page.left-c.left+h-f.left}}}})()}this.move(y);this.history.unshift(y);if(3<this.history.length){this.history.pop()}if(b){w()}return!0}},{key:"move",value:function(a){var b=this;if(!("undefined"!=typeof this.element.parentNode)){return}var c={};for(var d in a){c[d]={};for(var e in a[d]){for(var f=!1,g=0,h;g<this.history.length;++g){h=this.history[g];if("undefined"!=typeof h[d]&&!C(h[d][e],a[d][e])){f=!0;break}}if(!f){c[d][e]=!0}}}var j={top:"",left:"",right:"",bottom:""},k=function(a,c){var d="undefined"!=typeof b.options.optimizations,e=d?b.options.optimizations.gpu:null;if(!1!==e){var f,g;if(a.top){j.top=0;f=c.top}else{j.bottom=0;f=-c.bottom}if(a.left){j.left=0;g=c.left}else{j.right=0;g=-c.right}j[D]="translateX("+Math.round(g)+"px) translateY("+Math.round(f)+"px)";if("msTransform"!==D){j[D]+=" translateZ(0)"}}else{if(a.top){j.top=c.top+"px"}else{j.bottom=c.bottom+"px"}if(a.left){j.left=c.left+"px"}else{j.right=c.right+"px"}}},m=!1;if((c.page.top||c.page.bottom)&&(c.page.left||c.page.right)){j.position="absolute";k(c.page,a.page)}else if((c.viewport.top||c.viewport.bottom)&&(c.viewport.left||c.viewport.right)){j.position="fixed";k(c.viewport,a.viewport)}else if("undefined"!=typeof c.offset&&c.offset.top&&c.offset.left){(function(){j.position="absolute";var d=b.cache("target-offsetparent",function(){return l(b.target)});if(l(b.element)!==d){v(function(){b.element.parentNode.removeChild(b.element);d.appendChild(b.element)})}k(c.offset,a.offset);m=!0})()}else{j.position="absolute";k({top:!0,left:!0},a.page)}if(!m){var o=!0,p=this.element.parentNode;while(p&&1===p.nodeType&&"BODY"!==p.tagName){if("static"!==getComputedStyle(p).position){o=!1;break}p=p.parentNode}if(!o){this.element.parentNode.removeChild(this.element);this.element.ownerDocument.body.appendChild(this.element)}}var q={},r=!1;for(var e in j){var s=j[e],t=this.element.style[e];if(t!==s){r=!0;q[e]=s}}if(r){v(function(){n(b.element.style,q)})}}}]);return e}(x);Q.modules=[];c.position=F;var R=n(Q,c);var y=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(d=(h=g.next()).done);d=!0){c.push(h.value);if(b&&c.length===b)break}}catch(a){e=!0;f=a}finally{try{if(!d&&g["return"])g["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b)){return b}else if(Symbol.iterator in Object(b)){return a(b,c)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}(),B=c.Utils,k=B.getBounds,n=B.extend,t=B.updateClasses,v=B.defer,S=["left","top","right","bottom"];function T(a,b){if("scrollParent"===b){b=a.scrollParents[0]}else if("window"===b){b=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]}if(b===document){b=b.documentElement}if("undefined"!=typeof b.nodeType){(function(){var a=b,c=k(b),d=c,e=getComputedStyle(b);b=[d.left,d.top,c.width+d.left,c.height+d.top];if(a.ownerDocument!==document){var f=a.ownerDocument.defaultView;b[0]+=f.pageXOffset;b[1]+=f.pageYOffset;b[2]+=f.pageXOffset;b[3]+=f.pageYOffset}S.forEach(function(a,c){a=a[0].toUpperCase()+a.substr(1);if("Top"===a||"Left"===a){b[c]+=parseFloat(e["border"+a+"Width"])}else{b[c]-=parseFloat(e["border"+a+"Width"])}})})()}return b}c.modules.push({position:function(a){var b=this,c=a.top,d=a.left,e=a.targetAttachment;if(!this.options.constraints){return!0}var f=this.cache("element-bounds",function(){return k(b.element)}),g=f.height,h=f.width;if(0===h&&0===g&&"undefined"!=typeof this.lastSize){var i=this.lastSize;h=i.width;g=i.height}var j=this.cache("target-bounds",function(){return b.getTargetBounds()}),l=j.height,m=j.width,o=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(a){var b=a.outOfBoundsClass,c=a.pinnedClass;if(b){o.push(b)}if(c){o.push(c)}});o.forEach(function(a){["left","top","right","bottom"].forEach(function(b){o.push(a+"-"+b)})});var p=[],q=n({},e),r=n({},this.attachment);this.options.constraints.forEach(function(a){var f=a.to,i=a.attachment,j=a.pin;if("undefined"==typeof i){i=""}var k,n;if(0<=i.indexOf(" ")){var o=i.split(" "),s=y(o,2);n=s[0];k=s[1]}else{k=n=i}var t=T(b,f);if("target"===n||"both"===n){if(c<t[1]&&"top"===q.top){c+=l;q.top="bottom"}if(c+g>t[3]&&"bottom"===q.top){c-=l;q.top="top"}}if("together"===n){if("top"===q.top){if("bottom"===r.top&&c<t[1]){c+=l;q.top="bottom";c+=g;r.top="top"}else if("top"===r.top&&c+g>t[3]&&c-(g-l)>=t[1]){c-=g-l;q.top="bottom";r.top="bottom"}}if("bottom"===q.top){if("top"===r.top&&c+g>t[3]){c-=l;q.top="top";c-=g;r.top="bottom"}else if("bottom"===r.top&&c<t[1]&&c+(2*g-l)<=t[3]){c+=g-l;q.top="top";r.top="top"}}if("middle"===q.top){if(c+g>t[3]&&"top"===r.top){c-=g;r.top="bottom"}else if(c<t[1]&&"bottom"===r.top){c+=g;r.top="top"}}}if("target"===k||"both"===k){if(d<t[0]&&"left"===q.left){d+=m;q.left="right"}if(d+h>t[2]&&"right"===q.left){d-=m;q.left="left"}}if("together"===k){if(d<t[0]&&"left"===q.left){if("right"===r.left){d+=m;q.left="right";d+=h;r.left="left"}else if("left"===r.left){d+=m;q.left="right";d-=h;r.left="right"}}else if(d+h>t[2]&&"right"===q.left){if("left"===r.left){d-=m;q.left="left";d-=h;r.left="right"}else if("right"===r.left){d-=m;q.left="left";d+=h;r.left="left"}}else if("center"===q.left){if(d+h>t[2]&&"left"===r.left){d-=h;r.left="right"}else if(d<t[0]&&"right"===r.left){d+=h;r.left="left"}}}if("element"===n||"both"===n){if(c<t[1]&&"bottom"===r.top){c+=g;r.top="top"}if(c+g>t[3]&&"top"===r.top){c-=g;r.top="bottom"}}if("element"===k||"both"===k){if(d<t[0]){if("right"===r.left){d+=h;r.left="left"}else if("center"===r.left){d+=h/2;r.left="left"}}if(d+h>t[2]){if("left"===r.left){d-=h;r.left="right"}else if("center"===r.left){d-=h/2;r.left="right"}}}if("string"==typeof j){j=j.split(",").map(function(a){return a.trim()})}else if(!0===j){j=["top","left","right","bottom"]}j=j||[];var u=[],v=[];if(c<t[1]){if(0<=j.indexOf("top")){c=t[1];u.push("top")}else{v.push("top")}}if(c+g>t[3]){if(0<=j.indexOf("bottom")){c=t[3]-g;u.push("bottom")}else{v.push("bottom")}}if(d<t[0]){if(0<=j.indexOf("left")){d=t[0];u.push("left")}else{v.push("left")}}if(d+h>t[2]){if(0<=j.indexOf("right")){d=t[2]-h;u.push("right")}else{v.push("right")}}if(u.length){(function(){var a;if("undefined"!=typeof b.options.pinnedClass){a=b.options.pinnedClass}else{a=b.getClass("pinned")}p.push(a);u.forEach(function(b){p.push(a+"-"+b)})})()}if(v.length){(function(){var a;if("undefined"!=typeof b.options.outOfBoundsClass){a=b.options.outOfBoundsClass}else{a=b.getClass("out-of-bounds")}p.push(a);v.forEach(function(b){p.push(a+"-"+b)})})()}if(0<=u.indexOf("left")||0<=u.indexOf("right")){r.left=q.left=!1}if(0<=u.indexOf("top")||0<=u.indexOf("bottom")){r.top=q.top=!1}if(q.top!==e.top||q.left!==e.left||r.top!==b.attachment.top||r.left!==b.attachment.left){b.updateAttachClasses(r,q);b.trigger("update",{attachment:r,targetAttachment:q})}});v(function(){if(!(!1===b.options.addTargetClasses)){t(b.target,p,o)}t(b.element,p,o)});return{top:c,left:d}}});var B=c.Utils,k=B.getBounds,t=B.updateClasses,v=B.defer;c.modules.push({position:function(a){var b=this,c=a.top,d=a.left,e=this.cache("element-bounds",function(){return k(b.element)}),f=e.height,g=e.width,h=this.getTargetBounds(),i=c+f,j=d+g,l=[];if(c<=h.bottom&&i>=h.top){["left","right"].forEach(function(a){var b=h[a];if(b===d||b===j){l.push(a)}})}if(d<=h.right&&j>=h.left){["top","bottom"].forEach(function(a){var b=h[a];if(b===c||b===i){l.push(a)}})}var m=[],n=[];m.push(this.getClass("abutted"));["left","top","right","bottom"].forEach(function(a){m.push(b.getClass("abutted")+"-"+a)});if(l.length){n.push(this.getClass("abutted"))}l.forEach(function(a){n.push(b.getClass("abutted")+"-"+a)});v(function(){if(!(!1===b.options.addTargetClasses)){t(b.target,n,m)}t(b.element,n,m)});return!0}});var y=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(d=(h=g.next()).done);d=!0){c.push(h.value);if(b&&c.length===b)break}}catch(a){e=!0;f=a}finally{try{if(!d&&g["return"])g["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b)){return b}else if(Symbol.iterator in Object(b)){return a(b,c)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();c.modules.push({position:function(a){var b=a.top,c=a.left;if(!this.options.shift){return}var d=this.options.shift;if("function"==typeof this.options.shift){d=this.options.shift.call(this,{top:b,left:c})}var e,f;if("string"==typeof d){d=d.split(" ");d[1]=d[1]||d[0];var g=d,h=y(g,2);e=h[0];f=h[1];e=parseFloat(e,10);f=parseFloat(f,10)}else{e=d.top;f=d.left}b+=e;c+=f;return{top:b,left:c}}});return R});
//# sourceMappingURL=tether.min.js.map
