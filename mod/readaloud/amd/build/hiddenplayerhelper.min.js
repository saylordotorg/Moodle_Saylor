define ("mod_readaloud/hiddenplayerhelper",["jquery","core/log","mod_readaloud/definitions"],function(a,b,c){"use strict";b.debug("Readaloud hidden player helper: initialising");return{controls:{},hiddenplayer:c.hiddenplayer,hiddenplayerbutton:c.hiddenplayerbutton,hiddenplayerbuttonactive:c.hiddenplayerbuttonactive,hiddenplayerbuttonpaused:c.hiddenplayerbuttonpaused,hiddenplayerbuttonplaying:c.hiddenplayerbuttonpaused,init:function init(){this.register_controls();this.register_events()},register_controls:function register_controls(){this.controls.hiddenplayer=a("."+this.hiddenplayer);this.controls.hiddenplayerbutton=a("."+this.hiddenplayerbutton)},register_events:function register_events(){var b=this,c=this.controls.hiddenplayer;this.controls.hiddenplayerbutton.click(function(){var d=a(this).attr("data-audiosource");if(d===c.attr("src")&&!c.prop("paused")){b.dohiddenstop()}else{b.dohiddenplay(d)}})},dohiddenplay:function dohiddenplay(a){var b=this,c=b.controls.hiddenplayer;c.attr("src",a);c[0].pause();c[0].load();var d=c[0].play();if(d!==void 0){d.then(function(){}).catch(function(){})}b.dobuttonicons()},dohiddenstop:function dohiddenstop(){var a=this,b=a.controls.hiddenplayer;b[0].pause();a.dobuttonicons()},dobuttonicons:function dobuttonicons(b){var c=this,d=c.controls.hiddenplayer;if(!b){b=d.attr("src")}c.controls.hiddenplayerbutton.each(function(){var e=a(this).attr("data-audiosource");if(e===b){a(this).addClass(c.activebutton);if(d.prop("paused")){a(this).removeClass(c.hiddenplayerbuttonplaying);a(this).addClass(c.hiddenplayerbuttonpaused);a(this).removeClass(c.hiddenplayerbuttonactive)}else{a(this).removeClass(c.hiddenplayerbuttonpaused);a(this).addClass(c.hiddenplayerbuttonplaying)}}else{a(this).removeClass(c.hiddenplayerbuttonactive);a(this).removeClass(c.hiddenplayerbuttonplaying);a(this).removeClass(c.hiddenplayerbuttonpaused)}})}}});
//# sourceMappingURL=hiddenplayerhelper.min.js.map
