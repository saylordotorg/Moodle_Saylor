define ("mod_threesixo/view",["jquery","core/templates","core/notification","core/ajax","core/str","core/modal_factory","core/modal_events"],function(a,b,c,d,f,g,h){var j={VIEW_FEEDBACK:"[data-action=\"view-feedback\"]",DECLINE_FEEDBACK:"[data-action=\"decline-feedback\"]",UNDO_DECLINE:"[data-action=\"undo-decline\"]"},k;function i(){var e=d.call([{methodname:"mod_threesixo_data_for_participant_list",args:{threesixtyid:k}}]);a.when(e[0]).then(function(a){return b.render("mod_threesixo/list_participants",a)}).done(function(c,d){a("[data-region=\"participantlist\"]").replaceWith(c);b.runTemplateJS(d)}).fail(c.exception)}var l=function(a){k=a;this.registerEvents()};l.prototype.registerEvents=function(){a(j.DECLINE_FEEDBACK).click(function(j){j.preventDefault();var e=a(this).data("statusid"),k=a(this).data("name"),l=b.render("mod_threesixo/decline_feedback",{statusid:e,name:k}),m=f.get_string("declinefeedback","mod_threesixo");a.when(m).then(function(a){return g.create({title:a,body:l,large:!0,type:g.types.SAVE_CANCEL})}).done(function(b){b.show();b.getRoot().on(h.hidden,function(){b.destroy()});b.getRoot().on(h.save,function(){var b=a("#decline-statusid").val(),e=a("#decline-reason").val().trim(),f=d.call([{methodname:"mod_threesixo_decline_feedback",args:{statusid:b,declinereason:e}}]);f[0].done(function(){i()}).fail(c.exception)})}).fail(c.exception)});a(j.UNDO_DECLINE).click(function(b){b.preventDefault();var e=a(this).data("statusid"),f=d.call([{methodname:"mod_threesixo_undo_decline",args:{statusid:e}}]);f[0].done(function(){i()}).fail(c.exception)})};return l});
//# sourceMappingURL=view.min.js.map
