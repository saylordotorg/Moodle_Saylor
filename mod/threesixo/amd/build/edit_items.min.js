define ("mod_threesixo/edit_items",["jquery","core/templates","core/notification","core/ajax","core/str","mod_threesixo/question_bank","core/yui"],function(a,b,c,d,e,f){var g={DELETE:"[data-action=\"delete-item\"]",MOVE_UP:"[data-action=\"move-item-up\"]",MOVE_DOWN:"[data-action=\"move-item-down\"]"},h,i=function(a){h=a;this.registerEvents()};i.refreshItemList=function(){var e=d.call([{methodname:"mod_threesixo_get_items",args:{threesixtyid:h}}]);a.when(e[0]).then(function(c){var d={threesixtyid:h},e=[],f=c.items.length;a.each(c.items,function(a,b){var c=b;c.deletebutton=!0;c.moveupbutton=!1;c.movedownbutton=!1;c.type=b.typetext;if(1<f){if(1===b.position){c.movedownbutton=!0}else if(b.position===f){c.moveupbutton=!0}else if(1<b.position&&b.position<f){c.moveupbutton=!0;c.movedownbutton=!0}}e.push(c)});d.allitems=e;return b.render("mod_threesixo/list_360_items",d)}).done(function(c,d){a("[data-region=\"itemlist\"]").replaceWith(c);b.runTemplateJS(d)}).fail(c.exception)};i.callItemAction=function(b,e){var f=d.call([{methodname:b,args:{itemid:e}}]);f[0].done(function(b){if(b.result){i.refreshItemList();return!0}var c=b.warnings.join(a("<br/>"));throw new Error(c)}).fail(c.exception)};i.prototype.registerEvents=function(){a("#btn-question-bank").click(function(a){a.preventDefault();f.init(h)});a(g.DELETE).click(function(b){b.preventDefault();var c=a(this).data("itemid");i.callItemAction("mod_threesixo_delete_item",c)});a(g.MOVE_UP).click(function(b){b.preventDefault();var c=a(this).data("itemid");i.callItemAction("mod_threesixo_move_item_up",c)});a(g.MOVE_DOWN).click(function(b){b.preventDefault();var c=a(this).data("itemid");i.callItemAction("mod_threesixo_move_item_down",c)})};return i});
//# sourceMappingURL=edit_items.min.js.map
