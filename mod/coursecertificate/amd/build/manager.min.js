define ("mod_coursecertificate/manager",["core/ajax","core/notification","core/templates","core/str"],function(a,b,c,d){var h={AUTOMATICSENDREGION:"[data-region='automaticsend-alert']",HIDDENWARNING:".hidden-warning",NOAUTOSENDINFO:".noautosend-info",REPORTREGION:"[data-region='issues-report']",TOGGLEAUTOMATICSEND:"[data-action='toggle-automaticsend']",REVOKEISSUE:"[data-action='revoke-issue']",LOADING:".loading-overlay"},i={AUTOMATICSENDALERT:"mod_coursecertificate/automaticsend_alert",ISSUESREPORT:"mod_coursecertificate/issues_report"},j={UPDATEAUTOMATICSEND:"mod_coursecertificate_update_automaticsend",REVOKEISSUE:"tool_certificate_revoke_issue"};function e(a,b){if(b){document.querySelector(a).classList.remove("d-none");document.querySelector(a).classList.remove("invisible")}else{document.querySelector(a).classList.add("d-none");document.querySelector(a).classList.add("invisible")}}function f(f){var g=f.querySelector(h.TOGGLEAUTOMATICSEND).dataset,k=g.certificateid,l=g.automaticsend,m="0"===l,n=m?[{key:"confirmation",component:"admin"},{key:"enableautomaticsendpopup",component:"coursecertificate"},{key:"confirm"},{key:"cancel"}]:[{key:"confirmation",component:"admin"},{key:"disableautomaticsend",component:"coursecertificate"},{key:"confirm"},{key:"cancel"}];d.get_strings(n).then(function(d){b.confirm(d[0],d[1],d[2],d[3],function(){M.util.js_pending("mod_coursecertificate_toggle_automaticsend");e(h.LOADING,!0);a.call([{methodname:j.UPDATEAUTOMATICSEND,args:{id:k,automaticsend:m}}])[0].then(function(a){var d=a.showhiddenwarning,g=a.shownoautosendinfo;c.render(i.AUTOMATICSENDALERT,{certificateid:k,automaticsend:m},"").then(function(a){f.innerHTML=a;e(h.HIDDENWARNING,d);e(h.NOAUTOSENDINFO,g);M.util.js_complete("mod_coursecertificate_toggle_automaticsend");return null}).fail(b.exception);return null}).fail(b.exception)});return null}).fail(b.exception)}function g(c){d.get_strings([{key:"confirmation",component:"admin"},{key:"revokeissue",component:"coursecertificate"},{key:"confirm"},{key:"cancel"}]).then(function(d){b.confirm(d[0],d[1],d[2],d[3],function(){M.util.js_pending("mod_coursecertificate_revoke_issue");a.call([{methodname:j.REVOKEISSUE,args:{id:c}}])[0].then(function(){M.util.js_complete("mod_coursecertificate_revoke_issue");window.location.reload();return null}).fail(b.exception)});return null}).fail(b.exception)}return{init:function init(){var a=document.querySelector(h.AUTOMATICSENDREGION);if(a){a.addEventListener("click",function(b){if(b.target&&b.target.closest(h.TOGGLEAUTOMATICSEND)){b.preventDefault();f(a)}})}var b=document.querySelector(h.REPORTREGION);if(b){b.addEventListener("click",function(a){var b=a.target&&a.target.closest(h.REVOKEISSUE);if(b){a.preventDefault();var c=b.dataset.issueid;g(c)}})}}}});
//# sourceMappingURL=manager.min.js.map
