YUI.add("moodle-availability_relativedate-form",function(s,e){M.availability_relativedate=M.availability_relativedate||{},M.availability_relativedate.form=s.Object(M.core_availability.plugin),M.availability_relativedate.form.timeFields=null,M.availability_relativedate.form.startFields=null,M.availability_relativedate.form.isSection=null,M.availability_relativedate.form.warningStrings=null,M.availability_relativedate.form.initInner=function(e,t,a,i,l){this.timeFields=e,this.startFields=t,this.isSection=a,this.warningStrings=i,this.activitySelector=l},M.availability_relativedate.form.getNode=function(e){for(var t,a,i,l='<span class="availability-relativedate">',n=0,r=0,n=0;n<this.warningStrings.length;n++)l+='<div class="alert alert-warning alert-block fade in " role="alert">'+this.warningStrings[n]+"</div>";for(l+='<label><select name="relativenumber">',n=1;n<60;n++)l+='<option value="'+n+'">'+n+"</option>";for(l=l+"</select></label> "+'<label><select name="relativednw">',n=0;n<this.timeFields.length;n++)l+='<option value="'+(t=this.timeFields[n]).field+'">'+t.display+"</option>";for(l=l+"</select></label> "+'<label><select name="relativestart">',n=0;n<this.startFields.length;n++)l+='<option value="'+(t=this.startFields[n]).field+'">'+t.display+"</option>";for(l=l+"</select></label>"+('<label><select name="relativecoursemodule"'+(7!=e.s?' style="display: none;"':"")+">"),n=0;n<this.activitySelector.length;n++)for(l+="<option disabled>"+this.activitySelector[n].name+"</option>",r=0;r<this.activitySelector[n].coursemodules.length;r++)l+='<option value="'+this.activitySelector[n].coursemodules[r].id,0==this.activitySelector[n].coursemodules[r].completionenabled&&(l+=" disabled"),l+='">'+this.activitySelector[n].coursemodules[r].name+"</option>";return a=s.Node.create("<span>"+(l+="</select></label>")+"</span>"),n=1,e.n!==undefined&&(n=e.n),a.one("select[name=relativenumber]").set("value",n),n=2,e.d!==undefined&&(n=e.d),a.one("select[name=relativednw]").set("value",n),n=1,e.s!==undefined&&(n=e.s),a.one("select[name=relativestart]").set("value",n),n=0,e.m!==undefined&&(n=e.m),a.one("select[name=relativecoursemodule]").set("value",n),M.availability_relativedate.form.addedEvents||(M.availability_relativedate.form.addedEvents=!0,e=s.one(".availability-field"),i=function(e){var e=e.ancestor("span.availability_relativedate"),t=e.one("select[name=relativestart]");"7"==t.get("value")?e.one("select[name=relativecoursemodule]").set("style",""):e.one("select[name=relativecoursemodule]").set("style","display: none;"),M.core_availability.form.update()},e.delegate("change",function(){i(this)},".availability_relativedate select")),a},M.availability_relativedate.form.fillValue=function(e,t){e.n=t.one("select[name=relativenumber]").get("value"),e.d=t.one("select[name=relativednw]").get("value"),e.s=t.one("select[name=relativestart]").get("value"),e.m=t.one("select[name=relativecoursemodule]").get("value")},M.availability_relativedate.form.fillErrors=function(e,t){this.fillValue({},t)}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});