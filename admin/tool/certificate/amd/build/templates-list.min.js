define ("tool_certificate/templates-list",["jquery","tool_certificate/modal_form","core/notification","core/str","core/ajax","core/toast"],function(a,b,c,d,e,f){var g=function(a,c,e){var f=new b({formClass:"tool_certificate\\form\\details",args:e,modalConfig:{title:c},saveButtonText:d.get_string("save"),triggerElement:a});return f},h=function(b){var c=a(b.currentTarget).data("contextid");b.preventDefault();var e=g(a(b.currentTarget),d.get_string("createtemplate","tool_certificate"),{id:0,contextid:c});e.onSubmitSuccess=function(a){window.location.href=a}},i=function(b){b.preventDefault();var c=a(b.currentTarget),e=c.attr("data-id"),f=c.attr("data-name"),h=g(c,d.get_string("editcertificate","tool_certificate",f),{id:e});h.onSubmitSuccess=function(){window.location.reload()}},j=function(c){c.preventDefault();var e=a(c.currentTarget),g=new b({formClass:"tool_certificate\\form\\certificate_issues",args:{tid:e.attr("data-tid")},modalConfig:{title:d.get_string("issuecertificates","tool_certificate"),scrollable:!1},saveButtonText:d.get_string("save"),triggerElement:e});g.onSubmitSuccess=function(a){a=parseInt(a,10);if(a){d.get_strings([{key:"oneissuewascreated",component:"tool_certificate"},{key:"aissueswerecreated",component:"tool_certificate",param:a}]).done(function(b){var c=1<a?b[1]:b[0];f.add(c)})}else{d.get_string("noissueswerecreated","tool_certificate").done(function(a){f.add(a)})}}},k=function(c){c.preventDefault();var e=a(c.currentTarget),f=e.attr("data-id"),g=new b({formClass:"tool_certificate\\form\\category_selector",args:{id:f},modalConfig:{title:d.get_string("confirm")},saveButtonText:d.get_string("duplicate","tool_certificate"),triggerElement:e});g.onSubmitSuccess=function(){window.location.reload()}},l=function(b){b.preventDefault();var f=a(b.currentTarget).attr("data-id");d.get_strings([{key:"confirm",component:"moodle"},{key:"duplicatetemplateconfirm",component:"tool_certificate",param:a(b.currentTarget).attr("data-name")},{key:"duplicate",component:"tool_certificate"},{key:"cancel",component:"moodle"}]).done(function(a){c.confirm(a[0],a[1],a[2],a[3],function(){var a=e.call([{methodname:"tool_certificate_duplicate_template",args:{id:f}}]);a[0].done(function(){window.location.reload()}).fail(c.exception)})}).fail(c.exception)},m=function(b){b.preventDefault();var f=a(b.currentTarget).attr("data-id");d.get_strings([{key:"confirm",component:"moodle"},{key:"deletetemplateconfirm",component:"tool_certificate",param:a(b.currentTarget).attr("data-name")},{key:"delete",component:"moodle"},{key:"cancel",component:"moodle"}]).done(function(a){c.confirm(a[0],a[1],a[2],a[3],function(){var a=e.call([{methodname:"tool_certificate_delete_template",args:{id:f}}]);a[0].done(function(){window.location.reload()}).fail(c.exception)})}).fail(c.exception)};return{init:function init(){a("body").on("click","[data-element=\"addbutton\"]",h).on("click","[data-action=\"editdetails\"]",i).on("click","[data-action=\"issue\"]",j).on("click","[data-action=\"duplicate\"][data-selectcategory=\"1\"]",k).on("click","[data-action=\"duplicate\"][data-selectcategory=\"0\"]",l).on("click","[data-action=\"delete\"]",m)}}});
//# sourceMappingURL=templates-list.min.js.map
