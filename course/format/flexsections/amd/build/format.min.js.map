{"version":3,"file":"format.min.js","sources":["../src/format.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Various actions on modules and sections in the editing mode - hiding, duplicating, deleting, etc.\n *\n * @module     format_flexsections/format\n * @copyright  2020 Marina Glancy\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/ajax', 'core/templates', 'core/notification', 'core/str'],\n    function($, Ajax, Templates, Notification, Str) {\n        var confirmAction = function(e, message) {\n            // Prevent the default button action.\n            e.preventDefault();\n            var href = $(e.currentTarget).attr('href');\n            Str.get_strings([\n                {key: 'confirm', component: 'moodle'},\n                {key: message, component: 'format_flexsections'},\n                {key: 'yes', component: 'moodle'},\n                {key: 'no', component: 'moodle'}\n            ]).done(function(strings) {\n                Notification.confirm(\n                    strings[0], // Confirm.\n                    strings[1], // Are you sure you want to delete.\n                    strings[2], // Yes.\n                    strings[3], // No.\n                    function() {\n                        window.location.href = href + '&confirm=1';\n                    }\n                );\n            }).fail(Notification.exception);\n        };\n\n        return {\n            init: function() {\n                $('body').on('click', 'li.section > .controls > a[data-action=\"delete\"]', function(e) {\n                    confirmAction(e, 'confirmdelete');\n                });\n                $('body').on('click', 'li.section > .controls > a[data-action=\"mergeup\"]', function(e) {\n                    confirmAction(e, 'confirmmerge');\n                });\n            }\n        };\n    }\n);\n"],"names":["define","$","Ajax","Templates","Notification","Str","confirmAction","e","message","preventDefault","href","currentTarget","attr","get_strings","key","component","done","strings","confirm","window","location","fail","exception","init","on"],"mappings":";;;;;;;AAsBAA,oCAAO,CAAC,SAAU,YAAa,iBAAkB,oBAAqB,aAClE,SAASC,EAAGC,KAAMC,UAAWC,aAAcC,SACnCC,cAAgB,SAASC,EAAGC,SAE5BD,EAAEE,qBACEC,KAAOT,EAAEM,EAAEI,eAAeC,KAAK,QACnCP,IAAIQ,YAAY,CACZ,CAACC,IAAK,UAAWC,UAAW,UAC5B,CAACD,IAAKN,QAASO,UAAW,uBAC1B,CAACD,IAAK,MAAOC,UAAW,UACxB,CAACD,IAAK,KAAMC,UAAW,YACxBC,MAAK,SAASC,SACbb,aAAac,QACTD,QAAQ,GACRA,QAAQ,GACRA,QAAQ,GACRA,QAAQ,IACR,WACIE,OAAOC,SAASV,KAAOA,KAAO,mBAGvCW,KAAKjB,aAAakB,kBAGlB,CACHC,KAAM,WACFtB,EAAE,QAAQuB,GAAG,QAAS,oDAAoD,SAASjB,GAC/ED,cAAcC,EAAG,oBAErBN,EAAE,QAAQuB,GAAG,QAAS,qDAAqD,SAASjB,GAChFD,cAAcC,EAAG"}