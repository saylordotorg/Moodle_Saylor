define(["jquery","jqueryui","filter_rein/jquery.touchpunch.improved","filter_rein/raphael","filter_rein/swiper","core/str"],function(a,b,c,d,e,f){var g=!1,h=function(a){g&&console.log(a)};return a.fn.rotator=function(b){function c(){var b=0;f.find(".photo").each(function(){a(this).outerHeight()>b&&(b=a(this).outerHeight())}),f.css("min-height",b)}function d(){var a=g.fadeDuration,b=f.children().length,c=f.children(":eq("+h+")");h+1===b?h=0:h++;var d=f.children(":eq("+h+")");c.fadeOut(a),d.fadeIn(a)}function e(){var b=g.fadeInterval;a.fn.rotator.interval=setInterval(d,b)}var f=a(this),g=a.extend({},a.fn.rotator.defaults,b);f.children(":eq(0)").siblings().hide();var h=0;c(),a(window).resize(function(){c()}),a(this).hover(function(){clearInterval(a.fn.rotator.interval)},function(){e()}),e()},a.fn.rotator.defaults={fadeDuration:1e3,fadeInterval:2e3},a.fn.onedrag=function(b){var c=a(this),d=(a.extend({},a.fn.onedrag.defaults,b),{});d.answerIsCorr=!1,c.find(".checkBtn").button({disabled:!0}),c.find(".draggable").draggable({drag:function(){d.answIsCorr=!1}}),c.find(".droppable").droppable({activeClass:"ui-state-active",hoverClass:"ui-state-highlight",drop:function(b,e){c=a(this),c.addClass("ui-state-disabled"),c.hasClass("corr01")?d.answIsCorr=!0:d.answIsCorr=!1,c.parents(".oneDrag").find(".checkBtn").button({disabled:!1})},out:function(b,e){c=a(this),c.removeClass("ui-state-disabled"),d.answIsCorr=!1,c.parents(".oneDrag").find(".checkBtn").button({disabled:!0})}}),d.posRemediation=c.find(".remediation.positive").dialog({modal:!0,autoOpen:!1,buttons:{Ok:function(){a(this).dialog("close")}}}),d.negRemediation=c.find(".remediation.negative").dialog({modal:!0,autoOpen:!1,buttons:{Ok:function(){a(this).dialog("close")}}}),c.find(".checkBtn").click(function(a){d.answIsCorr===!0?d.posRemediation.dialog("open"):d.negRemediation.dialog("open")})},a.fn.onedrag.defaults={},a.fn.clickhotspot=function(b){function c(){var a=d.children(".clickStage").offset();d.children(".clickTarg").css("position","absolute").offset({left:a.left+Number(d.find(".clickTarg .xcoord").html()),top:a.top+Number(d.find(".clickTarg .ycoord").html())})}var d=a(this);a.extend({},a.fn.clickhotspot.defaults,b);c(),setTimeout(function(){c()},500),a(window).resize(function(){c()});var e=d.find(".remediation.positive").dialog({autoOpen:!1,modal:!0,buttons:{Ok:function(){a(this).dialog("close")}}}),f=d.find(".remediation.negative").dialog({autoOpen:!1,modal:!0,buttons:{Ok:function(){a(this).dialog("close")}}});d.find(".clickTarg").click(function(a){e.dialog("open")}),d.find(".clickStage").click(function(a){f.dialog("open")})},a.fn.clickhotspot.defaults={},a.fn.draganddropsorting=function(b){a(this).each(function(){function c(){g===!1&&(f===!0?j.dialog("open"):k.dialog("open"),g=!0)}function d(){f=!0;for(var a=0;a<e.find("li").length;a++){var b=e.find("li:eq("+a+")");b.removeClass("ui-icon-arrow-4"),b.hasClass("belongs-in-"+b.parent().attr("id"))?(b.addClass("ui-state-highlight"),b.find("span").addClass("ui-icon-check")):(b.find("span.ui-icon-check").removeClass("ui-icon-check"),b.find("span").addClass("ui-icon-closethick"),f=!1)}e.find(".sortable").animate({opacity:"100"},500,"",c)}var e=a(this),f=(a.extend({},a.fn.draganddropsorting.defaults,b),!1),g=!1,h=0;e.find(".sortable").each(function(){h+=a(this).outerWidth(!0)}),e.find(".sortableCols").css("max-width",h);var i=0;e.find(".sortable").each(function(){a(this).height()>i&&(i=a(this).height())}),e.find(".sortable").css("min-height",i),e.find(".sortable").sortable({connectWith:"ul",placeholder:"ui-state-highlight",dropOnEmpty:!0});var j=e.find(".remediation.positive").dialog({autoOpen:!1,modal:!0,buttons:{Ok:function(){a(this).dialog("close")}}}),k=e.find(".remediation.negative").dialog({autoOpen:!1,modal:!0,buttons:{Ok:function(){a(this).dialog("close")}}});e.find("button.checkAnswers").click(function(){g=!1,e.find(".sortable").animate({opacity:"0"},500,"",d)})})},a.fn.draganddropsorting.defaults={},a.fn.domultidrop=function(b){function c(a){a.css("background",""),a.find("span").removeClass("ui-icon-check ui-icon-closethick").addClass("ui-icon-arrow-4")}function d(a){a.fadeTo(400,1)}function e(a){a.hasClass("drop-ok")?(a.css("background",h.correct),a.find("span").removeClass("ui-icon-arrow-4").addClass("ui-icon-check")):(a.css("background",h.incorrect),a.find("span").removeClass("ui-icon-arrow-4").addClass("ui-icon-closethick")),d(a)}function f(){var b=!0;g.find(".ui-draggable").each(function(){a(this).hasClass("is-in-droppable")&&!a(this).hasClass("drop-ok")&&(b=!1),!a(this).hasClass("is-in-droppable")&&a(this).hasClass("drop-ok")&&(b=!1)}),b?(g.find(".big-droppable").addClass("allcorrect"),g.find(".big-droppable").css("border-color",h.allcorrect)):(g.find(".big-droppable").removeClass("allcorrect"),g.find(".big-droppable").css("border-color",""))}var g=a(this),h=a.extend({},a.fn.domultidrop.defaults,b);g.find(".ui-draggable").draggable(),g.find(".big-droppable").droppable({drop:function(b,d){var g=a(d.draggable);g.addClass("is-in-droppable").fadeTo(400,.1,function(){c(g),e(g)}),f()},out:function(b,e){var g=a(e.draggable);g.removeClass("is-in-droppable").fadeTo(400,.1,function(){c(g),d(g)}),f()}})},a.fn.domultidrop.defaults={correct:"#B1EBAB",incorrect:"#EBB7AB",allcorrect:"#B1EBAB"},a.fn.dostepwise=function(b){var c=a(this),e=(a.extend({},a.fn.dostepwise.defaults,b),[]);c.find(".arrow").each(function(b,c){a(this).empty();var e=d(c,100,60);e.path("M 30 10 L 30 30 L 10 30 L 50 50 L 90 30 L 70 30 L 70 10 Z").attr({fill:"gray",stroke:"black","stroke-linecap":"round","stroke-width":5,"stroke-linejoin":"round"})}),c.find(".step-detail").each(function(b,c){var d=a(c);e[b]=d.dialog({autoOpen:!1,modal:!0,buttons:{Ok:function(){a(this).dialog("close")}},title:d.siblings(".step-title").text(),width:d.width(),show:"blind",hide:"blind"})}),c.find(".step").click(function(b){var c=a(this),d=c.parent().find(".step").index(c);e[d].dialog("open")})},a.fn.dostepwise.defaults={},a.fn.dosequential=function(b){var c=(a.extend({},a.fn.dosequential.defaults,b),a(this)),d=c.find("img.sequential-bg");c.find(".sequential-cont").css({background:"url("+d.attr("src")+")","background-size":d.attr("width")+"px "+d.attr("height")+"px","-moz-background-size":d.attr("width")+"px "+d.attr("height")+"px"});var e=[];c.find("div.item-details").each(function(b,c){e[b]=a(c).dialog({autoOpen:!1,modal:!0,dialogClass:"sequential-dialog",width:"80%",buttons:{Ok:function(){a(this).dialog("close")}}})}),c.find("div.sequential-item").each(function(b,c){var d=a(c);d.click(function(a){e[b].dialog("open")}),d.delay(2e3*b).show("blind",1e3)})},a.fn.dosequential.defaults={},a.fn.markit=function(b){function c(){s.forEach(function(a){var b=a.attr("path").toString();if(b.search(/[lL]/)!=-1){var c=b.split("L"),d=c[0];c.shift();for(var e=[],f=0;f<c.length;f++){var g=0,h=0;if(e.length>0)var i=e[e.length-1].split(","),j=c[f].split(","),g=Math.abs(i[0]-j[0]),h=Math.abs(i[1]-j[1]);(0==f||f==c.length-1||g>30||h>30)&&e.push(c[f])}var k=d+" R"+e.join(" ");a.attr("path",k)}})}function e(b){k.utensilIndex=0,a(b).addClass("selected").siblings(".use-highlight-btn").removeClass("selected"),l.find("svg").css("cursor","url("+M.cfg.wwwroot+"/filter/rein/pix/pencil-flip.png), pointer")}function f(b){k.utensilIndex=1,a(b).addClass("selected").siblings(".use-pen-btn").removeClass("selected"),l.find("svg").css("cursor","url("+M.cfg.wwwroot+"/filter/rein/pix/highlight-flip.png), pointer")}function g(){if(!G.hasClass("disabled")){var a=s.items.length-1;for(a;a>-1;a--)s.items[a].remove(),s.items.splice(a,1),s.splice(a,1)}G.addClass("disabled")}function h(){if(!G.hasClass("disabled")){var a=s.items.length-1;s.items[a].remove(),s.items.splice(a,1),s.splice(a,1)}0===s.items.length&&G.addClass("disabled")}function i(b){a(b).hasClass("disabled")&&a(b).removeClass("disabled")}function j(b,c){var d=a(b);if(d.hasClass("draw-text"))var e=d.children(".text").html(),f=e&&e.length>=1?String(e):"Text string not provided!",g=d.children(".x").html(),h=g&&g.length>=1?Number(g):100,i=d.children(".y").html(),j=i&&i.length>=1?Number(i):100,k=d.children(".font-family").html(),l=k&&k.length>=1?String(k):"Helvetica, Arial, sans-serif",m=d.children(".font-size").html(),n=m&&m.length>=1?Number(m):20,p=d.children(".fill").html(),q=p&&p.length>=1?String(p):"#000",r=d.children(".opacity").html(),s=r&&r.length>=1?Number(r):1,t=d.children(".font-weight").html(),u=t&&t.length>=1?String(t):"bold",v=o.text(h,j,f).attr({"font-family":l,fill:q,"font-size":n,"font-weight":u,opacity:s,"text-anchor":"start"});else if(d.hasClass("draw-line"))var w=d.children(".startx").html(),x=w&&w.length>=1?Number(w):0,y=d.children(".starty").html(),z=y&&y.length>=1?Number(y):100,A=d.children(".stopx").html(),B=A&&A.length>=1?Number(A):200,C=d.children(".stopy").html(),D=C&&C.length>=1?Number(C):100,E=d.children(".stroke-width").html(),F=E&&E.length>=1?Number(E):3,G=d.children(".stroke").html(),H=G&&G.length>=1?String(G):"#000",I=d.children(".stroke-opacity").html(),J=I&&I.length>=1?Number(I):1,v=o.path("M"+x+","+z+" L"+B+","+D).attr({"stroke-width":F,stroke:H,"stroke-opacity":J,"stroke-linecap":"round"});else if(d.hasClass("draw-image"))var K=d.children(".src").html(),L=K&&K.length>=1?String(K):alert("Image src not specified."),M=d.children(".x").html(),N=M&&M.length>=1?Number(M):0,O=d.children(".y").html(),P=O&&O.length>=1?Number(O):0,Q=d.children(".width").html(),R=Q&&Q.length>=1?Number(Q):200,S=d.children(".height").html(),T=S&&S.length>=1?Number(S):200,v=o.image(L,N,P,R,T);else if(d.hasClass("draw-path"))var U=d.children(".path").html(),E=(U&&U.length>=1?String(U):alert("Path not specified."),d.children(".stroke-width").html()),F=E&&E.length>=1?Number(E):3,G=d.children(".stroke").html(),H=G&&G.length>=1?String(G):"#000",I=d.children(".stroke-opacity").html(),J=I&&I.length>=1?Number(I):1,v=o.path(U).attr({"stroke-width":F,stroke:H,"stroke-opacity":J,"stroke-linecap":"round"});c.push(v)}var k=a.extend({},a.fn.markit.defaults,b),l=a(this);if(!(l.find(".draw").length>0)){l.append('<div class="draw"></div>'),l[0].ontouchmove=function(a){a.preventDefault()};var m=l.css("width");m=m.replace("px",""),m=Number(m);var n=l.css("height");n=n.replace("px",""),n=Number(n);var o=d(l.find(".draw")[0],m,n),p=o.rect(0,0,m,n);p.attr("fill","#000000"),p.attr("fill-opacity",0),p.attr("stroke","#000000"),p.attr("stroke-opacity",0);var q=o.set(),r=o.set(),s=o.set();p.mousemove(function(a){var b,c,d=a,e=!!document.all;e?(b=d.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,c=d.clientY+document.body.scrollTop+document.documentElement.scrollTop):(b=d.pageX,c=d.pageY);var f=l.offset();this.ox=b-f.left,this.oy=c-f.top});var t,u=function(){g_masterPathArray=new Array,i(G)},v=function(a,b){0==g_masterPathArray.length?(g_masterPathArray[0]=["M",this.ox,this.oy],t=o.path(g_masterPathArray),t.attr({stroke:k.utensils[k.utensilIndex].stroke,"stroke-width":k.utensils[k.utensilIndex].strokeWidth,"stroke-opacity":k.utensils[k.utensilIndex].strokeOpacity,"stroke-linecap":"round","stroke-linejoin":"round"})):(g_masterPathArray[g_masterPathArray.length]=["L",this.ox,this.oy],t.attr({path:g_masterPathArray}))},w=function(){s.push(t)};if(p.drag(v,u,w),$controls=l.siblings(".markit-controls-cont").children(".markit-controls"),0==$controls.length){l.after('<div class="markit-controls-cont"><div class="markit-controls"></div></div>'),$controls=l.siblings(".markit-controls-cont").children(".markit-controls");var x=" ";x+='<div class="use-pen-btn control selected" title="'+M.util.get_string("usepenbuttonlabel","filter_rein")+'">',x+='<div class="icon"></div>',x+='<div class="label"></div>',x+="</div>",$controls.append(x);var y=" ";y+='<div class="use-highlight-btn control" title="'+M.util.get_string("usehighlightbuttonlabel","filter_rein")+'">',y+='<div class="icon"></div>',y+='<div class="label"></div>',y+="</div>",$controls.append(y);var z=" ";z+='<div class="undo-btn control disabled" title="'+M.util.get_string("undobuttonlabel","filter_rein")+'">',z+='<span class="ui-icon ui-icon ui-icon-arrowreturnthick-1-w"></span>',z+='<span class="label">'+M.util.get_string("undobuttonlabel","filter_rein")+"</span>",z+="</div>",$controls.append(z);var A=" ";A+='<div class="clear-btn control disabled" title="'+M.util.get_string("clearbuttonlabel","filter_rein")+'">',A+='<span class="ui-icon ui-icon ui-icon-close"></span>',A+='<span class="label">'+M.util.get_string("clearbuttonlabel","filter_rein")+"</span>",A+="</div>",$controls.append(A)}if(l.hasClass("designermode")){var B=" ";B+='<div class="smooth-btn control disabled" title="'+M.util.get_string("smoothlinesbuttonlabel","filter_rein")+'">',B+='<span class="ui-icon ui-icon-shuffle"></span>',B+='<span class="label">'+M.util.get_string("smoothlinesbuttonlabel","filter_rein")+"</span>",B+="</div>",$controls.append(B),$controls.find(".smooth-btn").click(c);var C=" ";C+='<div class="markup-btn control disabled" title="'+M.util.get_string("getmarkupbuttonlabel","filter_rein")+'">',C+='<span class="ui-icon ui-icon-clipboard"></span>',C+='<span class="label">'+M.util.get_string("getmarkupbuttonlabel","filter_rein")+"</span>",C+="</div>",$controls.append(C),$controls.find(".markup-btn").click(function(){var b="";s.forEach(function(a){b+='<div class="draw-path">\n',b+='   <div class="path">\n',b+="       "+a.attr("path")+"\n",b+="   </div>\n",b+='   <div class="stroke">'+a.attr("stroke")+"</div>\n",b+='   <div class="stroke-width">'+a.attr("stroke-width")+"</div>\n",b+='   <div class="stroke-opacity">'+a.attr("stroke-opacity")+"</div>\n",b+="</div>\n"}),""!=b&&(a("#markupclipboard pre").text(b),E.dialog("open"))});var D='<div id="markupclipboard">';D+="<p>"+M.util.get_string("markitmodalmarkupinstructions","filter_rein")+"</p>",D+="<pre></pre>",D+="</div>",l.append(D);var E=a("#markupclipboard").dialog({autoOpen:!1,modal:!0,buttons:{Ok:function(){a(this).dialog("close")}},title:M.util.get_string("markitmodalmarkuptitle","filter_rein"),width:600})}if(a(".markit-controls .use-highlight-btn").click(function(b){var c=a(this);f(c)}),a(".markit-controls .use-pen-btn").click(function(b){var c=a(this);e(c)}),a(".markit-controls .clear-btn").click(function(a){g()}),a(".markit-controls .undo-btn").click(function(a){h()}),a.trim(a(".draw-on-check").html())){var F=" ";F+='<div class="checkit-btn control disabled" title="'+M.util.get_string("getcheckitbuttonlabel","filter_rein")+'">',F+='<span class="ui-icon ui-icon-check"></span>',F+='<span class="ui-icon ui-icon-close"></span>',F+='<span class="label">'+M.util.get_string("getcheckitbuttonlabel","filter_rein")+"</span>",F+="</div>",a(".markit-controls").append(F),a(".markit-controls .checkit-btn").click(function(b){a(this).hasClass("disabled")||(a(this).toggleClass("showing"),a(this).hasClass("showing")?(r.show(),s.attr({opacity:.3})):(s.attr({opacity:1}),r.hide()))})}var G=$controls.find(".undo-btn, .clear-btn, .smooth-btn, .markup-btn, .checkit-btn");return a(".markit-controls .control").button(),l.find(".draw-on-load").children().each(function(a,b){j(b,q)}),l.find(".draw-on-check").children().each(function(a,b){j(b,r)}),r.hide(),p.toFront(),o}},a.fn.markit.defaults={utensils:[{stroke:"#000",strokeWidth:3,strokeOpacity:1,cursor:function(){if(M)return"url("+M.cfg.wwwroot+"/theme/idstandard/pix/pencil-flip.png), auto;"}},{stroke:"#EDF30C",strokeWidth:10,strokeOpacity:.5,cursor:function(){if(M)return"url("+M.cfg.wwwroot+"/theme/idstandard/pix/highlight-flip.png), auto;"}}],utensilIndex:0},a.fn.dotip=function(b){a.extend({},a.fn.dotip.defaults,b);a(".tip-trigger").tooltip({items:"img, span, div, [title]",classes:{"ui-tooltip":"rein-tooltip"},track:!0,content:function(){var b=a(this);if(b.is("[title]"))return b.attr("title");if(b.is("img"))return b.attr("alt");if(b.is("span")||b.is("div")){var c=b.attr("id"),d="#tip-source-"+c;return a(d).html()}}})},a.fn.dotip.defaults={},a.fn.doresponsivetables=function(){a(this).each(function(){var b=a(this).find("table"),c=b.find("th");if(c.length>0){var d=new Array;c.each(function(){d.push(a(this).text())}),b.find("tr").each(function(b,c){var e=a(this),f=e.find("td");d.length==f.length&&f.each(function(b,c){var e=a(this).attr("data-label");"undefined"!=typeof e&&e!==!1||a(this).attr("data-label",d[b])})})}})},a.fn.domodal=function(b){var c=(a.extend({},a.fn.domodal.defaults,b),a(this)),d=c.attr("data-modaldetail"),e=a("#"+d),f=e.dialog({autoOpen:!1,modal:!0,buttons:{Ok:function(){a(this).dialog("close")}},title:c.attr("title"),width:e.width(),beforeClose:function(){var b=f.find("iframe");b.length>0&&b.each(function(){var b=a(this).attr("src");a(this).attr("src",""),a(this).attr("src",b)})}});c.click(function(a){f.dialog("open"),a.preventDefault()})},a.fn.domodal.defaults={},a.fn.doequalcolumns=function(){a(this).each(function(){var b=a(this).children(".equal-column").length;a(this).children(".equal-column").addClass("equal-column-"+b)})},a.fn.dotoggle=function(){a(this).each(function(){a(this).unbind("click"),a(this).click(function(){var b=a(this).attr("data-target"),c=a(b);if(c.hasClass("toggle-hidden")){c.removeClass("toggle-hidden"),c.addClass("toggle-showing"),c.css("height","");var d=c.height();c.height(0),c.height(d)}else c.removeClass("toggle-showing"),c.height(0),c.addClass("toggle-hidden")});var b=a(this).attr("data-target"),c=a(b);c.addClass("toggle-hidden"),c.height(0),c.addClass("toggle-initialized")})},a.fn.flipbook=function(b){var c=this.length;this.each(function(){function d(){a(window).width()<=l.singlepagewidth&&!k.hasClass("vertical")?(k.addClass("singlepage"),k.parent().addClass("singlepage")):(k.removeClass("singlepage"),k.parent().removeClass("singlepage")),e();var b=0;k.find(".page").each(function(c){a(this).addClass("tempshow"),a(this).css("height","auto"),a(this).height()>b&&(b=a(this).height()),a(this).removeClass("tempshow")}),k.find(".page").height(b),k.hasClass("vertical")?k.height(2*b):k.height(b)}function e(){l.curpage/2==Math.floor(l.curpage/2)||k.hasClass("singlepage")||l.curpage--,f(),k.find(".cur").removeClass("cur"),k.find(".page:eq("+l.curpage+")").addClass("cur"),k.hasClass("singlepage")||k.find(".page:eq("+(l.curpage+1)+")").addClass("cur")}function f(){0==l.curpage?k.addClass("noleftstack"):k.removeClass("noleftstack"),2!=l.curpage||k.hasClass("singlepage")?k.removeClass("singleleftstack"):k.addClass("singleleftstack"),4!=l.curpage||k.hasClass("singlepage")?k.removeClass("doubleleftstack"):k.addClass("doubleleftstack"),l.curpage==k.find(".page").length-3&&k.hasClass("singlepage")||l.curpage+1==k.find(".page").length-5&&!k.hasClass("singlepage")?k.addClass("doublerightstack"):k.removeClass("doublerightstack"),l.curpage==k.find(".page").length-2&&k.hasClass("singlepage")||l.curpage+1==k.find(".page").length-3&&!k.hasClass("singlepage")?k.addClass("singlerightstack"):k.removeClass("singlerightstack"),l.curpage==k.find(".page").length-1&&k.hasClass("singlepage")||l.curpage+1==k.find(".page").length-1&&!k.hasClass("singlepage")?k.addClass("norightstack"):k.removeClass("norightstack"),pglen=k.find(".page").length,cp=pglen-l.curpage,1==cp&&k.addClass("norightstack")}function g(a,b){k.find(".flip-book-transition").html(""),k.find(".page:eq("+a+")").clone().appendTo(k.find(".flip-book-transition")),b&&k.find(".page:eq("+b+")").clone().appendTo(k.find(".flip-book-transition"))}function h(a,b){for(var c=0;c<n.length;c++)a.css(n[c],b)}function i(){if(e(),d(),l.curpage++,k.hasClass("singlepage")||l.curpage++,l.curpage>=k.find(".page").length-k.find(".flip-book-transition .page").length)return l.curpage--,void(k.hasClass("singlepage")||l.curpage--);var a=l.curpage;m?(f(),k.hasClass("singlepage")?(g(a-1),$leftpage=k.find(".flip-book-transition .page:eq(0)"),k.hasClass("vertical")?h($leftpage,"rotateX(0)"):h($leftpage,"rotateY(0)"),$leftpage.height(),$leftpage.addClass("turnanimation"),k.hasClass("vertical")?h($leftpage,"rotateX(120deg)"):h($leftpage,"rotateY(-120deg)"),$leftpage.addClass("shade"),$leftpage.on("transitionend MSTransitionEnd webkitTransitionEnd oTransitionEnd",function(){$leftpage.remove()}),k.find(".page:eq("+(a-1)+")").removeClass("cur"),k.find(".page:eq("+a+")").addClass("cur")):(g(a,a-1),$rightpage=k.find(".flip-book-transition .page:eq(1)"),k.hasClass("vertical")?h($rightpage,"rotateX(0deg)"):h($rightpage,"rotateY(0deg)"),$rightpage.height(),$rightpage.addClass("turnanimation"),$rightpage.addClass("shade"),k.hasClass("vertical")?h($rightpage,"rotateX(180deg)"):h($rightpage,"rotateY(-180deg)"),$rightpage.on("transitionend MSTransitionEnd webkitTransitionEnd oTransitionEnd",function(){$rightpage.remove()}),k.find(".page:eq("+(a-1)+")").removeClass("cur"),k.find(".page:eq("+(a+1)+")").addClass("cur"),$leftpage=k.find(".flip-book-transition .page:eq(0)"),k.hasClass("vertical")?h($leftpage,"rotateX(-180deg)"):h($leftpage,"rotateY(180deg)"),$leftpage.addClass("shade"),$leftpage.height(),$leftpage.addClass("turnanimation"),k.hasClass("vertical")?h($leftpage,"rotateX(0deg)"):h($leftpage,"rotateY(0deg)"),$leftpage.removeClass("shade"),$leftpage.on("transitionend MSTransitionEnd webkitTransitionEnd oTransitionEnd",function(){k.find(".page:eq("+(a-2)+")").removeClass("cur"),k.find(".page:eq("+a+")").addClass("cur"),$leftpage.remove()}))):(e(),d())}function j(){if(e(),d(),l.curpage--,k.hasClass("singlepage")||l.curpage--,l.curpage<0)return l.curpage++,void(k.hasClass("singlepage")||l.curpage++);var a=l.curpage;m?(f(),k.hasClass("singlepage")?(g(a),$leftpage=k.find(".flip-book-transition .page:eq(0)"),k.hasClass("vertical")?h($leftpage,"rotateX(120deg)"):h($leftpage,"rotateY(-120deg)"),$leftpage.addClass("shade"),$leftpage.height(),$leftpage.addClass("turnanimation"),k.hasClass("vertical")?h($leftpage,"rotateX(0deg)"):h($leftpage,"rotateY(0deg)"),$leftpage.removeClass("shade"),$leftpage.on("transitionend MSTransitionEnd webkitTransitionEnd oTransitionEnd",function(){k.find(".page:eq("+(a+1)+")").removeClass("cur"),k.find(".page:eq("+a+")").addClass("cur"),$leftpage.remove()})):(g(a+2,a+1),$rightpage=k.find(".flip-book-transition .page:eq(1)"),k.hasClass("vertical")?h($rightpage,"rotateX(180deg)"):h($rightpage,"rotateY(-180deg)"),$rightpage.addClass("shade"),$rightpage.height(),$rightpage.addClass("turnanimation"),$rightpage.removeClass("shade"),k.hasClass("vertical")?h($rightpage,"rotateX(0deg)"):h($rightpage,"rotateY(0deg)"),$rightpage.on("transitionend MSTransitionEnd webkitTransitionEnd oTransitionEnd",function(){$rightpage.remove()}),k.find(".page:eq("+(a+2)+")").removeClass("cur"),k.find(".page:eq("+a+")").addClass("cur"),$leftpage=k.find(".flip-book-transition .page:eq(0)"),k.hasClass("vertical")?h($leftpage,"rotateX(0deg)"):h($leftpage,"rotateY(0deg)"),$leftpage.height(),$leftpage.addClass("turnanimation"),k.hasClass("vertical")?h($leftpage,"rotateX(-180deg)"):h($leftpage,"rotateY(180deg)"),$leftpage.addClass("shade"),$leftpage.on("transitionend MSTransitionEnd webkitTransitionEnd oTransitionEnd",function(){k.find(".page:eq("+(a+3)+")").removeClass("cur"),k.find(".page:eq("+(a+1)+")").addClass("cur"),$leftpage.remove()}))):(e(),d())}var k=a(this),l=a.extend({},a.fn.flipbook.defaults,b);k.attr("data-singlepagewidth")&&(l.singlepagewidth=Number(k.attr("data-singlepagewidth")));var m=a("html").hasClass("csstransitions"),n=new Array("-webkit-transform","-moz-transform","-o-transform","-ms-transform","transform");k.append("<div class='flip-book-transition'></div>"),l.curpage=l.startpage,a(window).resize(d),d(),e(),k.bind("mousedown touchstart",function(b){if(k.hasClass("vertical")){var c;c=b.originalEvent.touches?b.originalEvent.touches[0].pageY-k.offset().top:b.pageY-k.offset().top,a(this).attr("data-starty",c)}else{var d;d=b.originalEvent.touches?b.originalEvent.touches[0].pageX-k.offset().left:b.pageX-k.offset().left,a(this).attr("data-startx",d)}b.preventDefault()}),k.bind("mouseup touchend",function(b){if(k.hasClass("vertical")){var c;c=b.originalEvent.changedTouches?b.originalEvent.changedTouches[0].pageY-k.offset().top:b.pageY-k.offset().top;var d=Number(a(this).attr("data-starty")),e=c-d}else{var f;f=b.originalEvent.changedTouches?b.originalEvent.changedTouches[0].pageX-k.offset().left:b.pageX-k.offset().left;var g=Number(a(this).attr("data-startx")),e=f-g}Math.abs(e)>=l.swipethreshold?e<0?i():j():k.hasClass("vertical")?c>k.height()/2?i():j():f>k.width()/2?i():j()}),1==c&&a(document).keydown(function(a){37===a.keyCode||38==a.keyCode?j():39!=a.keyCode&&40!=a.keyCode||i()})})},a.fn.flipbook.defaults={startpage:0,swipethreshold:30,singlepagewidth:767},a.fn.overlay=function(){var b,c,d,e=a(this).attr("data-format")?a(this).attr("data-format"):a.fn.overlay.defaults.format,f=!!a(this).attr("data-thumbID")&&a(this).attr("data-thumbID"),g="",h=null,i=!1;if(f)var f=!!a(this).attr("data-thumbID")&&a(this).attr("data-thumbID"),b=a(this).attr("data-thumbwidth")?Number(a(this).attr("data-thumbwidth")):a.fn.overlay.defaults.thumbwidth,c=a(this).attr("data-thumb-maxheight")?Number(a(this).attr("data-thumb-maxheight")):a.fn.overlay.defaults.thumbmaxheight,d=a(this).attr("data-thumb-maxwidth")?Number(a(this).attr("data-thumb-maxwidth")):a.fn.overlay.defaults.thumbmaxwidth;else var g=a(this).attr("title")?a(this).attr("title"):a.fn.overlay.defaults.title;var j="",k='<i class="close" title="Close" tabindex="2001">&times;</i>';if("image"===e)j=k+a(this).find("img:first-child").clone().wrap("<p>").parent().html();else{var i=a(j).find("video, iframe");j=k+a(this).html()}var l=a("#rein_overlay").length>=1;if(!l){var m='<div id="rein_overlay" class="rein-overlay"><div class="content" tabindex="2000"></div></div>';a("body").append(m)}if(f)if(b){$thumbnail=a("#"+f);var n=$thumbnail.attr("src"),o=$thumbnail.attr("width"),p=$thumbnail.attr("height"),q=o/p,r=b/q;r>c&&(r=c),b>d&&(b=d),h='<img src="'+n+'" width="'+b+'" height="'+r+'" class="img-responsive" />'}else h='<img src="'+n+'" " class="img-responsive" />';a(this).empty(),f?a(this).html(h):a(this).text(g);var s=function(){a("#rein_overlay").removeClass("show "+e),a("#rein_overlay .content").empty(),a(document).unbind("keyup"),a("#rein_overlay i").unbind("click"),a("body").removeClass("rein-overlay-active"),i&&(document.mozFullscreenEnabled?document.mozFullscreenEnabled=!0:document.webkitFullscreenEnabled?document.webkitFullscreenEnabled=!0:document.fullscreenEnabled=!0),a(this).focus()};a(this).bind("click",function(b){b.preventDefault(),a("body").addClass("rein-overlay-active"),a("#rein_overlay .content").html(j),"image"===e?a("#rein_overlay .content .close").focus():a("#rein_overlay .content").focus(),a("#rein_overlay").addClass("show "+e),a(document).keyup(function(a){27==a.keyCode&&s()}),a("#rein_overlay i").click(function(){s()}),i&&(document.mozFullscreenEnabled?document.mozFullscreenEnabled=!1:document.webkitFullscreenEnabled?document.webkitFullscreenEnabled=!1:document.fullscreenEnabled=!1,a("#rein_overlay .content iframe").removeAttr("allowfullscreen"))}),f?a(this).addClass("thumb"):a(this).addClass("btn"),a(".rein-plugin.overlay > *").addClass("show")},a.fn.overlay.defaults={format:"mixed",thumbwidth:250,thumbID:"rein_overlay_thumb",title:"View overlay content.",thumbmaxheight:500,thumbmaxwidth:800},a.fn.swipe=function(){h("swiper init function");var b=a(".rein-plugin.swiper-container"),c=[],d=function(){h("assignIDs"),a(b).each(function(b,c){var d="swiper"+b;a(c).attr("id",d)})},f=function(a){return h("isnumber"),("string"==typeof a||"number"==typeof a)&&!isNaN(a-0)&&""!==a},g=function(b){h("singleinit");var c=a.fn.swipe.defaults;if(a(b).attr("data-parallax")){var d=a(b).attr("data-parallax");d!==!0&&d!==!1||(c.parallax=d)}if(a(b).attr("data-slidesPerView")){var g=a(b).attr("data-slidesPerView");f(Number(g))&&1!==g&&(c.slidesPerView=g)}if(a(b).attr("data-freemode")){var i=a(b).attr("data-freemode");i!==!0&&i!==!1||(c.freemode=i)}if(a(b).attr("data-loop")){var j="true"===a(b).attr("data-loop");j===!0||j===!1?c.loop=j:c.loop=!1}if(a(b).attr("data-spaceBetween")){var k=a(b).attr("data-spaceBetween");k!==!0&&k!==!1||(c.spaceBetween=k)}if(a(b).attr("data-autoplay")){var l=a(b).attr("data-autoplay");null!==l&&(c.autoplay=l)}if(a(b).attr("data-zoom")){var m=a(b).attr("data-zoom");m!==!0&&m!==!1||(c.zoom=m)}if(a(b).attr("data-paginationType")){var n=a(b).attr("data-paginationType");"bullets"!==n&&"fraction"!==n&&"progress"!==n||(c.paginationType=n)}if(a(b).attr("data-effect")){var o=a(b).attr("data-effect");"slide"!==o&&"fade"!==o&&"cube"!==o&&"coverflow"!==o&&"flip"!==o||(c.effect=o)}if(a(b).attr("data-speed")){var p=Number(a(b).attr("data-speed"));f(p)&&p>=1&&300!==p&&(c.speed=p)}var q=a(b).attr("id"),r=new e("#"+q,c);return h(r),a("#"+q).addClass("show"),setTimeout(function(){r.update()},600),r};return d(),a(".rein-plugin.swiper-container").each(function(a,b){c.push(g(b))}),h(c),c},a.fn.swipe.defaults={direction:"horizontal",nextButton:".swiper-button-next",prevButton:".swiper-button-prev",pagination:".swiper-pagination",simulateTouch:!1,keyboardControl:!0,freeModeSticky:!0,freeModeMomentumRatio:.75,freeModeMomentumVelocityRatio:.75,onInit:function(){h("Swiper init.")},a11y:!0,observer:!0,parallax:!1,slidesPerView:1,freemode:!1,loop:!1,spaceBetween:0,autoplay:null,zoom:!1,paginationType:"bullets",effect:"slide",speed:300},a.fn.check_widget_nesting=function(){var b=a(".rein-plugin .rein-plugin");if(b.length>=1){var c=a(".doAccordion .doAccordion, .doAccordion .doTabs, .doAccordion .onedrag, .doAccordion .sortMultipleLists, .doAccordion .do-multi-drop, .do-modal .do-modal, .doAccordion .swiper-container, .doTabs .doAccordion, .doTabs .doTabs, .doTabs .onedrag, .doTabs .sortMultipleLists, .doTabs .do-multi-drop, .do-modal .do-modal, .do-modal .overlay, .doTabs .swiper-container");return c.length>=1}return!1},a.fn.check_fontawesome=function(){function b(a,b){return window.getComputedStyle(a,null).getPropertyValue(b)}var c=document.createElement("span");if(c.className="fa",c.style.display="none",document.body.insertBefore(c,document.body.firstChild),"FontAwesome"!==b(c,"font-family")){var d='<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">';a("head").children("script, link").last().after(d)}document.body.removeChild(c)},{reininit:function(b){debugmode=!!b.debugmode&&b.debugmode,g=debugmode;var c=a("body").check_widget_nesting();a("body").check_fontawesome();if(c){var e=M.util.get_string("nestingerror","filter_rein");a(".rein-plugin:first").before('<div class="alert alert-danger" role="alert">'+e+"</div>")}else{if(a(".doButton").button(),a(".doAccordion").accordion({heightStyle:"content"}),a(".doTabs").length>=1){a(".doTabs").each(function(b,c){$tabmenu=a(this).find("ul:first-child li");var d=$tabmenu.length;$tabs=a(this),$tabs.addClass("tabs-"+d),$tabsdivs=$tabmenu.parent().siblings("div"),$tabsdivs.each(function(b,c){$tab=a(this);var d=$tabmenu.eq(b).find("a").attr("href");0==$tabs.find(d).length&&("#"==d.substr(0,1)&&(d=d.substr(1)),$tab.attr("id",d))})});a(".doTabs").tabs()}a("#rotator").length>=1&&a("#rotator").rotator({fadeInt:2e3}),a(".oneDrag").length>=1&&(console.warn&&console.warn("One-item drag and drop is deprecated. You might want to try a different module."),a(".oneDrag").onedrag({})),a(".clickHotspot").length>=1&&a(".clickHotspot").clickhotspot({}),a(".sortMultipleLists").length>=1&&a(".sortMultipleLists").draganddropsorting({}),a(".do-multi-drop").length>=1&&a(".do-multi-drop").each(function(){var b=new Object,c=a(this).attr("data-correct-color"),d=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(c);d&&(b.correct=c);var e=a(this).attr("data-incorrect-color");d=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e),d&&(b.incorrect=e);var f=a(this).attr("data-all-correct-color");d=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(f),d&&(b.allcorrect=f),a(this).domultidrop(b)}),a(".do-stepwise").length>=1&&a(".do-stepwise").each(function(b,c){a(c).dostepwise({})}),a(".do-sequential").length>=1&&a(".do-sequential").dosequential({}),a(".markit").length>=1&&a(".markit:eq(0)").markit({}),a(".tip-trigger").length>=1&&a(".tip-trigger").dotip({}),
a(".table-responsive").length>=1&&a(".table-responsive").doresponsivetables(),a(".do-modal").length>=1&&a(".do-modal").each(function(){a(this).domodal()}),a(".do-equal-columns").length>=1&&a(".do-equal-columns").doequalcolumns(),a(".toggle-button").length>=1&&a(".toggle-button").dotoggle(),a(".flip-book").length>=1&&a(".flip-book").flipbook(),a(".flipcard-item").length>=1&&a(".flipcard-item").bind("touchstart",function(){}),a(".rein-plugin.overlay").length>=1&&a(".rein-plugin.overlay").each(function(){a(this).overlay()}),a(".rein-plugin.swiper-container").length>=1&&a(this).swipe(),a(".doTabs, .doAccordion").css("visibility","visible"),debugmode&&a(document).ready(function(){var b={doRun:null,runTests:function(){console.log("Running tests of rein.js."),a?console.log("Pass: jQuery is defined."):console.error("Fail: jQuery is not defined."),a.ui?console.log("Pass: jQuery.ui is defined."):console.error("Fail: jQuery.ui is not defined."),d?console.log("Pass: Raphael is defined."):console.error("Fail: Raphael is not defined."),a.fn.clickhotspot?console.log("Pass: Click hotspot is defined."):console.error("Fail: Click hotspot is not defined."),a(".clickHotspot").length>=1&&(a(".clickHotspot").children().length>=1?console.log("Pass: Click hotspot DOM element exists and has children."):console.error("Fail: Click hotspot DOM object detected but has no children.")),a.fn.onedrag?console.log("Pass: one item drag and drop is defined."):console.error("Fail: one item drag and drop is not defined."),a(".oneDrag").length>=1&&(a(".oneDrag").children().length>=1?console.log("Pass: One item drag and drop DOM element exists and has children."):console.error("Fail: One item drag and drop DOM object detected but has no children.")),a.fn.draganddropsorting?console.log("Pass: Drag and drop list sorting is defined."):console.error("Fail: Drag and drop list sorting is not defined."),a(".sortMultipleLists").length>=1&&(a(".sortMultipleLists").children().length>=1?console.log("Pass: Sort multiple lists DOM element exists and has children."):console.error("Fail: Sort multiple lists DOM object detected but has no children.")),a.fn.domultidrop?console.log("Pass: Domultidrop plugin is defined."):console.error("Fail: Domultidrop plugin is not defined."),a(".do-multi-drop").length>=1&&(a(".do-multi-drop").children().length>=1?console.log("Pass: .do-multi-drop DOM element exists and has children."):console.error("Fail: .do-multi-drop DOM object detected but has no children.")),a.fn.dostepwise?console.log("Pass: Dostepwise plugin is defined."):console.error("Fail: Dostepwise plugin is not defined."),a(".do-stepwise").length>=1&&(a(".do-stepwise").children().length>=1?console.log("Pass: .do-stepwise DOM element exists and has children."):console.error("Fail: .do-stepwise DOM object detected but has no children.")),a.fn.dosequential?console.log("Pass: Dosequential plugin is defined."):console.error("Fail: Dosequential plugin is not defined."),a(".do-sequential").length>=1&&(a(".do-sequential").children().length>=1?console.log("Pass: .do-sequential DOM element exists and has children."):console.error("Fail: .do-sequential DOM object detected but has no children."))}};b.doRun=!0,b.doRun&&b.runTests()})}}}});