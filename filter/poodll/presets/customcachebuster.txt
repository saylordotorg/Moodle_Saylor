{"name":"Custom Cache Buster","key":"customcachebuster","version":"1.0.1","instructions":"When Poodll filter is the ahead of other media filters in list, and this template handles mp4/mp3 etc, it will add random params to media urls, so the browser won't cache them. This custom template also adds a \"force fetch\" link below each player that only the admin can see","showatto":"0","showplayers":"1","requirecss":"","requirejs":"","shim":"","defaults":"","amd":"1","body":"<a href=\"@@VIDEOURL@@\">@@TITLE@@</a><br>\n<a class=\"@@CANDOWNLOAD@@\" id=\"@@AUTOID@@\" href=\"@@WWWROOT@@/filter/poodll/poodllnotification.php?filename=@@FILENAME@@\" target=\"_new\">force fetch</a>","bodyend":"","script":"//code to auto refresh if this looks like a placeholder file\nvar source = $('source[src=\"' + @@VIDEOURL@@ +'\"]');\nif(typeof source == 'undefined'){return;}\n\nvar player =source.parent();\n\nvar refreshfunction =function(){\nvar theduration = (@@FILEEXT@@ == 'mp3' ? @@AUDIOPLACEHOLDERDURATION@@ :  @@VIDEOPLACEHOLDERDURATION@@);\n  var mr = media_refresher.clone();\n   mr.init(@@FILENAME@@,\ntheduration,\nplayer[0].duration,\nfunction(){\n  source.attr('src', source.attr('src') + '&reload=true');\n  player[0].pause();\n  player[0].load();\n });\n};\nif(player[0].readyState==4){\n  refreshfunction();\n}else{\n  player.on('loadedmetadata',refreshfunction);\n}","style":"","dataset":"","datasetvars":"","alternate":"","alternateend":""}