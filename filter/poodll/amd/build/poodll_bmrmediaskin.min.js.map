{"version":3,"sources":["../src/poodll_bmrmediaskin.js"],"names":["define","$","jqui","log","utils","settings","anim_progress_bar","upskin_bar","debug","instanceprops","pmr","uploaded","devsettings","clone","extend","init","ip","fetch_instanceprops","onUploadSuccess","controlbarid","hide","show","onUploadFailure","fetch_status_bar","skin","fetch_preview_audio","fetch_preview_video","fetch_resource_audio","fetch_resource_video","fetch_uploader_skin","element","upskin","config","controlbar","bmr_progresscanvas","status","onMediaError","e","console","error","onMediaSuccess_video","uploader","Output","set_visual_mode","timer","reset","start","update_status","onMediaSuccess_audio","preview","attr","handle_timer_update","html","fetch_display_time","seconds","initseconds","stopbutton","click","mode","self","visualmode","disable_button","startbutton","show_element","hide_element","enable_button","pausebutton","playbutton","resumebutton","savebutton","addClass","mediatype","finalSeconds","removeClass","insert_controlbar_video","resource","prepare_controlbar","insert_controlbar_audio","skin_style","media_skin_style","size_class","size","ss","fetch_strings","hideshowupload","showupload","record_icon","recorder_class","controls","fetch_dialogue_box","downloaddialog","errordialog","prepend","poodll_recording_alert","settingsdialog","errorsdialog","settingsicon","set_dialogue_box","register_controlbar_events_video","onMediaSuccess","register_controlbar_events_audio","open","hprogress","do_start_audio","do_stop_audio","get","pause","stop","do_pause_audio","do_resume_audio","resume","on","currentTime","do_play_audio","clear","fetchCurrent","ct","prop","duration","isFinite","finalseconds","blobs","length","do_save_audio","M","util","get_string","window","onbeforeunload","button"],"mappings":"AACAA,OAAM,qCAAC,CAAC,QAAD,CAAW,UAAX,CAAuB,UAAvB,CAAmC,yBAAnC,CAA8D,kCAA9D,CAAkG,iCAAlG,CAAqI,0BAArI,CAAD,CAAmK,SAAUC,CAAV,CAAaC,CAAb,CAAmBC,CAAnB,CAAwBC,CAAxB,CAA+BC,CAA/B,CAAyCC,CAAzC,CAA4DC,CAA5D,CAAwE,CAE7O,aAEAJ,CAAG,CAACK,KAAJ,CAAU,+BAAV,EAGA,MAAO,CAEHC,aAAa,CAAE,IAFZ,CAGHC,GAAG,CAAE,IAHF,CAIHC,QAAQ,GAJL,CAKHC,WAAW,CAAE,IALV,CAQHC,KAAK,CAAE,gBAAY,CACf,MAAOZ,CAAAA,CAAC,CAACa,MAAF,IAAe,EAAf,CAAmB,IAAnB,CACV,CAVE,CAYHC,IAAI,CAAE,cAAUC,CAAV,CAAcN,CAAd,CAAmB,CACrB,KAAKD,aAAL,CAAqBO,CAArB,CACA,KAAKN,GAAL,CAAWA,CAAX,CACA,KAAKE,WAAL,CAAmBP,CAAQ,CAACQ,KAAT,EAAnB,CACA,KAAKD,WAAL,CAAiBG,IAAjB,CAAsBL,CAAtB,CAA2BM,CAA3B,CACH,CAjBE,CAoBHC,mBAAmB,CAAE,8BAAY,CAC7B,MAAO,MAAKR,aACf,CAtBE,CAyBHS,eAAe,CAAE,yBAAUC,CAAV,CAAwB,CACrClB,CAAC,CAAC,IAAMkB,CAAN,CAAqB,2BAAtB,CAAD,CAAoDC,IAApD,GAEAnB,CAAC,CAAC,IAAMkB,CAAN,CAAqB,8BAAtB,CAAD,CAAuDE,IAAvD,EACH,CA7BE,CA+BHC,eAAe,CAAE,0BAAwB,CAExC,CAjCE,CAmCHC,gBAAgB,CAAE,0BAAUC,CAAV,CAAgB,CAG9B,MADa,8BAA+BA,CAA/B,CAAsC,mBAEtD,CAvCE,CAyCHC,mBAAmB,CAAE,6BAAUD,CAAV,CAAgB,CAEjC,MADc,iCAAkCA,CAAlC,CAAyC,6DAE1D,CA5CE,CA6CHE,mBAAmB,CAAE,6BAAUF,CAAV,CAAgB,CAEjC,MADc,iCAAkCA,CAAlC,CAAyC,+CAE1D,CAhDE,CAiDHG,oBAAoB,CAAE,+BAAgB,CAElC,QACH,CApDE,CAqDHC,oBAAoB,CAAE,+BAAgB,CAElC,QACH,CAxDE,CA0DHC,mBAAmB,CAAE,6BAAUV,CAAV,CAAwBW,CAAxB,CAAiC,IAC9Cd,CAAAA,CAAE,CAAG,KAAKC,mBAAL,CAAyBE,CAAzB,CADyC,CAE9CY,CAAM,CAAGxB,CAAU,CAACM,KAAX,EAFqC,CAGlDkB,CAAM,CAAChB,IAAP,CAAYC,CAAE,CAACgB,MAAf,CAAuBF,CAAvB,CAAgCd,CAAE,CAACiB,UAAH,CAAcC,kBAA9C,CAAkElB,CAAE,CAACiB,UAAH,CAAcE,MAAhF,EACA,MAAOJ,CAAAA,CACV,CA/DE,CAiEHK,YAAY,CAAE,sBAAUC,CAAV,CAAa,CACvBC,OAAO,CAACC,KAAR,CAAc,aAAd,CAA6BF,CAA7B,CACH,CAnEE,CAqEHG,oBAAoB,CAAE,8BAAUrB,CAAV,CAAwB,CAE1C,GAAIH,CAAAA,CAAE,CAAG,KAAKC,mBAAL,CAAyBE,CAAzB,CAAT,CAEAH,CAAE,CAACyB,QAAH,CAAYC,MAAZ,CAAmB,EAAnB,EACA,KAAKC,eAAL,CAAqB,YAArB,CAAmCxB,CAAnC,EAEAH,CAAE,CAAC4B,KAAH,CAASC,KAAT,GACA7B,CAAE,CAAC4B,KAAH,CAASE,KAAT,GACA,KAAKC,aAAL,CAAmB5B,CAAnB,CACH,CA/EE,CAiFH6B,oBAAoB,CAAE,8BAAU7B,CAAV,CAAwB,CAG1C,GAAIH,CAAAA,CAAE,CAAG,KAAKC,mBAAL,CAAyBE,CAAzB,CAAT,CAEAH,CAAE,CAACyB,QAAH,CAAYC,MAAZ,CAAmB,EAAnB,EACA1B,CAAE,CAACiB,UAAH,CAAcgB,OAAd,CAAsBC,IAAtB,CAA2B,KAA3B,CAAkC,IAAlC,EACA,KAAKP,eAAL,CAAqB,YAArB,CAAmCxB,CAAnC,EAGAH,CAAE,CAAC4B,KAAH,CAASC,KAAT,GACA7B,CAAE,CAAC4B,KAAH,CAASE,KAAT,GACA,KAAKC,aAAL,CAAmB5B,CAAnB,CACH,CA9FE,CAgGHgC,mBAAmB,CAAE,6BAAUhC,CAAV,CAAwB,CACzC,GAAIH,CAAAA,CAAE,CAAG,KAAKC,mBAAL,CAAyBE,CAAzB,CAAT,CACAH,CAAE,CAACiB,UAAH,CAAcE,MAAd,CAAqBiB,IAArB,CAA0BpC,CAAE,CAAC4B,KAAH,CAASS,kBAAT,EAA1B,EACA,GAAwB,CAApB,EAAArC,CAAE,CAAC4B,KAAH,CAASU,OAAT,EAAgD,CAAvB,CAAAtC,CAAE,CAAC4B,KAAH,CAASW,WAAtC,CAAuD,CACnDvC,CAAE,CAACiB,UAAH,CAAcuB,UAAd,CAAyBC,KAAzB,EACH,CACJ,CAtGE,CAwGHV,aAAa,CAAE,uBAAU5B,CAAV,CAAwB,CACnC,GAAIH,CAAAA,CAAE,CAAG,KAAKC,mBAAL,CAAyBE,CAAzB,CAAT,CACAH,CAAE,CAACiB,UAAH,CAAcE,MAAd,CAAqBiB,IAArB,CAA0BpC,CAAE,CAAC4B,KAAH,CAASS,kBAAT,EAA1B,CACH,CA3GE,CA8GHV,eAAe,CAAE,yBAAUe,CAAV,CAAgBvC,CAAhB,CAA8B,IACvCwC,CAAAA,CAAI,CAAG,IADgC,CAEvC3C,CAAE,CAAG,KAAKC,mBAAL,CAAyBE,CAAzB,CAFkC,CAG3C,KAAKyC,UAAL,CAAkBF,CAAlB,CAEA,OAAQA,CAAR,EAEI,IAAK,YAAL,CAEIC,CAAI,CAACE,cAAL,CAAoB7C,CAAE,CAACiB,UAAH,CAAc6B,WAAlC,EACAH,CAAI,CAACI,YAAL,CAAkB/C,CAAE,CAACiB,UAAH,CAAc6B,WAAhC,EAEAH,CAAI,CAACK,YAAL,CAAkBhD,CAAE,CAACiB,UAAH,CAAcC,kBAAhC,EAEAyB,CAAI,CAACM,aAAL,CAAmBjD,CAAE,CAACiB,UAAH,CAAciC,WAAjC,EACAP,CAAI,CAACI,YAAL,CAAkB/C,CAAE,CAACiB,UAAH,CAAciC,WAAhC,EAEAP,CAAI,CAACE,cAAL,CAAoB7C,CAAE,CAACiB,UAAH,CAAckC,UAAlC,EACAR,CAAI,CAACK,YAAL,CAAkBhD,CAAE,CAACiB,UAAH,CAAcmC,YAAhC,EACAT,CAAI,CAACM,aAAL,CAAmBjD,CAAE,CAACiB,UAAH,CAAcuB,UAAjC,EAGAG,CAAI,CAACE,cAAL,CAAoB7C,CAAE,CAACiB,UAAH,CAAcoC,UAAlC,EAEArD,CAAE,CAACiB,UAAH,CAAcgB,OAAd,CAAsBqB,QAAtB,CAA+B,kBAA/B,EACAtD,CAAE,CAACiB,UAAH,CAAcE,MAAd,CAAqBmC,QAArB,CAA8B,kBAA9B,EAEA,GAA2B,OAAvB,EAAAtD,CAAE,CAACgB,MAAH,CAAUuC,SAAd,CAAoC,CAChCZ,CAAI,CAACK,YAAL,CAAkBhD,CAAE,CAACiB,UAAH,CAAcgB,OAAhC,CACH,CACD,MAEJ,IAAK,aAAL,CAEIU,CAAI,CAACE,cAAL,CAAoB7C,CAAE,CAACiB,UAAH,CAAcuB,UAAlC,EACAG,CAAI,CAACM,aAAL,CAAmBjD,CAAE,CAACiB,UAAH,CAAckC,UAAjC,EACAR,CAAI,CAACE,cAAL,CAAoB7C,CAAE,CAACiB,UAAH,CAAciC,WAAlC,EACAP,CAAI,CAACM,aAAL,CAAmBjD,CAAE,CAACiB,UAAH,CAAcoC,UAAjC,EAGArD,CAAE,CAACiB,UAAH,CAAcE,MAAd,CAAqBiB,IAArB,CAA0BpC,CAAE,CAAC4B,KAAH,CAASS,kBAAT,CAA4BrC,CAAE,CAAC4B,KAAH,CAAS4B,YAArC,CAA1B,EAIAb,CAAI,CAACI,YAAL,CAAkB/C,CAAE,CAACiB,UAAH,CAAc6B,WAAhC,EAEAH,CAAI,CAACE,cAAL,CAAoB7C,CAAE,CAACiB,UAAH,CAAcmC,YAAlC,EACAT,CAAI,CAACK,YAAL,CAAkBhD,CAAE,CAACiB,UAAH,CAAcmC,YAAhC,EACAT,CAAI,CAACK,YAAL,CAAkBhD,CAAE,CAACiB,UAAH,CAAcC,kBAAhC,EAEA,GAAI,CAACyB,CAAI,CAAChD,QAAV,CAAoB,CAChBgD,CAAI,CAACM,aAAL,CAAmBjD,CAAE,CAACiB,UAAH,CAAc6B,WAAjC,EACAH,CAAI,CAACM,aAAL,CAAmBjD,CAAE,CAACiB,UAAH,CAAcoC,UAAjC,CACH,CAEDV,CAAI,CAACI,YAAL,CAAkB/C,CAAE,CAACiB,UAAH,CAAciC,WAAhC,EAEAlD,CAAE,CAACiB,UAAH,CAAcgB,OAAd,CAAsBwB,WAAtB,CAAkC,kBAAlC,EACAzD,CAAE,CAACiB,UAAH,CAAcE,MAAd,CAAqBsC,WAArB,CAAiC,kBAAjC,EAGA,GAA2B,OAAvB,EAAAzD,CAAE,CAACgB,MAAH,CAAUuC,SAAd,CAAoC,CAChCZ,CAAI,CAACI,YAAL,CAAkB/C,CAAE,CAACiB,UAAH,CAAcgB,OAAhC,CACH,CAGDU,CAAI,CAACM,aAAL,CAAmBjD,CAAE,CAACiB,UAAH,CAAckC,UAAjC,EAEA,MAEJ,IAAK,UAAL,CACInD,CAAE,CAACiB,UAAH,CAAcE,MAAd,CAAqBiB,IAArB,CAA0B,UAA1B,EACAO,CAAI,CAACE,cAAL,CAAoB7C,CAAE,CAACiB,UAAH,CAAckC,UAAlC,EACAR,CAAI,CAACM,aAAL,CAAmBjD,CAAE,CAACiB,UAAH,CAAcuB,UAAjC,EACAG,CAAI,CAACE,cAAL,CAAoB7C,CAAE,CAACiB,UAAH,CAAc6B,WAAlC,EACAH,CAAI,CAACE,cAAL,CAAoB7C,CAAE,CAACiB,UAAH,CAAcmC,YAAlC,EACAT,CAAI,CAACE,cAAL,CAAoB7C,CAAE,CAACiB,UAAH,CAAckC,UAAlC,EACAR,CAAI,CAACI,YAAL,CAAkB/C,CAAE,CAACiB,UAAH,CAAcC,kBAAhC,EAGAyB,CAAI,CAACI,YAAL,CAAkB/C,CAAE,CAACiB,UAAH,CAAc6B,WAAhC,EACAH,CAAI,CAACK,YAAL,CAAkBhD,CAAE,CAACiB,UAAH,CAAcmC,YAAhC,EAEA,MAGJ,IAAK,YAAL,CAEIT,CAAI,CAACE,cAAL,CAAoB7C,CAAE,CAACiB,UAAH,CAAciC,WAAlC,EACAP,CAAI,CAACK,YAAL,CAAkBhD,CAAE,CAACiB,UAAH,CAAc6B,WAAhC,EACAH,CAAI,CAACI,YAAL,CAAkB/C,CAAE,CAACiB,UAAH,CAAcmC,YAAhC,EACAT,CAAI,CAACM,aAAL,CAAmBjD,CAAE,CAACiB,UAAH,CAAcmC,YAAjC,EACAT,CAAI,CAACM,aAAL,CAAmBjD,CAAE,CAACiB,UAAH,CAAcoC,UAAjC,EAEArD,CAAE,CAACiB,UAAH,CAAcgB,OAAd,CAAsBwB,WAAtB,CAAkC,kBAAlC,EACAzD,CAAE,CAACiB,UAAH,CAAcE,MAAd,CAAqBsC,WAArB,CAAiC,kBAAjC,EACA,MAEJ,IAAK,YAAL,CACId,CAAI,CAACE,cAAL,CAAoB7C,CAAE,CAACiB,UAAH,CAAcoC,UAAlC,EACAV,CAAI,CAACE,cAAL,CAAoB7C,CAAE,CAACiB,UAAH,CAAc6B,WAAlC,EACAH,CAAI,CAACI,YAAL,CAAkB/C,CAAE,CAACiB,UAAH,CAAcC,kBAAhC,EACA,MAjGR,CAoGH,CAvNE,CA0NHwC,uBAAuB,CAAE,iCAAU5C,CAAV,CAAmBX,CAAnB,CAAiC8B,CAAjC,CAA0C0B,CAA1C,CAAoD,CACzE,GAAI1C,CAAAA,CAAU,CAAG,KAAK2C,kBAAL,CAAwB9C,CAAxB,CAAiCX,CAAjC,CAA+C8B,CAA/C,CAAwD0B,CAAxD,CAAkE,OAAlE,CAAjB,CACA,MAAO1C,CAAAA,CACV,CA7NE,CAgOH4C,uBAAuB,CAAE,iCAAU/C,CAAV,CAAmBX,CAAnB,CAAiC8B,CAAjC,CAA0C0B,CAA1C,CAAoD,CACzE,GAAI1C,CAAAA,CAAU,CAAG,KAAK2C,kBAAL,CAAwB9C,CAAxB,CAAiCX,CAAjC,CAA+C8B,CAA/C,CAAwD0B,CAAxD,CAAkE,OAAlE,CAAjB,CACA,MAAO1C,CAAAA,CACV,CAnOE,CAsOH2C,kBAAkB,CAAE,4BAAU9C,CAAV,CAAmBX,CAAnB,CAAiC8B,CAAjC,CAA0C0B,CAA1C,CAAoDJ,CAApD,CAA+D,IAC3EvD,CAAAA,CAAE,CAAG,KAAKC,mBAAL,CAAyBE,CAAzB,CADsE,CAE3E2D,CAAU,CAAG9D,CAAE,CAACgB,MAAH,CAAU+C,gBAFoD,CAI3EC,CAAU,CAAG,gCAJ8D,CAK/E,OAAQhE,CAAE,CAACgB,MAAH,CAAUiD,IAAlB,EACI,IAAK,OAAL,CACID,CAAU,CAAG,iCAAb,CACA,MACJ,IAAK,KAAL,CACIA,CAAU,CAAG,+BAAb,CACA,MACJ,IAAK,MAAL,CACIA,CAAU,CAAG,gCAAb,CARR,CAL+E,GAgB3EE,CAAAA,CAAE,CAAG,KAAKxE,GAAL,CAASyE,aAAT,EAhBsE,CAiB3EC,CAAc,CAAGpE,CAAE,CAACqE,UAAH,CAAgB,EAAhB,CAAqB,MAjBqC,CAkB3EC,CAAW,CAAgB,OAAb,EAAAf,CAAS,CAAc,iBAAd,CAAkC,eAlBkB,CAmB3EgB,CAAc,CAAgB,OAAb,EAAAhB,CAAS,CAAc,4BAAd,CAA6C,4BAnBI,CAqB3EiB,CAAQ,CAAG,8EACTD,CADS,CACQ,GADR,CACcP,CADd,CAC2B,iBAD3B,CAC6C7D,CAD7C,CAC4D,KAtBI,CAwB/EqE,CAAQ,EAAI,mDAAkDrE,CAAlD,CAAiE,KAA7E,CACAqE,CAAQ,EAAI,oFAAiFrE,CAAjF,CAAgG,mHAA5G,CACAqE,CAAQ,EAAI,6BAA8BV,CAA9B,CAA2C,KAAvD,CACAU,CAAQ,EAAI,0CAAZ,CACAA,CAAQ,EAAI,uCAAZ,CACA,GAAIrD,CAAAA,CAAM,CAAG,KAAKZ,gBAAL,CAAsB,KAAtB,CAAb,CACAiE,CAAQ,EAAIrD,CAAZ,CACAqD,CAAQ,EAAI,QAAZ,CAEAA,CAAQ,EAAIvC,CAAZ,CACIuC,CAAQ,EAAI,iDAAgDrE,CAAhD,CAA+D,0KAD/E,CAEAqE,CAAQ,EAAI,8GAA2GF,CAA3G,CAAyH,uCAArI,CACAE,CAAQ,EAAI,2IAAwIF,CAAxI,CAAsJ,uCAAlK,CACAE,CAAQ,EAAI,8KAAZ,CACAA,CAAQ,EAAI,gLAAZ,CACAA,CAAQ,EAAI,+KAAZ,CACAA,CAAQ,EAAI,6DAA4DJ,CAA5D,CAA6E,cAA7E,CAA6FF,CAAE,WAA/F,CAAgH,WAA5H,CACAM,CAAQ,EAAI,QAAZ,CACAA,CAAQ,EAAI,KAAK5E,WAAL,CAAiB6E,kBAAjB,EAAZ,CACAD,CAAQ,EAAIxE,CAAE,CAAC0E,cAAH,CAAkBD,kBAAlB,EAAZ,CACAD,CAAQ,EAAIxE,CAAE,CAAC2E,WAAH,CAAeF,kBAAf,EAAZ,CACAD,CAAQ,EAAI,QAAZ,CACAA,CAAQ,EAAI,QAAZ,CACAvF,CAAC,CAAC6B,CAAD,CAAD,CAAW8D,OAAX,CAAmBJ,CAAnB,EACA,GAAIvD,CAAAA,CAAU,CAAG,CACb4D,sBAAsB,CAAE5F,CAAC,CAAC,IAAMkB,CAAN,CAAqB,0BAAtB,CADZ,CAEbe,kBAAkB,CAAEjC,CAAC,CAAC,IAAMkB,CAAN,CAAqB,aAAtB,CAFR,CAGb2E,cAAc,CAAE7F,CAAC,CAAC,IAAMkB,CAAN,CAAqB,gCAAtB,CAHJ,CAIbuE,cAAc,CAAEzF,CAAC,CAAC,IAAMkB,CAAN,CAAqB,gCAAtB,CAJJ,CAKb4E,YAAY,CAAE9F,CAAC,CAAC,IAAMkB,CAAN,CAAqB,8BAAtB,CALF,CAMb6E,YAAY,CAAE/F,CAAC,CAAC,IAAMkB,CAAN,CAAqB,gBAAtB,CANF,CAObgB,MAAM,CAAElC,CAAC,CAAC,IAAMkB,CAAN,CAAqB,qBAAtB,CAPI,CAQb8B,OAAO,CAAEhD,CAAC,CAAC,IAAMkB,CAAN,CAAqB,sBAAtB,CARG,CASb2C,WAAW,CAAE7D,CAAC,CAAC,IAAMkB,CAAN,CAAqB,8BAAtB,CATD,CAUbqC,UAAU,CAAEvD,CAAC,CAAC,IAAMkB,CAAN,CAAqB,6BAAtB,CAVA,CAWb+C,WAAW,CAAEjE,CAAC,CAAC,IAAMkB,CAAN,CAAqB,8BAAtB,CAXD,CAYbiD,YAAY,CAAEnE,CAAC,CAAC,IAAMkB,CAAN,CAAqB,+BAAtB,CAZF,CAabgD,UAAU,CAAElE,CAAC,CAAC,IAAMkB,CAAN,CAAqB,6BAAtB,CAbA,CAcbkD,UAAU,CAAEpE,CAAC,CAAC,IAAMkB,CAAN,CAAqB,6BAAtB,CAdA,CAAjB,CAoBAH,CAAE,CAAC0E,cAAH,CAAkBO,gBAAlB,CAAmChE,CAAU,CAACyD,cAA9C,EACA1E,CAAE,CAAC2E,WAAH,CAAeM,gBAAf,CAAgChE,CAAU,CAAC8D,YAA3C,EACA,KAAKnF,WAAL,CAAiBqF,gBAAjB,CAAkChE,CAAU,CAAC6D,cAA7C,EACA,MAAO7D,CAAAA,CAEV,CA/SE,CAkTHiE,gCAAgC,CAAE,0CAAUC,CAAV,CAA0BhF,CAA1B,CAAwC,CACtE,MAAO,MAAKiF,gCAAL,CAAsCD,CAAtC,CAAsDhF,CAAtD,CACV,CApTE,CAsTHiF,gCAAgC,CAAE,0CAAUD,CAAV,CAA0BhF,CAA1B,CAAwC,IAClEwC,CAAAA,CAAI,CAAG,IAD2D,CAElEjD,CAAG,CAAG,KAAKA,GAFuD,CAGlEM,CAAE,CAAG,KAAKC,mBAAL,CAAyBE,CAAzB,CAH6D,CAMtEH,CAAE,CAACiB,UAAH,CAAc+D,YAAd,CAA2BvC,KAA3B,CAAiC,UAAY,CACzC,GAAI,CAACE,CAAI,CAAChD,QAAV,CAAoB,CAChBgD,CAAI,CAAC/C,WAAL,CAAiByF,IAAjB,EACH,CAFD,IAEO,CACHrF,CAAE,CAAC0E,cAAH,CAAkBW,IAAlB,EACH,CACJ,CAND,EASA,GAAIC,CAAAA,CAAS,CAAGhG,CAAiB,CAACO,KAAlB,EAAhB,CACAyF,CAAS,CAACvF,IAAV,CAAeC,CAAE,CAACiB,UAAH,CAAcC,kBAA7B,EAGAlB,CAAE,CAACiB,UAAH,CAAc6B,WAAd,CAA0BL,KAA1B,CAAgC,UAAY,CAMxC/C,CAAG,CAAC6F,cAAJ,CAAmBvF,CAAnB,CAAuBmF,CAAvB,CAEH,CARD,EAUAnF,CAAE,CAACiB,UAAH,CAAcuB,UAAd,CAAyBC,KAAzB,CAA+B,UAAY,CAEvC/C,CAAG,CAAC8F,aAAJ,CAAkBxF,CAAlB,EAEA,GAAIiC,CAAAA,CAAO,CAAGjC,CAAE,CAACiB,UAAH,CAAcgB,OAA5B,CACA,GAAIA,CAAO,EAAIA,CAAO,CAACwD,GAAR,CAAY,CAAZ,CAAf,CAA+B,CAC3BxD,CAAO,CAACwD,GAAR,CAAY,CAAZ,EAAeC,KAAf,EACH,CAGD1F,CAAE,CAAC4B,KAAH,CAAS+D,IAAT,GACAhD,CAAI,CAACZ,aAAL,CAAmB5B,CAAnB,EAGAwC,CAAI,CAAChB,eAAL,CAAqB,aAArB,CAAoCxB,CAApC,CAEH,CAhBD,EAkBAH,CAAE,CAACiB,UAAH,CAAciC,WAAd,CAA0BT,KAA1B,CAAgC,UAAY,CAExC/C,CAAG,CAACkG,cAAJ,CAAmB5F,CAAnB,EAGAA,CAAE,CAAC4B,KAAH,CAAS8D,KAAT,GACA/C,CAAI,CAACZ,aAAL,CAAmB5B,CAAnB,EAEAwC,CAAI,CAAChB,eAAL,CAAqB,YAArB,CAAmCxB,CAAnC,CACH,CATD,EAWAH,CAAE,CAACiB,UAAH,CAAcmC,YAAd,CAA2BX,KAA3B,CAAiC,UAAY,CAEzC/C,CAAG,CAACmG,eAAJ,CAAoB7F,CAApB,EAGAA,CAAE,CAAC4B,KAAH,CAASkE,MAAT,GACAnD,CAAI,CAACZ,aAAL,CAAmB5B,CAAnB,EAEAwC,CAAI,CAAChB,eAAL,CAAqB,YAArB,CAAmCxB,CAAnC,CACH,CATD,EAWAH,CAAE,CAACiB,UAAH,CAAcgB,OAAd,CAAsB8D,EAAtB,CAAyB,YAAzB,CAAuC,UAAY,CAC/C,GAAuB,UAAnB,EAAApD,CAAI,CAACC,UAAT,CAAmC,CAC/B,MACH,CACD,GAAIoD,CAAAA,CAAW,CAAG,KAAKA,WAAvB,CACAhG,CAAE,CAACiB,UAAH,CAAcE,MAAd,CAAqBiB,IAArB,CAA0BpC,CAAE,CAAC4B,KAAH,CAASS,kBAAT,CAA4B2D,CAA5B,CAA1B,CACH,CAND,EAQAhG,CAAE,CAACiB,UAAH,CAAckC,UAAd,CAAyBV,KAAzB,CAA+B,UAAY,CAEvC,GAAIR,CAAAA,CAAO,CAAGjC,CAAE,CAACiB,UAAH,CAAcgB,OAAd,CAAsBwD,GAAtB,CAA0B,CAA1B,CAAd,CACA/F,CAAG,CAACuG,aAAJ,CAAkBjG,CAAlB,CAAsBiC,CAAtB,EAGAU,CAAI,CAAChB,eAAL,CAAqB,UAArB,CAAiCxB,CAAjC,EAGAmF,CAAS,CAACY,KAAV,GACAZ,CAAS,CAACa,YAAV,CAAyB,UAAY,IAC7BC,CAAAA,CAAE,CAAGpG,CAAE,CAACiB,UAAH,CAAcgB,OAAd,CAAsBoE,IAAtB,CAA2B,aAA3B,CADwB,CAE7BC,CAAQ,CAAGtG,CAAE,CAACiB,UAAH,CAAcgB,OAAd,CAAsBoE,IAAtB,CAA2B,UAA3B,CAFkB,CAGjC,GAAI,CAACE,QAAQ,CAACD,CAAD,CAAb,CAAyB,CACrBA,CAAQ,CAAGtG,CAAE,CAAC4B,KAAH,CAAS4E,YACvB,CACD,MAAOJ,CAAAA,CAAE,CAAGE,CACf,CAPD,CAQAhB,CAAS,CAACxD,KAAV,EAEH,CApBD,EAsBA9B,CAAE,CAACiB,UAAH,CAAcoC,UAAd,CAAyBZ,KAAzB,CAA+B,UAAY,CAEvC,GAAIzC,CAAE,CAACyG,KAAH,EAA8B,CAAlB,CAAAzG,CAAE,CAACyG,KAAH,CAASC,MAAzB,CAAqC,CACjC/D,CAAI,CAAChB,eAAL,CAAqB,YAArB,CAAmCxB,CAAnC,EACAT,CAAG,CAACiH,aAAJ,CAAkB3G,CAAlB,EACA2C,CAAI,CAAChD,QAAL,GACH,CAJD,IAIO,CACHK,CAAE,CAACyB,QAAH,CAAYC,MAAZ,CAAmBkF,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,0BAAlB,CAA8C,eAA9C,CAAnB,CACH,CAED,QACH,CAXD,EAaAC,MAAM,CAACC,cAAP,CAAwB,UAAY,CAChCrE,CAAI,CAACM,aAAL,CAAmBjD,CAAE,CAACiB,UAAH,CAAc6B,WAAjC,EACA,GAAIb,CAAAA,CAAO,CAAGjC,CAAE,CAACiB,UAAH,CAAcgB,OAA5B,CACA,GAAIA,CAAO,EAAIA,CAAO,CAACwD,GAAR,CAAY,CAAZ,CAAf,CAA+B,CAC3BxD,CAAO,CAACwD,GAAR,CAAY,CAAZ,EAAeC,KAAf,GACAzD,CAAO,CAACwD,GAAR,CAAY,CAAZ,EAAejB,QAAf,GACH,CACJ,CAEJ,CA/aE,CAibHzB,YAAY,CAAE,sBAAUjC,CAAV,CAAmB,CAC7B7B,CAAC,CAAC6B,CAAD,CAAD,CAAW2C,WAAX,CAAuB,MAAvB,EACAxE,CAAC,CAAC6B,CAAD,CAAD,CAAWT,IAAX,EACH,CApbE,CAqbH2C,YAAY,CAAE,sBAAUlC,CAAV,CAAmB,CAC7B7B,CAAC,CAAC6B,CAAD,CAAD,CAAWwC,QAAX,CAAoB,MAApB,EACArE,CAAC,CAAC6B,CAAD,CAAD,CAAWV,IAAX,EACH,CAxbE,CAybH6C,aAAa,CAAE,uBAAUgE,CAAV,CAAkB,CAC7BhI,CAAC,CAACgI,CAAD,CAAD,CAAU/E,IAAV,CAAe,UAAf,KACAjD,CAAC,CAACgI,CAAD,CAAD,CAAUxD,WAAV,CAAsB,cAAtB,CACH,CA5bE,CA6bHZ,cAAc,CAAE,wBAAUoE,CAAV,CAAkB,CAC9BhI,CAAC,CAACgI,CAAD,CAAD,CAAU/E,IAAV,CAAe,UAAf,KACAjD,CAAC,CAACgI,CAAD,CAAD,CAAU3D,QAAV,CAAmB,cAAnB,CACH,CAhcE,CAqcV,CA5cK,CAAN","sourcesContent":["/* jshint ignore:start */\ndefine(['jquery', 'jqueryui', 'core/log', 'filter_poodll/utils_amd', 'filter_poodll/dlg_devicesettings', 'filter_poodll/anim_progress_bar', 'filter_poodll/upskin_bar'], function ($, jqui, log, utils, settings, anim_progress_bar, upskin_bar) {\n\n    \"use strict\"; // jshint ;_;\n\n    log.debug('PoodLL BMR Skin: initialising');\n\n\n    return {\n\n        instanceprops: null,\n        pmr: null,\n        uploaded: false,\n        devsettings: null,\n\n        //for making multiple instances\n        clone: function () {\n            return $.extend(true, {}, this);\n        },\n\n        init: function (ip, pmr) {\n            this.instanceprops = ip;\n            this.pmr = pmr;\n            this.devsettings = settings.clone();\n            this.devsettings.init(pmr, ip);\n        },\n\n\n        fetch_instanceprops: function () {\n            return this.instanceprops;\n        },\n\n\n        onUploadSuccess: function (controlbarid) {\n            $('#' + controlbarid + ' > .poodll_save-recording').hide();\n            // $('#' + controlbarid  + '_messages').hide();\n            $('#' + controlbarid + ' > .poodll_savedsuccessfully').show();\n        },\n\n        onUploadFailure: function (controlbarid) {\n            return;\n        },\n\n        fetch_status_bar: function (skin) {\n            // var status = '<div class=\"poodll_status_' + skin + '\" width=\"320\" height=\"50\">00:00:00</div>';\n            var status = '<div class=\"poodll_status_' + skin + '\">00:00:00</div>';\n            return status;\n        },\n\n        fetch_preview_audio: function (skin) {\n            var preview = '<audio class=\"poodll_preview_' + skin + ' hide\" controls playsinline=\"playsinline\" muted></audio>';\n            return preview;\n        },\n        fetch_preview_video: function (skin) {\n            var preview = '<video class=\"poodll_preview_' + skin + '\" playsinline=\"playsinline\" muted></video>';\n            return preview;\n        },\n        fetch_resource_audio: function (skin) {\n            var resourceplayer = '';\n            return resourceplayer;\n        },\n        fetch_resource_video: function (skin) {\n            var resourceplayer = '';\n            return resourceplayer;\n        },\n\n        fetch_uploader_skin: function (controlbarid, element) {\n            var ip = this.fetch_instanceprops(controlbarid);\n            var upskin = upskin_bar.clone();\n            upskin.init(ip.config, element, ip.controlbar.bmr_progresscanvas, ip.controlbar.status);\n            return upskin;\n        },\n\n        onMediaError: function (e) {\n            console.error('media error', e);\n        },\n\n        onMediaSuccess_video: function (controlbarid) {\n\n            var ip = this.fetch_instanceprops(controlbarid);\n            //clear messages\n            ip.uploader.Output('');\n            this.set_visual_mode('recordmode', controlbarid);\n            //timer and status bar\n            ip.timer.reset();\n            ip.timer.start();\n            this.update_status(controlbarid);\n        },\n\n        onMediaSuccess_audio: function (controlbarid) {\n\n\n            var ip = this.fetch_instanceprops(controlbarid);\n            //clear messages\n            ip.uploader.Output('');\n            ip.controlbar.preview.attr('src', null);\n            this.set_visual_mode('recordmode', controlbarid);\n\n            //timer and status bar\n            ip.timer.reset();\n            ip.timer.start();\n            this.update_status(controlbarid);\n        },\n\n        handle_timer_update: function (controlbarid) {\n            var ip = this.fetch_instanceprops(controlbarid);\n            ip.controlbar.status.html(ip.timer.fetch_display_time());\n            if (ip.timer.seconds == 0 && ip.timer.initseconds > 0) {\n                ip.controlbar.stopbutton.click();\n            }\n        },\n\n        update_status: function (controlbarid) {\n            var ip = this.fetch_instanceprops(controlbarid);\n            ip.controlbar.status.html(ip.timer.fetch_display_time());\n        },\n\n        //set visuals for different states (ie recording or playing)\n        set_visual_mode: function (mode, controlbarid) {\n            var self = this;\n            var ip = this.fetch_instanceprops(controlbarid);\n            this.visualmode = mode;\n\n            switch (mode) {\n\n                case 'recordmode':\n\n                    self.disable_button(ip.controlbar.startbutton);\n                    self.show_element(ip.controlbar.startbutton);\n\n                    self.hide_element(ip.controlbar.bmr_progresscanvas);\n\n                    self.enable_button(ip.controlbar.pausebutton);\n                    self.show_element(ip.controlbar.pausebutton);\n\n                    self.disable_button(ip.controlbar.playbutton);\n                    self.hide_element(ip.controlbar.resumebutton);\n                    self.enable_button(ip.controlbar.stopbutton);\n\n                    //disable save button\n                    self.disable_button(ip.controlbar.savebutton);\n\n                    ip.controlbar.preview.addClass('poodll_recording');\n                    ip.controlbar.status.addClass('poodll_recording');\n\n                    if (ip.config.mediatype == 'audio') {\n                        self.hide_element(ip.controlbar.preview);\n                    }\n                    break;\n\n                case 'previewmode':\n\n                    self.disable_button(ip.controlbar.stopbutton);\n                    self.enable_button(ip.controlbar.playbutton);\n                    self.disable_button(ip.controlbar.pausebutton);\n                    self.enable_button(ip.controlbar.savebutton);\n\n                    //reset timer button\n                    ip.controlbar.status.html(ip.timer.fetch_display_time(ip.timer.finalSeconds));\n\n\n                    //If stop has been pressed there is no \"resuming\"\n                    self.show_element(ip.controlbar.startbutton);\n\n                    self.disable_button(ip.controlbar.resumebutton);\n                    self.hide_element(ip.controlbar.resumebutton);\n                    self.hide_element(ip.controlbar.bmr_progresscanvas);\n\n                    if (!self.uploaded) {\n                        self.enable_button(ip.controlbar.startbutton);\n                        self.enable_button(ip.controlbar.savebutton);\n                    }\n\n                    self.show_element(ip.controlbar.pausebutton);\n\n                    ip.controlbar.preview.removeClass('poodll_recording');\n                    ip.controlbar.status.removeClass('poodll_recording');\n\n\n                    if (ip.config.mediatype == 'audio') {\n                        self.show_element(ip.controlbar.preview);\n                    }\n                    // ip.controlbar.status.addClass('hide');\n                    //ip.controlbar.bmr_progresscanvas.removeClass('hide');\n                    self.enable_button(ip.controlbar.playbutton);\n\n                    break;\n\n                case 'playmode':\n                    ip.controlbar.status.html('00:00:00');\n                    self.disable_button(ip.controlbar.playbutton);\n                    self.enable_button(ip.controlbar.stopbutton);\n                    self.disable_button(ip.controlbar.startbutton);\n                    self.disable_button(ip.controlbar.resumebutton);\n                    self.disable_button(ip.controlbar.playbutton);\n                    self.show_element(ip.controlbar.bmr_progresscanvas);\n\n                    //If play has been pressed there is no \"resuming\"\n                    self.show_element(ip.controlbar.startbutton);\n                    self.hide_element(ip.controlbar.resumebutton);\n\n                    break;\n\n\n                case 'pausedmode':\n\n                    self.disable_button(ip.controlbar.pausebutton);\n                    self.hide_element(ip.controlbar.startbutton);\n                    self.show_element(ip.controlbar.resumebutton);\n                    self.enable_button(ip.controlbar.resumebutton);\n                    self.enable_button(ip.controlbar.savebutton);\n\n                    ip.controlbar.preview.removeClass('poodll_recording');\n                    ip.controlbar.status.removeClass('poodll_recording');\n                    break;\n\n                case 'uploadmode':\n                    self.disable_button(ip.controlbar.savebutton);\n                    self.disable_button(ip.controlbar.startbutton);\n                    self.show_element(ip.controlbar.bmr_progresscanvas);\n                    break;\n            }\n\n        },\n\n        //insert the control bar and return it to be reused\n        insert_controlbar_video: function (element, controlbarid, preview, resource) {\n            var controlbar = this.prepare_controlbar(element, controlbarid, preview, resource, 'video');\n            return controlbar;\n        },\n\n        //insert the control bar and return it to be reused\n        insert_controlbar_audio: function (element, controlbarid, preview, resource) {\n            var controlbar = this.prepare_controlbar(element, controlbarid, preview, resource, 'audio');\n            return controlbar;\n        },\n\n        //insert the control bar and return it to be reused\n        prepare_controlbar: function (element, controlbarid, preview, resource, mediatype) {\n            var ip = this.fetch_instanceprops(controlbarid);\n            var skin_style = ip.config.media_skin_style;\n\n            var size_class = 'poodll_mediarecorder_size_auto';\n            switch (ip.config.size) {\n                case 'small':\n                    size_class = 'poodll_mediarecorder_size_small';\n                    break;\n                case 'big':\n                    size_class = 'poodll_mediarecorder_size_big';\n                    break;\n                case 'auto':\n                    size_class = 'poodll_mediarecorder_size_auto';\n            }\n\n            var ss = this.pmr.fetch_strings();\n            var hideshowupload = ip.showupload ? '' : 'hide';\n            var record_icon = mediatype == 'video' ? 'fa-video-camera' : 'fa-microphone';\n            var recorder_class = mediatype == 'video' ? 'poodll_mediarecorder_video' : 'poodll_mediarecorder_audio';\n\n            var controls = '<div class=\"poodll_mediarecorderholder_bmr poodll_videorecorderholder_bmr '\n                + recorder_class + ' ' + size_class + '\" id=\"holder_' + controlbarid + '\">';\n\n            controls += '<div class=\"poodll_mediarecorderbox_bmr\" id=\"' + controlbarid + '\">';\n            controls += '<audio style=\"display: none !important;\" class=\"poodll-alert-recording\" id=\"' + controlbarid + '\"><source src=\"https://poodll.com/wp-content/themes/Poodll-Theme/images/ding.mp3\" type=\"audio/mpeg\"></audio>';\n            controls += '<div class=\"style-holder ' + skin_style + '\">';\n            controls += '<div class=\"poodll_statusholder_bmr\" >';\n            controls += '<canvas class=\"bmr_range\"></canvas>';\n            var status = this.fetch_status_bar('bmr');\n            controls += status;\n            controls += '</div>';\n\n            controls += preview,\n                controls += '<div class=\"settingsicon\" id=\"settingsicon_' + controlbarid + '\"><button type=\"button\" class=\"btn btn-info btn-lg\" data-toggle=\"modal\" data-target=\"#myModal\"><i class=\"fa fa-cogs\" aria-hidden=\"true\"></i></button></div>';\n            controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_bmr poodll_start-recording_bmr\"><i class=\"fa ' + record_icon + '\" aria-hidden=\"true\"></i></button>';\n            controls += ' <button type=\"button\" class=\"poodll_mediarecorder_button_bmr poodll_resume-recording_bmr bmr_disabled hide\" disabled><i class=\"fa ' + record_icon + '\" aria-hidden=\"true\"></i></button>';\n            controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_bmr poodll_stop-recording_bmr bmr_disabled\" disabled><i class=\"fa fa-stop\" aria-hidden=\"true\"></i></button>';\n            controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_bmr poodll_pause-recording_bmr bmr_disabled\" disabled><i class=\"fa fa-pause\" aria-hidden=\"true\"></i></button>';\n            controls += ' <button type=\"button\" class=\"poodll_mediarecorder_button_bmr poodll_play-recording_bmr bmr_disabled\" disabled><i class=\"fa fa-play\" aria-hidden=\"true\"></i></button>';\n            controls += '<button type=\"button\" class=\"poodll_save-recording_bmr ' + hideshowupload + '\" disabled>' + ss['recui_save'] + '</button>';\n            controls += '</div>';\n            controls += this.devsettings.fetch_dialogue_box();\n            controls += ip.downloaddialog.fetch_dialogue_box();\n            controls += ip.errordialog.fetch_dialogue_box();\n            controls += '</div>';\n            controls += '</div>';\n            $(element).prepend(controls);\n            var controlbar = {\n                poodll_recording_alert: $('#' + controlbarid + ' .poodll-alert-recording'),\n                bmr_progresscanvas: $('#' + controlbarid + ' .bmr_range'),\n                settingsdialog: $('#' + controlbarid + ' .poodll_dialogue_box_settings'),\n                downloaddialog: $('#' + controlbarid + ' .poodll_dialogue_box_download'),\n                errorsdialog: $('#' + controlbarid + ' .poodll_dialogue_box_errors'),\n                settingsicon: $('#' + controlbarid + ' .settingsicon'),\n                status: $('#' + controlbarid + ' .poodll_status_bmr'),\n                preview: $('#' + controlbarid + ' .poodll_preview_bmr'),\n                startbutton: $('#' + controlbarid + ' .poodll_start-recording_bmr'),\n                stopbutton: $('#' + controlbarid + ' .poodll_stop-recording_bmr'),\n                pausebutton: $('#' + controlbarid + ' .poodll_pause-recording_bmr'),\n                resumebutton: $('#' + controlbarid + ' .poodll_resume-recording_bmr'),\n                playbutton: $('#' + controlbarid + ' .poodll_play-recording_bmr'),\n                savebutton: $('#' + controlbarid + ' .poodll_save-recording_bmr')\n            };\n\n\n            //settings and error and download dialogs\n            //settings is on 'this' because it is shown from skkn events, but errors are from pmr stuff\n            ip.downloaddialog.set_dialogue_box(controlbar.downloaddialog);\n            ip.errordialog.set_dialogue_box(controlbar.errorsdialog);\n            this.devsettings.set_dialogue_box(controlbar.settingsdialog);\n            return controlbar;\n\n        }, //end of fetch_control_bar_bmr\n\n\n        register_controlbar_events_video: function (onMediaSuccess, controlbarid) {\n            return this.register_controlbar_events_audio(onMediaSuccess, controlbarid);\n        },\n\n        register_controlbar_events_audio: function (onMediaSuccess, controlbarid) {\n            var self = this;\n            var pmr = this.pmr;\n            var ip = this.fetch_instanceprops(controlbarid);\n\n            //Open the settings dialog\n            ip.controlbar.settingsicon.click(function () {\n                if (!self.uploaded) {\n                    self.devsettings.open();\n                } else {\n                    ip.downloaddialog.open();\n                }\n            });\n\n            //init progress bar\n            var hprogress = anim_progress_bar.clone();\n            hprogress.init(ip.controlbar.bmr_progresscanvas);\n\n\n            ip.controlbar.startbutton.click(function () {\n\n                //Play alert sound\n                //ip.controlbar.poodll_recording_alert.get(0).play();\n\n                //start recording\n                pmr.do_start_audio(ip, onMediaSuccess);\n\n            });\n\n            ip.controlbar.stopbutton.click(function () {\n                //stop the audio\n                pmr.do_stop_audio(ip);\n\n                var preview = ip.controlbar.preview;\n                if (preview && preview.get(0)) {\n                    preview.get(0).pause();\n                }\n\n                //timer and status bar\n                ip.timer.stop();\n                self.update_status(controlbarid);\n\n                //do visuals\n                self.set_visual_mode('previewmode', controlbarid);\n\n            });\n\n            ip.controlbar.pausebutton.click(function () {\n\n                pmr.do_pause_audio(ip);\n\n                //timer and status bar\n                ip.timer.pause();\n                self.update_status(controlbarid);\n                //do visuals\n                self.set_visual_mode('pausedmode', controlbarid);\n            });\n\n            ip.controlbar.resumebutton.click(function () {\n\n                pmr.do_resume_audio(ip);\n\n                //timer and status bar\n                ip.timer.resume();\n                self.update_status(controlbarid);\n                //do visuals\n                self.set_visual_mode('recordmode', controlbarid);\n            });\n\n            ip.controlbar.preview.on('timeupdate', function () {\n                if (self.visualmode != 'playmode') {\n                    return;\n                }\n                var currentTime = this.currentTime;\n                ip.controlbar.status.html(ip.timer.fetch_display_time(currentTime));\n            });\n\n            ip.controlbar.playbutton.click(function () {\n\n                var preview = ip.controlbar.preview.get(0);\n                pmr.do_play_audio(ip, preview);\n\n                //do visuals\n                self.set_visual_mode('playmode', controlbarid);\n\n                //start animation\n                hprogress.clear();\n                hprogress.fetchCurrent = function () {\n                    var ct = ip.controlbar.preview.prop('currentTime');\n                    var duration = ip.controlbar.preview.prop('duration');\n                    if (!isFinite(duration)) {\n                        duration = ip.timer.finalseconds;\n                    }\n                    return ct / duration;\n                };\n                hprogress.start();\n\n            });\n\n            ip.controlbar.savebutton.click(function () {\n\n                if (ip.blobs && ip.blobs.length > 0) {\n                    self.set_visual_mode('uploadmode', controlbarid);\n                    pmr.do_save_audio(ip);\n                    self.uploaded = true;\n                } else {\n                    ip.uploader.Output(M.util.get_string('recui_nothingtosaveerror', 'filter_poodll'));\n                }//end of if self.blobs\t\t\n                //probably not necessary  ... but getting odd ajax errors occasionally\n                return false;\n            });//end of save recording\n\n            window.onbeforeunload = function () {\n                self.enable_button(ip.controlbar.startbutton);\n                var preview = ip.controlbar.preview;\n                if (preview && preview.get(0)) {\n                    preview.get(0).pause();\n                    preview.get(0).controls = false;\n                }\n            };\n\n        }, //end of register_control_bar_events_bmr\n\n        show_element: function (element) {\n            $(element).removeClass('hide');\n            $(element).show();\n        },\n        hide_element: function (element) {\n            $(element).addClass('hide');\n            $(element).hide();\n        },\n        enable_button: function (button) {\n            $(button).attr('disabled', false);\n            $(button).removeClass('bmr_disabled');\n        },\n        disable_button: function (button) {\n            $(button).attr('disabled', true);\n            $(button).addClass('bmr_disabled');\n        },\n\n    };//end of returned object\n\n\n});//total end"],"file":"poodll_bmrmediaskin.min.js"}