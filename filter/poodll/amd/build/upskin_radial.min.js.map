{"version":3,"sources":["../src/upskin_radial.js"],"names":["define","$","log","radial","debug","element","cvs","percent","progressradial","messagearea","clone","extend","init","config","setDrawParam","paramkey","paramvalue","initControls","self","fetchCurrent","initProgressSession","xhr","uploadingmessage","M","util","get_string","upload","addEventListener","e","lengthComputable","loaded","total","showMessage","Math","floor","start","deactivateProgressSession","stop","msg","msgid","html"],"mappings":"AACAA,OAAM,+BAAC,CAAC,QAAD,CAAW,UAAX,CAAuB,oCAAvB,CAAD,CAA+D,SAAUC,CAAV,CAAaC,CAAb,CAAkBC,CAAlB,CAA0B,CAE3F,aAEAD,CAAG,CAACE,KAAJ,CAAU,0BAAV,EAEA,MAAO,CACHC,OAAO,CAAE,IADN,CAEHC,GAAG,CAAE,IAFF,CAGHC,OAAO,CAAE,CAHN,CAIHC,cAAc,CAAE,IAJb,CAKHC,WAAW,CAAE,IALV,CASHC,KAAK,CAAE,gBAAY,CACf,MAAOT,CAAAA,CAAC,CAACU,MAAF,IAAe,EAAf,CAAmB,IAAnB,CACV,CAXE,CAcHC,IAAI,CAAE,cAAUC,CAAV,CAAkBR,CAAlB,CAA2BC,CAA3B,CAAgCG,CAAhC,CAA6C,CAC/C,KAAKI,MAAL,CAAcA,CAAd,CACA,KAAKR,OAAL,CAAeA,CAAf,CACA,KAAKC,GAAL,CAAWA,CAAX,CACA,KAAKE,cAAL,CAAsBL,CAAM,CAACO,KAAP,EAAtB,CACA,KAAKD,WAAL,CAAmBA,CACtB,CApBE,CAsBHK,YAAY,CAAE,sBAAUC,CAAV,CAAoBC,CAApB,CAAgC,CAC1C,KAAKR,cAAL,CAAoBM,YAApB,CAAiCC,CAAjC,CAA2CC,CAA3C,CACH,CAxBE,CA0BHC,YAAY,CAAE,uBAAY,IAClBC,CAAAA,CAAI,CAAG,IADW,CAGtB,KAAKV,cAAL,CAAoBI,IAApB,CAAyB,KAAKN,GAA9B,CAAmC,SAAnC,KACA,KAAKE,cAAL,CAAoBW,YAApB,CAAmC,UAAY,CAC3C,MAAOD,CAAAA,CAAI,CAACX,OACf,CACJ,CAjCE,CAoCHa,mBAAmB,CAAE,6BAAUC,CAAV,CAAe,CAChC,GAAIH,CAAAA,CAAI,CAAG,IAAX,CACAA,CAAI,CAACX,OAAL,CAAe,CAAf,CACA,GAAIe,CAAAA,CAAgB,CAAGC,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,iBAAlB,CAAqC,eAArC,CAAvB,CAEAJ,CAAG,CAACK,MAAJ,CAAWC,gBAAX,CAA4B,UAA5B,CAAwC,SAAUC,CAAV,CAAa,CACjD,GAAIA,CAAC,CAACC,gBAAN,CAAwB,CACpBX,CAAI,CAACX,OAAL,CAAeqB,CAAC,CAACE,MAAF,CAAWF,CAAC,CAACG,KAA5B,CACAb,CAAI,CAACc,WAAL,CAAiBV,CAAgB,CAAG,GAAnB,CAAyBW,IAAI,CAACC,KAAL,CAA0B,GAAf,CAAAhB,CAAI,CAACX,OAAhB,CAAzB,CAA0D,IAA3E,CACH,CACJ,CALD,EAMA,KAAKC,cAAL,CAAoB2B,KAApB,EACH,CAhDE,CAkDHC,yBAAyB,CAAE,oCAAY,CACnC,KAAK5B,cAAL,CAAoB6B,IAApB,GACAnC,CAAG,CAACE,KAAJ,CAAU,sBAAV,CACH,CArDE,CAuDH4B,WAAW,CAAE,qBAAUM,CAAV,CAAeC,CAAf,CAAsB,CAC/B,OAAQA,CAAR,EAEI,IAAK,0BAAL,CACI,MACJ,QACI,KAAK9B,WAAL,CAAiB+B,IAAjB,CAAsBF,CAAtB,EALR,CAOH,CA/DE,CAiEV,CAvEK,CAAN","sourcesContent":["/* jshint ignore:start */\ndefine(['jquery', 'core/log', 'filter_poodll/anim_progress_radial'], function ($, log, radial) {\n\n    \"use strict\"; // jshint ;_;\n\n    log.debug('upskin_bar: initialising');\n\n    return {\n        element: null,\n        cvs: null,\n        percent: 0,\n        progressradial: null,\n        messagearea: null,\n\n\n        //for making multiple instances\n        clone: function () {\n            return $.extend(true, {}, this);\n        },\n\n        //init\n        init: function (config, element, cvs, messagearea) {\n            this.config = config;\n            this.element = element;\n            this.cvs = cvs;\n            this.progressradial = radial.clone();\n            this.messagearea = messagearea;\n        },\n\n        setDrawParam: function (paramkey, paramvalue) {\n            this.progressradial.setDrawParam(paramkey, paramvalue);\n        },\n\n        initControls: function () {\n            var self = this;\n            var showpercent = true;\n            this.progressradial.init(this.cvs, '#93c47d', showpercent);\n            this.progressradial.fetchCurrent = function () {\n                return self.percent;\n            };\n        },\n\n        //create a progress bar\n        initProgressSession: function (xhr) {\n            var self = this;\n            self.percent = 0;\n            var uploadingmessage = M.util.get_string('recui_uploading', 'filter_poodll');\n            // Handle event\n            xhr.upload.addEventListener(\"progress\", function (e) {\n                if (e.lengthComputable) {\n                    self.percent = e.loaded / e.total;\n                    self.showMessage(uploadingmessage + '(' + Math.floor(self.percent * 100) + '%)');\n                }\n            });\n            this.progressradial.start();\n        },\n\n        deactivateProgressSession: function () {\n            this.progressradial.stop();\n            log.debug('deactivating session');\n        },\n\n        showMessage: function (msg, msgid) {\n            switch (msgid) {\n                //once and readaloud skins do not offer playback so we just skin this\n                case 'recui_awaitingconversion':\n                    break;\n                default:\n                    this.messagearea.html(msg);\n            }\n        }//End of show message\n    };//end of returned object\n});//total end\n"],"file":"upskin_radial.min.js"}