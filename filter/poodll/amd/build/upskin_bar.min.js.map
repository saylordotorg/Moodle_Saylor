{"version":3,"sources":["../src/upskin_bar.js"],"names":["define","$","log","bar","debug","element","cvs","percent","progressbar","messagearea","clone","extend","init","config","initControls","self","fetchCurrent","initProgressSession","xhr","uploadingmessage","M","util","get_string","upload","addEventListener","e","lengthComputable","loaded","total","showMessage","Math","floor","start","deactivateProgressSession","stopthere","msg","html"],"mappings":"AACAA,OAAM,4BAAC,CAAC,QAAD,CAAW,UAAX,CAAuB,iCAAvB,CAAD,CAA4D,SAAUC,CAAV,CAAaC,CAAb,CAAkBC,CAAlB,CAAuB,CAErF,aAEAD,CAAG,CAACE,KAAJ,CAAU,0BAAV,EAEA,MAAO,CACHC,OAAO,CAAE,IADN,CAEHC,GAAG,CAAE,IAFF,CAGHC,OAAO,CAAE,CAHN,CAIHC,WAAW,CAAE,IAJV,CAKHC,WAAW,CAAE,IALV,CASHC,KAAK,CAAE,gBAAY,CACf,MAAOT,CAAAA,CAAC,CAACU,MAAF,IAAe,EAAf,CAAmB,IAAnB,CACV,CAXE,CAcHC,IAAI,CAAE,cAAUC,CAAV,CAAkBR,CAAlB,CAA2BC,CAA3B,CAAgCG,CAAhC,CAA6C,CAC/C,KAAKI,MAAL,CAAcA,CAAd,CACA,KAAKR,OAAL,CAAeA,CAAf,CACA,KAAKC,GAAL,CAAWA,CAAX,CACA,KAAKE,WAAL,CAAmBL,CAAG,CAACO,KAAJ,EAAnB,CACA,KAAKD,WAAL,CAAmBA,CACtB,CApBE,CAsBHK,YAAY,CAAE,uBAAY,CACtB,GAAIC,CAAAA,CAAI,CAAG,IAAX,CACA,KAAKP,WAAL,CAAiBI,IAAjB,CAAsB,KAAKN,GAA3B,CAAgC,SAAhC,EACA,KAAKE,WAAL,CAAiBQ,YAAjB,CAAgC,UAAY,CACxC,MAAOD,CAAAA,CAAI,CAACR,OACf,CACJ,CA5BE,CA+BHU,mBAAmB,CAAE,6BAAUC,CAAV,CAAe,CAChC,GAAIH,CAAAA,CAAI,CAAG,IAAX,CACAA,CAAI,CAACR,OAAL,CAAe,CAAf,CACA,GAAIY,CAAAA,CAAgB,CAAGC,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,iBAAlB,CAAqC,eAArC,CAAvB,CAEAJ,CAAG,CAACK,MAAJ,CAAWC,gBAAX,CAA4B,UAA5B,CAAwC,SAAUC,CAAV,CAAa,CACjD,GAAIA,CAAC,CAACC,gBAAN,CAAwB,CACpBX,CAAI,CAACR,OAAL,CAAekB,CAAC,CAACE,MAAF,CAAWF,CAAC,CAACG,KAA5B,CACAb,CAAI,CAACc,WAAL,CAAiBV,CAAgB,CAAG,GAAnB,CAAyBW,IAAI,CAACC,KAAL,CAA0B,GAAf,CAAAhB,CAAI,CAACR,OAAhB,CAAzB,CAA0D,IAA3E,CACH,CACJ,CALD,EAMA,KAAKC,WAAL,CAAiBwB,KAAjB,EACH,CA3CE,CA6CHC,yBAAyB,CAAE,oCAAY,CACnC,KAAKzB,WAAL,CAAiB0B,SAAjB,GACAhC,CAAG,CAACE,KAAJ,CAAU,sBAAV,CACH,CAhDE,CAkDHyB,WAAW,CAAE,qBAAUM,CAAV,CAAsB,CAC/B,KAAK1B,WAAL,CAAiB2B,IAAjB,CAAsBD,CAAtB,CACH,CApDE,CAsDV,CA5DK,CAAN","sourcesContent":["/* jshint ignore:start */\ndefine(['jquery', 'core/log', 'filter_poodll/anim_progress_bar'], function ($, log, bar) {\n\n    \"use strict\"; // jshint ;_;\n\n    log.debug('upskin_bar: initialising');\n\n    return {\n        element: null,\n        cvs: null,\n        percent: 0,\n        progressbar: null,\n        messagearea: null,\n\n\n        //for making multiple instances\n        clone: function () {\n            return $.extend(true, {}, this);\n        },\n\n        //init\n        init: function (config, element, cvs, messagearea) {\n            this.config = config;\n            this.element = element;\n            this.cvs = cvs;\n            this.progressbar = bar.clone();\n            this.messagearea = messagearea;\n        },\n\n        initControls: function () {\n            var self = this;\n            this.progressbar.init(this.cvs, '#BCCCCC');\n            this.progressbar.fetchCurrent = function () {\n                return self.percent;\n            };\n        },\n\n        //create a progress bar\n        initProgressSession: function (xhr) {\n            var self = this;\n            self.percent = 0;\n            var uploadingmessage = M.util.get_string('recui_uploading', 'filter_poodll');\n            // Handle event\n            xhr.upload.addEventListener(\"progress\", function (e) {\n                if (e.lengthComputable) {\n                    self.percent = e.loaded / e.total;\n                    self.showMessage(uploadingmessage + '(' + Math.floor(self.percent * 100) + '%)');\n                }\n            });\n            this.progressbar.start();\n        },\n\n        deactivateProgressSession: function () {\n            this.progressbar.stopthere();\n            log.debug('deactivating session');\n        },\n\n        showMessage: function (msg, msgid) {\n            this.messagearea.html(msg);\n        }//End of send message\n    };//end of returned object\n});//total end\n"],"file":"upskin_bar.min.js"}