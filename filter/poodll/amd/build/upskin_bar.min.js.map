{"version":3,"file":"upskin_bar.min.js","sources":["../src/upskin_bar.js"],"sourcesContent":["/* jshint ignore:start */\ndefine(['jquery', 'core/log', 'filter_poodll/anim_progress_bar'], function ($, log, bar) {\n\n    \"use strict\"; // jshint ;_;\n\n    log.debug('upskin_bar: initialising');\n\n    return {\n        element: null,\n        cvs: null,\n        percent: 0,\n        progressbar: null,\n        messagearea: null,\n\n\n        //for making multiple instances\n        clone: function () {\n            return $.extend(true, {}, this);\n        },\n\n        //init\n        init: function (config, element, cvs, messagearea) {\n            this.config = config;\n            this.element = element;\n            this.cvs = cvs;\n            this.progressbar = bar.clone();\n            this.messagearea = messagearea;\n        },\n\n        initControls: function () {\n            var self = this;\n            this.progressbar.init(this.cvs, '#BCCCCC');\n            this.progressbar.fetchCurrent = function () {\n                return self.percent;\n            };\n        },\n\n        //create a progress bar\n        initProgressSession: function (xhr) {\n            var self = this;\n            self.percent = 0;\n            var uploadingmessage = M.util.get_string('recui_uploading', 'filter_poodll');\n            // Handle event\n            xhr.upload.addEventListener(\"progress\", function (e) {\n                if (e.lengthComputable) {\n                    self.percent = e.loaded / e.total;\n                    self.showMessage(uploadingmessage + '(' + Math.floor(self.percent * 100) + '%)');\n                }\n            });\n            this.progressbar.start();\n        },\n\n        deactivateProgressSession: function () {\n            this.progressbar.stopthere();\n            log.debug('deactivating session');\n        },\n\n        showMessage: function (msg, msgid) {\n            this.messagearea.html(msg);\n        }//End of send message\n    };//end of returned object\n});//total end\n"],"names":["define","$","log","bar","debug","element","cvs","percent","progressbar","messagearea","clone","extend","this","init","config","initControls","self","fetchCurrent","initProgressSession","xhr","uploadingmessage","M","util","get_string","upload","addEventListener","e","lengthComputable","loaded","total","showMessage","Math","floor","start","deactivateProgressSession","stopthere","msg","msgid","html"],"mappings":"AACAA,kCAAO,CAAC,SAAU,WAAY,oCAAoC,SAAUC,EAAGC,IAAKC,YAIhFD,IAAIE,MAAM,4BAEH,CACHC,QAAS,KACTC,IAAK,KACLC,QAAS,EACTC,YAAa,KACbC,YAAa,KAIbC,MAAO,kBACIT,EAAEU,QAAO,EAAM,GAAIC,OAI9BC,KAAM,SAAUC,OAAQT,QAASC,IAAKG,kBAC7BK,OAASA,YACTT,QAAUA,aACVC,IAAMA,SACNE,YAAcL,IAAIO,aAClBD,YAAcA,aAGvBM,aAAc,eACNC,KAAOJ,UACNJ,YAAYK,KAAKD,KAAKN,IAAK,gBAC3BE,YAAYS,aAAe,kBACrBD,KAAKT,UAKpBW,oBAAqB,SAAUC,SACvBH,KAAOJ,KACXI,KAAKT,QAAU,MACXa,iBAAmBC,EAAEC,KAAKC,WAAW,kBAAmB,iBAE5DJ,IAAIK,OAAOC,iBAAiB,YAAY,SAAUC,GAC1CA,EAAEC,mBACFX,KAAKT,QAAUmB,EAAEE,OAASF,EAAEG,MAC5Bb,KAAKc,YAAYV,iBAAmB,IAAMW,KAAKC,MAAqB,IAAfhB,KAAKT,SAAiB,eAG9EC,YAAYyB,SAGrBC,0BAA2B,gBAClB1B,YAAY2B,YACjBjC,IAAIE,MAAM,yBAGd0B,YAAa,SAAUM,IAAKC,YACnB5B,YAAY6B,KAAKF"}