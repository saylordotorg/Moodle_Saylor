define ("filter_poodll/anim_hwave_mic",["jquery","core/log"],function(a,b){"use strict";b.debug("anim_horizontal_wave_mic: initialising");return{analyser:null,cvs:null,cvsctx:null,sounddetected:!1,imgone:null,imgoneloaded:!1,drawparams:{micColor:"#CCCCCC",wavColor:"#CCCCCC",lineWidth:2},clone:function clone(){return a.extend(!0,{},this)},setDrawParam:function setDrawParam(a,b){this.drawparams[a]=b},init:function init(a,b){this.cvs=b;this.cvsctx=b.getContext("2d");this.cvsctx.textAlign="center";this.analyser=a;var c=this;this.imgone=new Image;this.imgone.addEventListener("load",function(){c.imgoneloaded=!0});this.imgone.src=M.cfg.wwwroot+"/filter/poodll/pix/svg/mic.svg"},clear:function clear(){if(!this.imgoneloaded){var a=this;this.imgone.addEventListener("load",function(){a.imgoneloaded=!0;a.clear()});return}this.cvsctx.clearRect(0,0,this.cvs.width,this.cvs.height);this.cvsctx.beginPath();this.cvsctx.lineWidth=this.drawparams.lineWidth;this.cvsctx.strokeStyle=this.drawparams.wavColor;this.cvsctx.moveTo(0,this.cvs.height/2);this.cvsctx.lineTo(this.cvs.width,this.cvs.height/2);this.cvsctx.stroke();this.drawMic(this.cvsctx,this.cvs.width,this.cvs.height,this.imgone)},drawMic:function drawMic(a,b,c,d){var e=(b-d.width)/2,f=(c-d.height)/2;a.drawImage(d,e,f)},start:function start(){this.analyser.core.fftSize=2048;var a=this.analyser.core.fftSize,b=new Uint8Array(a),c=this.cvs.width,d=this.cvs.height,e=this.cvsctx,f=this.analyser,g=this;this.clear();var h=function(){requestAnimationFrame(h);if(!f.theinterval){return}f.core.getByteTimeDomainData(b);e.clearRect(0,0,c,d);e.lineWidth=g.drawparams.lineWidth;e.strokeStyle=g.drawparams.wavColor;e.beginPath();var j=0;if(0<a){var k=b[a-1];if(128!=k){g.sounddetected=!0}}for(var l=0;l<a;l++){var m=b[l]/128,n=m*d/2;if(0==l){e.moveTo(j,n)}else{e.lineTo(j,n)}j+=2*c/a}e.lineTo(c,d/2);e.stroke();g.drawMic(e,c,d,g.imgone)};h()}}});
//# sourceMappingURL=anim_hwave_mic.min.js.map
