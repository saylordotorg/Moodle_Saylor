define ("filter_poodll/poodll_uploadmediaskin",["jquery","jqueryui","core/log","filter_poodll/utils_amd","filter_poodll/upskin_radial","filter_poodll/util_dragdrop"],function(a,b,c,d,e,f){"use strict";c.debug("PoodLL Upload Media skin: initialising");return{instanceprops:null,pmr:null,clone:function clone(){return a.extend(!0,{},this)},init:function init(a,b){this.instanceprops=a;this.pmr=b},fetch_status_bar:function fetch_status_bar(){return""},fetch_preview_audio:function fetch_preview_audio(){return""},fetch_preview_video:function fetch_preview_video(){return""},fetch_resource_audio:function fetch_resource_audio(){return""},fetch_resource_video:function fetch_resource_video(){return""},fetch_uploader_skin:function fetch_uploader_skin(a,b){var c=this.fetch_instance_props(),d=e.clone();d.init(c.config,b,c.controlbar.uploadcanvas,c.controlbar.uploadmessages);d.setDrawParam("lineWidth",2);d.setDrawParam("font","14px Arial");return d},handle_timer_update:function handle_timer_update(){},onUploadSuccess:function onUploadSuccess(b){a("#"+b+" > .poodll_save-recording").hide();a("#"+b+" > .poodll_savedsuccessfully").show()},onUploadFailure:function onUploadFailure(){},onMediaSuccess_video:function onMediaSuccess_video(){},onMediaSuccess_audio:function onMediaSuccess_audio(){},insert_controlbar_video:function insert_controlbar_video(a,b,c,d){var e=this.prepare_controlbar(a,b,c,d,"video");return e},insert_controlbar_audio:function insert_controlbar_audio(a,b,c,d){var e=this.prepare_controlbar(a,b,c,d,"audio");return e},register_controlbar_events_video:function register_controlbar_events_video(a,b){return this.register_events(b)},register_controlbar_events_audio:function register_controlbar_events_audio(a,b){return this.register_events(b)},fetch_instance_props:function fetch_instance_props(){return this.instanceprops},prepare_controlbar:function prepare_controlbar(b,c,e,f,g){var h=this.fetch_instance_props(),i="";switch(g){case"video":i="video/webm,video/ogg,video/mp4,video/x-m4v,video/*";break;case"snapshot":case"image":i="image/*";case"audio":var j=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;if(j){i="video/*"}else{i="audio/*"}default:i="";}if(d.is_ios()||d.is_android()){var k=M.util.get_string("recui_recordorchoose","filter_poodll")}else{var k=M.util.get_string("recui_choosefile","filter_poodll")}var l=h.config.media_skin_style,m="video"==g?"poodll_mediarecorder_video":"poodll_mediarecorder_audio",n="<div class=\"poodll_mediarecorderholder_upload "+m+"\" id=\"holder_"+c+"\">";n+="<div class=\"poodll_mediarecorderbox_upload\" id=\""+c+"\">";n+=h.errordialog.fetch_dialogue_box();n+="<div class=\"style-holder "+l+"\">";if("audio"==g){var o=250,p=50}else{var o=130,p=210}n+="<div class=\"poodll_mediarecorder_uploadcanvas_cont_upload\"><canvas id=\""+c+"_uploadcanvas\" width=\""+o+"\" height=\""+p+"\" class=\"poodll_mediarecorder_uploadcanvas_upload\"></canvas></div>";n+="<div class=\"p_btn_wrapper\">";n+="<input type=\"file\" id=\""+c+"_poodllfileselect\" name=\"poodllfileselect[]\" accept=\""+i+"\"/>";n+="<button type=\"button\" id=\""+c+"_p_btn\" class=\"p_btn\">"+k+"</button>";n+="</div>";n+="<div class=\"poodll_uploadmessages_once\"></div>";n+="</div></div></div>";a(b).prepend(n);var q={errorsdialog:a("#"+c+" .poodll_dialogue_box_errors"),filebutton:a("#"+c+"_poodllfileselect"),startbutton:a("#"+c+"_p_btn"),uploadcanvas:a("#"+c+"_uploadcanvas"),uploadmessages:a("#"+c+" .poodll_uploadmessages_once")};h.errordialog.set_dialogue_box(q.errorsdialog);return q},register_events:function register_events(){var a=this,b=this.pmr,c=this.fetch_instance_props();c.config.hermes.enable();c.controlbar.filebutton.on("change",function(b){var d=b.target.files||b.dataTransfer.files;a.FileSelectHandler(d,c.uploader);f.turnoff_dragdrop();c.controlbar.filebutton.off("change");c.controlbar.filebutton.attr("disabled",!0)});f.init(c.controlbar.uploadcanvas,this.FileSelectHandler,c)},FileSelectHandler:function FileSelectHandler(a,b){for(var d=0,e;e=a[d];d++){c.debug("filetype:"+e.type);b.uploadBlob(e,e.type)}}}});
//# sourceMappingURL=poodll_uploadmediaskin.min.js.map
