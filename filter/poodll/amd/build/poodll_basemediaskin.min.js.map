{"version":3,"sources":["../src/poodll_basemediaskin.js"],"names":["define","$","log","utils","settings","anim_progress_bar","upskin_bar","debug","instanceprops","pmr","uploaded","devsettings","clone","extend","init","ip","fetch_instanceprops","onUploadSuccess","controlbarid","hide","show","onUploadFailure","fetch_status_bar","skin","fetch_preview_audio","fetch_preview_video","fetch_resource_audio","fetch_resource_video","fetch_uploader_skin","element","upskin","config","controlbar","progresscanvas","timer","onMediaError","e","console","error","onMediaSuccess_video","uploader","Output","set_visual_mode","preview","attr","reset","start","update_status","onMediaSuccess_audio","handle_timer_update","status","html","fetch_display_time","seconds","initseconds","stopbutton","click","mode","self","progress","disable_button","startbutton","playbutton","resumebutton","enable_button","savebutton","pausebutton","addClass","mediatype","removeClass","insert_controlbar_video","resource","prepare_controlbar","insert_controlbar_audio","skin_style","media_skin_style","recorder_class","size_class","size","ss","fetch_strings","hideshowupload","showupload","controls","fetch_dialogue_box","downloaddialog","errordialog","prepend","settingsdialog","errorsdialog","settingsicon","set_dialogue_box","register_controlbar_events_video","onMediaSuccess","register_controlbar_events_audio","hprogress","open","do_start_audio","get","pause","do_stop_audio","stop","disabled","do_pause_audio","do_resume_audio","resume","do_play_audio","on","paused","currentTime","clear","fetchCurrent","ct","prop","duration","isFinite","finalseconds","blobs","length","do_save_audio","M","util","get_string","window","onbeforeunload","button"],"mappings":"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","sourcesContent":["/* jshint ignore:start */\ndefine(['jquery','core/log', 'filter_poodll/utils_amd', 'filter_poodll/dlg_devicesettings', 'filter_poodll/anim_progress_bar', 'filter_poodll/upskin_bar'],\n    function ($, log, utils, settings, anim_progress_bar, upskin_bar) {\n\n        \"use strict\"; // jshint ;_;\n\n        log.debug('PoodLL Base Skin: initialising');\n\n        return {\n\n            instanceprops: null,\n            pmr: null,\n            uploaded: false,\n            devsettings: null,\n\n            //for making multiple instances\n            clone: function () {\n                return $.extend(true, {}, this);\n            },\n\n            init: function (ip, pmr) {\n                this.instanceprops = ip;\n                this.pmr = pmr;\n                this.devsettings = settings.clone();\n                this.devsettings.init(pmr, ip);\n            },\n\n\n            fetch_instanceprops: function () {\n                return this.instanceprops;\n            },\n\n\n            onUploadSuccess: function (controlbarid) {\n                $('#' + controlbarid + ' > .poodll_save-recording').hide();\n                // $('#' + controlbarid  + '_messages').hide();\n                $('#' + controlbarid + ' > .poodll_savedsuccessfully').show();\n            },\n\n            onUploadFailure: function (controlbarid) {\n                return;\n            },\n\n            fetch_status_bar: function (skin) {\n                var status = '<div class=\"poodll_status_' + skin + '\" width=\"100%\" height=\"50\">00:00:00</div>';\n                return status;\n            },\n\n            fetch_preview_audio: function (skin) {\n                var preview = '<audio class=\"poodll_preview_' + skin + '\"  playsinline muted style=\"display: none;\" controls></audio>';\n                return preview;\n            },\n            fetch_preview_video: function (skin) {\n                var preview = '<video class=\"poodll_preview_' + skin + '\" playsinline muted ></video>';\n                return preview;\n            },\n            fetch_resource_audio: function (skin) {\n                var resourceplayer = '<audio class=\"poodll_resourceplayer_' + skin + '\" style=\"display: none;\" ></audio>';\n                return resourceplayer;\n            },\n            fetch_resource_video: function (skin) {\n                var resourceplayer = '<video class=\"poodll_resourceplayer_' + skin + '\" style=\"display: none;\" playsinline=\"playsinline\"></video>';\n                return resourceplayer;\n            },\n            fetch_uploader_skin: function (controlbarid, element) {\n                var ip = this.fetch_instanceprops(controlbarid);\n                var upskin = upskin_bar.clone();\n                upskin.init(ip.config, element, ip.controlbar.progresscanvas, ip.controlbar.timer);\n                return upskin;\n            },\n\n            onMediaError: function (e) {\n                console.error('media error', e);\n            },\n\n            onMediaSuccess_video: function (controlbarid) {\n                var ip = this.fetch_instanceprops(controlbarid);\n                //clear messages\n                ip.uploader.Output('');\n\n                //set visuals\n                this.set_visual_mode('recordmode', controlbarid);\n                ip.controlbar.preview.attr('src', null);\n\n                //timer and status bar\n                ip.timer.reset();\n                ip.timer.start();\n                this.update_status(controlbarid);\n            },\n\n            onMediaSuccess_audio: function (controlbarid) {\n                var ip = this.fetch_instanceprops(controlbarid);\n\n                //clear messages\n                ip.uploader.Output('');\n\n                //set visuals\n                this.set_visual_mode('recordmode', controlbarid);\n\n                //timer and status bar\n                ip.timer.reset();\n                ip.timer.start();\n                this.update_status(controlbarid);\n\n            },\n\n            handle_timer_update: function (controlbarid) {\n                var ip = this.fetch_instanceprops(controlbarid);\n                ip.controlbar.status.html(ip.timer.fetch_display_time());\n                if (ip.timer.seconds == 0 && ip.timer.initseconds > 0) {\n                    ip.controlbar.stopbutton.click();\n                }\n            },\n\n            update_status: function (controlbarid) {\n                var ip = this.fetch_instanceprops(controlbarid);\n                ip.controlbar.status.html(ip.timer.fetch_display_time());\n            },\n\n            //set visuals for different states (ie recording or playing)\n            set_visual_mode: function (mode, controlbarid) {\n                var self = this;\n                var ip = this.fetch_instanceprops(controlbarid);\n\n                switch (mode) {\n\n                    case 'recordmode':\n                        ip.controlbar.progress.hide();\n                        self.disable_button(ip.controlbar.startbutton);\n                        self.disable_button(ip.controlbar.playbutton);\n                        ip.controlbar.resumebutton.hide();\n                        self.enable_button(ip.controlbar.stopbutton);\n                        self.disable_button(ip.controlbar.savebutton);\n                        ip.controlbar.pausebutton.show();\n                        self.enable_button(ip.controlbar.pausebutton);\n\n                        ip.controlbar.preview.addClass('poodll_recording');\n                        ip.controlbar.status.addClass('poodll_recording');\n                        if (ip.config.mediatype == 'audio') {\n                            ip.controlbar.preview.hide();\n                        }\n                        ip.controlbar.status.show();\n                        break;\n\n                    case 'playingmode':\n                        self.disable_button(ip.controlbar.playbutton);\n                        self.enable_button(ip.controlbar.stopbutton);\n                        self.disable_button(ip.controlbar.startbutton);\n                        self.disable_button(ip.controlbar.savebutton);\n                        ip.controlbar.progresscanvas.show();\n                        break;\n\n                    case 'previewmode':\n                        self.enable_button(ip.controlbar.playbutton);\n                        self.disable_button(ip.controlbar.pausebutton);\n                        self.disable_button(ip.controlbar.stopbutton);\n                        if (!self.uploaded) {\n                            self.enable_button(ip.controlbar.startbutton);\n                            self.enable_button(ip.controlbar.savebutton);\n                        }\n                        ip.controlbar.resumebutton.hide();\n                        ip.controlbar.pausebutton.show();\n                        ip.controlbar.preview.removeClass('poodll_recording');\n                        ip.controlbar.status.removeClass('poodll_recording');\n                        ip.controlbar.timer.html('00:00:00');\n                        ip.controlbar.progress.show();\n                        ip.controlbar.progresscanvas.hide();\n                        ip.controlbar.status.hide();\n                        break;\n\n                    case 'pausedmode':\n                        self.enable_button(ip.controlbar.resumebutton);\n                        self.enable_button(ip.controlbar.savebutton);\n                        ip.controlbar.preview.removeClass('poodll_recording');\n                        ip.controlbar.status.removeClass('poodll_recording');\n\n                        break;\n\n\n                    case 'uploadingmode':\n\n                        self.disable_button(ip.controlbar.startbutton);\n                        ip.controlbar.progresscanvas.show();\n\n                        break;\n                }\n\n            },\n\n            //insert the control bar and return it to be reused\n            insert_controlbar_video: function (element, controlbarid, preview, resource) {\n                var controlbar = this.prepare_controlbar(element, controlbarid, preview, resource, 'video');\n                return controlbar;\n            },\n            //insert the control bar and return it to be reused\n            insert_controlbar_audio: function (element, controlbarid, preview, resource) {\n                var controlbar = this.prepare_controlbar(element, controlbarid, preview, resource, 'audio');\n                return controlbar;\n            },\n\n            //insert the control bar and return it to be reused\n            prepare_controlbar: function (element, controlbarid, preview, resource, mediatype) {\n                var ip = this.fetch_instanceprops(controlbarid);\n                var skin_style = ip.config.media_skin_style;\n\n                var recorder_class = mediatype == 'video' ? 'poodll_mediarecorder_video' : 'poodll_mediarecorder_audio';\n\n                var size_class = 'poodll_mediarecorder_size_auto';\n                switch (ip.config.size) {\n                    case 'small':\n                        size_class = 'poodll_mediarecorder_size_small';\n                        break;\n                    case 'big':\n                        size_class = 'poodll_mediarecorder_size_big';\n                        break;\n                    case 'auto':\n                        size_class = 'poodll_mediarecorder_size_auto';\n                }\n\n                var ss = this.pmr.fetch_strings();\n                var hideshowupload = ip.showupload ? 'inline-block' : 'none';\n                var controls = '<div class=\"poodll_mediarecorderholder_standard ' + recorder_class + ' ' + size_class + '\" id=\"holder_' + controlbarid + '\">';\n                controls += '<div class=\"poodll_mediarecorderbox_standard\" id=\"' + controlbarid + '\">';\n                controls += this.devsettings.fetch_dialogue_box();\n                controls += ip.downloaddialog.fetch_dialogue_box();\n                controls += ip.errordialog.fetch_dialogue_box();\n                controls += '<div class=\"style-holder ' + skin_style + '\">';\n                var status = this.fetch_status_bar('standard');\n                controls += status;\n                controls += '<div class=\"hp_slide\" id=\"slide_' + controlbarid + '\">';\n                controls += '<div class=\"hp_timer\"></div>';\n                controls += '<canvas class=\"hp_range\"></canvas>';\n                controls += '</div>';\n                controls += preview,\n                    controls += '<div class=\"settingsicon\" id=\"settingsicon_' + controlbarid + '\"><button type=\"button\" class=\"btn btn-info btn-lg\" data-toggle=\"modal\" data-target=\"#myModal\"><i class=\"fa fa-cogs\" aria-hidden=\"true\"></i></button></div>';\n                controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_standard poodll_start-recording_standard\">' + ss['recui_record'] + '</button>';\n                controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_standard poodll_stop-recording_standard pmr_disabled\" disabled>' + ss['recui_stop'] + '</button>';\n                controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_standard poodll_pause-recording_standard pmr_disabled\" disabled>' + ss['recui_pause'] + '</button>';\n                controls += ' <button type=\"button\" class=\"poodll_mediarecorder_button_standard poodll_resume-recording_standard pmr_disabled\" style=\"display: none;\" disabled>' + ss['recui_continue'] + '</button>';\n                controls += ' <button type=\"button\" class=\"poodll_mediarecorder_button_standard poodll_play-recording_standard pmr_disabled\" disabled>' + ss['recui_play'] + '</button>';\n                controls += '<button type=\"button\" class=\"poodll_save-recording_standard pmr_disabled\" style=\"display: ' + hideshowupload + ';\" disabled>' + ss['recui_save'] + '</button>';\n                controls += '</div>';\n                controls += '</div>';\n                controls += '</div>';\n\n                $(element).prepend(controls);\n\n                var controlbar = {\n                    settingsdialog: $('#' + controlbarid + ' .poodll_dialogue_box_settings'),\n                    downloaddialog: $('#' + controlbarid + ' .poodll_dialogue_box_download'),\n                    errorsdialog: $('#' + controlbarid + ' .poodll_dialogue_box_errors'),\n                    settingsicon: $('#' + controlbarid + ' .settingsicon'),\n                    progresscanvas: $('#' + controlbarid + ' .hp_range'),\n                    progress: $('#' + controlbarid + ' .hp_slide'),\n                    timer: $('#' + controlbarid + ' .hp_timer'),\n                    status: $('#' + controlbarid + '  .poodll_status_standard'),\n                    preview: $('#' + controlbarid + '  .poodll_preview_standard'),\n                    startbutton: $('#' + controlbarid + '  .poodll_start-recording_standard'),\n                    stopbutton: $('#' + controlbarid + '  .poodll_stop-recording_standard'),\n                    pausebutton: $('#' + controlbarid + '  .poodll_pause-recording_standard'),\n                    resumebutton: $('#' + controlbarid + '  .poodll_resume-recording_standard'),\n                    playbutton: $('#' + controlbarid + '  .poodll_play-recording_standard'),\n                    savebutton: $('#' + controlbarid + '  .poodll_save-recording_standard')\n                };\n                //settings and error dialogs\n                //They use the same dialog and just fill it with different stuff\n                //settings is on 'this' because it is shown from skin events, but errors are from pmr stuff\n                ip.downloaddialog.set_dialogue_box(controlbar.downloaddialog);\n                ip.errordialog.set_dialogue_box(controlbar.errorsdialog);\n                this.devsettings.set_dialogue_box(controlbar.settingsdialog);\n\n                return controlbar;\n            }, //end of fetch_control_bar_standard\n\n\n            register_controlbar_events_video: function (onMediaSuccess, controlbarid) {\n                return this.register_controlbar_events_audio(onMediaSuccess, controlbarid);\n            },\n\n            register_controlbar_events_audio: function (onMediaSuccess, controlbarid) {\n                var self = this;\n                var pmr = this.pmr;\n                var ip = this.fetch_instanceprops(controlbarid);\n\n                //init linear progress\n                var hprogress = anim_progress_bar.clone();\n                hprogress.init(ip.controlbar.progresscanvas);\n\n\n                ip.controlbar.settingsicon.click(function () {\n                    if (!self.uploaded) {\n                        self.devsettings.open();\n                    } else {\n                        ip.downloaddialog.open();\n                    }\n                });\n\n                ip.controlbar.startbutton.click(function () {\n                    pmr.do_start_audio(ip, onMediaSuccess);\n                });\n\n                ip.controlbar.stopbutton.click(function () {\n\n                    var preview = ip.controlbar.preview;\n                    if (preview && preview.get(0)) {\n                        preview.get(0).pause();\n                    }\n\n                    pmr.do_stop_audio(ip);\n\n                    //timer and status bar\n                    ip.timer.stop();\n                    ip.timer.reset();\n                    self.update_status(controlbarid);\n                    //stop progress\n                    hprogress.stop();\n\n                    //do visuals\n                    self.set_visual_mode('previewmode', controlbarid);\n\n\n                });\n\n                ip.controlbar.pausebutton.click(function () {\n                    this.disabled = true;\n                    $(this).hide();\n                    ip.controlbar.resumebutton.show();\n                    pmr.do_pause_audio(ip);\n\n                    //timer and status bar\n                    ip.timer.pause();\n                    self.update_status(controlbarid);\n\n                    //do visuals\n                    self.set_visual_mode('pausedmode', controlbarid);\n                });\n\n                ip.controlbar.resumebutton.click(function () {\n\n                    pmr.do_resume_audio(ip);\n\n                    //timer and status bar\n                    ip.timer.resume();\n                    self.update_status(controlbarid);\n\n                    //do visuals\n                    self.set_visual_mode('recordmode', controlbarid);\n                });\n\n                ip.controlbar.playbutton.click(function () {\n\n                    var preview = ip.controlbar.preview.get(0);\n                    pmr.do_play_audio(ip, preview);\n\n                    ip.controlbar.preview.on('timeupdate', function () {\n                        if (!this.paused) {\n                            var currentTime = this.currentTime;\n                            ip.controlbar.timer.html(ip.timer.fetch_display_time(currentTime));\n                        }\n                    });\n\n                    //do visuals\n                    self.set_visual_mode('playingmode', controlbarid);\n\n                    //start animation\n                    hprogress.clear();\n                    hprogress.fetchCurrent = function () {\n                        var ct = ip.controlbar.preview.prop('currentTime');\n                        var duration = ip.controlbar.preview.prop('duration');\n                        if (!isFinite(duration)) {\n                            duration = ip.timer.finalseconds;\n                        }\n                        return ct / duration;\n                    };\n                    hprogress.start();\n\n                });\n\n                ip.controlbar.savebutton.click(function () {\n                    self.disable_button(this);\n                    if (ip.blobs && ip.blobs.length > 0) {\n                        pmr.do_save_audio(ip);\n                        self.uploaded = true;\n\n                        //do visuals\n                        self.set_visual_mode('uploadingmode', controlbarid);\n\n                    } else {\n                        ip.uploader.Output(M.util.get_string('recui_nothingtosaveerror', 'filter_poodll'));\n                    }//end of if self.blobs\t\t\n                    //probably not necessary  ... but getting odd ajax errors occasionally\n                    return false;\n                });//end of save recording\n\n                window.onbeforeunload = function () {\n                    self.enable_button(ip.controlbar.startbutton);\n                    var preview = ip.controlbar.preview;\n                    if (preview && preview.get(0)) {\n                        preview.get(0).pause();\n                    }\n                };\n            }, //end of register_control_bar_events_standard\n\n            enable_button: function (button) {\n                $(button).attr('disabled', false);\n                $(button).removeClass('pmr_disabled');\n            },\n            disable_button: function (button) {\n                $(button).attr('disabled', true);\n                $(button).addClass('pmr_disabled');\n            }\n\n        };//end of returned object\n    });//total end\n"],"file":"poodll_basemediaskin.min.js"}