define(["jquery","core/log"],(function($,log){return log.debug("Bar Progress: initialising"),{waveroot:null,playcanvas:null,context:null,startx:null,starty:null,barwidth:null,barheight:null,enabled:!1,drawparams:{barColor:"#6DDC6F",textColor:"#fff",font:"12px Arial",textAlign:"center"},clone:function(){return $.extend(!0,{},this)},init:function(playcanvas){this.playcanvas=playcanvas.get(0),this.startx=0,this.starty=0,this.barwidth=this.playcanvas.width,this.barheight=this.playcanvas.height,this.context=this.playcanvas.getContext("2d")},test:function(analyser){var testAnalyser=analyser,bufferLength=testAnalyser.core.fftSize;new Uint8Array(bufferLength);console.log(testAnalyser)},readyBars:function(){var $waveRoot=$(".poodll_fresh_wave"),$waveProgress=$('<div class="poodll_fresh_progress_bar"><span></span></div>'),stickCount=$waveRoot.width()/4;stickCount.toFixed(),$waveRoot.empty();for(var i=0;i<stickCount;i++){var point=$('<div class="poodll_fresh_point"><div class="poodll_fresh_stick" style="height: 8px"></div></div>');$waveRoot.append(point)}$waveRoot.append($waveProgress)},playBars:function(currentTime,duration){var that=this,$waveRoot=$(".poodll_fresh_wave"),$waveProgress=$(".poodll_fresh_progress_bar"),stickCount=$waveRoot.width()/4;$waveRoot.attr("data-ct",currentTime).attr("data-duration",duration),stickCount.toFixed();var pointsCollection=$(".poodll_fresh_point");$.each(pointsCollection,(function(thepoint){pointsCollection[thepoint].children[0]&&(pointsCollection[thepoint].children[0].style.height="4px")}));!function draw(){var waveData=[];$.each(pointsCollection,(function(thepoint){var sampleData=Math.floor(50*Math.random()+4);waveData.push(sampleData);var pointHeight=waveData[i]||4;pointsCollection[thepoint].children[0].style.height=pointHeight+"px"})),$waveProgress.css("left",100*that.fetchCurrent()+"%");var requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;that.fetchCurrent()<1&&(console.log(that.fetchCurrent()),requestAnimationFrame(draw))}()},pauseBars:function(){},setDrawParam:function(paramkey,paramvalue){this.drawparams[paramkey]=paramvalue},clear:function(){this.context.clearRect(this.startx,this.starty,this.barwidth,this.barheight)},fetchCurrent:function(){return 0},stop:function(){this.enabled=!1,this.clear()},stopthere:function(){this.enabled=!1},start:function(){this.clear(),this.enabled=!0;var that=this;this.context.textAlign=this.drawparams.textAlign,this.context.font=this.drawparams.font;this.drawparams.textColor;!function draw(){that.enabled&&(that.clear(),that.context.fillStyle=that.drawparams.barColor,that.context.fillRect(that.startx,that.starty,that.fetchCurrent()*that.barwidth,that.barheight),(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame)(draw))}()}}}));

//# sourceMappingURL=anim_progress_bar_fresh.min.js.map