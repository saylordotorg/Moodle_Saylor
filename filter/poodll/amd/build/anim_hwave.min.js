define(["jquery","core/log"],function(a,b){"use strict";return b.debug("anim_horizontal_wave: initialising"),{analyser:null,cvs:null,cvsctx:null,drawparams:{wavColor:"#0",barColor:"#ad2323",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:10,shadowColor:"#fff",font:"18px Arial",textAlign:"center",textBaseline:"middle"},clone:function(){return a.extend(!0,{},this)},init:function(a,b){this.cvs=b,this.cvsctx=b.getContext("2d"),this.analyser=a,this.clear()},setDrawParam:function(a,b){this.drawparams[a]=b},clear:function(){this.cvsctx.clearRect(0,0,this.cvs.width,this.cvs.height),this.cvsctx.lineWidth=2,this.cvsctx.strokeStyle=this.drawparams.wavColor,this.cvsctx.beginPath(),this.cvsctx.moveTo(0,this.cvs.height/2),this.cvsctx.lineTo(this.cvs.width,this.cvs.height/2),this.cvsctx.stroke()},start:function(){this.analyser.core.fftSize=2048;var a=this.analyser.core.fftSize,b=new Uint8Array(a),c=this.cvs.width,d=this.cvs.height,e=this.cvsctx,f=this.analyser;this.clear();var g=this,h=function(){requestAnimationFrame(h);if(f.theinterval){f.core.getByteTimeDomainData(b),e.clearRect(0,0,c,d),e.lineWidth=2,e.strokeStyle=g.drawparams.wavColor,e.beginPath();for(var i=1*c/a,j=0,k=0;k<a;k++){var l=b[k]/128,m=l*d/2;0===k?e.moveTo(j,m):e.lineTo(j,m),j+=i}e.lineTo(c,d/2),e.stroke()}};h()}}});