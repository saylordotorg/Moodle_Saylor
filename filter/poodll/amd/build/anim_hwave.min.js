define(["jquery","core/log"],(function($,log){return log.debug("anim_horizontal_wave: initialising"),{analyser:null,cvs:null,cvsctx:null,drawparams:{wavColor:"#0",barColor:"#ad2323",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:10,shadowColor:"#fff",font:"18px Arial",textAlign:"center",textBaseline:"middle"},clone:function(){return $.extend(!0,{},this)},init:function(analyser,cvs){this.cvs=cvs,this.cvsctx=cvs.getContext("2d"),this.analyser=analyser,this.clear()},setDrawParam:function(paramkey,paramvalue){this.drawparams[paramkey]=paramvalue},clear:function(){this.cvsctx.clearRect(0,0,this.cvs.width,this.cvs.height),this.cvsctx.lineWidth=2,this.cvsctx.strokeStyle=this.drawparams.wavColor,this.cvsctx.beginPath(),this.cvsctx.moveTo(0,this.cvs.height/2),this.cvsctx.lineTo(this.cvs.width,this.cvs.height/2),this.cvsctx.stroke()},start:function(){this.analyser.core.fftSize=2048;var bufferLength=this.analyser.core.fftSize,dataArray=new Uint8Array(bufferLength),cwidth=this.cvs.width,cheight=this.cvs.height,canvasCtx=this.cvsctx,analyser=this.analyser;this.clear();var that=this;!function draw(){requestAnimationFrame(draw);if(analyser.theinterval){analyser.core.getByteTimeDomainData(dataArray),canvasCtx.clearRect(0,0,cwidth,cheight),canvasCtx.lineWidth=2,canvasCtx.strokeStyle=that.drawparams.wavColor,canvasCtx.beginPath();for(var sliceWidth=1*cwidth/bufferLength,x=0,i=0;i<bufferLength;i++){var y=dataArray[i]/128*cheight/2;0===i?canvasCtx.moveTo(x,y):canvasCtx.lineTo(x,y),x+=sliceWidth}canvasCtx.lineTo(cwidth,cheight/2),canvasCtx.stroke()}}()}}}));

//# sourceMappingURL=anim_hwave.min.js.map