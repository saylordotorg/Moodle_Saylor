{"version":3,"sources":["../src/poodll_burntrosemediaskin.js"],"names":["define","$","log","debug","instanceprops","pmr","clone","extend","init","ip","fetch_instanceprops","onUploadSuccess","widgetid","controlbarid","hide","show","onUploadFailure","fetch_status_bar","skin","fetch_preview_audio","fetch_preview_video","fetch_resource_audio","fetch_resource_video","onMediaError","e","console","error","onMediaSuccess_video","controlbar","stopbutton","attr","pausebutton","savebutton","onMediaSuccess_audio","preview","handle_timer_update","status","html","timer","fetch_display_time","seconds","initseconds","click","update_status","set_visual_mode","mode","self","addClass","config","mediatype","removeClass","insert_controlbar_audio","element","skin_style","media_skin_style","size_class","size","controls","M","util","get_string","prepend","startbutton","resumebutton","play1","playbutton","save1","savesuccess","playermic","recordmic","resumemic","insert_controlbar_video","register_controlbar_events_video","onMediaSuccess","register_controlbar_events_audio","disabled","text","do_start_audio","reset","start","do_stop_audio","get","pause","stop","uploaded","do_pause_audio","do_resume_audio","resume","currentTime","paused","do_play_audio","blobs","length","do_save_audio","uploader","Output","window","onbeforeunload"],"mappings":"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","sourcesContent":["/* jshint ignore:start */\ndefine(['jquery', 'core/log', 'filter_poodll/utils_amd'], function ($, log, utils) {\n\n    \"use strict\"; // jshint ;_;\n\n    log.debug('PoodLL Burnt Rose Skin: initialising');\n\n    return {\n\n        instanceprops: null,\n        pmr: null,\n\n        //for making multiple instances\n        clone: function () {\n            return $.extend(true, {}, this);\n        },\n\n        init: function (ip, pmr, controlbarid) {\n            this.instanceprops = ip;\n            this.pmr = pmr;\n        },\n\n        fetch_instanceprops: function () {\n            return this.instanceprops;\n        },\n\n\n        onUploadSuccess: function (widgetid) {\n            log.debug('from poodllmediarecorder: uploadsuccess');\n            var controlbarid = 'filter_poodll_controlbar_' + widgetid;\n            $('#' + controlbarid + ' > .poodll_save-recording').hide();\n            $('#' + controlbarid + ' > .poodll_savedsuccessfully').show();\n        },\n\n        onUploadFailure: function (controlbarid) {\n            log.debug('from poodllmediarecorder: uploadfailure');\n        },\n\n        fetch_status_bar: function (skin) {\n            var status = '<div class=\"poodll_status_' + skin + '\" width=\"320\" height=\"50\">00:00:00</div>';\n            return status;\n        },\n\n        fetch_preview_audio: function (skin) {\n            var preview = '<audio class=\"poodll_preview_' + skin + ' hide\" controls playsinline=\"playsinline\" muted></audio>';\n            return preview;\n        },\n        fetch_preview_video: function (skin) {\n            var preview = '<video class=\"poodll_preview_' + skin + '\" width=\"320\" height=\"240\" playsinline=\"playsinline\" muted></video>';\n            return preview;\n        },\n        fetch_resource_audio: function (skin) {\n            var resourceplayer = '<audio class=\"poodll_resourceplayer_' + skin + ' hide\" playsinline=\"playsinline\" ></audio>';\n            return resourceplayer;\n        },\n        fetch_resource_video: function (skin) {\n            var resourceplayer = '<video class=\"poodll_resourceplayer_' + skin + ' hide\" playsinline=\"playsinline\"></video>';\n            return resourceplayer;\n        },\n\n        onMediaError: function (e) {\n            console.error('media error', e);\n        },\n\n        onMediaSuccess_video: function (controlbarid) {\n            var ip = this.fetch_instanceprops(controlbarid);\n            ip.controlbar.stopbutton.attr('disabled', false);\n            ip.controlbar.pausebutton.attr('disabled', false);\n            ip.controlbar.savebutton.attr('disabled', false);\n        },\n\n        onMediaSuccess_audio: function (controlbarid) {\n            var ip = this.fetch_instanceprops(controlbarid);\n            ip.controlbar.preview.attr('src', null);\n            ip.controlbar.stopbutton.attr('disabled', false);\n            ip.controlbar.pausebutton.attr('disabled', false);\n            ip.controlbar.savebutton.attr('disabled', false);\n        },\n\n        handle_timer_update: function (controlbarid) {\n            var ip = this.fetch_instanceprops(controlbarid);\n            ip.controlbar.status.html(ip.timer.fetch_display_time());\n            if (ip.timer.seconds == 0 && ip.timer.initseconds > 0) {\n                ip.controlbar.stopbutton.click();\n            }\n        },\n\n        update_status: function (controlbarid) {\n            var ip = this.fetch_instanceprops(controlbarid);\n            ip.controlbar.status.html(ip.timer.fetch_display_time());\n        },\n\n        //\n        // BURNTROSE SKIN\n        //\n        //\n\n        //set visuals for different states (ie recording or playing)\n        set_visual_mode: function (mode, controlbarid) {\n            var self = this;\n            var ip = this.fetch_instanceprops(controlbarid);\n\n            switch (mode) {\n\n                case 'recordmode':\n                    ip.controlbar.preview.addClass('poodll_recording');\n                    ip.controlbar.status.addClass('poodll_recording');\n                    if (ip.config.mediatype == 'audio') {\n                        ip.controlbar.preview.addClass('hide');\n                    }\n                    ip.controlbar.status.removeClass('hide');\n                    break;\n\n                case 'previewmode':\n                    ip.controlbar.preview.removeClass('poodll_recording');\n                    ip.controlbar.status.removeClass('poodll_recording');\n                    break;\n\n                case 'pausedmode':\n                    ip.controlbar.preview.removeClass('poodll_recording');\n                    ip.controlbar.status.removeClass('poodll_recording');\n                    break;\n            }\n\n        },\n\n\n        //insert the control bar and return it to be reused\n        insert_controlbar_audio: function (element, controlbarid, preview, resource) {\n            var ip = this.fetch_instanceprops(controlbarid);\n            var skin_style = ip.config.media_skin_style;\n\n            var size_class = 'poodll_mediarecorder_size_auto';\n            switch (ip.config.size) {\n                case 'small':\n                    size_class = 'poodll_mediarecorder_size_small';\n                    break;\n                case 'big':\n                    size_class = 'poodll_mediarecorder_size_big';\n                    break;\n                case 'auto':\n                    size_class = 'poodll_mediarecorder_size_auto';\n            }\n\n            var controls = '<div class=\"poodll_mediarecorderbox_burntrose ' + skin_style + ' ' + size_class + '\" id=\"' + controlbarid + '\">';\n            var status = this.fetch_status_bar('burntrose');\n            controls += status,\n                controls += preview,\n                controls += '<span class=\"poodll_start-recording\" title=\"' + M.util.get_string('recui_record', 'filter_poodll') + '\"></span>';\n            controls += '<span class=\"poodll_stop-recording hide\" title=\"' + M.util.get_string('recui_stop', 'filter_poodll') + '\"></span>';\n            controls += '<span class=\"poodll_pause-recording hide\" title=\"' + M.util.get_string('recui_pause', 'filter_poodll') + '\"></span>';\n            controls += ' <span class=\"poodll_resume-recording hide\"title=\"' + M.util.get_string('recui_continue', 'filter_poodll') + '\" ></span>';\n            controls += ' <span class=\"poodll_play-recording\" ></span>';\n            controls += ' <span class=\"poodll_playsave hide\" title=\"' + M.util.get_string('recui_play', 'filter_poodll') + '\" ></span>';\n            controls += ' <span class=\"poodll_mic\" ></span>';\n            controls += ' <span class=\"poodll_recmic hide\" ></span>';\n            controls += ' <span class=\"poodll_resume_mic hide\" ></span>';\n            controls += '<span class=\"poodll_savebtn\" ></span>';\n            controls += '<span class=\"poodll_save-recording_burntrose hide\" title=\"' + M.util.get_string('recui_save', 'filter_poodll') + '\" ></span>';\n            controls += '<span class=\"poodll_savedsuccessfully hide\"></span>';\n            controls += '</div>';\n            $(element).prepend(controls);\n            var controlbar = {\n                status: $('#' + controlbarid + ' .poodll_status_burntrose'),\n                preview: $('#' + controlbarid + ' .poodll_preview_burntrose'),\n                startbutton: $('#' + controlbarid + ' .poodll_start-recording'),\n                stopbutton: $('#' + controlbarid + '  .poodll_stop-recording'),\n                pausebutton: $('#' + controlbarid + ' .poodll_pause-recording'),\n                resumebutton: $('#' + controlbarid + ' .poodll_resume-recording'),\n                play1: $('#' + controlbarid + ' .poodll_play-recording'),\n                playbutton: $('#' + controlbarid + ' > .poodll_playsave'),\n                save1: $('#' + controlbarid + ' .poodll_savebtn'),\n                savebutton: $('#' + controlbarid + ' .poodll_save-recording_burntrose'),\n                savesuccess: $('#' + controlbarid + ' .poodll_savedsuccessfully'),\n\n                playermic: $('#' + controlbarid + ' .poodll_mic'),\n                recordmic: $('#' + controlbarid + ' .poodll_recmic'),\n                resumemic: $('#' + controlbarid + ' .poodll_resume_mic')\n            };\n            return controlbar;\n        }, //end of fetch_control_bar_burntrose,\n\n        //insert the control bar and return it to be reused\n        insert_controlbar_video: function (element, controlbarid, preview, resource) {\n            var ip = this.fetch_instanceprops(controlbarid);\n            var skin_style = ip.config.media_skin_style;\n\n            var size_class = 'poodll_mediarecorder_size_auto';\n            switch (ip.config.size) {\n                case 'small':\n                    size_class = 'poodll_mediarecorder_size_small';\n                    break;\n                case 'big':\n                    size_class = 'poodll_mediarecorder_size_big';\n                    break;\n                case 'auto':\n                    size_class = 'poodll_mediarecorder_size_auto';\n            }\n\n            var controls = '<div class=\"poodll_mediavideobox ' + skin_style + ' ' + size_class + '\" id=\"' + controlbarid + '\">';\n            var status = this.fetch_status_bar('burntrose');\n            controls += status,\n                controls += preview,\n                controls += '<div class=\"poodll_mediavideobox2\" id=\"' + controlbarid + '\">';\n            controls += '<span class=\"poodll_start-recording\" title=\"' + M.util.get_string('recui_record', 'filter_poodll') + '\"></span>';\n            controls += '<span class=\"poodll_stop-recording hide\" title=\"' + M.util.get_string('recui_stop', 'filter_poodll') + '\"></span>';\n            controls += '<span class=\"poodll_pause-recording hide\" title=\"' + M.util.get_string('recui_pause', 'filter_poodll') + '\" ></span>';\n            controls += ' <span class=\"poodll_resume-recording hide\" title=\"' + M.util.get_string('recui_continue', 'filter_poodll') + '\"></span>';\n            controls += ' <span class=\"poodll_play-recording\" ></span>';\n            controls += ' <span class=\"poodll_playsave hide\" title=\"' + M.util.get_string('recui_play', 'filter_poodll') + '\"></span>';\n            controls += ' <span class=\"poodll_mic hide\" ></span>';\n            controls += ' <span class=\"poodll_recmic hide\" ></span>';\n            controls += ' <span class=\"poodll_resume_mic hide\" ></span>';\n\n            controls += '<span class=\"poodll_savebtn \"title=\"' + M.util.get_string('recui_save', 'filter_poodll') + '\" ></span>';\n            controls += '<span class=\"poodll_save-recording_burntrose hide \"title=\"' + M.util.get_string('recui_save', 'filter_poodll') + '\" ></span>';\n            controls += '<span class=\"poodll_savedsuccessfully hide\" ></span>';\n            controls += '</div>';\n            controls += '</div>';\n\n\n            $(element).prepend(controls);\n            var controlbar = {\n                status: $('#' + controlbarid + ' > .poodll_status_burntrose'),\n                preview: $('#' + controlbarid + ' > .poodll_preview_burntrose'),\n                startbutton: $('#' + controlbarid + ' > .poodll_start-recording'),\n                stopbutton: $('#' + controlbarid + ' > .poodll_stop-recording'),\n                pausebutton: $('#' + controlbarid + ' > .poodll_pause-recording'),\n                resumebutton: $('#' + controlbarid + ' > .poodll_resume-recording'),\n                play1: $('#' + controlbarid + ' > .poodll_play-recording'),\n                playbutton: $('#' + controlbarid + ' > .poodll_playsave'),\n                save1: $('#' + controlbarid + ' > .poodll_savebtn'),\n                savebutton: $('#' + controlbarid + ' > .poodll_save-recording_burntrose'),\n                savesuccess: $('#' + controlbarid + ' > .poodll_savedsuccessfully'),\n\n                playermic: $('#' + controlbarid + '> .poodll_mic'),\n                recordmic: $('#' + controlbarid + '> .poodll_recmic'),\n                resumemic: $('#' + controlbarid + '> .poodll_resume_mic')\n            };\n            return controlbar;\n        }, //end of fetch_control_bar_video_burntrose\n\n        register_controlbar_events_video: function (onMediaSuccess, controlbarid) {\n            return this.register_controlbar_events_audio(onMediaSuccess, controlbarid);\n        },\n\n        register_controlbar_events_audio: function (onMediaSuccess, controlbarid) {\n            var self = this;\n            var pmr = this.pmr;\n            var ip = this.fetch_instanceprops(controlbarid);\n\n            ip.controlbar.startbutton.click(function () {\n                this.disabled = false;\n\n                //clear messages\n                $('#' + ip.config.widgetid + '_messages').text('');\n\n                pmr.do_start_audio(ip, onMediaSuccess);\n\n                ip.controlbar.playermic.hide();\n                ip.controlbar.recordmic.show();\n                ip.controlbar.playbutton.hide();\n                ip.controlbar.play1.hide();\n                ip.controlbar.pausebutton.show();\n                ip.controlbar.pausebutton.attr('disabled', false);\n\n                ip.controlbar.startbutton.hide();\n\n                ip.controlbar.stopbutton.show();\n                ip.controlbar.stopbutton.attr('disabled', false);\n\n                ip.controlbar.savebutton.hide();\n                ip.controlbar.savesuccess.hide();\n                ip.controlbar.save1.show();\n\n\n                self.set_visual_mode('recordmode', controlbarid);\n\n                //timer and status bar\n                //timer and status bar\n                ip.timer.reset();\n                ip.timer.start();\n                self.update_status(controlbarid);\n\n            });\n\n\n            ip.controlbar.stopbutton.click(function () {\n                this.disabled = false;\n\n                ip.controlbar.stopbutton.hide();\n\n                ip.controlbar.startbutton.show();\n                ip.controlbar.startbutton.attr('disabled', false);\n\n\n                //ip.controlbar.savebutton.removeClass('poodll_save-recording_burntrose');\n                //ip.controlbar.savebutton.addClass('poodll_savebtn');\n\n\n                ip.controlbar.resumebutton.hide();\n                ip.controlbar.pausebutton.hide();\n                ip.controlbar.play1.hide();\n                ip.controlbar.playbutton.show();\n\n                ip.controlbar.save1.hide();\n                ip.controlbar.savesuccess.hide();\n                ip.controlbar.savebutton.show();\n\n\n                ip.controlbar.resumemic.hide();\n                ip.controlbar.recordmic.hide();\n                ip.controlbar.playermic.show();\n\n\n                pmr.do_stop_audio(ip);\n                var preview = ip.controlbar.preview;\n                if (preview && preview.get(0)) {\n                    preview.get(0).pause();\n                }\n\n                //turn border black etc\n                self.set_visual_mode('previewmode', controlbarid);\n                //timer and status bar\n                ip.timer.stop()\n                self.update_status(controlbarid);\n\n\n                if (!ip.uploaded) {\n                    ip.controlbar.startbutton.attr('disabled', false);\n                }\n\n\n            });\n\n            ip.controlbar.pausebutton.click(function () {\n                this.disabled = true;\n                $(this).hide();\n                ip.controlbar.resumebutton.show();\n                pmr.do_pause_audio(ip);\n                ip.controlbar.resumebutton.attr('disabled', false);\n                self.set_visual_mode('pausedmode', controlbarid);\n\n                //timer and status bar\n                ip.timer.pause();\n                self.update_status(controlbarid);\n\n                ip.controlbar.recordmic.hide();\n                ip.controlbar.resumemic.show();\n            });\n\n            ip.controlbar.resumebutton.click(function () {\n                this.disabled = true;\n                $(this).hide();\n                ip.controlbar.pausebutton.show();\n                pmr.do_resume_audio(ip);\n                ip.controlbar.pausebutton.attr('disabled', false);\n                self.set_visual_mode('recordmode', controlbarid);\n\n                //timer and status bar\n                ip.timer.resume();\n                self.update_status(controlbarid);\n                ip.controlbar.resumemic.hide();\n                ip.controlbar.recordmic.show();\n            });\n\n            ip.controlbar.playbutton.click(function () {\n                this.disabled = false;\n                var preview = ip.controlbar.preview.get(0);\n\n                //if we are playing already, lets stop\n                if (preview.currentTime > 0 && !preview.paused) {\n                    preview.pause();\n                    preview.currentTime = 0;\n                    return;\n                }\n\n                pmr.do_play_audio(ip, preview);\n\n                ip.controlbar.startbutton.show();\n            });\n\n            ip.controlbar.savebutton.click(function () {\n                this.disabled = false;\n\n                if (ip.blobs && ip.blobs.length > 0) {\n                    pmr.do_save_audio(ip);\n                    ip.uploaded = true;\n                    ip.controlbar.startbutton.attr('disabled', true);\n                } else {\n                    ip.uploader.Output(M.util.get_string('recui_nothingtosaveerror', 'filter_poodll'));\n                }//end of if ip.blobs\t\t\n                //probably not necessary  ... but getting odd ajax errors occasionally\n                return false;\n            });//end of save recording\n\n            window.onbeforeunload = function () {\n                ip.controlbar.startbutton.attr('disabled', false);\n                var preview = ip.controlbar.preview;\n                if (preview && preview.get(0)) {\n                    preview.get(0).pause();\n                }\n            };\n        }//end of register_controlbar_events_burntrose\n\n    };//end of returned object\n});//total end\n\n\n\n"],"file":"poodll_burntrosemediaskin.min.js"}