{"version":3,"sources":["../src/anim_progress_bar.js"],"names":["define","$","log","debug","playcanvas","context","startx","starty","barwidth","barheight","enabled","drawparams","barColor","textColor","font","textAlign","clone","extend","init","get","width","height","getContext","setDrawParam","paramkey","paramvalue","clear","clearRect","fetchCurrent","stop","stopthere","start","that","textcolor","draw","fillStyle","fillRect","requestAnimationFrame","window","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame"],"mappings":"AACAA,OAAM,mCAAC,CAAC,QAAD,CAAW,UAAX,CAAD,CAAyB,SAAUC,CAAV,CAAaC,CAAb,CAAkB,CAE7C,aAEAA,CAAG,CAACC,KAAJ,CAAU,4BAAV,EAEA,MAAO,CAEHC,UAAU,CAAE,IAFT,CAGHC,OAAO,CAAE,IAHN,CAIHC,MAAM,CAAE,IAJL,CAKHC,MAAM,CAAE,IALL,CAMHC,QAAQ,CAAE,IANP,CAOHC,SAAS,CAAE,IAPR,CAQHC,OAAO,GARJ,CASHC,UAAU,CAAE,CACRC,QAAQ,CAAE,SADF,CAERC,SAAS,CAAE,IAFH,CAGRC,IAAI,CAAE,YAHE,CAIRC,SAAS,CAAE,QAJH,CATT,CAkBHC,KAAK,CAAE,gBAAY,CACf,MAAOf,CAAAA,CAAC,CAACgB,MAAF,IAAe,EAAf,CAAmB,IAAnB,CACV,CApBE,CAuBHC,IAAI,CAAE,cAAUd,CAAV,CAAsB,CAExB,KAAKA,UAAL,CAAkBA,CAAU,CAACe,GAAX,CAAe,CAAf,CAAlB,CACA,KAAKb,MAAL,CAAc,CAAd,CACA,KAAKC,MAAL,CAAc,CAAd,CACA,KAAKC,QAAL,CAAgB,KAAKJ,UAAL,CAAgBgB,KAAhC,CACA,KAAKX,SAAL,CAAiB,KAAKL,UAAL,CAAgBiB,MAAjC,CACA,KAAKhB,OAAL,CAAe,KAAKD,UAAL,CAAgBkB,UAAhB,CAA2B,IAA3B,CAClB,CA/BE,CAiCHC,YAAY,CAAE,sBAAUC,CAAV,CAAoBC,CAApB,CAAgC,CAC1C,KAAKd,UAAL,CAAgBa,CAAhB,EAA4BC,CAC/B,CAnCE,CAqCHC,KAAK,CAAE,gBAAY,CACf,KAAKrB,OAAL,CAAasB,SAAb,CAAuB,KAAKrB,MAA5B,CAAoC,KAAKC,MAAzC,CAAiD,KAAKC,QAAtD,CAAgE,KAAKC,SAArE,CACH,CAvCE,CA0CHmB,YAAY,CAAE,uBAAY,CACtB,MAAO,EACV,CA5CE,CA+CHC,IAAI,CAAE,eAAY,CACd,KAAKnB,OAAL,IACA,KAAKgB,KAAL,EACH,CAlDE,CAoDHI,SAAS,CAAE,oBAAY,CACnB,KAAKpB,OAAL,GACH,CAtDE,CAwDHqB,KAAK,CAAE,gBAAY,CACf,KAAKL,KAAL,GACA,KAAKhB,OAAL,IACA,GAAIsB,CAAAA,CAAI,CAAG,IAAX,CAEA,KAAK3B,OAAL,CAAaU,SAAb,CAAyB,KAAKJ,UAAL,CAAgBI,SAAzC,CACA,KAAKV,OAAL,CAAaS,IAAb,CAAoB,KAAKH,UAAL,CAAgBG,IAApC,CANe,GAOXmB,CAAAA,CAAS,CAAG,KAAKtB,UAAL,CAAgBE,SAPjB,CAUXqB,CAAI,CAAG,UAAY,CAEnB,GAAI,CAACF,CAAI,CAACtB,OAAV,CAAmB,CACf,MACH,CACDsB,CAAI,CAACN,KAAL,GACAM,CAAI,CAAC3B,OAAL,CAAa8B,SAAb,CAAyBH,CAAI,CAACrB,UAAL,CAAgBC,QAAzC,CACAoB,CAAI,CAAC3B,OAAL,CAAa+B,QAAb,CAAsBJ,CAAI,CAAC1B,MAA3B,CAAmC0B,CAAI,CAACzB,MAAxC,CAAgDyB,CAAI,CAACJ,YAAL,GAAsBI,CAAI,CAACxB,QAA3E,CAAqFwB,CAAI,CAACvB,SAA1F,EASA,GAAI4B,CAAAA,CAAqB,CAAGC,MAAM,CAACD,qBAAP,EAAgCC,MAAM,CAACC,wBAAvC,EACxBD,MAAM,CAACE,2BADiB,EACcF,MAAM,CAACG,uBADjD,CAEAJ,CAAqB,CAACH,CAAD,CAExB,CA9Bc,CA+BfA,CAAI,EACP,CAxFE,CA0FV,CAhGK,CAAN","sourcesContent":["/* jshint ignore:start */\ndefine(['jquery', 'core/log'], function ($, log) {\n\n    \"use strict\"; // jshint ;_;\n\n    log.debug('Bar Progress: initialising');\n\n    return {\n\n        playcanvas: null,\n        context: null,\n        startx: null,\n        starty: null,\n        barwidth: null,\n        barheight: null,\n        enabled: false,\n        drawparams: {\n            barColor: \"#C2C2C2\",\n            textColor: '#0',\n            font: '12px Arial',\n            textAlign: \"center\"\n        },\n\n\n        //for making multiple instances\n        clone: function () {\n            return $.extend(true, {}, this);\n        },\n\n        //pass in config, the jquery video/audio object, and a function to be called when conversion has finshed\n        init: function (playcanvas) {\n            //stash the key actors for calling from draw\n            this.playcanvas = playcanvas.get(0);\n            this.startx = 0;\n            this.starty = 0;\n            this.barwidth = this.playcanvas.width;\n            this.barheight = this.playcanvas.height;\n            this.context = this.playcanvas.getContext('2d');\n        },\n\n        setDrawParam: function (paramkey, paramvalue) {\n            this.drawparams[paramkey] = paramvalue;\n        },\n\n        clear: function () {\n            this.context.clearRect(this.startx, this.starty, this.barwidth, this.barheight);\n        },\n        //this function to be overridden by calling class\n        //0= 0% 1=100%\n        fetchCurrent: function () {\n            return 0;\n        },\n\n        //stop and clear\n        stop: function () {\n            this.enabled = false;\n            this.clear();\n        },\n        //stop without clearing\n        stopthere: function () {\n            this.enabled = false;\n        },\n\n        start: function () {\n            this.clear();\n            this.enabled = true;\n            var that = this;\n            //set draw params, later could make this configurable\n            this.context.textAlign = this.drawparams.textAlign;\n            this.context.font = this.drawparams.font;\n            var textcolor = this.drawparams.textColor;\n\n\n            var draw = function () {\n\n                if (!that.enabled) {\n                    return;\n                }\n                that.clear();\n                that.context.fillStyle = that.drawparams.barColor;\n                that.context.fillRect(that.startx, that.starty, that.fetchCurrent() * that.barwidth, that.barheight);\n\n                //draw text\n                //this distorts unless we set the height and width of the canvas as canvas attributes, and NOT with CSS\n                //that didn't really fit with this, so we use text in the page (ie not canvas)\n                /*\n                that.context.fillStyle = textcolor;\n                that.context.fillText(parseInt(that.fetchCurrent() * 100) +'%',that.barwidth/2, that.barheight/2);\n                */\n                var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame ||\n                    window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;\n                requestAnimationFrame(draw);\n\n            }//end of draw\n            draw();\n        }//end of enable\n    };//end of returned object\n});//total end\n"],"file":"anim_progress_bar.min.js"}