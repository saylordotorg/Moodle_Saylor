define(["jquery","core/log","filter_poodll/speech_browser","filter_poodll/speech_awstranscriber"],(function($,log,browserrecognition,awstranscriber){return log.debug("speech_poodll: initialising"),{recognizer:null,clone:function(){return $.extend(!0,{},this)},will_work_ok:function(opts){if("streamingtranscriber"in opts)switch(opts.streamingtranscriber){case"aws":return awstranscriber.will_work_ok(opts);case"browser":return browserrecognition.will_work_ok(opts)}return browserrecognition.will_work_ok(opts)||awstranscriber.will_work_ok(opts)},init:function(opts){if("streamingtranscriber"in opts)switch(opts.streamingtranscriber){case"aws":this.recognizer=awstranscriber.clone(),this.recognizer.init(opts);break;case"browser":this.recognizer=browserrecognition.clone(),this.recognizer.init(opts)}if(!this.recognizer)if(browserrecognition.will_work_ok(opts))this.recognizer=browserrecognition.clone(),this.recognizer.init(opts);else{if(!awstranscriber.will_work_ok(opts))return log.debug("no usable speech recognizer found"),!1;this.recognizer=awstranscriber.clone(),this.recognizer.init(opts)}},set_grammar:function(grammar){this.recognizer.set_grammar(grammar)},start:function(stream){this.recognizer&&(this.recognizer.onfinalspeechcapture=this.onfinalspeechcapture,this.recognizer.oninterimspeechcapture=this.oninterimspeechcapture,this.recognizer&&this.recognizer.start(stream))},stop:function(){this.recognizer&&this.recognizer&&this.recognizer.stop()},onfinalspeechcapture:function(speechtext,speechresults){this.recognizer&&log.debug("final:"+speechtext)},oninterimspeechcapture:function(speechtext){this.recognizer&&log.debug("interim:"+speechtext)}}}));

//# sourceMappingURL=speech_poodll.min.js.map