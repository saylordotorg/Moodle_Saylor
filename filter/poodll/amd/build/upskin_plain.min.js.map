{"version":3,"file":"upskin_plain.min.js","sources":["../src/upskin_plain.js"],"sourcesContent":["/* jshint ignore:start */\ndefine(['jquery', 'core/log'], function ($, log) {\n\n    \"use strict\"; // jshint ;_;\n\n    log.debug('upskin_plain: initialising');\n\n    return {\n        element: null,\n        cvs: null,\n        cvsctx: null,\n\n        //for making multiple instances\n        clone: function () {\n            return $.extend(true, {}, this);\n        },\n\n        //init\n        init: function (config, element, cvs, messagearea) {\n            this.config = config;\n            this.element = element;\n            this.cvs = cvs;\n            this.messagearea = messagearea;\n        },\n\n        initControls: function () {\n            //progress\n            var skin_style = this.config.media_skin_style;\n            var controls = '<div id=\"' + this.config.widgetid + '_progress\" class=\"p_progress x progress_' + skin_style + '\"><p></p></div>';\n            controls += '<div id=\"' + this.config.widgetid + '_messages\" class=\"p_messages x messages_' + skin_style + '\"></div>';\n            $(this.element).append(controls);\n        },\n\n        //create a progress bar\n        initProgressSession: function (xhr) {\n            var progress = false;\n            var o_query = $(\"#\" + this.config.widgetid + \"_progress\");\n            //if we got one\n            if (o_query.length) {\n                //get the dom object so we can use direct manip.\n                var o = o_query.get(0);\n                progress = o.firstChild;\n                if (progress === null) {\n                    progress = o.appendChild(document.createElement(\"p\"));\n                }\n                //reset/set background position to 0, and label to \"uploading\n                progress.className = \"\";\n                progress.style.display = \"block\";\n                progress.style.backgroundPosition = \"100% 0\";\n\n                // Handle event\n                xhr.upload.addEventListener(\"progress\", function (e) {\n                    var pc = parseInt(100 - (e.loaded / e.total * 100));\n                    progress.style.backgroundPosition = pc + \"% 0\";\n                });\n            }\n        },\n\n        deactivateProgressSession: function () {\n            //do nothing\n        },\n\n\n        showMessage: function (msg, msgid) {\n            var m = $(\"#\" + this.config.widgetid + \"_messages\");\n            m.text(msg);\n        }//End of send message\n    };//end of returned object\n});//total end\n"],"names":["define","$","log","debug","element","cvs","cvsctx","clone","extend","this","init","config","messagearea","initControls","skin_style","media_skin_style","controls","widgetid","append","initProgressSession","xhr","progress","o_query","length","o","get","firstChild","appendChild","document","createElement","className","style","display","backgroundPosition","upload","addEventListener","e","pc","parseInt","loaded","total","deactivateProgressSession","showMessage","msg","msgid","text"],"mappings":"AACAA,oCAAO,CAAC,SAAU,aAAa,SAAUC,EAAGC,YAIxCA,IAAIC,MAAM,8BAEH,CACHC,QAAS,KACTC,IAAK,KACLC,OAAQ,KAGRC,MAAO,kBACIN,EAAEO,QAAO,EAAM,GAAIC,OAI9BC,KAAM,SAAUC,OAAQP,QAASC,IAAKO,kBAC7BD,OAASA,YACTP,QAAUA,aACVC,IAAMA,SACNO,YAAcA,aAGvBC,aAAc,eAENC,WAAaL,KAAKE,OAAOI,iBACzBC,SAAW,YAAcP,KAAKE,OAAOM,SAAW,2CAA6CH,WAAa,kBAC9GE,UAAY,YAAcP,KAAKE,OAAOM,SAAW,2CAA6CH,WAAa,WAC3Gb,EAAEQ,KAAKL,SAASc,OAAOF,WAI3BG,oBAAqB,SAAUC,SACvBC,UAAW,EACXC,QAAUrB,EAAE,IAAMQ,KAAKE,OAAOM,SAAW,gBAEzCK,QAAQC,OAAQ,KAEZC,EAAIF,QAAQG,IAAI,GAEH,QADjBJ,SAAWG,EAAEE,cAETL,SAAWG,EAAEG,YAAYC,SAASC,cAAc,OAGpDR,SAASS,UAAY,GACrBT,SAASU,MAAMC,QAAU,QACzBX,SAASU,MAAME,mBAAqB,SAGpCb,IAAIc,OAAOC,iBAAiB,YAAY,SAAUC,OAC1CC,GAAKC,SAAS,IAAOF,EAAEG,OAASH,EAAEI,MAAQ,KAC9CnB,SAASU,MAAME,mBAAqBI,GAAK,WAKrDI,0BAA2B,aAK3BC,YAAa,SAAUC,IAAKC,OAChB3C,EAAE,IAAMQ,KAAKE,OAAOM,SAAW,aACrC4B,KAAKF"}