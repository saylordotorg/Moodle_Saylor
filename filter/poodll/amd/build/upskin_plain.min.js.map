{"version":3,"sources":["../src/upskin_plain.js"],"names":["define","$","log","debug","element","cvs","cvsctx","clone","extend","init","config","messagearea","initControls","skin_style","media_skin_style","controls","widgetid","append","initProgressSession","xhr","progress","o_query","length","o","get","firstChild","appendChild","document","createElement","className","style","display","backgroundPosition","upload","addEventListener","e","pc","parseInt","loaded","total","deactivateProgressSession","showMessage","msg","m","text"],"mappings":"AACAA,OAAM,8BAAC,CAAC,QAAD,CAAW,UAAX,CAAD,CAAyB,SAAUC,CAAV,CAAaC,CAAb,CAAkB,CAE7C,aAEAA,CAAG,CAACC,KAAJ,CAAU,4BAAV,EAEA,MAAO,CACHC,OAAO,CAAE,IADN,CAEHC,GAAG,CAAE,IAFF,CAGHC,MAAM,CAAE,IAHL,CAMHC,KAAK,CAAE,gBAAY,CACf,MAAON,CAAAA,CAAC,CAACO,MAAF,IAAe,EAAf,CAAmB,IAAnB,CACV,CARE,CAWHC,IAAI,CAAE,cAAUC,CAAV,CAAkBN,CAAlB,CAA2BC,CAA3B,CAAgCM,CAAhC,CAA6C,CAC/C,KAAKD,MAAL,CAAcA,CAAd,CACA,KAAKN,OAAL,CAAeA,CAAf,CACA,KAAKC,GAAL,CAAWA,CAAX,CACA,KAAKM,WAAL,CAAmBA,CACtB,CAhBE,CAkBHC,YAAY,CAAE,uBAAY,IAElBC,CAAAA,CAAU,CAAG,KAAKH,MAAL,CAAYI,gBAFP,CAGlBC,CAAQ,CAAG,aAAc,KAAKL,MAAL,CAAYM,QAA1B,CAAqC,4CAArC,CAAkFH,CAAlF,CAA+F,kBAHxF,CAItBE,CAAQ,EAAI,aAAc,KAAKL,MAAL,CAAYM,QAA1B,CAAqC,4CAArC,CAAkFH,CAAlF,CAA+F,WAA3G,CACAZ,CAAC,CAAC,KAAKG,OAAN,CAAD,CAAgBa,MAAhB,CAAuBF,CAAvB,CACH,CAxBE,CA2BHG,mBAAmB,CAAE,6BAAUC,CAAV,CAAe,IAC5BC,CAAAA,CAAQ,GADoB,CAE5BC,CAAO,CAAGpB,CAAC,CAAC,IAAM,KAAKS,MAAL,CAAYM,QAAlB,CAA6B,WAA9B,CAFiB,CAIhC,GAAIK,CAAO,CAACC,MAAZ,CAAoB,CAEhB,GAAIC,CAAAA,CAAC,CAAGF,CAAO,CAACG,GAAR,CAAY,CAAZ,CAAR,CACAJ,CAAQ,CAAGG,CAAC,CAACE,UAAb,CACA,GAAiB,IAAb,GAAAL,CAAJ,CAAuB,CACnBA,CAAQ,CAAGG,CAAC,CAACG,WAAF,CAAcC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAd,CACd,CAEDR,CAAQ,CAACS,SAAT,CAAqB,EAArB,CACAT,CAAQ,CAACU,KAAT,CAAeC,OAAf,CAAyB,OAAzB,CACAX,CAAQ,CAACU,KAAT,CAAeE,kBAAf,CAAoC,QAApC,CAGAb,CAAG,CAACc,MAAJ,CAAWC,gBAAX,CAA4B,UAA5B,CAAwC,SAAUC,CAAV,CAAa,CACjD,GAAIC,CAAAA,CAAE,CAAGC,QAAQ,CAAC,IAA4B,GAArB,EAAAF,CAAC,CAACG,MAAF,CAAWH,CAAC,CAACI,KAAb,CAAR,CAAjB,CACAnB,CAAQ,CAACU,KAAT,CAAeE,kBAAf,CAAoCI,CAAE,CAAG,KAC5C,CAHD,CAIH,CACJ,CAjDE,CAmDHI,yBAAyB,CAAE,oCAAY,CAEtC,CArDE,CAwDHC,WAAW,CAAE,qBAAUC,CAAV,CAAsB,CAC/B,GAAIC,CAAAA,CAAC,CAAG1C,CAAC,CAAC,IAAM,KAAKS,MAAL,CAAYM,QAAlB,CAA6B,WAA9B,CAAT,CACA2B,CAAC,CAACC,IAAF,CAAOF,CAAP,CACH,CA3DE,CA6DV,CAnEK,CAAN","sourcesContent":["/* jshint ignore:start */\ndefine(['jquery', 'core/log'], function ($, log) {\n\n    \"use strict\"; // jshint ;_;\n\n    log.debug('upskin_plain: initialising');\n\n    return {\n        element: null,\n        cvs: null,\n        cvsctx: null,\n\n        //for making multiple instances\n        clone: function () {\n            return $.extend(true, {}, this);\n        },\n\n        //init\n        init: function (config, element, cvs, messagearea) {\n            this.config = config;\n            this.element = element;\n            this.cvs = cvs;\n            this.messagearea = messagearea;\n        },\n\n        initControls: function () {\n            //progress\n            var skin_style = this.config.media_skin_style;\n            var controls = '<div id=\"' + this.config.widgetid + '_progress\" class=\"p_progress x progress_' + skin_style + '\"><p></p></div>';\n            controls += '<div id=\"' + this.config.widgetid + '_messages\" class=\"p_messages x messages_' + skin_style + '\"></div>';\n            $(this.element).append(controls);\n        },\n\n        //create a progress bar\n        initProgressSession: function (xhr) {\n            var progress = false;\n            var o_query = $(\"#\" + this.config.widgetid + \"_progress\");\n            //if we got one\n            if (o_query.length) {\n                //get the dom object so we can use direct manip.\n                var o = o_query.get(0);\n                progress = o.firstChild;\n                if (progress === null) {\n                    progress = o.appendChild(document.createElement(\"p\"));\n                }\n                //reset/set background position to 0, and label to \"uploading\n                progress.className = \"\";\n                progress.style.display = \"block\";\n                progress.style.backgroundPosition = \"100% 0\";\n\n                // Handle event\n                xhr.upload.addEventListener(\"progress\", function (e) {\n                    var pc = parseInt(100 - (e.loaded / e.total * 100));\n                    progress.style.backgroundPosition = pc + \"% 0\";\n                });\n            }\n        },\n\n        deactivateProgressSession: function () {\n            //do nothing\n        },\n\n\n        showMessage: function (msg, msgid) {\n            var m = $(\"#\" + this.config.widgetid + \"_messages\");\n            m.text(msg);\n        }//End of send message\n    };//end of returned object\n});//total end\n"],"file":"upskin_plain.min.js"}