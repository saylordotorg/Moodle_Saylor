{"version":3,"sources":["../src/poodll_goldmediaskin.js"],"names":["define","$","log","utils","radialprogress","hwave","fbars","ripple","words","speechrecognition","settings","debug","instanceprops","pmr","devsettings","therecanim","clone","extend","init","ip","fetch_instanceprops","onUploadSuccess","controlbarid","hide","show","onUploadFailure","fetch_status_bar","skin","fetch_preview_audio","fetch_preview_video","fetch_resource_audio","fetch_resource_video","fetch_uploader_skin","onMediaError","e","console","error","onMediaSuccess_video","set_visual_mode","onMediaSuccess_audio","controlbar","preview","attr","uploader","Output","start","timer","reset","update_status","handle_timer_update","status","html","fetch_display_time","seconds","initseconds","stopbutton","click","mode","self","enable_button","startbutton","disable_button","playbutton","showupload","savebutton","restartbutton","config","mediatype","removeClass","addClass","uploaded","insert_controlbar_video","element","resource","prepare_controlbar","insert_controlbar_audio","skin_style","media_skin_style","recorder_class","size","ss","fetch_strings","controls","fetch_dialogue_box","downloaddialog","errordialog","prepend","settingsdialog","errorsdialog","settingsicon","stopplayingbutton","playcanvas","set_dialogue_box","register_controlbar_events_video","onMediaSuccess","register_controlbar_events_audio","rprogress","recanim","audioanalyser","get","open","trigger","hasClass","do_start_audio","do_stop_audio","pause","clear","stop","do_play_audio","fetchCurrent","ct","prop","duration","isFinite","finalseconds","blobs","length","do_save_audio","M","util","get_string","window","onbeforeunload","button"],"mappings":"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","sourcesContent":["/* jshint ignore:start */\ndefine(['jquery',  'core/log', 'filter_poodll/utils_amd', 'filter_poodll/anim_progress_radial',\n    'filter_poodll/anim_hwave', 'filter_poodll/anim_fbars', 'filter_poodll/anim_ripple',\n    'filter_poodll/anim_words', 'filter_poodll/speech_poodll', 'filter_poodll/dlg_devicesettings'],\n    function ($, log, utils, radialprogress, hwave, fbars, ripple, words, speechrecognition, settings) {\n\n    \"use strict\"; // jshint ;_;\n\n    log.debug('PoodLL Gold Skin: initialising');\n\n    return {\n\n        instanceprops: null,\n        pmr: null,\n        devsettings: null,\n        therecanim: null,\n\n        //for making multiple instances\n        clone: function () {\n            return $.extend(true, {}, this);\n        },\n\n        init: function (ip, pmr) {\n            this.instanceprops = ip;\n            this.pmr = pmr;\n            this.devsettings = settings.clone();\n            this.devsettings.init(pmr, ip);\n        },\n\n\n        fetch_instanceprops: function () {\n            return this.instanceprops;\n        },\n\n\n        onUploadSuccess: function (controlbarid) {\n            $('#' + controlbarid + ' > .poodll_save-recording').hide();\n            // $('#' + controlbarid  + '_messages').hide();\n            $('#' + controlbarid + ' > .poodll_savedsuccessfully').show();\n        },\n\n        onUploadFailure: function (controlbarid) {\n            return;\n        },\n\n        fetch_status_bar: function (skin) {\n            var status = '<div class=\"poodll_status_' + skin + '\" width=\"320\" height=\"50\">00:00:00</div>';\n            return status;\n        },\n\n        fetch_preview_audio: function (skin) {\n            var preview = '<audio class=\"poodll_preview_' + skin + ' hide\" playsinline=\"playsinline\" muted></audio>';\n            return preview;\n        },\n        fetch_preview_video: function (skin) {\n            var preview = '<video class=\"poodll_preview_' + skin + '\" width=\"320\" height=\"240\" playsinline=\"playsinline\" muted></video>';\n            return preview;\n        },\n        fetch_resource_audio: function (skin) {\n            var resourceplayer = '<audio class=\"poodll_resourceplayer_' + skin + ' hide\" playsinline=\"playsinline\"></audio>';\n            return resourceplayer;\n        },\n        fetch_resource_video: function (skin) {\n            var resourceplayer = '<video class=\"poodll_resourceplayer_' + skin + ' hide\" playsinline=\"playsinline\"></video>';\n            return resourceplayer;\n        },\n        fetch_uploader_skin: function (controlbarid, element) {\n            return false;\n        },\n\n        onMediaError: function (e) {\n            console.error('media error', e);\n        },\n\n        onMediaSuccess_video: function (controlbarid) {\n            var ip = this.fetch_instanceprops(controlbarid);\n            this.set_visual_mode('recordingmode', controlbarid);\n        },\n\n        onMediaSuccess_audio: function (controlbarid) {\n            var ip = this.fetch_instanceprops(controlbarid);\n            ip.controlbar.preview.attr('src', null);\n\n            //clear messages\n            ip.uploader.Output('');\n\n            //wave animation\n            this.therecanim.start();\n\n            //timer and status bar\n            ip.timer.reset();\n            ip.timer.start();\n            this.update_status(controlbarid);\n\n            //visuals\n            this.set_visual_mode('recordingmode', controlbarid);\n        },\n\n        handle_timer_update: function (controlbarid) {\n            var ip = this.fetch_instanceprops(controlbarid);\n            ip.controlbar.status.html(ip.timer.fetch_display_time());\n            if (ip.timer.seconds == 0 && ip.timer.initseconds > 0) {\n                ip.controlbar.stopbutton.click();\n            }\n        },\n\n        update_status: function (controlbarid) {\n            var ip = this.fetch_instanceprops(controlbarid);\n            ip.controlbar.status.html(ip.timer.fetch_display_time());\n        },\n\n        //set visuals for different states (ie recording or playing)\n        set_visual_mode: function (mode, controlbarid) {\n            var self = this;\n            var ip = this.fetch_instanceprops(controlbarid);\n\n            switch (mode) {\n\n                case 'startmode':\n                    self.enable_button(ip.controlbar.startbutton);\n                    self.disable_button(ip.controlbar.playbutton);\n                    self.disable_button(ip.controlbar.stopbutton);\n                    //hide the save buttons if necessary\n                    if (ip.showupload) {\n                        self.disable_button(ip.controlbar.savebutton);\n                    } else {\n                        ip.controlbar.savebutton.hide();\n                    }\n\n                    self.disable_button(ip.controlbar.restartbutton);\n                    break;\n\n\n                case 'recordingmode':\n                    self.enable_button(ip.controlbar.stopbutton);\n                    self.disable_button(ip.controlbar.startbutton);\n                    self.disable_button(ip.controlbar.playbutton);\n                    if (ip.showupload) {\n                        self.disable_button(ip.controlbar.savebutton);\n                    } else {\n                        ip.controlbar.savebutton.hide();\n                    }\n                    self.disable_button(ip.controlbar.restartbutton);\n\n\n                    /*Added Feature for the one button recorder Video*/\n                    if (ip.config.mediatype == 'video') {\n                        ip.controlbar.preview.removeClass('hide');\n                    }\n                    break;\n\n                case 'previewmode':\n\n                    if (ip.showupload) {\n                        //show save button\n                        ip.controlbar.savebutton.removeClass('hide');\n                        ip.controlbar.savebutton.removeClass('pmr_disabled');\n                        ip.controlbar.savebutton.attr('disabled', false);\n\n\n                    } else {\n                        ip.controlbar.savebutton.hide();\n                        if (ip.config.mediatype == 'video') {\n                            ip.controlbar.preview.addClass('hide');\n                        }\n                    }\n\n                    if (!ip.uploaded) {\n                        self.enable_button(ip.controlbar.startbutton);\n                        self.enable_button(ip.controlbar.restartbutton);\n                    }\n                    self.enable_button(ip.controlbar.stopbutton);\n                    self.enable_button(ip.controlbar.playbutton);\n\n                    break;\n\n                case 'playingmode':\n                    self.enable_button(ip.controlbar.stopbutton);\n                    if (ip.config.mediatype == 'video') {\n                        self.enable_button(ip.controlbar.preview);\n                        ip.controlbar.preview.removeClass('hide');\n                    }\n\n                    self.disable_button(ip.controlbar.startbutton);\n                    self.disable_button(ip.controlbar.playbutton);\n                    self.disable_button(ip.controlbar.restartbutton);\n                    break;\n\n            }\n\n        },\n\n        //insert the control bar and return it to be reused\n        insert_controlbar_video: function (element, controlbarid, preview, resource) {\n            var controlbar = this.prepare_controlbar(element, controlbarid, preview, resource, 'video');\n            return controlbar;\n        },\n        //insert the control bar and return it to be reused\n        insert_controlbar_audio: function (element, controlbarid, preview, resource) {\n            var controlbar = this.prepare_controlbar(element, controlbarid, preview, resource, 'audio');\n            return controlbar;\n        },\n\n        //insert the control bar and return it to be reused\n        prepare_controlbar: function (element, controlbarid, preview, resource, mediatype) {\n            var ip = this.fetch_instanceprops(controlbarid);\n            var skin_style = ip.config.media_skin_style;\n\n            var recorder_class = mediatype == 'video' ? 'poodll_mediarecorder_video' : 'poodll_mediarecorder_audio';\n\n            var size_class = 'poodll_mediarecorder_size_auto';\n            switch (ip.config.size) {\n                case 'small':\n                    size_class = 'poodll_mediarecorder_size_small';\n                    break;\n                case 'big':\n                    size_class = 'poodll_mediarecorder_size_big';\n                    break;\n                case 'auto':\n                    size_class = 'poodll_mediarecorder_size_auto';\n            }\n\n            var ss = this.pmr.fetch_strings();\n\n            var controls = '<div class=\"poodll_mediarecorderholder_gold '\n                + recorder_class + '\" id=\"holder_' + controlbarid + '\">';\n\n            controls += '<div class=\"poodll_mediarecorderbox_gold\" id=\"' + controlbarid + '\">';\n            controls += this.devsettings.fetch_dialogue_box();\n            controls += ip.downloaddialog.fetch_dialogue_box();\n            controls += ip.errordialog.fetch_dialogue_box();\n            controls += '<div class=\"style-holder ' + skin_style + '\">';\n            var status = this.fetch_status_bar('gold');\n            controls += status,\n                controls += preview,\n                controls += '<div class=\"settingsicon\" id=\"settingsicon_' + controlbarid + '\"><button type=\"button\" class=\"btn btn-info btn-lg\" data-toggle=\"modal\" data-target=\"#myModal\"><i class=\"fa fa-cogs\" aria-hidden=\"true\"></i></button></div>';\n            controls += '<canvas id=\"' + controlbarid + '_playcanvas\"> width=\"250\" height=\"250\"></canvas>';\n            controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_gold poodll_start-recording_gold\"><i class=\"fa fa-microphone\" aria-hidden=\"true\"></i></button>';\n            controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_gold poodll_stop-recording_gold\"><i class=\"fa fa-stop\" aria-hidden=\"true\"></i></button>';\n            controls += '<div class=\"gold-save-button-wrapper\"><a class=\"btn btn-primary poodll_save-recording_gold\">Upload</a></div>';\n            controls += ' <button type=\"button\" class=\"poodll_mediarecorder_button_gold poodll_play-recording_gold\"><i class=\"fa fa-play\" aria-hidden=\"true\"></i></button>';\n            controls += '<div class=\"gold-restart-button-wrapper\"><a class=\"btn btn-success poodll_restart_gold \" >' + ss['recui_restart'] + '</a></div>';\n            controls += '</div></div></div>';\n            $(element).prepend(controls);\n            var controlbar = {\n                settingsdialog: $('#' + controlbarid + ' .poodll_dialogue_box_settings'),\n                downloaddialog: $('#' + controlbarid + ' .poodll_dialogue_box_download'),\n                errorsdialog: $('#' + controlbarid + ' .poodll_dialogue_box_errors'),\n                settingsicon: $('#' + controlbarid + ' .settingsicon'),\n                status: $('#' + controlbarid + ' .poodll_status_gold'),\n                preview: $('#' + controlbarid + ' .poodll_preview_gold'),\n                startbutton: $('#' + controlbarid + ' .poodll_start-recording_gold'),\n                stopbutton: $('#' + controlbarid + ' .poodll_stop-recording_gold'),\n                stopplayingbutton: $('#' + controlbarid + ' .poodll_stop-playing_gold'),\n                playbutton: $('#' + controlbarid + ' .poodll_play-recording_gold'),\n                savebutton: $('#' + controlbarid + ' .poodll_save-recording_gold'),\n                restartbutton: $('#' + controlbarid + ' .poodll_restart_gold'),\n                playcanvas: $('#' + controlbarid + '_playcanvas')\n            };\n            //settings and error and download dialogs\n            //settings is on 'this' because it is shown from skkn events, but errors are from pmr stuff\n            ip.downloaddialog.set_dialogue_box(controlbar.downloaddialog);\n            ip.errordialog.set_dialogue_box(controlbar.errorsdialog);\n            this.devsettings.set_dialogue_box(controlbar.settingsdialog);\n\n            return controlbar;\n        }, //end of fetch_control_bar_gold\n\n\n        register_controlbar_events_video: function (onMediaSuccess, controlbarid) {\n            return this.register_controlbar_events_audio(onMediaSuccess, controlbarid);\n        },\n\n        register_controlbar_events_audio: function (onMediaSuccess, controlbarid) {\n\n            var self = this;\n            var pmr = this.pmr;\n            var ip = this.fetch_instanceprops(controlbarid);\n\n            //set visual mode\n            this.set_visual_mode('startmode', controlbarid);\n\n            //init radial progress\n            var rprogress = radialprogress.clone();\n            rprogress.init(ip.controlbar.playcanvas);\n\n            //init recording anim\n            var recanim = null;\n            switch (ip.config.recanim) {\n                case 'hwave':\n                    recanim = hwave.clone();\n                    break;\n                case 'fbars':\n                    recanim = fbars.clone();\n                    break;\n                case 'ripple':\n                    recanim = ripple.clone();\n                    break;\n                case 'words':\n                    recanim = words.clone();\n                    break;\n                default:\n                    ip.config.recanim = 'ripple';\n                    var recanim = ripple.clone();\n\n            }\n            // log.debug('recanim=' + ip.config.recanim);\n            recanim.init(ip.audioanalyser, ip.controlbar.playcanvas.get(0));\n\n\n            ip.controlbar.settingsicon.click(function () {\n                if (!self.uploaded) {\n                    self.devsettings.open();\n                } else {\n                    ip.downloaddialog.open();\n                }\n            });\n\n\n            /*Added Feature for the one button recorder Video */\n            if (ip.config.mediatype == 'video') {\n                ip.controlbar.preview.addClass('hide');\n            }\n            ip.controlbar.preview.click(function () {\n                console.log('clicked preview');\n\n                $(this).addClass('hide');\n                $(ip.controlbar.stopbutton).trigger(\"click\");\n\n                if ($(this).hasClass('recorded')) {\n                    $(this).removeClass('recorded');\n                } else {\n                    $(this).addClass('recorded');\n                }\n\n            });\n            /* */\n\n\n            //Start button click\n            ip.controlbar.startbutton.click(function () {\n                //moved the true logic into onMediaSuccess\n                //so we need to stash recanim to make it available\n                self.therecanim = recanim;\n                pmr.do_start_audio(ip, onMediaSuccess);\n\n            });\n\n            //Restart link clicked\n            ip.controlbar.restartbutton.click(function () {\n                //visuals\n                self.set_visual_mode('startmode', controlbarid);\n            });\n\n            //Stop button click\n            ip.controlbar.stopbutton.click(function () {\n\n                //stop recording\n                pmr.do_stop_audio(ip);\n\n                //stop previewing (if that is what we are doing)\n                var preview = ip.controlbar.preview.get(0);\n                preview.pause();\n\n                //wave animation\n                recanim.clear();\n\n                //radial progress clear\n                rprogress.stop();\n\n                //timer and status bar\n                ip.timer.stop()\n                self.update_status(controlbarid);\n\n                //set visuals\n                self.set_visual_mode('previewmode', controlbarid);\n\n            });\n\n            //Play button click\n            ip.controlbar.playbutton.click(function () {\n\n                if (ip.config.mediatype == 'video') {\n                    if ($(ip.controlbar.preview).hasClass('recorder')) {\n                        $(ip.controlbar.preview).removeClass('recorder');\n                        $(ip.controlbar.preview).removeClass('hide');\n                        //ip.controlbar.preview.show();\t\n                    }\n                }\n\n\n                //commence playback\n                var preview = ip.controlbar.preview.get(0);\n                pmr.do_play_audio(ip, preview);\n\n                //init and run radial progress animation\n                rprogress.clear();\n                rprogress.fetchCurrent = function () {\n                    var ct = ip.controlbar.preview.prop('currentTime');\n                    var duration = ip.controlbar.preview.prop('duration');\n                    if (!isFinite(duration)) {\n                        duration = ip.timer.finalseconds;\n                    }\n                    return ct / duration;\n                };\n                rprogress.start();\n\n                //set visuals\n                self.set_visual_mode('playingmode', controlbarid);\n\n            });\n\n            //Save button click\n            ip.controlbar.savebutton.click(function () {\n\n\n                if (ip.blobs && ip.blobs.length > 0) {\n                    pmr.do_save_audio(ip);\n                    ip.uploaded = true;\n                    self.disable_button(ip.controlbar.startbutton);\n                } else {\n                    ip.uploader.Output(M.util.get_string('recui_nothingtosaveerror', 'filter_poodll'));\n                }//end of if self.blobs\n\n                //set visuals\n                self.set_visual_mode('previewmode', controlbarid);\n\n                //probably not necessary  ... but getting odd ajax errors occasionally\n                return false;\n            });//end of save recording\n\n\n            window.onbeforeunload = function () {\n                self.enable_button(ip.controlbar.startbutton);\n                var preview = ip.controlbar.preview;\n                if (preview && preview.get(0)) {\n                    preview.get(0).pause();\n                }\n            };\n        }, //end of register_control_bar_events_gold\n\n        enable_button: function (button) {\n            $(button).attr('disabled', false);\n            $(button).removeClass('pmr_disabled');\n        },\n        disable_button: function (button) {\n            $(button).attr('disabled', true);\n            $(button).addClass('pmr_disabled');\n        },\n\n    };//end of returned object\n});//total end\n"],"file":"poodll_goldmediaskin.min.js"}