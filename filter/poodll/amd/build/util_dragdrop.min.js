define(["jquery","core/log"],(function($,log){return log.debug("Poodll util drag drop: initialising"),{theelement:!1,uploadfunction:!1,uploader:!1,started:!1,filebutton:!1,init:function(element,uploadfunction,ip){this.theelement=element,this.uploadfunction=uploadfunction,this.uploader=ip.uploader,this.filebutton=ip.controlbar.filebutton,this.supports_dragdrop(element)?(log.debug("registering drag drop"),this.register_dragdrop(),this.do_visuals()):log.debug("drag drop not supported")},clone:function(){return $.extend(!0,{},this)},supports_dragdrop:function(element){return"draggable"in element||"ondragstart"in element&&"ondrop"in element},do_visuals:function(){this.theelement.addClass("poodll-can-do-drag-drop")},turnoff_dragdrop:function(){this.theelement&&(this.theelement.removeClass("poodll-can-do-drag-drop"),this.theelement.removeClass("is-poodll-drag-over"),this.theelement.off("drag dragstart dragend dragover dragenter dragleave drop"),this.theelement.on("drag dragstart dragend dragover dragenter dragleave drop",(function(e){e.preventDefault(),e.stopPropagation()})))},register_dragdrop:function(){var that=this;this.theelement.on("drag dragstart dragend dragover dragenter dragleave drop",(function(e){e.preventDefault(),e.stopPropagation(),that.started})).on("dragover dragenter",(function(){that.theelement.addClass("is-poodll-drag-over")})).on("dragleave dragend drop",(function(){that.theelement.removeClass("is-poodll-drag-over")})).on("drop",(function(e){if(!that.started){var files=e.originalEvent.dataTransfer.files;that.uploadfunction(files,that.uploader),that.turnoff_dragdrop(),that.filebutton.off("change"),that.filebutton.attr("disabled",!0),that.started=!0}}))}}}));

//# sourceMappingURL=util_dragdrop.min.js.map