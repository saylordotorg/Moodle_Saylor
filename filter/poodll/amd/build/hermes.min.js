define(["jquery","core/log"],(function($,log){return log.debug("Hermes (the messenger) initialising"),{allowedURL:"",id:"",iframeembed:!1,enabled:!1,eventListeners:!1,clone:function(){return $.extend(!0,{},this)},init:function(id,allowedURL,iframeembed){this.allowedURL=allowedURL,this.id=id,this.iframeembed=iframeembed,this.enabled=!0,this.eventListeners=new Array,this.registerEvents()},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},on:function(type,handler){var listener=new Object;listener.type=type,listener.handler=handler,this.eventListeners.push(listener)},sendEvent:function(event){for(var i=0;i<this.eventListeners.length;i++)event.type==this.eventListeners[i].type&&this.eventListeners[i].handler(event)},postMessage:function(messageObject){this.enabled&&(messageObject.hasOwnProperty("type")?this.iframeembed&&(messageObject.id=this.id,window.parent.postMessage(messageObject,this.allowedURL)):log.debug('All message objects must have at least the "type" property'))},registerEvents:function(){var that=this;window.addEventListener("message",(function(e){if(null!=that.allowedURL&&0===that.allowedURL.indexOf(e.origin)){var data=e.data;data&&data.hasOwnProperty("id")&&data.id==that.id&&data.hasOwnProperty("type")&&that.sendEvent(e.data)}}))}}}));

//# sourceMappingURL=hermes.min.js.map