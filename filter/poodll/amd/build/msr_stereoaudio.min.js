define(["jquery","core/log","filter_poodll/msr_helper_stereoaudio"],function(a,b,c){"use strict";return b.debug("PoodLL Recorder: initialising"),{timeout:0,mediaRecorder:null,mediaStream:null,msr:null,mediaType:"audio",clone:function(){return a.extend(!0,{},this)},init:function(a,b,c,d){this.msr=a,this.mediaStream=b,this.audioctx=c,this.mediaType=d},start:function(a,b){0!==this.timeout&&this.stop(),a=a||1e3;var d=this;this.mediaRecorder=c.clone(),this.mediaRecorder.init(this.msr,this.mediaStream,this.audioctx),this.mediaRecorder.record(),this.timeout=setInterval(function(){d.mediaRecorder.requestData()},a)},stop:function(){this.mediaRecorder&&(this.mediaRecorder.stop(),clearInterval(this.timeout),this.timeout=0)},pause:function(){this.mediaRecorder&&this.mediaRecorder.pause()},resume:function(){this.mediaRecorder&&this.mediaRecorder.resume()},ondataavailable:function(a){b.debug("ondataavailable:"+a)},onstop:function(a){b.debug(a)}}});