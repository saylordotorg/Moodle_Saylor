define(["jquery","core/log"],function(a,b){"use strict";return b.debug("Timer: initialising"),{increment:1,initseconds:0,seconds:0,finalseconds:0,intervalhandle:null,callback:null,enabled:!1,clone:function(){return a.extend(!0,{},this)},init:function(a,b){this.initseconds=parseInt(a),this.seconds=parseInt(a),this.callback=b,this.enabled=!0},start:function(){if(this.enabled){var a=this;this.finalseconds=0,this.initseconds>0?this.increment=-1:this.increment=1,this.intervalhandle=this.customSetInterval(function(){a.seconds=a.seconds+a.increment,a.finalseconds=a.finalseconds+1,a.callback()},1e3)}},customSetInterval:function(a,b){function c(){var g=Date.now(),h=g-d;d=g,e=b+e-h,f.id=setTimeout(c,e),a()}var d=Date.now(),e=b,f={};return f.id=setTimeout(c,b),f},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},fetch_display_time:function(a){a||(a=this.seconds);var b="00"+parseInt(a/3600);b=b.substr(b.length-2,2);var c="00"+parseInt(a/60);c=c.substr(c.length-2,2);var d="00"+parseInt(a%60);d=d.substr(d.length-2,2);var e=b+":"+c+":"+d;return e},stop:function(){clearTimeout(this.intervalhandle.id)},reset:function(){this.seconds=this.initseconds},pause:function(){this.increment=0},resume:function(){this.initseconds>0?this.increment=-1:this.increment=1}}});