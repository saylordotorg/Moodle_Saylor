{"version":3,"file":"template_amd.min.js","sources":["../src/template_amd.js"],"sourcesContent":["/* jshint ignore:start */\ndefine(['jquery', 'core/log'], function ($, log) {\n\n    \"use strict\"; // jshint ;_;\n\n    log.debug('Filter Poodll initialising');\n\n    return {\n\n        allopts: {},\n\n        extscripts: {},\n\n        csslinks: Array(),\n\n        jslinks: Array(),\n\n        appendjspath: function (jslink, theprefix) {\n            require.config({\n                paths: {\n                    theprefix: jslink\n                }\n            });\n        },\n\n        injectcss: function (csslink) {\n            var link = document.createElement(\"link\");\n            link.href = csslink;\n            if (csslink.toLowerCase().lastIndexOf('.html') == csslink.length - 5) {\n                link.rel = 'import';\n            } else {\n                link.type = \"text/css\";\n                link.rel = \"stylesheet\";\n            }\n            document.getElementsByTagName(\"head\")[0].appendChild(link);\n        },\n\n        // load all poodll stuff and stash all our variables\n        loadtemplate: function (opts) {\n\n            //pick up opts from html\n            var theid = '#filter_poodll_amdopts_' + opts['AUTOID'];\n            var optscontrol = $(theid).get(0);\n            if (optscontrol) {\n                opts = JSON.parse(optscontrol.value);\n                //remove the hidden form element, in case it is really part of a form\n                $(theid).remove();\n            }\n\n            //load our css in head if required\n            //only do it once per extension though\n            if (opts['CSSLINK']) {\n                if (this.csslinks.indexOf(opts['CSSLINK']) < 0) {\n                    this.csslinks.push(opts['CSSLINK']);\n                    this.injectcss(opts['CSSLINK']);\n                }\n            }\n            //load our css in head if required\n            //only do it once per extension though\n            if (opts['CSSUPLOAD']) {\n                if (this.csslinks.indexOf(opts['CSSUPLOAD']) < 0) {\n                    this.csslinks.push(opts['CSSUPLOAD']);\n                    this.injectcss(opts['CSSUPLOAD']);\n                }\n            }\n\n            //load our css in head if required\n            //only do it once per extension though\n            if (opts['CSSCUSTOM']) {\n                if (this.csslinks.indexOf(opts['CSSCUSTOM']) < 0) {\n                    this.csslinks.push(opts['CSSCUSTOM']);\n                    this.injectcss(opts['CSSCUSTOM']);\n                }\n            }\n\n            //if we did get a template id then proceed\n            //we might not get one if the html was generated, but never sent to\n            //the page. Sometimes this happens in the assignment and probably\n            //elsewhere\n            if (typeof opts['TEMPLATEID'] != 'undefined') {\n                //here require, then load the template scripts and js\n                require(['filter_poodll_d' + opts['TEMPLATEID']], function (d) {\n                    d(opts);\n                });\n            }\n\n\n        }//end of function\n    };\n});\n/* jshint ignore:end */"],"names":["define","$","log","debug","allopts","extscripts","csslinks","Array","jslinks","appendjspath","jslink","theprefix","require","config","paths","injectcss","csslink","link","document","createElement","href","toLowerCase","lastIndexOf","length","rel","type","getElementsByTagName","appendChild","loadtemplate","opts","theid","optscontrol","get","JSON","parse","value","remove","this","indexOf","push","d"],"mappings":"AACAA,oCAAO,CAAC,SAAU,aAAa,SAAUC,EAAGC,YAIxCA,IAAIC,MAAM,8BAEH,CAEHC,QAAS,GAETC,WAAY,GAEZC,SAAUC,QAEVC,QAASD,QAETE,aAAc,SAAUC,OAAQC,WAC5BC,QAAQC,OAAO,CACXC,MAAO,CACHH,UAAWD,WAKvBK,UAAW,SAAUC,aACbC,KAAOC,SAASC,cAAc,QAClCF,KAAKG,KAAOJ,QACRA,QAAQK,cAAcC,YAAY,UAAYN,QAAQO,OAAS,EAC/DN,KAAKO,IAAM,UAEXP,KAAKQ,KAAO,WACZR,KAAKO,IAAM,cAEfN,SAASQ,qBAAqB,QAAQ,GAAGC,YAAYV,OAIzDW,aAAc,SAAUC,UAGhBC,MAAQ,0BAA4BD,KAAI,OACxCE,YAAc9B,EAAE6B,OAAOE,IAAI,GAC3BD,cACAF,KAAOI,KAAKC,MAAMH,YAAYI,OAE9BlC,EAAE6B,OAAOM,UAKTP,KAAI,SACAQ,KAAK/B,SAASgC,QAAQT,KAAI,SAAe,SACpCvB,SAASiC,KAAKV,KAAI,cAClBd,UAAUc,KAAI,UAKvBA,KAAI,WACAQ,KAAK/B,SAASgC,QAAQT,KAAI,WAAiB,SACtCvB,SAASiC,KAAKV,KAAI,gBAClBd,UAAUc,KAAI,YAMvBA,KAAI,WACAQ,KAAK/B,SAASgC,QAAQT,KAAI,WAAiB,SACtCvB,SAASiC,KAAKV,KAAI,gBAClBd,UAAUc,KAAI,iBAQM,IAAtBA,KAAI,YAEXjB,QAAQ,CAAC,kBAAoBiB,KAAI,aAAiB,SAAUW,GACxDA,EAAEX"}