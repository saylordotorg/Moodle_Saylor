define(["jquery","core/log","filter_poodll/poodll_flashrecorder","filter_poodll/poodll_mediarecorder","filter_poodll/poodll_uploadrecorder","filter_poodll/poodll_mobilerecorder","filter_poodll/poodll_flashsnapshotrecorder","filter_poodll/poodll_snapshotrecorder","filter_poodll/poodll_red5recorder"],function(a,b,c,d,e,f,g,h,i){"use strict";return b.debug("PoodLL Recorder: initialising"),{init:function(j){var k="#amdopts_"+j.widgetid,l=a(k).get(0);if(!l)return void b.debug("PoodLL Recorder: No config found on page. Giving up.");this.config=JSON.parse(l.value),a(k).remove(),this.config.wwwroot=M.cfg.wwwroot,this.config.sesskey=M.cfg.sesskey;var m=this.config.selector;if(!m)return void b.debug("unable to fetch element with selector:"+this.config.selector);for(var n=!1,o=0;o<this.config.rec_order.length;o++){switch(this.config.rec_order[o]){case"red5":n=i;break;case"flashaudio":n=c;break;case"media":n=d;break;case"upload":n=e;break;case"mobile":n=f;break;case"flashsnapshot":n=g;break;case"snapshot":n=h}if(n.supports_current_browser(this.config))return void n.embed(m,this.config)}b.debug("none of available recorders works on this browser")}}});