function _typeof2(e){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof2=function(e){return typeof e}}else{_typeof2=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return _typeof2(e)}(function(e,a){if("object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof2(module)))module.exports=a();else if("function"==typeof define&&define.amd)define ("filter_poodll/wavesurfer",[],a);else if("object"===("undefined"==typeof exports?"undefined":_typeof2(exports)))exports.WaveSurfer=a();else e.WaveSurfer=a()})(window,function(){return function(e){var t={};function a(r){if(t[r]){return t[r].exports}var n=t[r]={i:r,l:!1,exports:{}};e[r].call(n.exports,n,n.exports,a);n.l=!0;return n.exports}a.m=e;a.c=t;a.d=function(e,t,r){if(!a.o(e,t)){Object.defineProperty(e,t,{enumerable:!0,get:r})}};a.r=function(e){if("undefined"!=typeof Symbol&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:!0})};a.t=function(e,t){if(1&t)e=a(e);if(8&t)return e;if(4&t&&"object"===_typeof2(e)&&e&&e.__esModule)return e;var r=Object.create(null);a.r(r);Object.defineProperty(r,"default",{enumerable:!0,value:e});if(2&t&&"string"!=typeof e)for(var n in e){a.d(r,n,function(a){return e[a]}.bind(null,n))}return r};a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};a.d(t,"a",t);return t};a.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)};a.p="";return a(a.s="./src/wavesurfer.js")}({"./node_modules/debounce/index.js":function node_modulesDebounceIndexJs(e){function a(e,a,t){var n,s,o,i,l;if(null==a)a=100;function r(){var d=Date.now()-i;if(d<a&&0<=d){n=setTimeout(r,a-d)}else{n=null;if(!t){l=e.apply(o,s);o=s=null}}}var d=function(){o=this;s=arguments;i=Date.now();var d=t&&!n;if(!n)n=setTimeout(r,a);if(d){l=e.apply(o,s);o=s=null}return l};d.clear=function(){if(n){clearTimeout(n);n=null}};d.flush=function(){if(n){l=e.apply(o,s);o=s=null;clearTimeout(n);n=null}};return d}a.debounce=a;e.exports=a},"./src/drawer.canvasentry.js":function srcDrawerCanvasentryJs(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;var i=r(t("./src/util/style.js")),l=r(t("./src/util/get-id.js"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e,a){if(!(e instanceof a)){throw new TypeError("Cannot call a class as a function")}}function s(e,a){for(var t=0,r;t<a.length;t++){r=a[t];r.enumerable=r.enumerable||!1;r.configurable=!0;if("value"in r)r.writable=!0;Object.defineProperty(e,r.key,r)}}function o(e,a,t){if(a)s(e.prototype,a);if(t)s(e,t);return e}var d=function(){function e(){n(this,e);this.wave=null;this.waveCtx=null;this.progress=null;this.progressCtx=null;this.start=0;this.end=1;this.id=(0,l.default)("undefined"!=typeof this.constructor.name?this.constructor.name.toLowerCase()+"_":"canvasentry_");this.canvasContextAttributes={}}o(e,[{key:"initWave",value:function(e){this.wave=e;this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function(e){this.progress=e;this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function(e,a,t,r){this.start=this.wave.offsetLeft/a||0;this.end=this.start+e/a;this.wave.width=t;this.wave.height=r;var n={width:e+"px"};(0,i.default)(this.wave,n);if(this.hasProgressCanvas){this.progress.width=t;this.progress.height=r;(0,i.default)(this.progress,n)}}},{key:"clearWave",value:function(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height);if(this.hasProgressCanvas){this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}}},{key:"setFillStyles",value:function(e,a){this.waveCtx.fillStyle=e;if(this.hasProgressCanvas){this.progressCtx.fillStyle=a}}},{key:"fillRects",value:function(e,a,t,r,n){this.fillRectToContext(this.waveCtx,e,a,t,r,n);if(this.hasProgressCanvas){this.fillRectToContext(this.progressCtx,e,a,t,r,n)}}},{key:"fillRectToContext",value:function(e,a,t,r,n,s){if(!e){return}if(s){this.drawRoundedRect(e,a,t,r,n,s)}else{e.fillRect(a,t,r,n)}}},{key:"drawRoundedRect",value:function(e,a,t,r,n,s){if(0===n){return}if(0>n){n*=-1;t-=n}e.beginPath();e.moveTo(a+s,t);e.lineTo(a+r-s,t);e.quadraticCurveTo(a+r,t,a+r,t+s);e.lineTo(a+r,t+n-s);e.quadraticCurveTo(a+r,t+n,a+r-s,t+n);e.lineTo(a+s,t+n);e.quadraticCurveTo(a,t+n,a,t+n-s);e.lineTo(a,t+s);e.quadraticCurveTo(a,t,a+s,t);e.closePath();e.fill()}},{key:"drawLines",value:function(e,a,t,r,n,s){this.drawLineToContext(this.waveCtx,e,a,t,r,n,s);if(this.hasProgressCanvas){this.drawLineToContext(this.progressCtx,e,a,t,r,n,s)}}},{key:"drawLineToContext",value:function(e,a,t,r,n){if(!e){return}var s=a.length/2,o=Math.round(s*this.start),l=Math.round(s*this.end)+1,d=o,u=l,c=this.wave.width/(u-d-1),p=r+n,f=t/r;e.beginPath();e.moveTo((d-o)*c,p);e.lineTo((d-o)*c,p-Math.round((a[2*d]||0)/f));var y,m,v;for(y=d;y<u;y++){m=a[2*y]||0;v=Math.round(m/f);e.lineTo((y-o)*c+this.halfPixel,p-v)}var g=u-1;for(g;g>=d;g--){m=a[2*g+1]||0;v=Math.round(m/f);e.lineTo((g-o)*c+this.halfPixel,p-v)}e.lineTo((d-o)*c,p-Math.round((a[2*d+1]||0)/f));e.closePath();e.fill()}},{key:"destroy",value:function(){this.waveCtx=null;this.wave=null;this.progressCtx=null;this.progress=null}},{key:"getImage",value:function(e,a,t){var r=this;if("blob"===t){return new Promise(function(t){r.wave.toBlob(t,e,a)})}else if("dataURL"===t){return this.wave.toDataURL(e,a)}}}]);return e}();a.default=d;e.exports=a.default;return a.default},"./src/drawer.js":function srcDrawerJs(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;var y=n(t("./src/util/index.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;r=function(){return e};return e}function n(e){if(e&&e.__esModule){return e}if(null===e||"object"!==s(e)&&"function"!=typeof e){return{default:e}}var a=r();if(a&&a.has(e)){return a.get(e)}var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;if(i&&(i.get||i.set)){Object.defineProperty(t,o,i)}else{t[o]=e[o]}}}t.default=e;if(a){a.set(e,t)}return t}function s(e){if("function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)){s=function(e){return _typeof2(e)}}else{s=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)}}return s(e)}function o(e,a){if(!(e instanceof a)){throw new TypeError("Cannot call a class as a function")}}function i(e,a){for(var t=0,r;t<a.length;t++){r=a[t];r.enumerable=r.enumerable||!1;r.configurable=!0;if("value"in r)r.writable=!0;Object.defineProperty(e,r.key,r)}}function l(e,a,t){if(a)i(e.prototype,a);if(t)i(e,t);return e}function d(e,a){if(a&&("object"===s(a)||"function"==typeof a)){return a}return u(e)}function u(e){if(void 0===e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function c(e){c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return c(e)}function p(e,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}});if(a)f(e,a)}function f(e,a){f=Object.setPrototypeOf||function(e,a){e.__proto__=a;return e};return f(e,a)}var m=function(e){p(a,e);function a(e,t){var r;o(this,a);r=d(this,c(a).call(this));r.container=e;r.params=t;r.width=0;r.height=t.height*r.params.pixelRatio;r.lastPos=0;r.wrapper=null;return r}l(a,[{key:"style",value:function(e,a){return y.style(e,a)}},{key:"createWrapper",value:function(){this.wrapper=this.container.appendChild(document.createElement("wave"));this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"});if(this.params.fillParent||this.params.scrollParent){this.style(this.wrapper,{width:"100%",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"})}this.setupWrapperEvents()}},{key:"handleEvent",value:function(a,e){e||a.preventDefault();var t=a.targetTouches?a.targetTouches[0].clientX:a.clientX,r=this.wrapper.getBoundingClientRect(),n=this.width,s=this.getWidth(),o;if(!this.params.fillParent&&n<s){o=(this.params.rtl?r.right-t:t-r.left)*(this.params.pixelRatio/n)||0;if(1<o){o=1}}else{o=((this.params.rtl?r.right-t:t-r.left)+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0}return o}},{key:"setupWrapperEvents",value:function(){var a=this;this.wrapper.addEventListener("click",function(t){var e=a.wrapper.offsetHeight-a.wrapper.clientHeight;if(0!=e){var r=a.wrapper.getBoundingClientRect();if(t.clientY>=r.bottom-e){return}}if(a.params.interact){a.fireEvent("click",t,a.handleEvent(t))}});this.wrapper.addEventListener("dblclick",function(t){if(a.params.interact){a.fireEvent("dblclick",t,a.handleEvent(t))}});this.wrapper.addEventListener("scroll",function(t){return a.fireEvent("scroll",t)})}},{key:"drawPeaks",value:function(e,a,t,r){if(!this.setWidth(a)){this.clearWave()}this.params.barWidth?this.drawBars(e,0,t,r):this.drawWave(e,0,t,r)}},{key:"resetScroll",value:function(){if(null!==this.wrapper){this.wrapper.scrollLeft=0}}},{key:"recenter",value:function(e){var a=this.wrapper.scrollWidth*e;this.recenterOnPosition(a,!0)}},{key:"recenterOnPosition",value:function(e,a){var t=this.wrapper.scrollLeft,r=~~(this.wrapper.clientWidth/2),n=this.wrapper.scrollWidth-this.wrapper.clientWidth,s=e-r,o=s-t;if(0==n){return}if(!a&&-r<=o&&o<r){var i=this.params.autoCenterRate;i/=r;i*=n;o=Math.max(-i,Math.min(i,o));s=t+o}s=Math.max(0,Math.min(n,s));if(s!=t){this.wrapper.scrollLeft=s}}},{key:"getScrollX",value:function(){var e=0;if(this.wrapper){var a=this.params.pixelRatio;e=Math.round(this.wrapper.scrollLeft*a);if(this.params.scrollParent){var t=~~(this.wrapper.scrollWidth*a-this.getWidth());e=Math.min(t,Math.max(0,e))}}return e}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(e){if(this.width==e){return!1}this.width=e;if(this.params.fillParent||this.params.scrollParent){this.style(this.wrapper,{width:""})}else{this.style(this.wrapper,{width:~~(this.width/this.params.pixelRatio)+"px"})}this.updateSize();return!0}},{key:"setHeight",value:function(e){if(e==this.height){return!1}this.height=e;this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"});this.updateSize();return!0}},{key:"progress",value:function(e){var a=1/this.params.pixelRatio,t=Math.round(e*this.width)*a;if(t<this.lastPos||t-this.lastPos>=a){this.lastPos=t;if(this.params.scrollParent&&this.params.autoCenter){var r=~~(this.wrapper.scrollWidth*e);this.recenterOnPosition(r,this.params.autoCenterImmediately)}this.updateProgress(t)}}},{key:"destroy",value:function(){this.unAll();if(this.wrapper){if(this.wrapper.parentNode==this.container){this.container.removeChild(this.wrapper)}this.wrapper=null}}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(){}},{key:"drawWave",value:function(){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(){}}]);return a}(y.Observer);a.default=m;e.exports=a.default},"./src/drawer.multicanvas.js":function srcDrawerMulticanvasJs(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;var m=s(t("./src/drawer.js")),v=n(t("./src/util/index.js")),g=s(t("./src/drawer.canvasentry.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;r=function(){return e};return e}function n(e){if(e&&e.__esModule){return e}if(null===e||"object"!==o(e)&&"function"!=typeof e){return{default:e}}var a=r();if(a&&a.has(e)){return a.get(e)}var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e){if(Object.prototype.hasOwnProperty.call(e,s)){var i=n?Object.getOwnPropertyDescriptor(e,s):null;if(i&&(i.get||i.set)){Object.defineProperty(t,s,i)}else{t[s]=e[s]}}}t.default=e;if(a){a.set(e,t)}return t}function s(e){return e&&e.__esModule?e:{default:e}}function o(e){if("function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)){o=function(e){return _typeof2(e)}}else{o=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)}}return o(e)}function i(e,a){if(!(e instanceof a)){throw new TypeError("Cannot call a class as a function")}}function l(e,a){for(var t=0,r;t<a.length;t++){r=a[t];r.enumerable=r.enumerable||!1;r.configurable=!0;if("value"in r)r.writable=!0;Object.defineProperty(e,r.key,r)}}function d(e,a,t){if(a)l(e.prototype,a);if(t)l(e,t);return e}function u(e,a){if(a&&("object"===o(a)||"function"==typeof a)){return a}return c(e)}function c(e){if(void 0===e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return p(e)}function f(e,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}});if(a)y(e,a)}function y(e,a){y=Object.setPrototypeOf||function(e,a){e.__proto__=a;return e};return y(e,a)}var k=function(e){f(a,e);function a(e,t){var r;i(this,a);r=u(this,p(a).call(this,e,t));r.maxCanvasWidth=t.maxCanvasWidth;r.maxCanvasElementWidth=Math.round(t.maxCanvasWidth/t.pixelRatio);r.hasProgressCanvas=t.waveColor!=t.progressColor;r.halfPixel=.5/t.pixelRatio;r.canvases=[];r.progressWave=null;r.EntryClass=g.default;r.canvasContextAttributes=t.drawingContextAttributes;r.overlap=2*Math.ceil(t.pixelRatio/2);r.barRadius=t.barRadius||0;return r}d(a,[{key:"init",value:function(){this.createWrapper();this.createElements()}},{key:"createElements",value:function(){this.progressWave=this.wrapper.appendChild(this.style(document.createElement("wave"),{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"}));this.addCanvas();this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){var e=this,a=Math.round(this.width/this.params.pixelRatio),t=Math.ceil(a/(this.maxCanvasElementWidth+this.overlap));while(this.canvases.length<t){this.addCanvas()}while(this.canvases.length>t){this.removeCanvas()}var r=this.maxCanvasWidth+this.overlap,n=this.canvases.length-1;this.canvases.forEach(function(a,t){if(t==n){r=e.width-e.maxCanvasWidth*n}e.updateDimensions(a,r,e.height);a.clearWave()})}},{key:"addCanvas",value:function(){var e=new this.EntryClass;e.canvasContextAttributes=this.canvasContextAttributes;e.hasProgressCanvas=this.hasProgressCanvas;e.halfPixel=this.halfPixel;var a=this.maxCanvasElementWidth*this.canvases.length;e.initWave(this.wrapper.appendChild(this.style(document.createElement("canvas"),{position:"absolute",zIndex:2,left:a+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"})));if(this.hasProgressCanvas){e.initProgress(this.progressWave.appendChild(this.style(document.createElement("canvas"),{position:"absolute",left:a+"px",top:0,bottom:0,height:"100%"})))}this.canvases.push(e)}},{key:"removeCanvas",value:function(){var e=this.canvases[this.canvases.length-1];e.wave.parentElement.removeChild(e.wave);if(this.hasProgressCanvas){e.progress.parentElement.removeChild(e.progress)}if(e){e.destroy();e=null}this.canvases.pop()}},{key:"updateDimensions",value:function(e,a,t){var r=Math.round(a/this.params.pixelRatio),n=Math.round(this.width/this.params.pixelRatio);e.updateDimensions(r,n,a,t);this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function(){var e=this;v.frame(function(){e.canvases.forEach(function(e){return e.clearWave()})})()}},{key:"drawBars",value:function(e,a,t,r){var n=this;return this.prepareDraw(e,a,t,r,function(e){var a=e.absmax,s=e.hasMinVals,o=e.height,l=e.offsetY,d=e.halfH,u=e.peaks;if(void 0===t){return}var c=s?2:1,p=u.length/c,f=n.params.barWidth*n.params.pixelRatio,y=null===n.params.barGap?Math.max(n.params.pixelRatio,~~(f/2)):Math.max(n.params.pixelRatio,n.params.barGap*n.params.pixelRatio),m=p/n.width,v=t;for(v;v<r;v+=f+y){var g=u[Math.floor(v*m*c)]||0,k=Math.round(g/a*d);if(0==k&&n.params.barMinHeight)k=n.params.barMinHeight;n.fillRect(v+n.halfPixel,d-k+l,f+n.halfPixel,2*k,n.barRadius)}})}},{key:"drawWave",value:function(e,a,t,r){var n=this;return this.prepareDraw(e,a,t,r,function(e){var a=e.absmax,s=e.hasMinVals,o=e.height,l=e.offsetY,d=e.halfH,u=e.peaks;if(!s){var c=[],p=u.length,f=0;for(f;f<p;f++){c[2*f]=u[f];c[2*f+1]=-u[f]}u=c}if(void 0!==t){n.drawLine(u,a,d,l,t,r)}n.fillRect(0,d+l-n.halfPixel,n.width,n.halfPixel,n.barRadius)})}},{key:"drawLine",value:function(e,a,t,r,n,s){var o=this;this.canvases.forEach(function(i){o.setFillStyles(i);i.drawLines(e,a,t,r,n,s)})}},{key:"fillRect",value:function(e,a,t,r,n){var s=Math.floor(e/this.maxCanvasWidth),o=Math.min(Math.ceil((e+t)/this.maxCanvasWidth)+1,this.canvases.length),l=s;for(l;l<o;l++){var d=this.canvases[l],u=l*this.maxCanvasWidth,c={x1:Math.max(e,l*this.maxCanvasWidth),y1:a,x2:Math.min(e+t,l*this.maxCanvasWidth+d.wave.width),y2:a+r};if(c.x1<c.x2){this.setFillStyles(d);d.fillRects(c.x1-u,c.y1,c.x2-c.x1,c.y2-c.y1,n)}}}},{key:"prepareDraw",value:function(e,a,t,r,n){var s=this;return v.frame(function(){if(e[0]instanceof Array){var o=e;if(s.params.splitChannels){s.setHeight(o.length*s.params.height*s.params.pixelRatio);return o.forEach(function(e,a){return s.prepareDraw(e,a,t,r,n)})}e=o[0]}var i=1/s.params.barHeight;if(s.params.normalize){var l=v.max(e),d=v.min(e);i=-d>l?-d:l}var u=[].some.call(e,function(e){return 0>e}),c=s.params.height*s.params.pixelRatio;return n({absmax:i,hasMinVals:u,height:c,offsetY:c*a||0,halfH:c/2,peaks:e})})()}},{key:"setFillStyles",value:function(e){e.setFillStyles(this.params.waveColor,this.params.progressColor)}},{key:"getImage",value:function(e,a,t){if("blob"===t){return Promise.all(this.canvases.map(function(r){return r.getImage(e,a,t)}))}else if("dataURL"===t){var r=this.canvases.map(function(r){return r.getImage(e,a,t)});return 1<r.length?r:r[0]}}},{key:"updateProgress",value:function(e){this.style(this.progressWave,{width:e+"px"})}}]);return a}(m.default);a.default=k;e.exports=a.default},"./src/mediaelement-webaudio.js":function srcMediaelementWebaudioJs(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;var y=function(e){return e&&e.__esModule?e:{default:e}}(t("./src/mediaelement.js"));function r(e){if("function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)){r=function(e){return _typeof2(e)}}else{r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)}}return r(e)}function n(e,a){if(!(e instanceof a)){throw new TypeError("Cannot call a class as a function")}}function s(e,a){for(var t=0,r;t<a.length;t++){r=a[t];r.enumerable=r.enumerable||!1;r.configurable=!0;if("value"in r)r.writable=!0;Object.defineProperty(e,r.key,r)}}function o(e,a,t){if(a)s(e.prototype,a);if(t)s(e,t);return e}function i(e,a){if(a&&("object"===r(a)||"function"==typeof a)){return a}return l(e)}function l(e){if(void 0===e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function d(e,a,t){if("undefined"!=typeof Reflect&&Reflect.get){d=Reflect.get}else{d=function(e,a,t){var r=u(e,a);if(!r)return;var n=Object.getOwnPropertyDescriptor(r,a);if(n.get){return n.get.call(t)}return n.value}}return d(e,a,t||e)}function u(e,a){while(!Object.prototype.hasOwnProperty.call(e,a)){e=c(e);if(null===e)break}return e}function c(e){c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return c(e)}function p(e,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}});if(a)f(e,a)}function f(e,a){f=Object.setPrototypeOf||function(e,a){e.__proto__=a;return e};return f(e,a)}var m=function(e){p(a,e);function a(e){var t;n(this,a);t=i(this,c(a).call(this,e));t.params=e;t.sourceMediaElement=null;return t}o(a,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate);this.createTimer();this.createVolumeNode();this.createScriptNode();this.createAnalyserNode()}},{key:"_load",value:function(e,t){d(c(a.prototype),"_load",this).call(this,e,t);this.createMediaElementSource(e)}},{key:"createMediaElementSource",value:function(e){this.sourceMediaElement=this.ac.createMediaElementSource(e);this.sourceMediaElement.connect(this.analyser)}}]);return a}(y.default);a.default=m;e.exports=a.default},"./src/mediaelement.js":function srcMediaelementJs(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;var v=function(e){return e&&e.__esModule?e:{default:e}}(t("./src/webaudio.js")),g=n(t("./src/util/index.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;r=function(){return e};return e}function n(e){if(e&&e.__esModule){return e}if(null===e||"object"!==s(e)&&"function"!=typeof e){return{default:e}}var a=r();if(a&&a.has(e)){return a.get(e)}var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;if(i&&(i.get||i.set)){Object.defineProperty(t,o,i)}else{t[o]=e[o]}}}t.default=e;if(a){a.set(e,t)}return t}function s(e){if("function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)){s=function(e){return _typeof2(e)}}else{s=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)}}return s(e)}function o(e,a){if(!(e instanceof a)){throw new TypeError("Cannot call a class as a function")}}function i(e,a){for(var t=0,r;t<a.length;t++){r=a[t];r.enumerable=r.enumerable||!1;r.configurable=!0;if("value"in r)r.writable=!0;Object.defineProperty(e,r.key,r)}}function l(e,a,t){if(a)i(e.prototype,a);if(t)i(e,t);return e}function d(e,a){if(a&&("object"===s(a)||"function"==typeof a)){return a}return u(e)}function u(e){if(void 0===e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function c(e,a,t){if("undefined"!=typeof Reflect&&Reflect.get){c=Reflect.get}else{c=function(e,a,t){var r=p(e,a);if(!r)return;var n=Object.getOwnPropertyDescriptor(r,a);if(n.get){return n.get.call(t)}return n.value}}return c(e,a,t||e)}function p(e,a){while(!Object.prototype.hasOwnProperty.call(e,a)){e=f(e);if(null===e)break}return e}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return f(e)}function y(e,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}});if(a)m(e,a)}function m(e,a){m=Object.setPrototypeOf||function(e,a){e.__proto__=a;return e};return m(e,a)}var k=function(e){y(a,e);function a(e){var t;o(this,a);t=d(this,f(a).call(this,e));t.params=e;t.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0};t.mediaType=e.mediaType.toLowerCase();t.elementPosition=e.elementPosition;t.peaks=null;t.playbackRate=1;t.volume=1;t.isMuted=!1;t.buffer=null;t.onPlayEnd=null;t.mediaListeners={};return t}l(a,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate);this.createTimer()}},{key:"_setupMediaListeners",value:function(){var e=this;this.mediaListeners.error=function(){e.fireEvent("error","Error loading media element")};this.mediaListeners.canplay=function(){e.fireEvent("canplay")};this.mediaListeners.ended=function(){e.fireEvent("finish")};this.mediaListeners.play=function(){e.fireEvent("play")};this.mediaListeners.pause=function(){e.fireEvent("pause")};this.mediaListeners.seeked=function(){e.fireEvent("seek")};this.mediaListeners.volumechange=function(){e.isMuted=e.media.muted;if(e.isMuted){e.volume=0}else{e.volume=e.media.volume}e.fireEvent("volume")};Object.keys(this.mediaListeners).forEach(function(a){e.media.removeEventListener(a,e.mediaListeners[a]);e.media.addEventListener(a,e.mediaListeners[a])})}},{key:"createTimer",value:function(){var e=this;this.on("play",function a(){if(e.isPaused()){return}e.fireEvent("audioprocess",e.getCurrentTime());g.frame(a)()});this.on("pause",function(){e.fireEvent("audioprocess",e.getCurrentTime())})}},{key:"load",value:function(e,a,t,r){var n=document.createElement(this.mediaType);n.controls=this.params.mediaControls;n.autoplay=this.params.autoplay||!1;n.preload=null==r?"auto":r;n.src=e;n.style.width="100%";var s=a.querySelector(this.mediaType);if(s){a.removeChild(s)}a.appendChild(n);this._load(n,t)}},{key:"loadElt",value:function(e,a){e.controls=this.params.mediaControls;e.autoplay=this.params.autoplay||!1;this._load(e,a)}},{key:"_load",value:function(e,a){if(!(e instanceof HTMLMediaElement)||"undefined"==typeof e.addEventListener){throw new Error("media parameter is not a valid media element")}if("function"==typeof e.load){e.load()}this.media=e;this._setupMediaListeners();this.peaks=a;this.onPlayEnd=null;this.buffer=null;this.isMuted=e.muted;this.setPlaybackRate(this.playbackRate);this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration){return this.explicitDuration}var e=(this.buffer||this.media).duration;if(e>=1/0){e=this.media.seekable.end(0)}return e}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(e){this.playbackRate=e||1;this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(e){if(null!=e){this.media.currentTime=e}this.clearPlayEnd()}},{key:"play",value:function(e,a){this.seekTo(e);var t=this.media.play();a&&this.setPlayEnd(a);return t}},{key:"pause",value:function(){var e;if(this.media){e=this.media.pause()}this.clearPlayEnd();return e}},{key:"setPlayEnd",value:function(e){var a=this;this.clearPlayEnd();this._onPlayEnd=function(t){if(t>=e){a.pause();a.seekTo(e)}};this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){if(this._onPlayEnd){this.un("audioprocess",this._onPlayEnd);this._onPlayEnd=null}}},{key:"getPeaks",value:function(e,t,r){if(this.buffer){return c(f(a.prototype),"getPeaks",this).call(this,e,t,r)}return this.peaks||[]}},{key:"setSinkId",value:function(e){if(e){if(!this.media.setSinkId){return Promise.reject(new Error("setSinkId is not supported in your browser"))}return this.media.setSinkId(e)}return Promise.reject(new Error("Invalid deviceId: "+e))}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(e){this.volume=e;if(this.media.volume!==this.volume){this.media.volume=this.volume}}},{key:"destroy",value:function(){var e=this;this.pause();this.unAll();this.destroyed=!0;Object.keys(this.mediaListeners).forEach(function(a){if(e.media){e.media.removeEventListener(a,e.mediaListeners[a])}});if(this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode){this.media.parentNode.removeChild(this.media)}this.media=null}}]);return a}(v.default);a.default=k;e.exports=a.default},"./src/peakcache.js":function srcPeakcacheJs(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;function t(e,a){if(!(e instanceof a)){throw new TypeError("Cannot call a class as a function")}}function r(e,a){for(var t=0,r;t<a.length;t++){r=a[t];r.enumerable=r.enumerable||!1;r.configurable=!0;if("value"in r)r.writable=!0;Object.defineProperty(e,r.key,r)}}function n(e,a,t){if(a)r(e.prototype,a);if(t)r(e,t);return e}var s=function(){function e(){t(this,e);this.clearPeakCache()}n(e,[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[];this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(e,a,t){if(e!=this.peakCacheLength){this.clearPeakCache();this.peakCacheLength=e}var r=[],n=0;while(n<this.peakCacheRanges.length&&this.peakCacheRanges[n]<a){n++}if(0==n%2){r.push(a)}while(n<this.peakCacheRanges.length&&this.peakCacheRanges[n]<=t){r.push(this.peakCacheRanges[n]);n++}if(0==n%2){r.push(t)}r=r.filter(function(e,a,t){if(0==a){return e!=t[a+1]}else if(a==t.length-1){return e!=t[a-1]}return e!=t[a-1]&&e!=t[a+1]});this.peakCacheRanges=this.peakCacheRanges.concat(r);this.peakCacheRanges=this.peakCacheRanges.sort(function(e,a){return e-a}).filter(function(e,a,t){if(0==a){return e!=t[a+1]}else if(a==t.length-1){return e!=t[a-1]}return e!=t[a-1]&&e!=t[a+1]});var s=[];for(n=0;n<r.length;n+=2){s.push([r[n],r[n+1]])}return s}},{key:"getCacheRanges",value:function(){var e=[],a;for(a=0;a<this.peakCacheRanges.length;a+=2){e.push([this.peakCacheRanges[a],this.peakCacheRanges[a+1]])}return e}}]);return e}();a.default=s;e.exports=a.default},"./src/util/ajax.js":function srcUtilAjaxJs(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(e){var a=new r.default,t=new XMLHttpRequest,n=!1;t.open(e.method||"GET",e.url,!0);t.responseType=e.responseType||"json";if(e.xhr){if(e.xhr.requestHeaders){e.xhr.requestHeaders.forEach(function(e){t.setRequestHeader(e.key,e.value)})}if(e.xhr.withCredentials){t.withCredentials=!0}}t.addEventListener("progress",function(t){a.fireEvent("progress",t);if(t.lengthComputable&&t.loaded==t.total){n=!0}});t.addEventListener("load",function(r){if(!n){a.fireEvent("progress",r)}a.fireEvent("load",r);if(200==t.status||206==t.status){a.fireEvent("success",t.response,r)}else{a.fireEvent("error",r)}});t.addEventListener("error",function(t){return a.fireEvent("error",t)});t.send();a.xhr=t;return a};var r=function(e){return e&&e.__esModule?e:{default:e}}(t("./src/util/observer.js"));e.exports=a.default},"./src/util/extend.js":function srcUtilExtendJs(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(e){console.warn("util.extend is deprecated; use Object.assign instead");for(var a=arguments.length,t=Array(1<a?a-1:0),r=1;r<a;r++){t[r-1]=arguments[r]}t.forEach(function(a){Object.keys(a).forEach(function(t){e[t]=a[t]})});return e};e.exports=a.default},"./src/util/fetch.js":function srcUtilFetchJs(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(e){if(!e){throw new Error("fetch options missing")}else if(!e.url){throw new Error("fetch url missing")}var a=new o.default,t=new Headers,r=new Request(e.url);a.controller=new AbortController;if(e&&e.requestHeaders){e.requestHeaders.forEach(function(e){t.append(e.key,e.value)})}var n=e.responseType||"json",s={method:e.method||"GET",headers:t,mode:e.mode||"cors",credentials:e.credentials||"same-origin",cache:e.cache||"default",redirect:e.redirect||"follow",referrer:e.referrer||"client",signal:a.controller.signal};fetch(r,s).then(function(e){a.response=e;var t=!0;if(!e.body){t=!1}var r=e.headers.get("content-length");if(null===r){t=!1}if(!t){return e}a.onProgress=function(t){a.fireEvent("progress",t)};return new Response(new ReadableStream(new i(a,r,e)),s)}).then(function(e){var a;if(e.ok){switch(n){case"arraybuffer":return e.arrayBuffer();case"json":return e.json();case"blob":return e.blob();case"text":return e.text();default:a="Unknown responseType: "+n;break;}}if(!a){a="HTTP error status: "+e.status}throw new Error(a)}).then(function(e){a.fireEvent("success",e)}).catch(function(e){a.fireEvent("error",e)});a.fetchRequest=r;return a};var o=function(e){return e&&e.__esModule?e:{default:e}}(t("./src/util/observer.js"));function r(e,a){if(!(e instanceof a)){throw new TypeError("Cannot call a class as a function")}}function n(e,a){for(var t=0,r;t<a.length;t++){r=a[t];r.enumerable=r.enumerable||!1;r.configurable=!0;if("value"in r)r.writable=!0;Object.defineProperty(e,r.key,r)}}function s(e,a,t){if(a)n(e.prototype,a);if(t)n(e,t);return e}var i=function(){function e(a,t,n){r(this,e);this.instance=a;this.instance._reader=n.body.getReader();this.total=parseInt(t,10);this.loaded=0}s(e,[{key:"start",value:function(e){var a=this;(function t(){a.instance._reader.read().then(function(r){var n=r.done,s=r.value;if(n){if(0===a.total){a.instance.onProgress.call(a.instance,{loaded:a.loaded,total:a.total,lengthComputable:!1})}e.close();return}a.loaded+=s.byteLength;a.instance.onProgress.call(a.instance,{loaded:a.loaded,total:a.total,lengthComputable:!(0===a.total)});e.enqueue(s);t()}).catch(function(a){e.error(a)})})()}}]);return e}();e.exports=a.default},"./src/util/frame.js":function srcUtilFrameJs(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(e){return function(){for(var a=arguments.length,t=Array(a),n=0;n<a;n++){t[n]=arguments[n]}return(0,r.default)(function(){return e.apply(void 0,t)})}};var r=function(e){return e&&e.__esModule?e:{default:e}}(t("./src/util/request-animation-frame.js"));e.exports=a.default},"./src/util/get-id.js":function srcUtilGetIdJs(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(e){if(void 0===e){e="wavesurfer_"}return e+Math.random().toString(32).substring(2)};e.exports=a.default},"./src/util/index.js":function srcUtilIndexJs(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});Object.defineProperty(a,"ajax",{enumerable:!0,get:function(){return n.default}});Object.defineProperty(a,"getId",{enumerable:!0,get:function(){return s.default}});Object.defineProperty(a,"max",{enumerable:!0,get:function(){return o.default}});Object.defineProperty(a,"min",{enumerable:!0,get:function(){return i.default}});Object.defineProperty(a,"Observer",{enumerable:!0,get:function(){return l.default}});Object.defineProperty(a,"extend",{enumerable:!0,get:function(){return d.default}});Object.defineProperty(a,"style",{enumerable:!0,get:function(){return u.default}});Object.defineProperty(a,"requestAnimationFrame",{enumerable:!0,get:function(){return c.default}});Object.defineProperty(a,"frame",{enumerable:!0,get:function(){return p.default}});Object.defineProperty(a,"debounce",{enumerable:!0,get:function(){return f.default}});Object.defineProperty(a,"preventClick",{enumerable:!0,get:function(){return y.default}});Object.defineProperty(a,"fetchFile",{enumerable:!0,get:function(){return m.default}});var n=r(t("./src/util/ajax.js")),s=r(t("./src/util/get-id.js")),o=r(t("./src/util/max.js")),i=r(t("./src/util/min.js")),l=r(t("./src/util/observer.js")),d=r(t("./src/util/extend.js")),u=r(t("./src/util/style.js")),c=r(t("./src/util/request-animation-frame.js")),p=r(t("./src/util/frame.js")),f=r(t("./node_modules/debounce/index.js")),y=r(t("./src/util/prevent-click.js")),m=r(t("./src/util/fetch.js"));function r(e){return e&&e.__esModule?e:{default:e}}},"./src/util/max.js":function srcUtilMaxJs(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(e){var a=-Infinity;Object.keys(e).forEach(function(t){if(e[t]>a){a=e[t]}});return a};e.exports=a.default},"./src/util/min.js":function srcUtilMinJs(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(e){var a=+Infinity;Object.keys(e).forEach(function(t){if(e[t]<a){a=e[t]}});return a};e.exports=a.default},"./src/util/observer.js":function srcUtilObserverJs(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;function t(e,a){if(!(e instanceof a)){throw new TypeError("Cannot call a class as a function")}}function r(e,a){for(var t=0,r;t<a.length;t++){r=a[t];r.enumerable=r.enumerable||!1;r.configurable=!0;if("value"in r)r.writable=!0;Object.defineProperty(e,r.key,r)}}function n(e,a,t){if(a)r(e.prototype,a);if(t)r(e,t);return e}var s=function(){function e(){t(this,e);this.handlers=null}n(e,[{key:"on",value:function(e,a){var t=this;if(!this.handlers){this.handlers={}}var r=this.handlers[e];if(!r){r=this.handlers[e]=[]}r.push(a);return{name:e,callback:a,un:function(a,e){return t.un(a,e)}}}},{key:"un",value:function(e,a){if(!this.handlers){return}var t=this.handlers[e],r;if(t){if(a){for(r=t.length-1;0<=r;r--){if(t[r]==a){t.splice(r,1)}}}else{t.length=0}}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(e,a){var t=this;return this.on(e,function r(){for(var n=arguments.length,s=Array(n),o=0;o<n;o++){s[o]=arguments[o]}a.apply(t,s);setTimeout(function(){t.un(e,r)},0)})}},{key:"fireEvent",value:function(e){for(var a=arguments.length,t=Array(1<a?a-1:0),r=1;r<a;r++){t[r-1]=arguments[r]}if(!this.handlers){return}var n=this.handlers[e];n&&n.forEach(function(e){e.apply(void 0,t)})}}]);return e}();a.default=s;e.exports=a.default},"./src/util/prevent-click.js":function srcUtilPreventClickJs(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(){document.body.addEventListener("click",t,!0)};function t(e){e.stopPropagation();document.body.removeEventListener("click",t,!0)}e.exports=a.default},"./src/util/request-animation-frame.js":function srcUtilRequestAnimationFrameJs(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;var t=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)}).bind(window);a.default=t;e.exports=a.default},"./src/util/style.js":function srcUtilStyleJs(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(e,a){Object.keys(a).forEach(function(t){if(e.style[t]!==a[t]){e.style[t]=a[t]}});return e};e.exports=a.default},"./src/wavesurfer.js":function srcWavesurferJs(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;var m=s(t("./src/util/index.js")),v=r(t("./src/drawer.multicanvas.js")),g=r(t("./src/webaudio.js")),k=r(t("./src/mediaelement.js")),h=r(t("./src/peakcache.js")),b=r(t("./src/mediaelement-webaudio.js"));function r(e){return e&&e.__esModule?e:{default:e}}function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;n=function(){return e};return e}function s(e){if(e&&e.__esModule){return e}if(null===e||"object"!==o(e)&&"function"!=typeof e){return{default:e}}var a=n();if(a&&a.has(e)){return a.get(e)}var t={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e){if(Object.prototype.hasOwnProperty.call(e,s)){var i=r?Object.getOwnPropertyDescriptor(e,s):null;if(i&&(i.get||i.set)){Object.defineProperty(t,s,i)}else{t[s]=e[s]}}}t.default=e;if(a){a.set(e,t)}return t}function o(e){if("function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)){o=function(e){return _typeof2(e)}}else{o=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)}}return o(e)}function i(e,a){if(a&&("object"===o(a)||"function"==typeof a)){return a}return d(e)}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return l(e)}function d(e){if(void 0===e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function u(e,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}});if(a)c(e,a)}function c(e,a){c=Object.setPrototypeOf||function(e,a){e.__proto__=a;return e};return c(e,a)}function p(e,a){if(!(e instanceof a)){throw new TypeError("Cannot call a class as a function")}}function f(e,a){for(var t=0,r;t<a.length;t++){r=a[t];r.enumerable=r.enumerable||!1;r.configurable=!0;if("value"in r)r.writable=!0;Object.defineProperty(e,r.key,r)}}function y(e,a,t){if(a)f(e.prototype,a);if(t)f(e,t);return e}var P=function(){y(e,[{key:"create",value:function(){}}]);function e(){p(this,e)}y(e,[{key:"init",value:function(){}},{key:"destroy",value:function(){}}]);return e}(),w=function(e){u(a,e);y(a,null,[{key:"create",value:function(e){var t=new a(e);return t.init()}}]);function a(e){var t;p(this,a);t=i(this,l(a).call(this));t.defaultParams={audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:v.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,waveColor:"#999",xhr:{}};t.backends={MediaElement:k.default,WebAudio:g.default,MediaElementWebAudio:b.default};t.util=m;t.params=Object.assign({},t.defaultParams,e);t.container="string"==typeof e.container?document.querySelector(t.params.container):t.params.container;if(!t.container){throw new Error("Container element not found")}if(null==t.params.mediaContainer){t.mediaContainer=t.container}else if("string"==typeof t.params.mediaContainer){t.mediaContainer=document.querySelector(t.params.mediaContainer)}else{t.mediaContainer=t.params.mediaContainer}if(!t.mediaContainer){throw new Error("Media Container element not found")}if(1>=t.params.maxCanvasWidth){throw new Error("maxCanvasWidth must be greater than 1")}else if(1==t.params.maxCanvasWidth%2){throw new Error("maxCanvasWidth must be an even number")}if(!0===t.params.rtl){m.style(t.container,{transform:"rotateY(180deg)"})}if(t.params.backgroundColor){t.setBackgroundColor(t.params.backgroundColor)}t.savedVolume=0;t.isMuted=!1;t.tmpEvents=[];t.currentRequest=null;t.arraybuffer=null;t.drawer=null;t.backend=null;t.peakCache=null;if("function"!=typeof t.params.renderer){throw new Error("Renderer parameter is invalid")}t.Drawer=t.params.renderer;if("AudioElement"==t.params.backend){t.params.backend="MediaElement"}if(("WebAudio"==t.params.backend||"MediaElementWebAudio"===t.params.backend)&&!g.default.prototype.supportsWebAudio.call(null)){t.params.backend="MediaElement"}t.Backend=t.backends[t.params.backend];t.initialisedPluginList={};t.isDestroyed=!1;t.isReady=!1;var r=0;t._onResize=m.debounce(function(){if(r!=t.drawer.wrapper.clientWidth&&!t.params.scrollParent){r=t.drawer.wrapper.clientWidth;t.drawer.fireEvent("redraw")}},"number"==typeof t.params.responsive?t.params.responsive:100);return i(t,d(t))}y(a,[{key:"init",value:function(){this.registerPlugins(this.params.plugins);this.createDrawer();this.createBackend();this.createPeakCache();return this}},{key:"registerPlugins",value:function(e){var a=this;e.forEach(function(e){return a.addPlugin(e)});e.forEach(function(e){if(!e.deferInit){a.initPlugin(e.name)}});this.fireEvent("plugins-registered",e);return this}},{key:"getActivePlugins",value:function(){return this.initialisedPluginList}},{key:"addPlugin",value:function(e){var a=this;if(!e.name){throw new Error("Plugin does not have a name!")}if(!e.instance){throw new Error("Plugin ".concat(e.name," does not have an instance property!"))}if(e.staticProps){Object.keys(e.staticProps).forEach(function(t){a[t]=e.staticProps[t]})}var t=e.instance,r=Object.getOwnPropertyNames(m.Observer.prototype);r.forEach(function(e){t.prototype[e]=m.Observer.prototype[e]});this[e.name]=new t(e.params||{},this);this.fireEvent("plugin-added",e.name);return this}},{key:"initPlugin",value:function(e){if(!this[e]){throw new Error("Plugin ".concat(e," has not been added yet!"))}if(this.initialisedPluginList[e]){this.destroyPlugin(e)}this[e].init();this.initialisedPluginList[e]=!0;this.fireEvent("plugin-initialised",e);return this}},{key:"destroyPlugin",value:function(e){if(!this[e]){throw new Error("Plugin ".concat(e," has not been added yet and cannot be destroyed!"))}if(!this.initialisedPluginList[e]){throw new Error("Plugin ".concat(e," is not active and cannot be destroyed!"))}if("function"!=typeof this[e].destroy){throw new Error("Plugin ".concat(e," does not have a destroy function!"))}this[e].destroy();delete this.initialisedPluginList[e];this.fireEvent("plugin-destroyed",e);return this}},{key:"destroyAllPlugins",value:function(){var e=this;Object.keys(this.initialisedPluginList).forEach(function(a){return e.destroyPlugin(a)})}},{key:"createDrawer",value:function(){var a=this;this.drawer=new this.Drawer(this.container,this.params);this.drawer.init();this.fireEvent("drawer-created",this.drawer);if(!1!==this.params.responsive){window.addEventListener("resize",this._onResize,!0);window.addEventListener("orientationchange",this._onResize,!0)}this.drawer.on("redraw",function(){a.drawBuffer();a.drawer.progress(a.backend.getPlayedPercents())});this.drawer.on("click",function(t,e){setTimeout(function(){return a.seekTo(e)},0)});this.drawer.on("scroll",function(t){if(a.params.partialRender){a.drawBuffer()}a.fireEvent("scroll",t)})}},{key:"createBackend",value:function(){var e=this;if(this.backend){this.backend.destroy()}this.backend=new this.Backend(this.params);this.backend.init();this.fireEvent("backend-created",this.backend);this.backend.on("finish",function(){e.drawer.progress(e.backend.getPlayedPercents());e.fireEvent("finish")});this.backend.on("play",function(){return e.fireEvent("play")});this.backend.on("pause",function(){return e.fireEvent("pause")});this.backend.on("audioprocess",function(a){e.drawer.progress(e.backend.getPlayedPercents());e.fireEvent("audioprocess",a)});if("MediaElement"===this.params.backend||"MediaElementWebAudio"===this.params.backend){this.backend.on("seek",function(){e.drawer.progress(e.backend.getPlayedPercents())});this.backend.on("volume",function(){var a=e.getVolume();e.fireEvent("volume",a);if(e.backend.isMuted!==e.isMuted){e.isMuted=e.backend.isMuted;e.fireEvent("mute",e.isMuted)}})}}},{key:"createPeakCache",value:function(){if(this.params.partialRender){this.peakCache=new h.default}}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(e){if(e>=this.getDuration()){this.seekTo(1)}else{this.seekTo(e/this.getDuration())}}},{key:"play",value:function(e,a){var t=this;this.fireEvent("interaction",function(){return t.play(e,a)});return this.backend.play(e,a)}},{key:"setPlayEnd",value:function(e){this.backend.setPlayEnd(e)}},{key:"pause",value:function(){if(!this.backend.isPaused()){return this.backend.pause()}}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(e){this.skip(-e||-this.params.skipLength)}},{key:"skipForward",value:function(e){this.skip(e||this.params.skipLength)}},{key:"skip",value:function(e){var a=this.getDuration()||1,t=this.getCurrentTime()||0;t=Math.max(0,Math.min(a,t+(e||0)));this.seekAndCenter(t/a)}},{key:"seekAndCenter",value:function(e){this.seekTo(e);this.drawer.recenter(e)}},{key:"seekTo",value:function(e){var a=this;if("number"!=typeof e||!isFinite(e)||0>e||1<e){throw new Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!")}this.fireEvent("interaction",function(){return a.seekTo(e)});var t=this.backend.isPaused();if(!t){this.backend.pause()}var r=this.params.scrollParent;this.params.scrollParent=!1;this.backend.seekTo(e*this.getDuration());this.drawer.progress(e);if(!t){this.backend.play()}this.params.scrollParent=r;this.fireEvent("seek",e)}},{key:"stop",value:function(){this.pause();this.seekTo(0);this.drawer.progress(0)}},{key:"setSinkId",value:function(e){return this.backend.setSinkId(e)}},{key:"setVolume",value:function(e){this.backend.setVolume(e);this.fireEvent("volume",e)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(e){this.backend.setPlaybackRate(e)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(e){if(e===this.isMuted){this.fireEvent("mute",this.isMuted);return}if(e){this.savedVolume=this.backend.getVolume();this.backend.setVolume(0);this.isMuted=!0;this.fireEvent("volume",0)}else{this.backend.setVolume(this.savedVolume);this.isMuted=!1;this.fireEvent("volume",this.savedVolume)}this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent;this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){return this.params.waveColor}},{key:"setWaveColor",value:function(e){this.params.waveColor=e;this.drawBuffer()}},{key:"getProgressColor",value:function(){return this.params.progressColor}},{key:"setProgressColor",value:function(e){this.params.progressColor=e;this.drawBuffer()}},{key:"getBackgroundColor",value:function(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function(e){this.params.backgroundColor=e;m.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(e){this.params.cursorColor=e;this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(e){this.params.height=e;this.drawer.setHeight(e*this.params.pixelRatio);this.drawBuffer()}},{key:"drawBuffer",value:function(){var e=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),a=this.drawer.getWidth(),t=e,r=0,n=Math.max(r+a,t);if(this.params.fillParent&&(!this.params.scrollParent||e<a)){t=a;r=0;n=t}var s;if(this.params.partialRender){var o=this.peakCache.addRangeToPeakCache(t,r,n),l;for(l=0;l<o.length;l++){s=this.backend.getPeaks(t,o[l][0],o[l][1]);this.drawer.drawPeaks(s,t,o[l][0],o[l][1])}}else{s=this.backend.getPeaks(t,r,n);this.drawer.drawPeaks(s,t,r,n)}this.fireEvent("redraw",s,t)}},{key:"zoom",value:function(e){if(!e){this.params.minPxPerSec=this.defaultParams.minPxPerSec;this.params.scrollParent=!1}else{this.params.minPxPerSec=e;this.params.scrollParent=!0}this.drawBuffer();this.drawer.progress(this.backend.getPlayedPercents());this.drawer.recenter(this.getCurrentTime()/this.getDuration());this.fireEvent("zoom",e)}},{key:"loadArrayBuffer",value:function(e){var a=this;this.decodeArrayBuffer(e,function(e){if(!a.isDestroyed){a.loadDecodedBuffer(e)}})}},{key:"loadDecodedBuffer",value:function(e){this.backend.load(e);this.drawBuffer();this.isReady=!0;this.fireEvent("ready")}},{key:"loadBlob",value:function(e){var a=this,t=new FileReader;t.addEventListener("progress",function(t){return a.onProgress(t)});t.addEventListener("load",function(t){return a.loadArrayBuffer(t.target.result)});t.addEventListener("error",function(){return a.fireEvent("error","Error reading file")});t.readAsArrayBuffer(e);this.empty()}},{key:"load",value:function(e,a,t,r){if(!e){throw new Error("url parameter cannot be empty")}this.empty();if(t){var n={"Preload is not 'auto', 'none' or 'metadata'":-1===["auto","metadata","none"].indexOf(t),"Peaks are not provided":!a,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":-1===["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend),"Url is not of type string":"string"!=typeof e},s=Object.keys(n).filter(function(e){return n[e]});if(s.length){console.warn("Preload parameter of wavesurfer.load will be ignored because:\n\t- "+s.join("\n\t- "));t=null}}switch(this.params.backend){case"WebAudio":return this.loadBuffer(e,a,r);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(e,a,t,r);}}},{key:"loadBuffer",value:function(e,a,t){var r=this,n=function(a){if(a){r.tmpEvents.push(r.once("ready",a))}return r.getArrayBuffer(e,function(e){return r.loadArrayBuffer(e)})};if(a){this.backend.setPeaks(a,t);this.drawBuffer();this.tmpEvents.push(this.once("interaction",n))}else{return n()}}},{key:"loadMediaElement",value:function(e,a,t,r){var n=this,s=e;if("string"==typeof e){this.backend.load(s,this.mediaContainer,a,t)}else{var o=e;this.backend.loadElt(o,a);s=o.src}this.tmpEvents.push(this.backend.once("canplay",function(){if(!n.backend.destroyed){n.drawBuffer();n.isReady=!0;n.fireEvent("ready")}}),this.backend.once("error",function(e){return n.fireEvent("error",e)}));if(a){this.backend.setPeaks(a,r)}if((!a||this.params.forceDecode)&&this.backend.supportsWebAudio()){this.getArrayBuffer(s,function(e){n.decodeArrayBuffer(e,function(e){n.backend.buffer=e;n.backend.setPeaks(null);n.drawBuffer();n.fireEvent("waveform-ready")})})}}},{key:"decodeArrayBuffer",value:function(e,a){var t=this;this.arraybuffer=e;this.backend.decodeArrayBuffer(e,function(r){if(!t.isDestroyed&&t.arraybuffer==e){a(r);t.arraybuffer=null}},function(){return t.fireEvent("error","Error decoding audiobuffer")})}},{key:"getArrayBuffer",value:function(e,a){var t=this,r=Object.assign({url:e,responseType:"arraybuffer"},this.params.xhr),n=m.fetchFile(r);this.currentRequest=n;this.tmpEvents.push(n.on("progress",function(a){t.onProgress(a)}),n.on("success",function(e){a(e);t.currentRequest=null}),n.on("error",function(a){t.fireEvent("error",a);t.currentRequest=null}));return n}},{key:"onProgress",value:function(a){var e;if(a.lengthComputable){e=a.loaded/a.total}else{e=a.loaded/(a.loaded+1e6)}this.fireEvent("loading",Math.round(100*e),a.target)}},{key:"exportPCM",value:function(e,a,t,r,n){e=e||1024;r=r||0;a=a||1e4;t=t||!1;var s=this.backend.getPeaks(e,r,n),o=[].map.call(s,function(e){return Math.round(e*a)/a});return new Promise(function(e){var a=JSON.stringify(o);if(!t){window.open("data:application/json;charset=utf-8,"+encodeURIComponent(a))}e(a)})}},{key:"exportImage",value:function(e,a,t){if(!e){e="image/png"}if(!a){a=1}if(!t){t="dataURL"}return this.drawer.getImage(e,a,t)}},{key:"cancelAjax",value:function(){if(this.currentRequest&&this.currentRequest.controller){this.currentRequest.controller.abort();this.currentRequest=null}}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach(function(a){return a.un()})}},{key:"empty",value:function(){if(!this.backend.isPaused()){this.stop();this.backend.disconnectSource()}this.isReady=!1;this.cancelAjax();this.clearTmpEvents();this.drawer.progress(0);this.drawer.setWidth(0);this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins();this.fireEvent("destroy");this.cancelAjax();this.clearTmpEvents();this.unAll();if(!1!==this.params.responsive){window.removeEventListener("resize",this._onResize,!0);window.removeEventListener("orientationchange",this._onResize,!0)}if(this.backend){this.backend.destroy()}if(this.drawer){this.drawer.destroy()}this.isDestroyed=!0;this.isReady=!1;this.arraybuffer=null}}]);return a}(m.Observer);a.default=w;w.VERSION="3.3.3";w.util=m;e.exports=a.default},"./src/webaudio.js":function srcWebaudioJs(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;var m=n(t("./src/util/index.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;r=function(){return e};return e}function n(e){if(e&&e.__esModule){return e}if(null===e||"object"!==s(e)&&"function"!=typeof e){return{default:e}}var a=r();if(a&&a.has(e)){return a.get(e)}var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;if(i&&(i.get||i.set)){Object.defineProperty(t,o,i)}else{t[o]=e[o]}}}t.default=e;if(a){a.set(e,t)}return t}function s(e){if("function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)){s=function(e){return _typeof2(e)}}else{s=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)}}return s(e)}function o(e,a,t){if(a in e){Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0})}else{e[a]=t}return e}function i(e,a){if(!(e instanceof a)){throw new TypeError("Cannot call a class as a function")}}function l(e,a){if(a&&("object"===s(a)||"function"==typeof a)){return a}return d(e)}function d(e){if(void 0===e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return u(e)}function c(e,a){for(var t=0,r;t<a.length;t++){r=a[t];r.enumerable=r.enumerable||!1;r.configurable=!0;if("value"in r)r.writable=!0;Object.defineProperty(e,r.key,r)}}function p(e,a,t){if(a)c(e.prototype,a);if(t)c(e,t);return e}function f(e,a){if("function"!=typeof a&&null!==a){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}});if(a)y(e,a)}function y(e,a){y=Object.setPrototypeOf||function(e,a){e.__proto__=a;return e};return y(e,a)}var v=function(e){f(a,e);p(a,[{key:"supportsWebAudio",value:function(){return!!(window.AudioContext||window.webkitAudioContext)}},{key:"getAudioContext",value:function(){if(!window.WaveSurferAudioContext){window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)}return window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(e){if(!window.WaveSurferOfflineAudioContext){window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,e)}return window.WaveSurferOfflineAudioContext}}]);function a(e){var t,r,n;i(this,a);n=l(this,u(a).call(this));n.audioContext=null;n.offlineAudioContext=null;n.stateBehaviors=(t={},o(t,"playing",{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),o(t,"paused",{init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition}}),o(t,"finished",{init:function(){this.removeOnAudioProcess();this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),t);n.params=e;n.ac=e.audioContext||(n.supportsWebAudio()?n.getAudioContext():{});n.lastPlay=n.ac.currentTime;n.startPosition=0;n.scheduledPause=null;n.states=(r={},o(r,"playing",Object.create(n.stateBehaviors.playing)),o(r,"paused",Object.create(n.stateBehaviors.paused)),o(r,"finished",Object.create(n.stateBehaviors.finished)),r);n.buffer=null;n.filters=[];n.gainNode=null;n.mergedPeaks=null;n.offlineAc=null;n.peaks=null;n.playbackRate=1;n.analyser=null;n.scriptNode=null;n.source=null;n.splitPeaks=[];n.state=null;n.explicitDuration=e.duration;n.destroyed=!1;return n}p(a,[{key:"init",value:function(){this.createVolumeNode();this.createScriptNode();this.createAnalyserNode();this.setState("paused");this.setPlaybackRate(this.params.audioRate);this.setLength(0)}},{key:"disconnectFilters",value:function(){if(this.filters){this.filters.forEach(function(e){e&&e.disconnect()});this.filters=null;this.analyser.connect(this.gainNode)}}},{key:"setState",value:function(e){if(this.state!==this.states[e]){this.state=this.states[e];this.state.init.call(this)}}},{key:"setFilter",value:function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++){a[t]=arguments[t]}this.setFilters(a)}},{key:"setFilters",value:function(e){this.disconnectFilters();if(e&&e.length){this.filters=e;this.analyser.disconnect();e.reduce(function(e,a){e.connect(a);return a},this.analyser).connect(this.gainNode)}}},{key:"createScriptNode",value:function(){if(this.params.audioScriptProcessor){this.scriptNode=this.params.audioScriptProcessor}else{if(this.ac.createScriptProcessor){this.scriptNode=this.ac.createScriptProcessor(a.scriptBufferSize)}else{this.scriptNode=this.ac.createJavaScriptNode(a.scriptBufferSize)}}this.scriptNode.connect(this.ac.destination)}},{key:"addOnAudioProcess",value:function(){var e=this;this.scriptNode.onaudioprocess=function(){var a=e.getCurrentTime();if(a>=e.getDuration()){e.setState("finished");e.fireEvent("pause")}else if(a>=e.scheduledPause){e.pause()}else if(e.state===e.states.playing){e.fireEvent("audioprocess",a)}}}},{key:"removeOnAudioProcess",value:function(){this.scriptNode.onaudioprocess=function(){}}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser();this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){if(this.ac.createGain){this.gainNode=this.ac.createGain()}else{this.gainNode=this.ac.createGainNode()}this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(e){if(e){var a=new window.Audio;if(!a.setSinkId){return Promise.reject(new Error("setSinkId is not supported in your browser"))}a.autoplay=!0;var t=this.ac.createMediaStreamDestination();this.gainNode.disconnect();this.gainNode.connect(t);a.srcObject=t.stream;return a.setSinkId(e)}else{return Promise.reject(new Error("Invalid deviceId: "+e))}}},{key:"setVolume",value:function(e){this.gainNode.gain.setValueAtTime(e,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(e,a,t){if(!this.offlineAc){this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)}this.offlineAc.decodeAudioData(e,function(e){return a(e)},t)}},{key:"setPeaks",value:function(e,a){if(null!=a){this.explicitDuration=a}this.peaks=e}},{key:"setLength",value:function(e){if(this.mergedPeaks&&e==2*this.mergedPeaks.length-1+2){return}this.splitPeaks=[];this.mergedPeaks=[];var a=this.buffer?this.buffer.numberOfChannels:1,t;for(t=0;t<a;t++){this.splitPeaks[t]=[];this.splitPeaks[t][2*(e-1)]=0;this.splitPeaks[t][2*(e-1)+1]=0}this.mergedPeaks[2*(e-1)]=0;this.mergedPeaks[2*(e-1)+1]=0}},{key:"getPeaks",value:function(e,a,t){if(this.peaks){return this.peaks}if(!this.buffer){return[]}a=a||0;t=t||e-1;this.setLength(e);if(!this.buffer){return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}if(!this.buffer.length){var r=this.createBuffer(1,4096,this.sampleRate);this.buffer=r.buffer}var n=this.buffer.length/e,s=this.buffer.numberOfChannels,o;for(o=0;o<s;o++){var l=this.splitPeaks[o],d=this.buffer.getChannelData(o),u=void 0;for(u=a;u<=t;u++){var p=~~(u*n),f=0,y=0,m=void 0;for(m=p;m<~~(p+n);m+=~~(n/10)||1){var v=d[m];if(v>y){y=v}if(v<f){f=v}}l[2*u]=y;l[2*u+1]=f;if(0==o||y>this.mergedPeaks[2*u]){this.mergedPeaks[2*u]=y}if(0==o||f<this.mergedPeaks[2*u+1]){this.mergedPeaks[2*u+1]=f}}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){if(this.source){this.source.disconnect()}}},{key:"destroy",value:function(){if(!this.isPaused()){this.pause()}this.unAll();this.buffer=null;this.destroyed=!0;this.disconnectFilters();this.disconnectSource();this.gainNode.disconnect();this.scriptNode.disconnect();this.analyser.disconnect();if(this.params.closeAudioContext){if("function"==typeof this.ac.close&&"closed"!=this.ac.state){this.ac.close()}this.ac=null;if(!this.params.audioContext){window.WaveSurferAudioContext=null}else{this.params.audioContext=null}window.WaveSurferOfflineAudioContext=null}}},{key:"load",value:function(e){this.startPosition=0;this.lastPlay=this.ac.currentTime;this.buffer=e;this.createSource()}},{key:"createSource",value:function(){this.disconnectSource();this.source=this.ac.createBufferSource();this.source.start=this.source.start||this.source.noteGrainOn;this.source.stop=this.source.stop||this.source.noteOff;this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime);this.source.buffer=this.buffer;this.source.connect(this.analyser)}},{key:"isPaused",value:function(){return this.state!==this.states.playing}},{key:"getDuration",value:function(){if(this.explicitDuration){return this.explicitDuration}if(!this.buffer){return 0}return this.buffer.duration}},{key:"seekTo",value:function(e,a){if(!this.buffer){return}this.scheduledPause=null;if(null==e){e=this.getCurrentTime();if(e>=this.getDuration()){e=0}}if(null==a){a=this.getDuration()}this.startPosition=e;this.lastPlay=this.ac.currentTime;if(this.state===this.states.finished){this.setState("paused")}return{start:e,end:a}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(e,a){if(!this.buffer){return}this.createSource();var t=this.seekTo(e,a);e=t.start;a=t.end;this.scheduledPause=a;this.source.start(0,e);if("suspended"==this.ac.state){this.ac.resume&&this.ac.resume()}this.setState("playing");this.fireEvent("play")}},{key:"pause",value:function(){this.scheduledPause=null;this.startPosition+=this.getPlayedTime();this.source&&this.source.stop(0);this.setState("paused");this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(e){e=e||1;if(this.isPaused()){this.playbackRate=e}else{this.pause();this.playbackRate=e;this.play()}}},{key:"setPlayEnd",value:function(e){this.scheduledPause=e}}]);return a}(m.Observer);a.default=v;v.scriptBufferSize=256;e.exports=a.default}})});
//# sourceMappingURL=wavesurfer.min.js.map
