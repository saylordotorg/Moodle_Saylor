{"version":3,"sources":["../src/poodll_freshmediaskin.js"],"names":["define","$","jqui","log","utils","settings","anim_progress_bar","hwave","hwave_timer","upskin","debug","instanceprops","pmr","uploaded","devsettings","therecanim","canpause","clone","extend","init","ip","fetch_instanceprops","onUploadSuccess","controlbarid","hide","show","onUploadFailure","fetch_status_bar","skin","fetch_preview_audio","fetch_preview_video","fetch_resource_audio","fetch_resource_video","fetch_uploader_skin","element","theupskin","config","controlbar","bmr_progresscanvas","status","onMediaError","e","console","error","onMediaSuccess_video","uploader","Output","set_visual_mode","timer","reset","start","update_status","onMediaSuccess_audio","preview","attr","handle_timer_update","html","fetch_display_time","seconds","initseconds","startbutton","hasClass","click","mode","self","visualmode","statusText","text","stoprecbutton","playbutton","disable_button","savebutton","recordAgain","enable_button","show_element","hide_element","pausebutton","resumebutton","addClass","removeClass","mediatype","root","finalSeconds","insert_controlbar_video","resource","prepare_controlbar","insert_controlbar_audio","skin_style","media_skin_style","size_class","size","ss","fetch_strings","record_icon","recorder_class","controls","fetch_dialogue_box","downloaddialog","errordialog","prepend","poodll_recording_alert","settingsdialog","errorsdialog","settingsicon","stopbutton","playcanvas","set_dialogue_box","register_controlbar_events_video","onMediaSuccess","register_controlbar_events_audio","open","hprogress","readyBars","recanim","audioanalyser","get","do_stop_audio","pause","clear","stop","do_resume_audio","resume","do_start_audio","do_pause_audio","on","currentTime","do_stopplay_audio","do_play_audio","fetchCurrent","ct","prop","duration","isFinite","finalseconds","playBars","blobs","length","do_save_audio","M","util","get_string","window","onbeforeunload","button"],"mappings":"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","sourcesContent":["/* jshint ignore:start */\r\ndefine(['jquery', 'jqueryui', 'core/log', 'filter_poodll/utils_amd', 'filter_poodll/dlg_devicesettings', 'filter_poodll/anim_progress_bar_fresh', 'filter_poodll/anim_hwave_fresh', 'filter_poodll/anim_hwave_timer', 'filter_poodll/upskin_text'], function ($, jqui, log, utils, settings, anim_progress_bar, hwave, hwave_timer, upskin) {\r\n\r\n    \"use strict\"; // jshint ;_;\r\n\r\n    log.debug('PoodLL BMR Skin: initialising');\r\n\r\n\r\n    return {\r\n\r\n        instanceprops: null,\r\n        pmr: null,\r\n        uploaded: false,\r\n        devsettings: null,\r\n        therecanim: null,\r\n        canpause: true,\r\n        //for making multiple instances\r\n        clone: function () {\r\n            return $.extend(true, {}, this);\r\n        },\r\n\r\n        init: function (ip, pmr) {\r\n            this.instanceprops = ip;\r\n            this.pmr = pmr;\r\n            this.devsettings = settings.clone();\r\n            this.devsettings.init(pmr, ip);\r\n        },\r\n\r\n\r\n        fetch_instanceprops: function () {\r\n            return this.instanceprops;\r\n        },\r\n\r\n\r\n        onUploadSuccess: function (controlbarid) {\r\n            $('#' + controlbarid + ' > .poodll_save-recording').hide();\r\n            // $('#' + controlbarid  + '_messages').hide();\r\n            $('#' + controlbarid + ' > .poodll_savedsuccessfully').show();\r\n        },\r\n\r\n        onUploadFailure: function (controlbarid) {\r\n            return;\r\n        },\r\n\r\n        fetch_status_bar: function (skin) {\r\n            var status = '<div class=\"poodll_status_' + skin + '\">00:00:00</div>';\r\n            return status;\r\n        },\r\n\r\n        fetch_preview_audio: function (skin) {\r\n            var preview = '<audio class=\"poodll_preview_' + skin + '\" style=\"display: none;\" controls playsinline=\"playsinline\" muted></audio>';\r\n            return preview;\r\n        },\r\n        fetch_preview_video: function (skin) {\r\n            var preview = '<video class=\"poodll_preview_' + skin + '\" playsinline=\"playsinline\" muted></video>';\r\n            return preview;\r\n        },\r\n        fetch_resource_audio: function (skin) {\r\n            var resourceplayer = '';\r\n            return resourceplayer;\r\n        },\r\n        fetch_resource_video: function (skin) {\r\n            var resourceplayer = '';\r\n            return resourceplayer;\r\n        },\r\n\r\n        fetch_uploader_skin: function (controlbarid, element) {\r\n            var ip = this.fetch_instanceprops();\r\n            var theupskin = upskin.clone();\r\n            theupskin.init(ip.config, element, ip.controlbar.bmr_progresscanvas, ip.controlbar.status);\r\n            return theupskin;\r\n        },\r\n\r\n        onMediaError: function (e) {\r\n            console.error('media error', e);\r\n        },\r\n\r\n        onMediaSuccess_video: function (controlbarid) {\r\n\r\n            var ip = this.fetch_instanceprops();\r\n            //clear messages\r\n            ip.uploader.Output('');\r\n            this.set_visual_mode('recordmode', controlbarid);\r\n            //timer and status bar\r\n            ip.timer.reset();\r\n            ip.timer.start();\r\n            this.update_status(controlbarid);\r\n        },\r\n\r\n        onMediaSuccess_audio: function (controlbarid) {\r\n\r\n            var ip = this.fetch_instanceprops();\r\n\r\n            //clear messages\r\n            ip.uploader.Output('');\r\n            ip.controlbar.preview.attr('src', null);\r\n            this.set_visual_mode('recordmode', controlbarid);\r\n\r\n            //wave animation\r\n            this.therecanim.start();\r\n\r\n            //timer and status bar\r\n            ip.timer.reset();\r\n            ip.timer.start();\r\n            this.update_status(controlbarid);\r\n\r\n        },\r\n\r\n        handle_timer_update: function (controlbarid) {\r\n            var ip = this.fetch_instanceprops();\r\n            ip.controlbar.status.html(ip.timer.fetch_display_time());\r\n            if (ip.timer.seconds == 0 && ip.timer.initseconds > 0) {\r\n                if (ip.controlbar.startbutton.hasClass('poodll_in_progress')) {\r\n                  ip.controlbar.startbutton.click();\r\n                }\r\n            }\r\n        },\r\n\r\n        update_status: function (controlbarid) {\r\n            var ip = this.fetch_instanceprops();\r\n            ip.controlbar.status.html(ip.timer.fetch_display_time());\r\n\r\n        },\r\n\r\n        //set visuals for different states (ie recording or playing)\r\n        set_visual_mode: function (mode, controlbarid) {\r\n            var self = this;\r\n            var ip = this.fetch_instanceprops();\r\n            this.visualmode = mode;\r\n\r\n            switch (mode) {\r\n\r\n                case 'initmode':\r\n                    ip.controlbar.statusText.text('Ready to record');\r\n                    ip.controlbar.status.html('00:00:00');\r\n\r\n                    ip.controlbar.stoprecbutton.attr('class', 'poodll_stop-recording_fresh poodll_fresh_stop_btn bmr_disabled');\r\n                    ip.controlbar.startbutton.attr('class', 'poodll_start-recording_fresh poodll_fresh_main_btn');\r\n                    ip.controlbar.playbutton.attr('class', 'poodll_play-recording_fresh poodll_fresh_play_btn bmr_disabled');\r\n\r\n                    //ip.controlbar.root.attr('class')\r\n\r\n                    //disable save button\r\n                    self.disable_button(ip.controlbar.savebutton);\r\n                    self.disable_button(ip.controlbar.recordAgain);\r\n                    break;\r\n\r\n                case 'recordmode':\r\n                    ip.controlbar.statusText.text('Recording..');\r\n                    self.enable_button(ip.controlbar.startbutton);\r\n                    self.show_element(ip.controlbar.startbutton);\r\n\r\n                    self.hide_element(ip.controlbar.bmr_progresscanvas);\r\n\r\n                    self.enable_button(ip.controlbar.pausebutton);\r\n                    self.show_element(ip.controlbar.pausebutton);\r\n\r\n                    self.disable_button(ip.controlbar.playbutton);\r\n                    self.hide_element(ip.controlbar.resumebutton);\r\n                    self.enable_button(ip.controlbar.stoprecbutton);\r\n\r\n                    //disable save button\r\n                    self.disable_button(ip.controlbar.savebutton);\r\n                    self.disable_button(ip.controlbar.recordAgain);\r\n\r\n                    ip.controlbar.preview.addClass('poodll_recording');\r\n                    ip.controlbar.status.addClass('poodll_recording');\r\n\r\n                    ip.controlbar.preview.removeClass('poodll_playing');\r\n                    ip.controlbar.status.removeClass('poodll_playing');\r\n\r\n                    ip.controlbar.startbutton\r\n                        .addClass('poodll_in_progress')\r\n                        .removeClass('poodll_resume_button');\r\n\r\n                    ip.controlbar.playbutton\r\n                        .removeClass('poodll_play_special poodll_play_green');\r\n\r\n                    if (ip.config.mediatype == 'audio') {\r\n                        self.hide_element(ip.controlbar.preview);\r\n                    }\r\n\r\n                    ip.controlbar.root.removeClass('poodll_controllbar_playmode');\r\n\r\n                    break;\r\n\r\n                case 'previewmode':\r\n                    ip.controlbar.statusText.text('Ready to Play');\r\n                    self.disable_button(ip.controlbar.stoprecbutton);\r\n                    self.disable_button(ip.controlbar.startbutton);\r\n                    self.enable_button(ip.controlbar.playbutton);\r\n                    self.disable_button(ip.controlbar.pausebutton);\r\n\r\n                    //reset timer button\r\n                    ip.controlbar.status.html(ip.timer.fetch_display_time(ip.timer.finalSeconds));\r\n\r\n\r\n                    //If stop has been pressed there is no \"resuming\"\r\n                    self.show_element(ip.controlbar.startbutton);\r\n\r\n                    self.disable_button(ip.controlbar.resumebutton);\r\n                    self.hide_element(ip.controlbar.resumebutton);\r\n                    self.hide_element(ip.controlbar.bmr_progresscanvas);\r\n                    if (self.uploaded) {\r\n                        self.disable_button(ip.controlbar.savebutton);\r\n                        self.disable_button(ip.controlbar.recordAgain);\r\n                    } else {\r\n                        self.enable_button(ip.controlbar.savebutton);\r\n                        self.enable_button(ip.controlbar.recordAgain);\r\n                    }\r\n\r\n                    self.show_element(ip.controlbar.pausebutton);\r\n\r\n                    ip.controlbar.preview.removeClass('poodll_recording');\r\n                    ip.controlbar.status.removeClass('poodll_recording');\r\n\r\n                    ip.controlbar.preview.removeClass('poodll_playing');\r\n                    ip.controlbar.status.removeClass('poodll_playing');\r\n\r\n\r\n                    ip.controlbar.startbutton.removeClass('poodll_in_progress');\r\n                    ip.controlbar.playbutton\r\n                        .addClass('poodll_play_green')\r\n                        .removeClass('poodll_play_special')\r\n                        .removeClass('poodll_play_pause')\r\n                        .removeClass('poodll_stop_green');\r\n\r\n                    if (ip.config.mediatype == 'audio') {\r\n                        self.show_element(ip.controlbar.preview);\r\n                    }\r\n                    // ip.controlbar.status.addClass('hide');\r\n                    //ip.controlbar.bmr_progresscanvas.removeClass('hide');\r\n                    self.enable_button(ip.controlbar.playbutton);\r\n                    ip.controlbar.root.removeClass('poodll_controllbar_playmode poodll_controllbar_pausemode');\r\n                    break;\r\n\r\n                case 'playmode':\r\n\r\n                    ip.controlbar.statusText.text('Playing');\r\n                    ip.controlbar.status.html('00:00:00');\r\n\r\n                    self.enable_button(ip.controlbar.stoprecbutton);\r\n                    self.enable_button(ip.controlbar.pausebutton);\r\n                    self.disable_button(ip.controlbar.startbutton);\r\n                    self.disable_button(ip.controlbar.resumebutton);\r\n\r\n                    self.disable_button(ip.controlbar.savebutton);\r\n                    self.disable_button(ip.controlbar.recordAgain);\r\n\r\n                    self.show_element(ip.controlbar.bmr_progresscanvas);\r\n\r\n                    ip.controlbar.playbutton\r\n                        .removeClass('poodll_play_green')\r\n                        .removeClass('poodll_play_special')\r\n                        .addClass('poodll_stop_green');\r\n\r\n                    ip.controlbar.preview.addClass('poodll_playing');\r\n                    ip.controlbar.status.addClass('poodll_playing');\r\n\r\n                    //If play has been pressed there is no \"resuming\"\r\n                    self.show_element(ip.controlbar.startbutton);\r\n                    self.hide_element(ip.controlbar.resumebutton);\r\n\r\n                    ip.controlbar.root\r\n                        .addClass('poodll_controllbar_playmode')\r\n                        .removeClass('poodll_controllbar_pausemode');\r\n\r\n                    break;\r\n\r\n\r\n                case 'pausedmode':\r\n                    ip.controlbar.statusText.text('Paused');\r\n                    //self.disable_button(ip.controlbar.pausebutton);\r\n                    //self.hide_element(ip.controlbar.startbutton);\r\n                    self.show_element(ip.controlbar.resumebutton);\r\n                    self.enable_button(ip.controlbar.resumebutton);\r\n                    self.enable_button(ip.controlbar.savebutton);\r\n                    //self.enable_button(ip.controlbar.playbutton);\r\n\r\n                    ip.controlbar.preview.removeClass('poodll_recording');\r\n                    ip.controlbar.status.removeClass('poodll_recording');\r\n                    ip.controlbar.startbutton\r\n                        .removeClass('poodll_in_progress')\r\n                        .addClass('poodll_resume_button');\r\n\r\n                    ip.controlbar.playbutton\r\n                    //.addClass('poodll_play_special')\r\n                        .removeClass('poodll_play_green')\r\n                        .removeClass('poodll_play_pause');\r\n\r\n\r\n                    ip.controlbar.root.addClass('poodll_controllbar_pausemode');\r\n                    break;\r\n\r\n                case 'uploadmode':\r\n                    ip.controlbar.statusText.text('Uploading');\r\n                    self.disable_button(ip.controlbar.savebutton);\r\n                    self.disable_button(ip.controlbar.recordAgain);\r\n                    self.disable_button(ip.controlbar.startbutton);\r\n                    self.show_element(ip.controlbar.bmr_progresscanvas);\r\n\r\n                    ip.controlbar.root.removeClass('poodll_controllbar_playmode poodll_controllbar_pausemode');\r\n                    break;\r\n            }\r\n\r\n        },\r\n\r\n        //insert the control bar and return it to be reused\r\n        insert_controlbar_video: function (element, controlbarid, preview, resource) {\r\n            var controlbar = this.prepare_controlbar(element, controlbarid, preview, resource, 'video');\r\n            return controlbar;\r\n        },\r\n\r\n        //insert the control bar and return it to be reused\r\n        insert_controlbar_audio: function (element, controlbarid, preview, resource) {\r\n            var controlbar = this.prepare_controlbar(element, controlbarid, preview, resource, 'audio');\r\n            return controlbar;\r\n        },\r\n\r\n        //insert the control bar and return it to be reused\r\n        prepare_controlbar: function (element, controlbarid, preview, resource, mediatype) {\r\n            var ip = this.fetch_instanceprops();\r\n            var skin_style = ip.config.media_skin_style;\r\n\r\n            var size_class = 'poodll_mediarecorder_size_auto';\r\n            switch (ip.config.size) {\r\n                case 'small':\r\n                    size_class = 'poodll_mediarecorder_size_small';\r\n                    break;\r\n                case 'big':\r\n                    size_class = 'poodll_mediarecorder_size_big';\r\n                    break;\r\n                case 'auto':\r\n                    size_class = 'poodll_mediarecorder_size_auto';\r\n            }\r\n\r\n            var ss = this.pmr.fetch_strings();\r\n            var record_icon = mediatype == 'video' ? 'fa-video-camera' : 'fa-microphone';\r\n            var recorder_class = mediatype == 'video' ? 'poodll_mediarecorder_video' : 'poodll_mediarecorder_audio';\r\n\r\n            var controls = '<div class=\"poodll_mediarecorderholder_fresh poodll_videorecorderholder_fresh '\r\n                + recorder_class + ' ' + size_class + '\" id=\"holder_' + controlbarid + '\">';\r\n\r\n            controls += '<div class=\"poodll_mediarecorderbox_fresh\" id=\"' + controlbarid + '\">';\r\n            controls += '<audio style=\"display: none !important;\" class=\"poodll-alert-recording\" id=\"' + controlbarid + '\"><source src=\"#\" type=\"audio/mpeg\"></audio>';\r\n\r\n            controls += '<div class=\"style-holder ' + skin_style + '\">';\r\n            controls += '<div class=\"poodll_statusholder_fresh\" >';\r\n            var status = this.fetch_status_bar('fresh');\r\n            controls += status;\r\n            controls += '</div>';\r\n\r\n            controls += '<div class=\"poodll_fresh_musik_line\">' +\r\n                '<canvas class=\"fresh_range\"></canvas>' +\r\n                '<canvas id=\"' + controlbarid + '_playcanvas\" class=\"poodll_fresh_playcanvas\" width=\"300\" height=\"50\"></canvas>' +\r\n                '<div class=\"poodll_fresh_wave\"></div>' +\r\n                '</div>' +\r\n                '<div class=\"poodll_fresh_control\">' +\r\n                '<div class=\"poodll_fresh_txt_control\">' + ss['recui_readytorecord'] + '</div>' +\r\n                '<div class=\"poodll_fresh_settings_btn settingsicon\" data-toggle=\"modal\" data-target=\"#myModal id=\"settingsicon_' + controlbarid + '\"></div>' +\r\n                '<div class=\"poodll_start-recording_fresh poodll_fresh_main_btn\"></div>' +\r\n                '<div class=\"poodll_stop-playing-recording_fresh\" style=\"display: none;\"></div>' +\r\n                '<div class=\"poodll_pause-recording_fresh poodll_fresh_pause_btn bmr_disabled\"></div>' +\r\n                '<div class=\"poodll_play-recording_fresh poodll_fresh_play_btn bmr_disabled\"></div>' +\r\n                '</div>' +\r\n                '<div class=\"poodll_fresh_bottom_btns\">' +\r\n                '<a class=\"poodll_save-recording_fresh poodll_fresh_upload_btn bmr_disabled\" href=\"#\">' + ss['recui_upload'] + '</a>' +\r\n                '<a class=\"poodll_fresh_record_btn bmr_disabled\" href=\"#\">' + ss['recui_recordagain'] + '</a>' +\r\n                '</div>';\r\n\r\n            controls += preview;\r\n            controls += '</div>';\r\n            controls += this.devsettings.fetch_dialogue_box();\r\n            controls += ip.downloaddialog.fetch_dialogue_box();\r\n            controls += ip.errordialog.fetch_dialogue_box();\r\n            controls += '</div>';\r\n            controls += '</div>';\r\n            $(element).prepend(controls);\r\n            var controlbar = {\r\n                poodll_recording_alert: $('#' + controlbarid + ' .poodll-alert-recording'),\r\n                bmr_progresscanvas: $('#' + controlbarid + ' .fresh_range'),\r\n                settingsdialog: $('#' + controlbarid + ' .poodll_dialogue_box_settings'),\r\n                downloaddialog: $('#' + controlbarid + ' .poodll_dialogue_box_download'),\r\n                errorsdialog: $('#' + controlbarid + ' .poodll_dialogue_box_errors'),\r\n                settingsicon: $('#' + controlbarid + ' .settingsicon'),\r\n                status: $('#' + controlbarid + ' .poodll_status_fresh'),\r\n                statusText: $('#' + controlbarid + ' .poodll_fresh_txt_control'),\r\n                preview: $('#' + controlbarid + ' .poodll_preview_fresh'),\r\n                startbutton: $('#' + controlbarid + ' .poodll_start-recording_fresh'),\r\n                stoprecbutton: $('#' + controlbarid + ' .poodll_stop-recording_fresh'),\r\n                pausebutton: $('#' + controlbarid + ' .poodll_pause-recording_fresh'),\r\n                resumebutton: $('#' + controlbarid + ' .poodll_resume-recording_fresh'),\r\n                playbutton: $('#' + controlbarid + ' .poodll_play-recording_fresh'),\r\n                stopbutton: $('#' + controlbarid + ' .poodll_stop-playing-recording_fresh'),\r\n                savebutton: $('#' + controlbarid + ' .poodll_save-recording_fresh'),\r\n                recordAgain: $('#' + controlbarid + ' .poodll_fresh_record_btn'),\r\n                playcanvas: $('#' + controlbarid + '_playcanvas'),\r\n                root: $('#' + controlbarid)\r\n            };\r\n\r\n\r\n            //settings and error dialogs\r\n            //They use the same dialog and just fill it with diofferent stuff\r\n            //settings is on 'this' because it is shown from skkn events, but errors are from pmr stuff\r\n            ip.downloaddialog.set_dialogue_box(controlbar.downloaddialog);\r\n            ip.errordialog.set_dialogue_box(controlbar.errorsdialog);\r\n            this.devsettings.set_dialogue_box(controlbar.settingsdialog);\r\n            return controlbar;\r\n\r\n        }, //end of fetch_control_bar_bmr\r\n\r\n\r\n        register_controlbar_events_video: function (onMediaSuccess, controlbarid) {\r\n            return this.register_controlbar_events_audio(onMediaSuccess, controlbarid);\r\n        },\r\n\r\n        register_controlbar_events_audio: function (onMediaSuccess, controlbarid) {\r\n            var self = this;\r\n            var pmr = this.pmr;\r\n            var ip = this.fetch_instanceprops();\r\n\r\n            //Open the settings dialog\r\n            ip.controlbar.settingsicon.click(function () {\r\n                if (!self.uploaded) {\r\n                    self.devsettings.open();\r\n                } else {\r\n                    ip.downloaddialog.open();\r\n                }\r\n            });\r\n\r\n            //init progress bar\r\n            var hprogress = anim_progress_bar.clone();\r\n            hprogress.init(ip.controlbar.bmr_progresscanvas);\r\n\r\n            hprogress.readyBars();\r\n\r\n            var recanim = hwave.clone();\r\n            recanim.init(ip.audioanalyser, ip.controlbar.playcanvas.get(0));\r\n\r\n            /*\r\n            START BUTTON\r\n            */\r\n            ip.controlbar.startbutton.click(function () {\r\n\r\n                //Play alert sound\r\n                //ip.controlbar.poodll_recording_alert.get(0).play();\r\n\r\n                //start recording\r\n                if ($(this).hasClass('poodll_in_progress')) {\r\n\r\n                    //stop the audio\r\n                    pmr.do_stop_audio(ip);\r\n\r\n                    var preview = ip.controlbar.preview;\r\n                    if (preview && preview.get(0)) {\r\n                        preview.get(0).pause();\r\n                    }\r\n\r\n                    recanim.clear();\r\n\r\n                    //timer and status bar\r\n                    ip.timer.stop();\r\n                    self.update_status(controlbarid);\r\n\r\n                    //do visuals\r\n                    self.set_visual_mode('previewmode', controlbarid);\r\n\r\n                } else if ($(this).hasClass('poodll_resume_button')) {\r\n                    pmr.do_resume_audio(ip);\r\n\r\n                    //timer and status bar\r\n                    ip.timer.resume();\r\n                    self.update_status(controlbarid);\r\n                    //do visuals\r\n                    self.set_visual_mode('recordmode', controlbarid);\r\n                } else {\r\n\r\n                    self.therecanim = recanim;\r\n                    pmr.do_start_audio(ip, onMediaSuccess);\r\n\r\n                }\r\n\r\n\r\n            });\r\n\r\n            ip.controlbar.recordAgain.click(function () {\r\n                pmr.do_stop_audio(ip);\r\n\r\n                self.update_status(controlbarid);\r\n                //do visuals\r\n                self.set_visual_mode('initmode', controlbarid);\r\n\r\n                //self.therecanim = recanim;\r\n                //pmr.do_start_audio(ip, onMediaSuccess);\r\n            });\r\n\r\n            ip.controlbar.stoprecbutton.click(function () {\r\n                //stop the audio\r\n                pmr.do_stop_audio(ip);\r\n\r\n                var preview = ip.controlbar.preview;\r\n                if (preview && preview.get(0)) {\r\n                    preview.get(0).pause();\r\n                }\r\n\r\n                recanim.clear();\r\n\r\n                //timer and status bar\r\n                ip.timer.stop();\r\n                self.update_status(controlbarid);\r\n\r\n                //do visuals\r\n                self.set_visual_mode('previewmode', controlbarid);\r\n\r\n            });\r\n\r\n            ip.controlbar.pausebutton.click(function () {\r\n\r\n                pmr.do_pause_audio(ip);\r\n                //pmr.do_stop_audio(ip);\r\n                var preview = ip.controlbar.preview;\r\n                if (preview && preview.get(0)) {\r\n                    preview.get(0).pause();\r\n                    preview.get(0).controls = false;\r\n                }\r\n                console.log('PAUSE');\r\n                //timer and status bar\r\n                ip.timer.pause();\r\n                self.update_status(controlbarid);\r\n                //do visuals\r\n                self.set_visual_mode('pausedmode', controlbarid);\r\n\r\n            });\r\n\r\n\r\n            ip.controlbar.resumebutton.click(function () {\r\n\r\n                pmr.do_resume_audio(ip);\r\n\r\n                //timer and status bar\r\n                ip.timer.resume();\r\n                self.update_status(controlbarid);\r\n                //do visuals\r\n                self.set_visual_mode('recordmode', controlbarid);\r\n            });\r\n\r\n            ip.controlbar.preview.on('timeupdate', function () {\r\n                if (self.visualmode != 'playmode') {\r\n                    return;\r\n                }\r\n                var currentTime = this.currentTime;\r\n                ip.controlbar.status.html(ip.timer.fetch_display_time(currentTime));\r\n            });\r\n\r\n            //this is really just a fudge because PMR expects the stopbutton to be the stop playback button\r\n            //but in this recorder, the stop playback button is the \"play\" button\r\n            //so we double up the code just so that when PMR calls it when playback ends, we reset playback state\r\n            ip.controlbar.stopbutton.click(function () {\r\n                //stop the audio\r\n                pmr.do_stop_audio(ip);\r\n\r\n                var preview = ip.controlbar.preview;\r\n                if (preview && preview.get(0)) {\r\n                    preview.get(0).pause();\r\n                }\r\n\r\n                recanim.clear();\r\n\r\n                //timer and status bar\r\n                ip.timer.stop();\r\n                self.update_status(controlbarid);\r\n\r\n                //do visuals\r\n                self.set_visual_mode('previewmode', controlbarid);\r\n            });\r\n\r\n            /*\r\n             PLAY BUTTON\r\n             */\r\n\r\n            ip.controlbar.playbutton.click(function () {\r\n\r\n                if ($(this).hasClass('poodll_play_pause')) {\r\n\r\n                    var preview = ip.controlbar.preview.get(0);\r\n\r\n                    // if(preview && preview.get(0)){\r\n                    //     preview.get(0).pause();\r\n                    //     preview.get(0).controls = false;\r\n                    // }\r\n\r\n                    pmr.do_stopplay_audio(ip, preview);\r\n                    pmr.do_stop_audio(ip);\r\n\r\n                    //timer and status bar\r\n                    ip.timer.pause();\r\n                    self.update_status(controlbarid);\r\n                    //do visuals\r\n                    self.set_visual_mode('pausedmode', controlbarid);\r\n\r\n\r\n                } else if ($(this).hasClass('poodll_stop_green')) {\r\n\r\n                    //stop the audio\r\n                    pmr.do_stop_audio(ip);\r\n\r\n                    var preview = ip.controlbar.preview;\r\n                    if (preview && preview.get(0)) {\r\n                        preview.get(0).pause();\r\n                    }\r\n\r\n                    recanim.clear();\r\n\r\n                    //timer and status bar\r\n                    ip.timer.stop();\r\n                    self.update_status(controlbarid);\r\n\r\n                    //do visuals\r\n                    self.set_visual_mode('previewmode', controlbarid);\r\n\r\n                } else {\r\n\r\n                    var preview = ip.controlbar.preview.get(0);\r\n                    pmr.do_play_audio(ip, preview);\r\n\r\n                    //do visuals\r\n                    self.set_visual_mode('playmode', controlbarid);\r\n\r\n                    //start animation\r\n                    hprogress.clear();\r\n                    hprogress.fetchCurrent = function () {\r\n                        var ct = ip.controlbar.preview.prop('currentTime');\r\n                        var duration = ip.controlbar.preview.prop('duration');\r\n                        if (!isFinite(duration)) {\r\n                            duration = ip.timer.finalseconds;\r\n                        }\r\n                        return ct / duration;\r\n                    };\r\n                    hprogress.start();\r\n\r\n                    var ct = ip.controlbar.preview.prop('currentTime');\r\n                    var duration = ip.controlbar.preview.prop('duration');\r\n                    hprogress.playBars(ct, duration);\r\n\r\n                }\r\n            });\r\n\r\n            ip.controlbar.savebutton.click(function () {\r\n\r\n                if (ip.blobs && ip.blobs.length > 0) {\r\n                    self.set_visual_mode('uploadmode', controlbarid);\r\n                    pmr.do_save_audio(ip);\r\n                    self.uploaded = true;\r\n                } else {\r\n                    ip.uploader.Output(M.util.get_string('recui_nothingtosaveerror', 'filter_poodll'));\r\n                }//end of if self.blobs\r\n                //probably not necessary  ... but getting odd ajax errors occasionally\r\n                return false;\r\n            });//end of save recording\r\n\r\n            window.onbeforeunload = function () {\r\n                self.enable_button(ip.controlbar.startbutton);\r\n                var preview = ip.controlbar.preview;\r\n                if (preview && preview.get(0)) {\r\n                    preview.get(0).pause();\r\n                    preview.get(0).controls = false;\r\n                }\r\n            };\r\n\r\n        }, //end of register_control_bar_events_bmr\r\n\r\n        show_element: function (element) {\r\n            $(element).show();\r\n        },\r\n        hide_element: function (element) {\r\n            $(element).hide();\r\n        },\r\n        enable_button: function (button) {\r\n            $(button).attr('disabled', false);\r\n            $(button).removeClass('bmr_disabled');\r\n        },\r\n        disable_button: function (button) {\r\n            $(button).attr('disabled', true);\r\n            $(button).addClass('bmr_disabled');\r\n        },\r\n\r\n    };//end of returned object\r\n\r\n\r\n});//total end"],"file":"poodll_freshmediaskin.min.js"}