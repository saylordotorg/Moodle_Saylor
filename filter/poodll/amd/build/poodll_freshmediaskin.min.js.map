{"version":3,"file":"poodll_freshmediaskin.min.js","sources":["../src/poodll_freshmediaskin.js"],"sourcesContent":["/* jshint ignore:start */\r\ndefine(['jquery','core/log', 'filter_poodll/utils_amd', 'filter_poodll/dlg_devicesettings', 'filter_poodll/anim_progress_bar_fresh', 'filter_poodll/anim_hwave_fresh', 'filter_poodll/anim_hwave_timer', 'filter_poodll/upskin_text'],\r\n    function ($, log, utils, settings, anim_progress_bar, hwave, hwave_timer, upskin) {\r\n\r\n    \"use strict\"; // jshint ;_;\r\n\r\n    log.debug('PoodLL BMR Skin: initialising');\r\n\r\n\r\n    return {\r\n\r\n        instanceprops: null,\r\n        pmr: null,\r\n        uploaded: false,\r\n        devsettings: null,\r\n        therecanim: null,\r\n        canpause: true,\r\n        //for making multiple instances\r\n        clone: function () {\r\n            return $.extend(true, {}, this);\r\n        },\r\n\r\n        init: function (ip, pmr) {\r\n            this.instanceprops = ip;\r\n            this.pmr = pmr;\r\n            this.devsettings = settings.clone();\r\n            this.devsettings.init(pmr, ip);\r\n        },\r\n\r\n\r\n        fetch_instanceprops: function () {\r\n            return this.instanceprops;\r\n        },\r\n\r\n\r\n        onUploadSuccess: function (controlbarid) {\r\n            $('#' + controlbarid + ' > .poodll_save-recording').hide();\r\n            // $('#' + controlbarid  + '_messages').hide();\r\n            $('#' + controlbarid + ' > .poodll_savedsuccessfully').show();\r\n        },\r\n\r\n        onUploadFailure: function (controlbarid) {\r\n            return;\r\n        },\r\n\r\n        fetch_status_bar: function (skin) {\r\n            var status = '<div class=\"poodll_status_' + skin + '\">00:00:00</div>';\r\n            return status;\r\n        },\r\n\r\n        fetch_preview_audio: function (skin) {\r\n            var preview = '<audio class=\"poodll_preview_' + skin + '\" style=\"display: none;\" controls playsinline=\"playsinline\" muted></audio>';\r\n            return preview;\r\n        },\r\n        fetch_preview_video: function (skin) {\r\n            var preview = '<video class=\"poodll_preview_' + skin + '\" playsinline=\"playsinline\" muted></video>';\r\n            return preview;\r\n        },\r\n        fetch_resource_audio: function (skin) {\r\n            var resourceplayer = '';\r\n            return resourceplayer;\r\n        },\r\n        fetch_resource_video: function (skin) {\r\n            var resourceplayer = '';\r\n            return resourceplayer;\r\n        },\r\n\r\n        fetch_uploader_skin: function (controlbarid, element) {\r\n            var ip = this.fetch_instanceprops();\r\n            var theupskin = upskin.clone();\r\n            theupskin.init(ip.config, element, ip.controlbar.bmr_progresscanvas, ip.controlbar.status);\r\n            return theupskin;\r\n        },\r\n\r\n        onMediaError: function (e) {\r\n            console.error('media error', e);\r\n        },\r\n\r\n        onMediaSuccess_video: function (controlbarid) {\r\n\r\n            var ip = this.fetch_instanceprops();\r\n            //clear messages\r\n            ip.uploader.Output('');\r\n            this.set_visual_mode('recordmode', controlbarid);\r\n            //timer and status bar\r\n            ip.timer.reset();\r\n            ip.timer.start();\r\n            this.update_status(controlbarid);\r\n        },\r\n\r\n        onMediaSuccess_audio: function (controlbarid) {\r\n\r\n            var ip = this.fetch_instanceprops();\r\n\r\n            //clear messages\r\n            ip.uploader.Output('');\r\n            ip.controlbar.preview.attr('src', null);\r\n            this.set_visual_mode('recordmode', controlbarid);\r\n\r\n            //wave animation\r\n            this.therecanim.start();\r\n\r\n            //timer and status bar\r\n            ip.timer.reset();\r\n            ip.timer.start();\r\n            this.update_status(controlbarid);\r\n\r\n        },\r\n\r\n        handle_timer_update: function (controlbarid) {\r\n            var ip = this.fetch_instanceprops();\r\n            ip.controlbar.status.html(ip.timer.fetch_display_time());\r\n            if (ip.timer.seconds == 0 && ip.timer.initseconds > 0) {\r\n                if (ip.controlbar.startbutton.hasClass('poodll_in_progress')) {\r\n                  ip.controlbar.startbutton.click();\r\n                }\r\n            }\r\n        },\r\n\r\n        update_status: function (controlbarid) {\r\n            var ip = this.fetch_instanceprops();\r\n            ip.controlbar.status.html(ip.timer.fetch_display_time());\r\n\r\n        },\r\n\r\n        //set visuals for different states (ie recording or playing)\r\n        set_visual_mode: function (mode, controlbarid) {\r\n            var self = this;\r\n            var ip = this.fetch_instanceprops();\r\n            this.visualmode = mode;\r\n\r\n            switch (mode) {\r\n\r\n                case 'initmode':\r\n                    ip.controlbar.statusText.text('Ready to record');\r\n                    ip.controlbar.status.html('00:00:00');\r\n\r\n                    ip.controlbar.stoprecbutton.attr('class', 'poodll_stop-recording_fresh poodll_fresh_stop_btn bmr_disabled');\r\n                    ip.controlbar.startbutton.attr('class', 'poodll_start-recording_fresh poodll_fresh_main_btn');\r\n                    ip.controlbar.playbutton.attr('class', 'poodll_play-recording_fresh poodll_fresh_play_btn bmr_disabled');\r\n\r\n                    //ip.controlbar.root.attr('class')\r\n\r\n                    //disable save button\r\n                    self.disable_button(ip.controlbar.savebutton);\r\n                    self.disable_button(ip.controlbar.recordAgain);\r\n                    break;\r\n\r\n                case 'recordmode':\r\n                    ip.controlbar.statusText.text('Recording..');\r\n                    self.enable_button(ip.controlbar.startbutton);\r\n                    self.show_element(ip.controlbar.startbutton);\r\n\r\n                    self.hide_element(ip.controlbar.bmr_progresscanvas);\r\n\r\n                    self.enable_button(ip.controlbar.pausebutton);\r\n                    self.show_element(ip.controlbar.pausebutton);\r\n\r\n                    self.disable_button(ip.controlbar.playbutton);\r\n                    self.hide_element(ip.controlbar.resumebutton);\r\n                    self.enable_button(ip.controlbar.stoprecbutton);\r\n\r\n                    //disable save button\r\n                    self.disable_button(ip.controlbar.savebutton);\r\n                    self.disable_button(ip.controlbar.recordAgain);\r\n\r\n                    ip.controlbar.preview.addClass('poodll_recording');\r\n                    ip.controlbar.status.addClass('poodll_recording');\r\n\r\n                    ip.controlbar.preview.removeClass('poodll_playing');\r\n                    ip.controlbar.status.removeClass('poodll_playing');\r\n\r\n                    ip.controlbar.startbutton\r\n                        .addClass('poodll_in_progress')\r\n                        .removeClass('poodll_resume_button');\r\n\r\n                    ip.controlbar.playbutton\r\n                        .removeClass('poodll_play_special poodll_play_green');\r\n\r\n                    if (ip.config.mediatype == 'audio') {\r\n                        self.hide_element(ip.controlbar.preview);\r\n                    }\r\n\r\n                    ip.controlbar.root.removeClass('poodll_controllbar_playmode');\r\n\r\n                    break;\r\n\r\n                case 'previewmode':\r\n                    ip.controlbar.statusText.text('Ready to Play');\r\n                    self.disable_button(ip.controlbar.stoprecbutton);\r\n                    self.disable_button(ip.controlbar.startbutton);\r\n                    self.enable_button(ip.controlbar.playbutton);\r\n                    self.disable_button(ip.controlbar.pausebutton);\r\n\r\n                    //reset timer button\r\n                    ip.controlbar.status.html(ip.timer.fetch_display_time(ip.timer.finalSeconds));\r\n\r\n\r\n                    //If stop has been pressed there is no \"resuming\"\r\n                    self.show_element(ip.controlbar.startbutton);\r\n\r\n                    self.disable_button(ip.controlbar.resumebutton);\r\n                    self.hide_element(ip.controlbar.resumebutton);\r\n                    self.hide_element(ip.controlbar.bmr_progresscanvas);\r\n                    if (self.uploaded) {\r\n                        self.disable_button(ip.controlbar.savebutton);\r\n                        self.disable_button(ip.controlbar.recordAgain);\r\n                    } else {\r\n                        self.enable_button(ip.controlbar.savebutton);\r\n                        self.enable_button(ip.controlbar.recordAgain);\r\n                    }\r\n\r\n                    self.show_element(ip.controlbar.pausebutton);\r\n\r\n                    ip.controlbar.preview.removeClass('poodll_recording');\r\n                    ip.controlbar.status.removeClass('poodll_recording');\r\n\r\n                    ip.controlbar.preview.removeClass('poodll_playing');\r\n                    ip.controlbar.status.removeClass('poodll_playing');\r\n\r\n\r\n                    ip.controlbar.startbutton.removeClass('poodll_in_progress');\r\n                    ip.controlbar.playbutton\r\n                        .addClass('poodll_play_green')\r\n                        .removeClass('poodll_play_special')\r\n                        .removeClass('poodll_play_pause')\r\n                        .removeClass('poodll_stop_green');\r\n\r\n                    if (ip.config.mediatype == 'audio') {\r\n                        self.show_element(ip.controlbar.preview);\r\n                    }\r\n                    // ip.controlbar.status.addClass('hide');\r\n                    //ip.controlbar.bmr_progresscanvas.removeClass('hide');\r\n                    self.enable_button(ip.controlbar.playbutton);\r\n                    ip.controlbar.root.removeClass('poodll_controllbar_playmode poodll_controllbar_pausemode');\r\n                    break;\r\n\r\n                case 'playmode':\r\n\r\n                    ip.controlbar.statusText.text('Playing');\r\n                    ip.controlbar.status.html('00:00:00');\r\n\r\n                    self.enable_button(ip.controlbar.stoprecbutton);\r\n                    self.enable_button(ip.controlbar.pausebutton);\r\n                    self.disable_button(ip.controlbar.startbutton);\r\n                    self.disable_button(ip.controlbar.resumebutton);\r\n\r\n                    self.disable_button(ip.controlbar.savebutton);\r\n                    self.disable_button(ip.controlbar.recordAgain);\r\n\r\n                    self.show_element(ip.controlbar.bmr_progresscanvas);\r\n\r\n                    ip.controlbar.playbutton\r\n                        .removeClass('poodll_play_green')\r\n                        .removeClass('poodll_play_special')\r\n                        .addClass('poodll_stop_green');\r\n\r\n                    ip.controlbar.preview.addClass('poodll_playing');\r\n                    ip.controlbar.status.addClass('poodll_playing');\r\n\r\n                    //If play has been pressed there is no \"resuming\"\r\n                    self.show_element(ip.controlbar.startbutton);\r\n                    self.hide_element(ip.controlbar.resumebutton);\r\n\r\n                    ip.controlbar.root\r\n                        .addClass('poodll_controllbar_playmode')\r\n                        .removeClass('poodll_controllbar_pausemode');\r\n\r\n                    break;\r\n\r\n\r\n                case 'pausedmode':\r\n                    ip.controlbar.statusText.text('Paused');\r\n                    //self.disable_button(ip.controlbar.pausebutton);\r\n                    //self.hide_element(ip.controlbar.startbutton);\r\n                    self.show_element(ip.controlbar.resumebutton);\r\n                    self.enable_button(ip.controlbar.resumebutton);\r\n                    self.enable_button(ip.controlbar.savebutton);\r\n                    //self.enable_button(ip.controlbar.playbutton);\r\n\r\n                    ip.controlbar.preview.removeClass('poodll_recording');\r\n                    ip.controlbar.status.removeClass('poodll_recording');\r\n                    ip.controlbar.startbutton\r\n                        .removeClass('poodll_in_progress')\r\n                        .addClass('poodll_resume_button');\r\n\r\n                    ip.controlbar.playbutton\r\n                    //.addClass('poodll_play_special')\r\n                        .removeClass('poodll_play_green')\r\n                        .removeClass('poodll_play_pause');\r\n\r\n\r\n                    ip.controlbar.root.addClass('poodll_controllbar_pausemode');\r\n                    break;\r\n\r\n                case 'uploadmode':\r\n                    ip.controlbar.statusText.text('Uploading');\r\n                    self.disable_button(ip.controlbar.savebutton);\r\n                    self.disable_button(ip.controlbar.recordAgain);\r\n                    self.disable_button(ip.controlbar.startbutton);\r\n                    self.show_element(ip.controlbar.bmr_progresscanvas);\r\n\r\n                    ip.controlbar.root.removeClass('poodll_controllbar_playmode poodll_controllbar_pausemode');\r\n                    break;\r\n            }\r\n\r\n        },\r\n\r\n        //insert the control bar and return it to be reused\r\n        insert_controlbar_video: function (element, controlbarid, preview, resource) {\r\n            var controlbar = this.prepare_controlbar(element, controlbarid, preview, resource, 'video');\r\n            return controlbar;\r\n        },\r\n\r\n        //insert the control bar and return it to be reused\r\n        insert_controlbar_audio: function (element, controlbarid, preview, resource) {\r\n            var controlbar = this.prepare_controlbar(element, controlbarid, preview, resource, 'audio');\r\n            return controlbar;\r\n        },\r\n\r\n        //insert the control bar and return it to be reused\r\n        prepare_controlbar: function (element, controlbarid, preview, resource, mediatype) {\r\n            var ip = this.fetch_instanceprops();\r\n            var skin_style = ip.config.media_skin_style;\r\n\r\n            var size_class = 'poodll_mediarecorder_size_auto';\r\n            switch (ip.config.size) {\r\n                case 'small':\r\n                    size_class = 'poodll_mediarecorder_size_small';\r\n                    break;\r\n                case 'big':\r\n                    size_class = 'poodll_mediarecorder_size_big';\r\n                    break;\r\n                case 'auto':\r\n                    size_class = 'poodll_mediarecorder_size_auto';\r\n            }\r\n\r\n            var ss = this.pmr.fetch_strings();\r\n            var record_icon = mediatype == 'video' ? 'fa-video-camera' : 'fa-microphone';\r\n            var recorder_class = mediatype == 'video' ? 'poodll_mediarecorder_video' : 'poodll_mediarecorder_audio';\r\n\r\n            var controls = '<div class=\"poodll_mediarecorderholder_fresh poodll_videorecorderholder_fresh '\r\n                + recorder_class + ' ' + size_class + '\" id=\"holder_' + controlbarid + '\">';\r\n\r\n            controls += '<div class=\"poodll_mediarecorderbox_fresh\" id=\"' + controlbarid + '\">';\r\n            controls += '<audio style=\"display: none !important;\" class=\"poodll-alert-recording\" id=\"' + controlbarid + '\"><source src=\"#\" type=\"audio/mpeg\"></audio>';\r\n\r\n            controls += '<div class=\"style-holder ' + skin_style + '\">';\r\n            controls += '<div class=\"poodll_statusholder_fresh\" >';\r\n            var status = this.fetch_status_bar('fresh');\r\n            controls += status;\r\n            controls += '</div>';\r\n\r\n            controls += '<div class=\"poodll_fresh_musik_line\">' +\r\n                '<canvas class=\"fresh_range\"></canvas>' +\r\n                '<canvas id=\"' + controlbarid + '_playcanvas\" class=\"poodll_fresh_playcanvas\" width=\"300\" height=\"50\"></canvas>' +\r\n                '<div class=\"poodll_fresh_wave\"></div>' +\r\n                '</div>' +\r\n                '<div class=\"poodll_fresh_control\">' +\r\n                '<div class=\"poodll_fresh_txt_control\">' + ss['recui_readytorecord'] + '</div>' +\r\n                '<div class=\"poodll_fresh_settings_btn settingsicon\" data-toggle=\"modal\" data-target=\"#myModal id=\"settingsicon_' + controlbarid + '\"></div>' +\r\n                '<div class=\"poodll_start-recording_fresh poodll_fresh_main_btn\"></div>' +\r\n                '<div class=\"poodll_stop-playing-recording_fresh\" style=\"display: none;\"></div>' +\r\n                '<div class=\"poodll_pause-recording_fresh poodll_fresh_pause_btn bmr_disabled\"></div>' +\r\n                '<div class=\"poodll_play-recording_fresh poodll_fresh_play_btn bmr_disabled\"></div>' +\r\n                '</div>' +\r\n                '<div class=\"poodll_fresh_bottom_btns\">' +\r\n                '<a class=\"poodll_save-recording_fresh poodll_fresh_upload_btn bmr_disabled\" href=\"#\">' + ss['recui_upload'] + '</a>' +\r\n                '<a class=\"poodll_fresh_record_btn bmr_disabled\" href=\"#\">' + ss['recui_recordagain'] + '</a>' +\r\n                '</div>';\r\n\r\n            controls += preview;\r\n            controls += '</div>';\r\n            controls += this.devsettings.fetch_dialogue_box();\r\n            controls += ip.downloaddialog.fetch_dialogue_box();\r\n            controls += ip.errordialog.fetch_dialogue_box();\r\n            controls += '</div>';\r\n            controls += '</div>';\r\n            $(element).prepend(controls);\r\n            var controlbar = {\r\n                poodll_recording_alert: $('#' + controlbarid + ' .poodll-alert-recording'),\r\n                bmr_progresscanvas: $('#' + controlbarid + ' .fresh_range'),\r\n                settingsdialog: $('#' + controlbarid + ' .poodll_dialogue_box_settings'),\r\n                downloaddialog: $('#' + controlbarid + ' .poodll_dialogue_box_download'),\r\n                errorsdialog: $('#' + controlbarid + ' .poodll_dialogue_box_errors'),\r\n                settingsicon: $('#' + controlbarid + ' .settingsicon'),\r\n                status: $('#' + controlbarid + ' .poodll_status_fresh'),\r\n                statusText: $('#' + controlbarid + ' .poodll_fresh_txt_control'),\r\n                preview: $('#' + controlbarid + ' .poodll_preview_fresh'),\r\n                startbutton: $('#' + controlbarid + ' .poodll_start-recording_fresh'),\r\n                stoprecbutton: $('#' + controlbarid + ' .poodll_stop-recording_fresh'),\r\n                pausebutton: $('#' + controlbarid + ' .poodll_pause-recording_fresh'),\r\n                resumebutton: $('#' + controlbarid + ' .poodll_resume-recording_fresh'),\r\n                playbutton: $('#' + controlbarid + ' .poodll_play-recording_fresh'),\r\n                stopbutton: $('#' + controlbarid + ' .poodll_stop-playing-recording_fresh'),\r\n                savebutton: $('#' + controlbarid + ' .poodll_save-recording_fresh'),\r\n                recordAgain: $('#' + controlbarid + ' .poodll_fresh_record_btn'),\r\n                playcanvas: $('#' + controlbarid + '_playcanvas'),\r\n                root: $('#' + controlbarid)\r\n            };\r\n\r\n\r\n            //settings and error dialogs\r\n            //They use the same dialog and just fill it with diofferent stuff\r\n            //settings is on 'this' because it is shown from skkn events, but errors are from pmr stuff\r\n            ip.downloaddialog.set_dialogue_box(controlbar.downloaddialog);\r\n            ip.errordialog.set_dialogue_box(controlbar.errorsdialog);\r\n            this.devsettings.set_dialogue_box(controlbar.settingsdialog);\r\n            return controlbar;\r\n\r\n        }, //end of fetch_control_bar_bmr\r\n\r\n\r\n        register_controlbar_events_video: function (onMediaSuccess, controlbarid) {\r\n            return this.register_controlbar_events_audio(onMediaSuccess, controlbarid);\r\n        },\r\n\r\n        register_controlbar_events_audio: function (onMediaSuccess, controlbarid) {\r\n            var self = this;\r\n            var pmr = this.pmr;\r\n            var ip = this.fetch_instanceprops();\r\n\r\n            //Open the settings dialog\r\n            ip.controlbar.settingsicon.click(function () {\r\n                if (!self.uploaded) {\r\n                    self.devsettings.open();\r\n                } else {\r\n                    ip.downloaddialog.open();\r\n                }\r\n            });\r\n\r\n            //init progress bar\r\n            var hprogress = anim_progress_bar.clone();\r\n            hprogress.init(ip.controlbar.bmr_progresscanvas);\r\n\r\n            hprogress.readyBars();\r\n\r\n            var recanim = hwave.clone();\r\n            recanim.init(ip.audioanalyser, ip.controlbar.playcanvas.get(0));\r\n\r\n            /*\r\n            START BUTTON\r\n            */\r\n            ip.controlbar.startbutton.click(function () {\r\n\r\n                //Play alert sound\r\n                //ip.controlbar.poodll_recording_alert.get(0).play();\r\n\r\n                //start recording\r\n                if ($(this).hasClass('poodll_in_progress')) {\r\n\r\n                    //stop the audio\r\n                    pmr.do_stop_audio(ip);\r\n\r\n                    var preview = ip.controlbar.preview;\r\n                    if (preview && preview.get(0)) {\r\n                        preview.get(0).pause();\r\n                    }\r\n\r\n                    recanim.clear();\r\n\r\n                    //timer and status bar\r\n                    ip.timer.stop();\r\n                    self.update_status(controlbarid);\r\n\r\n                    //do visuals\r\n                    self.set_visual_mode('previewmode', controlbarid);\r\n\r\n                } else if ($(this).hasClass('poodll_resume_button')) {\r\n                    pmr.do_resume_audio(ip);\r\n\r\n                    //timer and status bar\r\n                    ip.timer.resume();\r\n                    self.update_status(controlbarid);\r\n                    //do visuals\r\n                    self.set_visual_mode('recordmode', controlbarid);\r\n                } else {\r\n\r\n                    self.therecanim = recanim;\r\n                    pmr.do_start_audio(ip, onMediaSuccess);\r\n\r\n                }\r\n\r\n\r\n            });\r\n\r\n            ip.controlbar.recordAgain.click(function () {\r\n                pmr.do_stop_audio(ip);\r\n\r\n                self.update_status(controlbarid);\r\n                //do visuals\r\n                self.set_visual_mode('initmode', controlbarid);\r\n\r\n                //self.therecanim = recanim;\r\n                //pmr.do_start_audio(ip, onMediaSuccess);\r\n            });\r\n\r\n            ip.controlbar.stoprecbutton.click(function () {\r\n                //stop the audio\r\n                pmr.do_stop_audio(ip);\r\n\r\n                var preview = ip.controlbar.preview;\r\n                if (preview && preview.get(0)) {\r\n                    preview.get(0).pause();\r\n                }\r\n\r\n                recanim.clear();\r\n\r\n                //timer and status bar\r\n                ip.timer.stop();\r\n                self.update_status(controlbarid);\r\n\r\n                //do visuals\r\n                self.set_visual_mode('previewmode', controlbarid);\r\n\r\n            });\r\n\r\n            ip.controlbar.pausebutton.click(function () {\r\n\r\n                pmr.do_pause_audio(ip);\r\n                //pmr.do_stop_audio(ip);\r\n                var preview = ip.controlbar.preview;\r\n                if (preview && preview.get(0)) {\r\n                    preview.get(0).pause();\r\n                    preview.get(0).controls = false;\r\n                }\r\n                console.log('PAUSE');\r\n                //timer and status bar\r\n                ip.timer.pause();\r\n                self.update_status(controlbarid);\r\n                //do visuals\r\n                self.set_visual_mode('pausedmode', controlbarid);\r\n\r\n            });\r\n\r\n\r\n            ip.controlbar.resumebutton.click(function () {\r\n\r\n                pmr.do_resume_audio(ip);\r\n\r\n                //timer and status bar\r\n                ip.timer.resume();\r\n                self.update_status(controlbarid);\r\n                //do visuals\r\n                self.set_visual_mode('recordmode', controlbarid);\r\n            });\r\n\r\n            ip.controlbar.preview.on('timeupdate', function () {\r\n                if (self.visualmode != 'playmode') {\r\n                    return;\r\n                }\r\n                var currentTime = this.currentTime;\r\n                ip.controlbar.status.html(ip.timer.fetch_display_time(currentTime));\r\n            });\r\n\r\n            //this is really just a fudge because PMR expects the stopbutton to be the stop playback button\r\n            //but in this recorder, the stop playback button is the \"play\" button\r\n            //so we double up the code just so that when PMR calls it when playback ends, we reset playback state\r\n            ip.controlbar.stopbutton.click(function () {\r\n                //stop the audio\r\n                pmr.do_stop_audio(ip);\r\n\r\n                var preview = ip.controlbar.preview;\r\n                if (preview && preview.get(0)) {\r\n                    preview.get(0).pause();\r\n                }\r\n\r\n                recanim.clear();\r\n\r\n                //timer and status bar\r\n                ip.timer.stop();\r\n                self.update_status(controlbarid);\r\n\r\n                //do visuals\r\n                self.set_visual_mode('previewmode', controlbarid);\r\n            });\r\n\r\n            /*\r\n             PLAY BUTTON\r\n             */\r\n\r\n            ip.controlbar.playbutton.click(function () {\r\n\r\n                if ($(this).hasClass('poodll_play_pause')) {\r\n\r\n                    var preview = ip.controlbar.preview.get(0);\r\n\r\n                    // if(preview && preview.get(0)){\r\n                    //     preview.get(0).pause();\r\n                    //     preview.get(0).controls = false;\r\n                    // }\r\n\r\n                    pmr.do_stopplay_audio(ip, preview);\r\n                    pmr.do_stop_audio(ip);\r\n\r\n                    //timer and status bar\r\n                    ip.timer.pause();\r\n                    self.update_status(controlbarid);\r\n                    //do visuals\r\n                    self.set_visual_mode('pausedmode', controlbarid);\r\n\r\n\r\n                } else if ($(this).hasClass('poodll_stop_green')) {\r\n\r\n                    //stop the audio\r\n                    pmr.do_stop_audio(ip);\r\n\r\n                    var preview = ip.controlbar.preview;\r\n                    if (preview && preview.get(0)) {\r\n                        preview.get(0).pause();\r\n                    }\r\n\r\n                    recanim.clear();\r\n\r\n                    //timer and status bar\r\n                    ip.timer.stop();\r\n                    self.update_status(controlbarid);\r\n\r\n                    //do visuals\r\n                    self.set_visual_mode('previewmode', controlbarid);\r\n\r\n                } else {\r\n\r\n                    var preview = ip.controlbar.preview.get(0);\r\n                    pmr.do_play_audio(ip, preview);\r\n\r\n                    //do visuals\r\n                    self.set_visual_mode('playmode', controlbarid);\r\n\r\n                    //start animation\r\n                    hprogress.clear();\r\n                    hprogress.fetchCurrent = function () {\r\n                        var ct = ip.controlbar.preview.prop('currentTime');\r\n                        var duration = ip.controlbar.preview.prop('duration');\r\n                        if (!isFinite(duration)) {\r\n                            duration = ip.timer.finalseconds;\r\n                        }\r\n                        return ct / duration;\r\n                    };\r\n                    hprogress.start();\r\n\r\n                    var ct = ip.controlbar.preview.prop('currentTime');\r\n                    var duration = ip.controlbar.preview.prop('duration');\r\n                    hprogress.playBars(ct, duration);\r\n\r\n                }\r\n            });\r\n\r\n            ip.controlbar.savebutton.click(function () {\r\n\r\n                if (ip.blobs && ip.blobs.length > 0) {\r\n                    self.set_visual_mode('uploadmode', controlbarid);\r\n                    pmr.do_save_audio(ip);\r\n                    self.uploaded = true;\r\n                } else {\r\n                    ip.uploader.Output(M.util.get_string('recui_nothingtosaveerror', 'filter_poodll'));\r\n                }//end of if self.blobs\r\n                //probably not necessary  ... but getting odd ajax errors occasionally\r\n                return false;\r\n            });//end of save recording\r\n\r\n            window.onbeforeunload = function () {\r\n                self.enable_button(ip.controlbar.startbutton);\r\n                var preview = ip.controlbar.preview;\r\n                if (preview && preview.get(0)) {\r\n                    preview.get(0).pause();\r\n                    preview.get(0).controls = false;\r\n                }\r\n            };\r\n\r\n        }, //end of register_control_bar_events_bmr\r\n\r\n        show_element: function (element) {\r\n            $(element).show();\r\n        },\r\n        hide_element: function (element) {\r\n            $(element).hide();\r\n        },\r\n        enable_button: function (button) {\r\n            $(button).attr('disabled', false);\r\n            $(button).removeClass('bmr_disabled');\r\n        },\r\n        disable_button: function (button) {\r\n            $(button).attr('disabled', true);\r\n            $(button).addClass('bmr_disabled');\r\n        },\r\n\r\n    };//end of returned object\r\n\r\n\r\n});//total end"],"names":["define","$","log","utils","settings","anim_progress_bar","hwave","hwave_timer","upskin","debug","instanceprops","pmr","uploaded","devsettings","therecanim","canpause","clone","extend","this","init","ip","fetch_instanceprops","onUploadSuccess","controlbarid","hide","show","onUploadFailure","fetch_status_bar","skin","fetch_preview_audio","fetch_preview_video","fetch_resource_audio","fetch_resource_video","fetch_uploader_skin","element","theupskin","config","controlbar","bmr_progresscanvas","status","onMediaError","e","console","error","onMediaSuccess_video","uploader","Output","set_visual_mode","timer","reset","start","update_status","onMediaSuccess_audio","preview","attr","handle_timer_update","html","fetch_display_time","seconds","initseconds","startbutton","hasClass","click","mode","visualmode","statusText","text","stoprecbutton","playbutton","disable_button","savebutton","recordAgain","enable_button","show_element","hide_element","pausebutton","resumebutton","addClass","removeClass","mediatype","root","finalSeconds","insert_controlbar_video","resource","prepare_controlbar","insert_controlbar_audio","skin_style","media_skin_style","size_class","size","ss","fetch_strings","controls","fetch_dialogue_box","downloaddialog","errordialog","prepend","poodll_recording_alert","settingsdialog","errorsdialog","settingsicon","stopbutton","playcanvas","set_dialogue_box","register_controlbar_events_video","onMediaSuccess","register_controlbar_events_audio","self","open","hprogress","readyBars","recanim","audioanalyser","get","do_stop_audio","pause","clear","stop","do_resume_audio","resume","do_start_audio","do_pause_audio","on","currentTime","do_stopplay_audio","do_play_audio","fetchCurrent","ct","prop","duration","isFinite","finalseconds","playBars","blobs","length","do_save_audio","M","util","get_string","window","onbeforeunload","button"],"mappings":"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"}