{"version":3,"sources":["../src/anim_hwave.js"],"names":["define","$","log","debug","analyser","cvs","cvsctx","drawparams","wavColor","barColor","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","font","textAlign","textBaseline","clone","extend","init","getContext","clear","setDrawParam","paramkey","paramvalue","clearRect","width","height","lineWidth","strokeStyle","beginPath","moveTo","lineTo","stroke","start","core","fftSize","bufferLength","dataArray","Uint8Array","cwidth","cheight","canvasCtx","that","draw","requestAnimationFrame","theinterval","getByteTimeDomainData","x","i","v","y"],"mappings":"AACAA,OAAM,4BAAC,CAAC,QAAD,CAAW,UAAX,CAAD,CAAyB,SAAUC,CAAV,CAAaC,CAAb,CAAkB,CAE7C,aAEAA,CAAG,CAACC,KAAJ,CAAU,oCAAV,EAEA,MAAO,CAEHC,QAAQ,CAAE,IAFP,CAGHC,GAAG,CAAE,IAHF,CAIHC,MAAM,CAAE,IAJL,CAKHC,UAAU,CAAE,CACRC,QAAQ,CAAE,IADF,CAERC,QAAQ,CAAE,SAFF,CAGRC,aAAa,CAAE,CAHP,CAIRC,aAAa,CAAE,CAJP,CAKRC,UAAU,CAAE,EALJ,CAMRC,WAAW,CAAE,MANL,CAORC,IAAI,CAAE,YAPE,CAQRC,SAAS,CAAE,QARH,CASRC,YAAY,CAAE,QATN,CALT,CAmBHC,KAAK,CAAE,gBAAY,CACf,MAAOhB,CAAAA,CAAC,CAACiB,MAAF,IAAe,EAAf,CAAmB,IAAnB,CACV,CArBE,CAyBHC,IAAI,CAAE,cAAUf,CAAV,CAAoBC,CAApB,CAAyB,CAC3B,KAAKA,GAAL,CAAWA,CAAX,CACA,KAAKC,MAAL,CAAcD,CAAG,CAACe,UAAJ,CAAe,IAAf,CAAd,CACA,KAAKhB,QAAL,CAAgBA,CAAhB,CACA,KAAKiB,KAAL,EACH,CA9BE,CAgCHC,YAAY,CAAE,sBAAUC,CAAV,CAAoBC,CAApB,CAAgC,CAC1C,KAAKjB,UAAL,CAAgBgB,CAAhB,EAA4BC,CAC/B,CAlCE,CAoCHH,KAAK,CAAE,gBAAY,CACf,KAAKf,MAAL,CAAYmB,SAAZ,CAAsB,CAAtB,CAAyB,CAAzB,CAA4B,KAAKpB,GAAL,CAASqB,KAArC,CAA4C,KAAKrB,GAAL,CAASsB,MAArD,EACA,KAAKrB,MAAL,CAAYsB,SAAZ,CAAwB,CAAxB,CACA,KAAKtB,MAAL,CAAYuB,WAAZ,CAA0B,KAAKtB,UAAL,CAAgBC,QAA1C,CACA,KAAKF,MAAL,CAAYwB,SAAZ,GACA,KAAKxB,MAAL,CAAYyB,MAAZ,CAAmB,CAAnB,CAAsB,KAAK1B,GAAL,CAASsB,MAAT,CAAkB,CAAxC,EACA,KAAKrB,MAAL,CAAY0B,MAAZ,CAAmB,KAAK3B,GAAL,CAASqB,KAA5B,CAAmC,KAAKrB,GAAL,CAASsB,MAAT,CAAkB,CAArD,EACA,KAAKrB,MAAL,CAAY2B,MAAZ,EACH,CA5CE,CA8CHC,KAAK,CAAE,gBAAY,CACf,KAAK9B,QAAL,CAAc+B,IAAd,CAAmBC,OAAnB,CAA6B,IAA7B,CADe,GAEXC,CAAAA,CAAY,CAAG,KAAKjC,QAAL,CAAc+B,IAAd,CAAmBC,OAFvB,CAGXE,CAAS,CAAG,GAAIC,CAAAA,UAAJ,CAAeF,CAAf,CAHD,CAIXG,CAAM,CAAG,KAAKnC,GAAL,CAASqB,KAJP,CAKXe,CAAO,CAAG,KAAKpC,GAAL,CAASsB,MALR,CAMXe,CAAS,CAAG,KAAKpC,MANN,CAOXF,CAAQ,CAAG,KAAKA,QAPL,CAQf,KAAKiB,KAAL,GARe,GASXsB,CAAAA,CAAI,CAAG,IATI,CAWXC,CAAI,CAAG,UAAY,CAEFC,qBAAqB,CAACD,CAAD,CAFnB,CAKnB,GAAI,CAACxC,CAAQ,CAAC0C,WAAd,CAA2B,CACvB,MACH,CAED1C,CAAQ,CAAC+B,IAAT,CAAcY,qBAAd,CAAoCT,CAApC,EAKAI,CAAS,CAACjB,SAAV,CAAoB,CAApB,CAAuB,CAAvB,CAA0Be,CAA1B,CAAkCC,CAAlC,EAEAC,CAAS,CAACd,SAAV,CAAsB,CAAtB,CACAc,CAAS,CAACb,WAAV,CAAwBc,CAAI,CAACpC,UAAL,CAAgBC,QAAxC,CAEAkC,CAAS,CAACZ,SAAV,GAKA,OAFIkB,CAAAA,CAAC,CAAG,CAER,CAASC,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGZ,CAApB,CAAkCY,CAAC,EAAnC,CAAuC,IAE/BC,CAAAA,CAAC,CAAGZ,CAAS,CAACW,CAAD,CAAT,CAAe,GAFY,CAG/BE,CAAC,CAAGD,CAAC,CAAGT,CAAJ,CAAc,CAHa,CAKnC,GAAU,CAAN,EAAAQ,CAAJ,CAAa,CACTP,CAAS,CAACX,MAAV,CAAiBiB,CAAjB,CAAoBG,CAApB,CACH,CAFD,IAEO,CACHT,CAAS,CAACV,MAAV,CAAiBgB,CAAjB,CAAoBG,CAApB,CACH,CAEDH,CAAC,EAdqB,CAAT,CAAAR,CAAM,CAASH,CAe/B,CAEDK,CAAS,CAACV,MAAV,CAAiBQ,CAAjB,CAAyBC,CAAO,CAAG,CAAnC,EACAC,CAAS,CAACT,MAAV,EACH,CAnDc,CAqDfW,CAAI,EACP,CApGE,CAsGV,CA5GK,CAAN","sourcesContent":["/* jshint ignore:start */\ndefine(['jquery', 'core/log'], function ($, log) {\n\n    \"use strict\"; // jshint ;_;\n\n    log.debug('anim_horizontal_wave: initialising');\n\n    return {\n\n        analyser: null,\n        cvs: null,\n        cvsctx: null,\n        drawparams: {\n            wavColor: '#0',\n            barColor: '#ad2323',\n            shadowOffsetX: 0,\n            shadowOffsetY: 0,\n            shadowBlur: 10,\n            shadowColor: '#fff',\n            font: '18px Arial',\n            textAlign: \"center\",\n            textBaseline: 'middle'\n        },\n\n\n        //for making multiple instances\n        clone: function () {\n            return $.extend(true, {}, this);\n        },\n\n\n        //init\n        init: function (analyser, cvs) {\n            this.cvs = cvs;\n            this.cvsctx = cvs.getContext(\"2d\");\n            this.analyser = analyser;\n            this.clear();\n        },\n\n        setDrawParam: function (paramkey, paramvalue) {\n            this.drawparams[paramkey] = paramvalue;\n        },\n\n        clear: function () {\n            this.cvsctx.clearRect(0, 0, this.cvs.width, this.cvs.height);\n            this.cvsctx.lineWidth = 2;\n            this.cvsctx.strokeStyle = this.drawparams.wavColor;\n            this.cvsctx.beginPath();\n            this.cvsctx.moveTo(0, this.cvs.height / 2);\n            this.cvsctx.lineTo(this.cvs.width, this.cvs.height / 2);\n            this.cvsctx.stroke();\n        },\n\n        start: function () {\n            this.analyser.core.fftSize = 2048;\n            var bufferLength = this.analyser.core.fftSize;\n            var dataArray = new Uint8Array(bufferLength);\n            var cwidth = this.cvs.width;\n            var cheight = this.cvs.height;\n            var canvasCtx = this.cvsctx;\n            var analyser = this.analyser;\n            this.clear();\n            var that = this;\n\n            var draw = function () {\n\n                var drawVisual = requestAnimationFrame(draw);\n\n                //cancel out if the theinterval is null\n                if (!analyser.theinterval) {\n                    return;\n                }\n\n                analyser.core.getByteTimeDomainData(dataArray);\n\n                //filling is rubbish, we just clear it\n                //canvasCtx.fillStyle = 'rgb(200, 200, 200)';\n                //canvasCtx.fillRect(0, 0, cwidth, cheight);\n                canvasCtx.clearRect(0, 0, cwidth, cheight);\n\n                canvasCtx.lineWidth = 2;\n                canvasCtx.strokeStyle = that.drawparams.wavColor;\n\n                canvasCtx.beginPath();\n\n                var sliceWidth = cwidth * 1.0 / bufferLength;\n                var x = 0;\n\n                for (var i = 0; i < bufferLength; i++) {\n\n                    var v = dataArray[i] / 128.0;\n                    var y = v * cheight / 2;\n\n                    if (i === 0) {\n                        canvasCtx.moveTo(x, y);\n                    } else {\n                        canvasCtx.lineTo(x, y);\n                    }\n\n                    x += sliceWidth;\n                }\n\n                canvasCtx.lineTo(cwidth, cheight / 2);\n                canvasCtx.stroke();\n            };\n\n            draw();\n        }//END OF START\n    };//end of returned object\n});//total end\n"],"file":"anim_hwave.min.js"}