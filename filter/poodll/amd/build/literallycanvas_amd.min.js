define ("filter_poodll/literallycanvas_amd",["jquery","core/log","filter_poodll/utils_amd","filter_poodll/uploader","filter_poodll/react_amd","filter_poodll/literallycanvas"],function(a,b,c,d,e,f){"use strict";b.debug("Filter PoodLL: literallycanvas.js initialising");return{instanceprops:[],loadliterallycanvas:function loadliterallycanvas(b){var c="#amdopts_"+b.recorderid,e=a(c).get(0);if(e){b=JSON.parse(e.value);this.config=b;a(c).remove()}var g="#"+b.recorderid+"_literally",h=a(g)[0],i=4,j=.2;if(0<b.whiteboardnozoom){i=1;j=1}if(b.backgroundimage){var k=a("#"+b.recorderid+"_separate-background-image")[0],l=new Image;l.src=k.src;l.crossOrigin="Anonymous";var m=f.createShape("Image",{x:0,y:0,image:l,scale:1}),n=f.init(h,{imageURLPrefix:b.imageurlprefix,backgroundColor:b.backgroundcolor,backgroundShapes:[m],recorderid:b.recorderid,zoomMax:i,zoomMin:j})}else{var n=f.init(h,{imageURLPrefix:b.imageurlprefix,backgroundColor:b.backgroundcolor,recorderid:b.recorderid,zoomMax:i,zoomMin:j})}b.lc=n;var o=b.vectordata;if(o){if(0==o.indexOf("{\"shapes\"")||0==o.indexOf("{\"colors\"")){n.loadSnapshot(JSON.parse(o))}}b.uploader=d.clone();b.uploader.init(g,b);this.instanceprops[b.recorderid]=b;this.registerEvents(b.recorderid)},registerEvents:function registerEvents(b){var d=this,e=this.instanceprops[b];if(e.autosave){e.lc.on("drawingChange",function(){var d=a("#"+b+"_messages")[0],f=a("#"+b+"_btn_upload_whiteboard")[0];if(d){if(f){f.disabled=!1}d.innerHTML="";var g=c.timeouthandles[b];if(g){clearTimeout(g)}c.timeouthandles[b]=setTimeout(function(){c.WhiteboardUploadHandler(b,e.lc,e,e.uploader)},e.autosave)}})}else{e.lc.on("drawingChange",function(){var c=a("#"+b+"_messages");if(c){c.innerHTML="File has not been saved."}})}var f=a("#"+b+"_btn_upload_whiteboard");if(f){if(e.autosave){f.click(function(){c.WhiteboardUploadHandler(b,e.lc,e,e.uploader)})}else{f.click(function(){var a=c.getCvs(b,e.lc,e);c.pokeVectorData(b,e.lc,e);e.uploader.uploadFile(a.toDataURL(),"image")})}}}}});
//# sourceMappingURL=literallycanvas_amd.min.js.map
