define(["jquery","core/log"],(function($,log){return log.debug("Media Parser: initialising"),{parse:function(containerid,mediatype){var ret={mediaurl:!1,lang:!1,subtitlesurl:!1,sources:!1,imgurl:!1},originalplayer=$("#"+containerid+" "+mediatype).first();if(1===originalplayer.length)ret.lang=$("#"+containerid+" "+mediatype+' track[kind="captions"]').first().attr("srclang"),ret.subtitlesurl=$("#"+containerid+" "+mediatype+' track[kind="captions"]').first().attr("src"),void 0!==originalplayer.attr("src")?ret.mediaurl=originalplayer.attr("src"):ret.mediaurl=$("#"+containerid+" "+mediatype+" source").first().attr("src"),ret.sources=$("#"+containerid+" "+mediatype+" source"),originalplayer.addClass("nomediaplugin"),originalplayer.addClass("nopoodll");else{var originallink=$("#"+containerid+" a").first();if(ret.mediaurl=originallink.attr("href"),ret.lang=originallink.attr("data-lang"),ret.subtitlesurl=originallink.attr("data-subtitles"),ret.imgurl=originallink.attr("data-img"),void 0===ret.subtitlesurl&&ret.mediaurl.split("?").length>0){var urlParams=new URLSearchParams(ret.mediaurl.split("?")[1]);ret.subtitlesurl=urlParams.get("data-subtitles"),ret.lang=urlParams.get("data-language"),ret.mediaurl=mediaurl.split("?")[0]}originallink.addClass("nomediaplugin"),originallink.addClass("nopoodll")}if(!ret.imgurl){var originalimg=$("#"+containerid+" img").first();1===originalimg.length&&(ret.imgurl=originalimg.attr("src"))}return ret}}}));

//# sourceMappingURL=mediaparser.min.js.map