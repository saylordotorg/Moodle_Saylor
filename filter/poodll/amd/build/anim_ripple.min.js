define(["jquery","core/log"],function(a,b){"use strict";return b.debug("anim_ripple: initialising"),{analyser:null,cvs:null,cvsctx:null,drawparams:{rippleColor:"#0",lineWidth:2},clone:function(){return a.extend(!0,{},this)},init:function(a,b){this.cvs=b,this.cvsctx=b.getContext("2d"),this.analyser=a},setDrawParam:function(a,b){this.drawparams[a]=b},clear:function(){this.cvsctx.clearRect(0,0,this.cvs.width,this.cvs.height)},start:function(){this.analyser.core.fftSize=2048;var a=this.analyser.core.fftSize,b=new Uint8Array(a),c=this.cvs.width,d=this.cvs.height,e=this.cvsctx,f=this.analyser;this.clear();var g=this,h=function(){requestAnimationFrame(h);if(f.theinterval){f.core.getByteTimeDomainData(b),e.clearRect(0,0,c,d),e.lineWidth=g.drawparams.lineWidth,e.setLineDash([15,5]),e.strokeStyle=g.drawparams.rippleColor,e.beginPath();var i=100;if(a>0)var j=1+a/5;for(var k=0;k<a;k+=j){var l=b[k]/128,m=l*(d-i)/4,n=i/2+m;e.arc(c/2,d/2,n,0,2*Math.PI)}e.stroke()}};h()}}});