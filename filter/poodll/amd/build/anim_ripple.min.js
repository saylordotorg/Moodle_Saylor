define(["jquery","core/log"],(function($,log){return log.debug("anim_ripple: initialising"),{analyser:null,cvs:null,cvsctx:null,drawparams:{rippleColor:"#0",lineWidth:2},clone:function(){return $.extend(!0,{},this)},init:function(analyser,cvs){this.cvs=cvs,this.cvsctx=cvs.getContext("2d"),this.analyser=analyser},setDrawParam:function(paramkey,paramvalue){this.drawparams[paramkey]=paramvalue},clear:function(){this.cvsctx.clearRect(0,0,this.cvs.width,this.cvs.height)},start:function(){this.analyser.core.fftSize=2048;var bufferLength=this.analyser.core.fftSize,dataArray=new Uint8Array(bufferLength),cwidth=this.cvs.width,cheight=this.cvs.height,canvasCtx=this.cvsctx,analyser=this.analyser;this.clear();var that=this;!function draw(){requestAnimationFrame(draw);if(analyser.theinterval){analyser.core.getByteTimeDomainData(dataArray),canvasCtx.clearRect(0,0,cwidth,cheight),canvasCtx.lineWidth=that.drawparams.lineWidth,canvasCtx.setLineDash([15,5]),canvasCtx.strokeStyle=that.drawparams.rippleColor,canvasCtx.beginPath();if(bufferLength>0)var stepsize=1+bufferLength/5;for(var i=0;i<bufferLength;i+=stepsize){var radius=50+dataArray[i]/128*(cheight-100)/4;canvasCtx.arc(cwidth/2,cheight/2,radius,0,2*Math.PI)}canvasCtx.stroke()}}()}}}));

//# sourceMappingURL=anim_ripple.min.js.map