define ("filter_poodll/anim_words",["jquery","core/log","filter_poodll/speech_poodll"],function(a,b,c){"use strict";b.debug("anim_words: initialising");return{analyser:null,cvs:null,cvsctx:null,speechrec:null,enabled:!1,drawparams:{textColor:"#0",wavColor:"#0",font:"14px Comic Sans MS",textAlign:"center"},clone:function clone(){return a.extend(!0,{},this)},init:function init(a,b){this.cvs=b;this.cvsctx=b.getContext("2d");this.analyser=a;this.speechrec=c.clone();this.speechrec.init("en-US")},setDrawParam:function setDrawParam(a,b){this.drawparams[a]=b},clear:function clear(){this.cvsctx.clearRect(0,0,this.cvs.width,this.cvs.height);this.enabled=!1;this.speechrec.stop()},start:function start(){this.enabled=!0;var a=this;this.analyser.core.fftSize=2048;var b=this.analyser.core.fftSize,c=new Uint8Array(b),d=this.cvs.width,e=this.cvs.height;this.cvsctx.clearRect(0,0,d,this.ceight);var f=["..","..","..","..","..","..","..",".."];this.speechrec.oninterimspeechcapture=function(a){var b=a.split(" ");f=f.concat(b)};this.speechrec.start();var g=function(){if(!a.enabled){return}var h=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,j=h(g);a.analyser.core.getByteTimeDomainData(c);a.cvsctx.clearRect(0,0,d,e);a.cvsctx.lineWidth=2;a.cvsctx.strokeStyle=a.drawparams.wavColor;a.cvsctx.beginPath();for(var k=0,l=0;l<b;l++){var m=c[l]/128,n=m*e/2;if(0==l){a.cvsctx.moveTo(k,n)}else{a.cvsctx.lineTo(k,n)}k+=1*d/b}a.cvsctx.lineTo(d,e/2);a.cvsctx.stroke();a.cvsctx.font=a.drawparams.font;a.cvsctx.fillStyle=a.drawparams.textColor;a.cvsctx.textAlign=a.drawparams.textAlign;var o=e/4;for(l=1;9>l;l++){a.cvsctx.fillText(f[f.length-l],d/4*(l%4)+d/8,5>l?o:3*o)}};g()}}});
//# sourceMappingURL=anim_words.min.js.map
