{"version":3,"sources":["../src/poodll_onetwothreemediaskin.js"],"names":["define","$","jqui","log","utils","anim_progress_bar","browserrecognition","settings","upskin_bar","debug","instanceprops","pmr","stage","uploaded","devsettings","clone","extend","init","ip","fetch_instanceprops","onUploadSuccess","controlbarid","hide","show","onUploadFailure","fetch_status_bar","skin","fetch_preview_audio","fetch_preview_video","fetch_resource_audio","fetch_resource_video","fetch_uploader_skin","element","upskin","config","controlbar","progresscanvas","timer","onMediaError","e","console","error","onMediaSuccess_video","uploader","Output","set_visual_mode","reset","start","update_status","onMediaSuccess_audio","preview","attr","handle_timer_update","status","html","fetch_display_time","seconds","initseconds","stoprecbutton","click","mode","self","progress","addClass","mediatype","removeClass","disable_button","playbutton","stopbutton","savebutton","enable_button","startbutton","resumebutton","hasClass","steptwo","empty","append","fadeIn","stepone","stepthree","insert_controlbar_video","resource","prepare_controlbar","insert_controlbar_audio","skin_style","media_skin_style","recorder_class","size_class","size","ss","fetch_strings","controls","fetch_dialogue_box","downloaddialog","errordialog","prepend","settingsdialog","errorsdialog","settingsicon","pausebutton","set_dialogue_box","register_controlbar_events_video","onMediaSuccess","register_controlbar_events_audio","hprogress","open","do_start_audio","do_stop_audio","stop","get","do_stopplay_audio","do_play_audio","on","currentTime","clear","fetchCurrent","ct","prop","duration","isFinite","finalseconds","blobs","length","do_save_audio","M","util","get_string","window","onbeforeunload","pause","button"],"mappings":"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","sourcesContent":["define(['jquery', 'jqueryui', 'core/log', 'filter_poodll/utils_amd', 'filter_poodll/anim_progress_bar', 'filter_poodll/speech_poodll', 'filter_poodll/dlg_devicesettings', 'filter_poodll/upskin_bar'], function ($, jqui, log, utils, anim_progress_bar, browserrecognition, settings, upskin_bar) {\r\n    /* jshint ignore:start */\r\n\r\n    \"use strict\"; // jshint ;_;\r\n\r\n    log.debug('PoodLL One Two Three Skin: initialising');\r\n\r\n    return {\r\n\r\n        instanceprops: null,\r\n        pmr: null,\r\n        stage: 'none',\r\n        uploaded: false,\r\n        devsettings: null,\r\n\r\n        //for making multiple instances\r\n        clone: function () {\r\n            return $.extend(true, {}, this);\r\n        },\r\n\r\n        init: function (ip, pmr) {\r\n            this.instanceprops = ip;\r\n            this.pmr = pmr;\r\n            this.devsettings = settings.clone();\r\n            this.devsettings.init(pmr, ip);\r\n        },\r\n\r\n\r\n        fetch_instanceprops: function () {\r\n            return this.instanceprops;\r\n        },\r\n\r\n\r\n        onUploadSuccess: function (controlbarid) {\r\n            $('#' + controlbarid + ' > .poodll_save-recording').hide();\r\n            $('#' + controlbarid + ' > .poodll_savedsuccessfully').show();\r\n        },\r\n\r\n        onUploadFailure: function (controlbarid) {\r\n            return;\r\n        },\r\n\r\n        fetch_status_bar: function (skin) {\r\n            var status = '<div class=\"poodll_status_' + skin + '\" height=\"50\">00:00:00</div>';\r\n            return status;\r\n        },\r\n\r\n        fetch_preview_audio: function (skin) {\r\n            var preview = '<audio class=\"audio_preview_123 poodll_preview_' + skin + '\" style=\"display: none;\" width=\"100%\" height=\"100%\" controls playsinline=\"playsinline\" muted></audio>';\r\n            return preview;\r\n        },\r\n        fetch_preview_video: function (skin) {\r\n            var preview = '<video class=\"video_preview_123 poodll_preview_' + skin + '\" width=\"100%\" height=\"300px\" playsinline=\"playsinline\" muted></video>';\r\n            return preview;\r\n        },\r\n        fetch_resource_audio: function (skin) {\r\n            var resourceplayer = '<audio class=\"poodll_resourceplayer_' + skin + '\" style=\"display: none;\" playsinline=\"playsinline\"></audio>';\r\n            return resourceplayer;\r\n        },\r\n        fetch_resource_video: function (skin) {\r\n            var resourceplayer = '<video class=\"poodll_resourceplayer_' + skin + '\" style=\"display: none;\" playsinline=\"playsinline\"></video>';\r\n            return resourceplayer;\r\n        },\r\n        fetch_uploader_skin: function (controlbarid, element) {\r\n            var ip = this.fetch_instanceprops(controlbarid);\r\n            var upskin = upskin_bar.clone();\r\n            upskin.init(ip.config, element, ip.controlbar.progresscanvas, ip.controlbar.timer);\r\n            return upskin;\r\n        },\r\n\r\n\r\n        onMediaError: function (e) {\r\n            console.error('media error', e);\r\n        },\r\n\r\n        onMediaSuccess_video: function (controlbarid) {\r\n            var ip = this.fetch_instanceprops(controlbarid);\r\n\r\n            //clear messages\r\n            ip.uploader.Output('');\r\n\r\n            this.set_visual_mode('recordmode', controlbarid);\r\n            //timer and status bar\r\n            ip.timer.reset();\r\n            ip.timer.start();\r\n            this.update_status(controlbarid);\r\n\r\n            //set recording stage\r\n            this.stage = \"recorded\";\r\n        },\r\n\r\n        onMediaSuccess_audio: function (controlbarid) {\r\n            var ip = this.fetch_instanceprops(controlbarid);\r\n\r\n            //clear messages\r\n            ip.uploader.Output('');\r\n\r\n            this.set_visual_mode('recordmode', controlbarid);\r\n            //timer and status bar\r\n            ip.timer.reset();\r\n            ip.timer.start();\r\n            this.update_status(controlbarid);\r\n            ip.controlbar.preview.attr('src', null);\r\n\r\n            //set recording stage\r\n            this.stage = \"recorded\";\r\n\r\n        },\r\n\r\n        handle_timer_update: function (controlbarid) {\r\n            var ip = this.fetch_instanceprops(controlbarid);\r\n            ip.controlbar.status.html(ip.timer.fetch_display_time());\r\n            if (ip.timer.seconds == 0 && ip.timer.initseconds > 0) {\r\n                ip.controlbar.stoprecbutton.click();\r\n            }\r\n        },\r\n\r\n        update_status: function (controlbarid) {\r\n            var ip = this.fetch_instanceprops(controlbarid);\r\n            ip.controlbar.status.html(ip.timer.fetch_display_time());\r\n        },\r\n\r\n        //set visuals for different states (ie recording or playing)\r\n        set_visual_mode: function (mode, controlbarid) {\r\n            var self = this;\r\n            var ip = this.fetch_instanceprops(controlbarid);\r\n\r\n            switch (mode) {\r\n\r\n                case 'recordmode':\r\n                    ip.controlbar.progress.hide();\r\n                    ip.controlbar.preview.addClass('poodll_recording');\r\n                    ip.controlbar.status.addClass('poodll_recording');\r\n                    if (ip.config.mediatype == 'audio') {\r\n                        ip.controlbar.preview.addClass('hide');\r\n                    }\r\n                    ip.controlbar.status.removeClass('hide');\r\n                    self.disable_button(this);\r\n                    self.disable_button(ip.controlbar.playbutton);\r\n                    ip.controlbar.playbutton.show();\r\n                    self.disable_button(ip.controlbar.stopbutton);\r\n                    ip.controlbar.stopbutton.hide();\r\n                    self.disable_button(ip.controlbar.savebutton);\r\n                    ip.controlbar.savebutton.show();\r\n                    self.enable_button(ip.controlbar.stoprecbutton);\r\n                    ip.controlbar.stoprecbutton.show();\r\n                    ip.controlbar.startbutton.hide();\r\n\r\n\r\n                    break;\r\n\r\n                case 'previewmode':\r\n                    ip.controlbar.playbutton.hide();\r\n                    self.enable_button(ip.controlbar.stopbutton);\r\n                    ip.controlbar.stopbutton.show();\r\n                    self.disable_button(ip.controlbar.startbutton);\r\n                    ip.controlbar.startbutton.show();\r\n                    self.disable_button(ip.controlbar.resumebutton);\r\n                    ip.controlbar.resumebutton.hide();\r\n                    self.disable_button(ip.controlbar.playbutton);\r\n                    ip.controlbar.preview.removeClass('poodll_recording');\r\n                    ip.controlbar.status.removeClass('poodll_recording');\r\n                    if (ip.config.mediatype == 'audio') {\r\n                        ip.controlbar.preview.removeClass('hide');\r\n                    } else {\r\n                        ip.controlbar.status.removeClass('hide');\r\n                    }\r\n\r\n                    ip.controlbar.status.addClass('hide');\r\n                    if (ip.controlbar.progresscanvas.hasClass(\"hide\")) {\r\n                        ip.controlbar.progresscanvas.removeClass('hide');\r\n                        ip.controlbar.progresscanvas.show();\r\n                    }\r\n\r\n                    if (!$(this).hasClass('played')) {\r\n                        $(this).addClass('played');\r\n                        ip.controlbar.steptwo.empty();\r\n                        ip.controlbar.steptwo.append('<i class=\"fa fa-check\" aria-hidden=\"true\"></i>').hide().fadeIn(1000);\r\n                    }\r\n\r\n\r\n                    break;\r\n\r\n                case 'pausedmode':\r\n\r\n                    self.enable_button(ip.controlbar.startbutton);\r\n                    ip.controlbar.startbutton.show();\r\n                    self.enable_button(ip.controlbar.playbutton);\r\n                    ip.controlbar.playbutton.show();\r\n                    self.disable_button(ip.controlbar.savebutton);\r\n                    ip.controlbar.savebutton.show();\r\n                    ip.controlbar.preview.removeClass('poodll_recording');\r\n                    ip.controlbar.status.removeClass('poodll_recording');\r\n                    ip.controlbar.stoprecbutton.hide();\r\n\r\n\r\n                    ip.controlbar.timer.html('00:00:00');\r\n\r\n                    ip.controlbar.status.addClass('hide');\r\n                    ip.controlbar.progress.show();\r\n\r\n                    ip.controlbar.stepone.empty();\r\n                    ip.controlbar.stepone.append('<i class=\"fa fa-check\" aria-hidden=\"true\"></i>').hide().fadeIn(1000);\r\n\r\n                    self.disable_button(ip.controlbar.stoprecbutton);\r\n\r\n                    break;\r\n\r\n\r\n                case 'stopplayingmode':\r\n                    if (!self.uploaded) {\r\n                        self.enable_button(ip.controlbar.savebutton);\r\n                        self.enable_button(ip.controlbar.startbutton);\r\n                    }\r\n\r\n                    if (!ip.controlbar.progresscanvas.hasClass('hide')) {\r\n                        ip.controlbar.timer.html('00:00:00');\r\n                        ip.controlbar.progresscanvas.addClass('hide');\r\n                        ip.controlbar.progresscanvas.hide();\r\n                    }\r\n                    ip.controlbar.stopbutton.hide();\r\n                    ip.controlbar.playbutton.show();\r\n                    ip.controlbar.startbutton.show();\r\n                    self.enable_button(ip.controlbar.playbutton);\r\n                    self.disable_button(ip.controlbar.stopbutton);\r\n                    break;\r\n\r\n                case 'uploadmode':\r\n\r\n                    self.disable_button(ip.controlbar.startbutton);\r\n                    ip.controlbar.progresscanvas.removeClass('hide');\r\n                    ip.controlbar.progresscanvas.show();\r\n\r\n                    break;\r\n\r\n                case 'savemode':\r\n\r\n                    self.disable_button(ip.controlbar.savebutton);\r\n                    ip.controlbar.stepthree.empty();\r\n                    ip.controlbar.stepthree.append('<i class=\"fa fa-check\" aria-hidden=\"true\"></i>').hide().fadeIn(1000);\r\n                    break;\r\n            }\r\n\r\n        },\r\n\r\n        //insert the control bar and return it to be reused\r\n        insert_controlbar_video: function (element, controlbarid, preview, resource) {\r\n            var controlbar = this.prepare_controlbar(element, controlbarid, preview, resource, 'video');\r\n            return controlbar;\r\n        },\r\n        //insert the control bar and return it to be reused\r\n        insert_controlbar_audio: function (element, controlbarid, preview, resource) {\r\n            var controlbar = this.prepare_controlbar(element, controlbarid, preview, resource, 'audio');\r\n            return controlbar;\r\n        },\r\n\r\n        //insert the control bar and return it to be reused\r\n        prepare_controlbar: function (element, controlbarid, preview, resource, mediatype) {\r\n            var ip = this.fetch_instanceprops(controlbarid);\r\n            var skin_style = ip.config.media_skin_style;\r\n\r\n            var recorder_class = mediatype == 'video' ? 'poodll_mediarecorder_video' : 'poodll_mediarecorder_audio';\r\n\r\n            var size_class = 'poodll_mediarecorder_size_auto';\r\n            switch (ip.config.size) {\r\n                case 'small':\r\n                    size_class = 'poodll_mediarecorder_size_small';\r\n                    break;\r\n                case 'big':\r\n                    size_class = 'poodll_mediarecorder_size_big';\r\n                    break;\r\n                case 'auto':\r\n                    size_class = 'poodll_mediarecorder_size_auto';\r\n            }\r\n            var ss = this.pmr.fetch_strings();\r\n            var controls = '<div class=\"one-two-three-main-wrapper poodll_mediarecorderholder_onetwothree ' + recorder_class + ' ' + size_class + '\" id=\"holder_' + controlbarid + '\">';\r\n\r\n            controls += '<div class=\"modal-box poodll_mediarecorderbox_onetwothree one-two-three-wrap\" id=\"' + controlbarid + '\">';\r\n            controls += '<div class=\"style-holder ' + skin_style + '\">';\r\n            var status = this.fetch_status_bar('onetwothree');\r\n            controls += status,\r\n                controls += '<div class=\"hp_slide\" id=\"slide_' + controlbarid + '\">';\r\n            controls += '<div class=\"hp_timer\"></div><canvas class=\"hp_range\"></canvas></div>';\r\n            controls += preview,\r\n                controls += '<div class=\"settingsicon\" id=\"settingsicon_' + controlbarid + '\"><button type=\"button\" class=\"btn btn-info btn-lg\" data-toggle=\"modal\" data-target=\"#myModal\"><i class=\"fa fa-cogs\" aria-hidden=\"true\"></i></button></div>';\r\n            controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_onetwothree poodll_start-recording_onetwothree\"><i class=\"fa fa-microphone\" aria-hidden=\"true\"></i></button> ';\r\n            controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_onetwothree poodll_stop-recording_onetwothree pmr_disabled\" style=\"display: none;\" disabled><i class=\"fa fa-stop\" aria-hidden=\"true\"></i></button>';\r\n            controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_onetwothree poodll_pause-recording_onetwothree pmr_disabled\" style=\"display: none;\" disabled><i class=\"fa fa-pause\" aria-hidden=\"true\"></i></button>';\r\n            controls += ' <button type=\"button\" class=\"poodll_mediarecorder_button_onetwothree poodll_resume-recording_onetwothree pmr_disabled\" style=\"display: none;\" disabled><i class=\"fa fa-microphone\" aria-hidden=\"true\"></i></button>';\r\n            controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_onetwothree poodll_play-recording_onetwothree pmr_disabled\" disabled><i class=\"fa fa-play\" aria-hidden=\"true\"></i></button> ';\r\n            controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_onetwothree poodll_stop-playing_onetwothree pmr_disabled\" style=\"display: none;\" disabled><i class=\"fa fa-stop\" aria-hidden=\"true\"></i></button>';\r\n            controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_onetwothree poodll_save-recording_onetwothree pmr_disabled\" disabled><i class=\"fa fa-upload\" aria-hidden=\"true\"></i></button>';\r\n            controls += '<div style=\"clear:both;\">';\r\n            controls += '<div class=\"task-helper\">';\r\n            controls += '<p class=\"step-1\">' + ss['recui_record'] + '</p>';\r\n            controls += '<p class=\"step-2\">' + ss['recui_play'] + '</p>';\r\n            controls += '<p class=\"step-3\">' + ss['recui_save'] + '</p>';\r\n            controls += '</div>';\r\n            controls += '</div>';\r\n            controls += '</div>';\r\n            controls += this.devsettings.fetch_dialogue_box();\r\n            controls += ip.downloaddialog.fetch_dialogue_box();\r\n            controls += ip.errordialog.fetch_dialogue_box();\r\n            controls += '</div>';\r\n\r\n            $(element).prepend(controls);\r\n\r\n            var controlbar = {\r\n                settingsdialog: $('#' + controlbarid + ' .poodll_dialogue_box_settings'),\r\n                downloaddialog: $('#' + controlbarid + ' .poodll_dialogue_box_download'),\r\n                errorsdialog: $('#' + controlbarid + ' .poodll_dialogue_box_errors'),\r\n                settingsicon: $('#' + controlbarid + ' .settingsicon'),\r\n                stepone: $('#' + controlbarid + ' .step-1'),\r\n                steptwo: $('#' + controlbarid + ' .step-2'),\r\n                stepthree: $('#' + controlbarid + ' .step-3'),\r\n                progresscanvas: $('#' + controlbarid + ' .hp_range'),\r\n                progress: $('#' + controlbarid + ' .hp_slide'),\r\n                timer: $('#' + controlbarid + ' .hp_timer'),\r\n                status: $('#' + controlbarid + ' .poodll_status_onetwothree'),\r\n                preview: $('#' + controlbarid + ' .poodll_preview_onetwothree'),\r\n                startbutton: $('#' + controlbarid + ' .poodll_start-recording_onetwothree'),\r\n                stoprecbutton: $('#' + controlbarid + ' .poodll_stop-recording_onetwothree'),\r\n                stopbutton: $('#' + controlbarid + ' .poodll_stop-playing_onetwothree'),\r\n                pausebutton: $('#' + controlbarid + ' .poodll_pause-recording_onetwothree'),\r\n                resumebutton: $('#' + controlbarid + ' .poodll_resume-recording_onetwothree'),\r\n                playbutton: $('#' + controlbarid + ' .poodll_play-recording_onetwothree'),\r\n                savebutton: $('#' + controlbarid + ' .poodll_save-recording_onetwothree')\r\n            };\r\n\r\n            //settings and error and download dialogs\r\n            //settings is on 'this' because it is shown from skkn events, but errors are from pmr stuff\r\n            ip.downloaddialog.set_dialogue_box(controlbar.downloaddialog);\r\n            ip.errordialog.set_dialogue_box(controlbar.errorsdialog);\r\n            this.devsettings.set_dialogue_box(controlbar.settingsdialog);\r\n\r\n            return controlbar;\r\n        }, //end of fetch_control_bar_onetwothree\r\n\r\n\r\n        register_controlbar_events_video: function (onMediaSuccess, controlbarid) {\r\n            return this.register_controlbar_events_audio(onMediaSuccess, controlbarid);\r\n        },\r\n\r\n        register_controlbar_events_audio: function (onMediaSuccess, controlbarid) {\r\n            var self = this;\r\n            var pmr = this.pmr;\r\n            var stage = this.stage;\r\n            var ip = this.fetch_instanceprops(controlbarid);\r\n\r\n            //init linear progress\r\n            var hprogress = anim_progress_bar.clone();\r\n            hprogress.init(ip.controlbar.progresscanvas);\r\n\r\n            ip.controlbar.settingsicon.click(function () {\r\n                if (!self.uploaded) {\r\n                    self.devsettings.open();\r\n                } else {\r\n                    ip.downloaddialog.open();\r\n                }\r\n            });\r\n\r\n            ip.controlbar.startbutton.click(function () {\r\n                pmr.do_start_audio(ip, onMediaSuccess);\r\n            });\r\n\r\n            ip.controlbar.stoprecbutton.click(function () {\r\n                pmr.do_stop_audio(ip);\r\n                self.set_visual_mode('pausedmode', controlbarid);\r\n                //timer and status bar\r\n                ip.timer.stop();\r\n                ip.timer.reset();\r\n                self.update_status(controlbarid);\r\n            });\r\n\r\n\r\n            ip.controlbar.stopbutton.click(function () {\r\n                self.set_visual_mode('stopplayingmode', controlbarid);\r\n                //stop playing\r\n                var preview = ip.controlbar.preview.get(0);\r\n                pmr.do_stopplay_audio(ip, preview);\r\n                hprogress.stop();\r\n            });\r\n\r\n            ip.controlbar.playbutton.click(function () {\r\n\r\n                var preview = ip.controlbar.preview.get(0);\r\n                pmr.do_play_audio(ip, preview);\r\n\r\n                ip.controlbar.preview.on('timeupdate', function () {\r\n                    var currentTime = this.currentTime;\r\n                    ip.controlbar.timer.html(ip.timer.fetch_display_time(currentTime));\r\n                });\r\n\r\n\r\n                //do visuals\r\n                self.set_visual_mode('previewmode', controlbarid);\r\n\r\n                //set recording stage\r\n                stage = \"played\";\r\n\r\n                //start animation\r\n                hprogress.clear();\r\n                hprogress.fetchCurrent = function () {\r\n                    var ct = ip.controlbar.preview.prop('currentTime');\r\n                    var duration = ip.controlbar.preview.prop('duration');\r\n                    if (!isFinite(duration)) {\r\n                        duration = ip.timer.finalseconds;\r\n                    }\r\n                    return ct / duration;\r\n                };\r\n                hprogress.start();\r\n\r\n            });\r\n\r\n            ip.controlbar.savebutton.click(function () {\r\n                self.set_visual_mode('savemode', controlbarid);\r\n                log.debug('save');\r\n                if (ip.blobs && ip.blobs.length > 0) {\r\n                    pmr.do_save_audio(ip);\r\n                    self.uploaded = true;\r\n                    self.set_visual_mode('uploadmode', controlbarid);\r\n                    //set recording stage\r\n                    stage = \"saved\";\r\n                } else {\r\n                    ip.uploader.Output(M.util.get_string('recui_nothingtosaveerror', 'filter_poodll'));\r\n                }//end of if self.blobs\r\n                //probably not necessary  ... but getting odd ajax errors occasionally\r\n                return false;\r\n            });//end of save recording\r\n\r\n            window.onbeforeunload = function () {\r\n                self.enable_button(ip.controlbar.startbutton);\r\n                var preview = ip.controlbar.preview;\r\n                if (preview && preview.get(0)) {\r\n                    preview.get(0).pause();\r\n                }\r\n            };\r\n\r\n        }, //end of register_control_bar_events_onetwothree\r\n\r\n\r\n        enable_button: function (button) {\r\n            $(button).attr('disabled', false);\r\n            $(button).removeClass('pmr_disabled');\r\n        },\r\n        disable_button: function (button) {\r\n            $(button).attr('disabled', true);\r\n            $(button).addClass('pmr_disabled');\r\n        },\r\n\r\n    };//end of returned object\r\n\r\n});//total end\r\n\r\n"],"file":"poodll_onetwothreemediaskin.min.js"}