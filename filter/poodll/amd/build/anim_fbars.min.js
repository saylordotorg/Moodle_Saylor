define(["jquery","core/log"],function(a,b){"use strict";return b.debug("anim_freq bars: initialising"),{analyser:null,cvs:null,cvsctx:null,clone:function(){return a.extend(!0,{},this)},init:function(a,b){this.cvs=b,this.cvsctx=b.getContext("2d"),this.analyser=a},clear:function(){this.cvsctx.clearRect(0,0,this.cvs.width,this.cvs.height)},start:function(){this.analyser.core.fftSize=256;var a=this.analyser.core.frequencyBinCount,b=new Uint8Array(a),c=this.cvs.width,d=this.cvs.height,e=this.cvsctx,f=this.analyser;this.clear();var g=function(){requestAnimationFrame(g);if(f.theinterval){f.core.getByteFrequencyData(b),e.clearRect(0,0,c,d);for(var h,i=c/a*2.5,j=0,k=0;k<a;k++)h=b[k],e.fillStyle="rgb("+(h+100)+",50,50)",e.fillRect(j,d-h/2,i,h/2),j+=i+1}};g()}}});