{"version":3,"sources":["../src/poodll_screenmediaskin.js"],"names":["define","$","log","utils","anim_progress_bar","browserrecognition","settings","upskin_bar","debug","instanceprops","pmr","stage","uploaded","devsettings","clone","extend","init","ip","set_media_type","fetch_instanceprops","onUploadSuccess","controlbarid","hide","show","onUploadFailure","fetch_status_bar","skin","fetch_preview_audio","fetch_preview_video","fetch_resource_audio","fetch_resource_video","fetch_uploader_skin","element","upskin","config","controlbar","progresscanvas","timer","onMediaError","e","console","error","onMediaSuccess_video","uploader","Output","set_visual_mode","reset","start","update_status","handle_timer_update","status","html","fetch_display_time","seconds","initseconds","stoprecbutton","click","mode","self","progress","preview","addClass","removeClass","disable_button","playbutton","stopbutton","savebutton","enable_button","startbutton","resumebutton","hasClass","steptwo","empty","append","fadeIn","stepone","stepthree","insert_controlbar_video","resource","prepare_controlbar","skin_style","media_skin_style","size_class","size","ss","fetch_strings","controls","fetch_dialogue_box","downloaddialog","errordialog","prepend","settingsdialog","errorsdialog","settingsicon","pausebutton","set_dialogue_box","register_controlbar_events_video","onMediaSuccess","hprogress","open","do_start_screen","do_stop_audio","stop","get","do_stopplay_audio","do_play_audio","on","currentTime","clear","fetchCurrent","ct","prop","duration","isFinite","finalseconds","blobs","length","do_save_audio","M","util","get_string","window","onbeforeunload","pause","button","attr"],"mappings":"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","sourcesContent":["define(['jquery',  'core/log', 'filter_poodll/utils_amd', 'filter_poodll/anim_progress_bar', 'filter_poodll/speech_poodll', 'filter_poodll/dlg_devicesettings', 'filter_poodll/upskin_bar'],\r\n    function ($,  log, utils, anim_progress_bar, browserrecognition, settings, upskin_bar) {\r\n    /* jshint ignore:start */\r\n\r\n    \"use strict\"; // jshint ;_;\r\n\r\n    log.debug('PoodLL ScreenRecorder Skin: initialising');\r\n\r\n    return {\r\n\r\n        instanceprops: null,\r\n        pmr: null,\r\n        stage: 'none',\r\n        uploaded: false,\r\n        devsettings: null,\r\n\r\n        //for making multiple instances\r\n        clone: function () {\r\n            return $.extend(true, {}, this);\r\n        },\r\n\r\n        init: function (ip, pmr) {\r\n            this.instanceprops = ip;\r\n            this.pmr = pmr;\r\n            this.devsettings = settings.clone();\r\n            this.devsettings.init(pmr, ip);\r\n            //we do not actually want to show the video camera selection\r\n            this.devsettings.set_media_type('audio');\r\n        },\r\n\r\n\r\n        fetch_instanceprops: function () {\r\n            return this.instanceprops;\r\n        },\r\n\r\n\r\n        onUploadSuccess: function (controlbarid) {\r\n            $('#' + controlbarid + ' > .poodll_save-recording').hide();\r\n            $('#' + controlbarid + ' > .poodll_savedsuccessfully').show();\r\n        },\r\n\r\n        onUploadFailure: function (controlbarid) {\r\n            return;\r\n        },\r\n\r\n        fetch_status_bar: function (skin) {\r\n            var status = '<div class=\"poodll_status_' + skin + '\" height=\"50\">00:00:00</div>';\r\n            return status;\r\n        },\r\n\r\n        fetch_preview_audio: function (skin) {\r\n            var preview = '<audio class=\"audio_preview_screen poodll_preview_' + skin + '\" style=\"display: none;\" width=\"100%\" height=\"100%\" controls playsinline=\"playsinline\" muted></audio>';\r\n            return preview;\r\n        },\r\n        fetch_preview_video: function (skin) {\r\n            var preview = '<video class=\"video_preview_screen poodll_preview_' + skin + '\" width=\"100%\" height=\"300px\" playsinline=\"playsinline\" muted></video>';\r\n            return preview;\r\n        },\r\n        fetch_resource_audio: function (skin) {\r\n            var resourceplayer = '<audio class=\"poodll_resourceplayer_' + skin + '\" style=\"display: none;\" playsinline=\"playsinline\"></audio>';\r\n            return resourceplayer;\r\n        },\r\n        fetch_resource_video: function (skin) {\r\n            var resourceplayer = '<video class=\"poodll_resourceplayer_' + skin + '\" style=\"display: none;\" playsinline=\"playsinline\"></video>';\r\n            return resourceplayer;\r\n        },\r\n        fetch_uploader_skin: function (controlbarid, element) {\r\n            var ip = this.fetch_instanceprops(controlbarid);\r\n            var upskin = upskin_bar.clone();\r\n            upskin.init(ip.config, element, ip.controlbar.progresscanvas, ip.controlbar.timer);\r\n            return upskin;\r\n        },\r\n\r\n\r\n        onMediaError: function (e) {\r\n            console.error('media error', e);\r\n        },\r\n\r\n        onMediaSuccess_video: function (controlbarid) {\r\n            var ip = this.fetch_instanceprops(controlbarid);\r\n\r\n            //clear messages\r\n            ip.uploader.Output('');\r\n\r\n            this.set_visual_mode('recordmode', controlbarid);\r\n            //timer and status bar\r\n            ip.timer.reset();\r\n            ip.timer.start();\r\n            this.update_status(controlbarid);\r\n\r\n            //set recording stage\r\n            this.stage = \"recorded\";\r\n        },\r\n\r\n\r\n        handle_timer_update: function (controlbarid) {\r\n            var ip = this.fetch_instanceprops(controlbarid);\r\n            ip.controlbar.status.html(ip.timer.fetch_display_time());\r\n            if (ip.timer.seconds == 0 && ip.timer.initseconds > 0) {\r\n                ip.controlbar.stoprecbutton.click();\r\n            }\r\n        },\r\n\r\n        update_status: function (controlbarid) {\r\n            var ip = this.fetch_instanceprops(controlbarid);\r\n            ip.controlbar.status.html(ip.timer.fetch_display_time());\r\n        },\r\n\r\n        //set visuals for different states (ie recording or playing)\r\n        set_visual_mode: function (mode, controlbarid) {\r\n            var self = this;\r\n            var ip = this.fetch_instanceprops(controlbarid);\r\n\r\n            switch (mode) {\r\n\r\n                case 'recordmode':\r\n                    ip.controlbar.progress.hide();\r\n                    ip.controlbar.preview.addClass('poodll_recording');\r\n                    ip.controlbar.status.addClass('poodll_recording');\r\n                    ip.controlbar.status.removeClass('hide');\r\n                    self.disable_button(this);\r\n                    self.disable_button(ip.controlbar.playbutton);\r\n                    ip.controlbar.playbutton.show();\r\n                    self.disable_button(ip.controlbar.stopbutton);\r\n                    ip.controlbar.stopbutton.hide();\r\n                    self.disable_button(ip.controlbar.savebutton);\r\n                    ip.controlbar.savebutton.show();\r\n                    self.enable_button(ip.controlbar.stoprecbutton);\r\n                    ip.controlbar.stoprecbutton.show();\r\n                    ip.controlbar.startbutton.hide();\r\n\r\n\r\n                    break;\r\n\r\n                case 'previewmode':\r\n                    ip.controlbar.playbutton.hide();\r\n                    self.enable_button(ip.controlbar.stopbutton);\r\n                    ip.controlbar.stopbutton.show();\r\n                    self.disable_button(ip.controlbar.startbutton);\r\n                    ip.controlbar.startbutton.show();\r\n                    self.disable_button(ip.controlbar.resumebutton);\r\n                    ip.controlbar.resumebutton.hide();\r\n                    self.disable_button(ip.controlbar.playbutton);\r\n                    ip.controlbar.preview.removeClass('poodll_recording');\r\n                    ip.controlbar.status.removeClass('poodll_recording');\r\n                    ip.controlbar.status.removeClass('hide');\r\n\r\n\r\n                    ip.controlbar.status.addClass('hide');\r\n                    if (ip.controlbar.progresscanvas.hasClass(\"hide\")) {\r\n                        ip.controlbar.progresscanvas.removeClass('hide');\r\n                        ip.controlbar.progresscanvas.show();\r\n                    }\r\n\r\n                    if (!$(this).hasClass('played')) {\r\n                        $(this).addClass('played');\r\n                        ip.controlbar.steptwo.empty();\r\n                        ip.controlbar.steptwo.append('<i class=\"fa fa-check\" aria-hidden=\"true\"></i>').hide().fadeIn(1000);\r\n                    }\r\n\r\n\r\n                    break;\r\n\r\n                case 'pausedmode':\r\n\r\n                    self.enable_button(ip.controlbar.startbutton);\r\n                    ip.controlbar.startbutton.show();\r\n                    self.enable_button(ip.controlbar.playbutton);\r\n                    ip.controlbar.playbutton.show();\r\n                    self.disable_button(ip.controlbar.savebutton);\r\n                    ip.controlbar.savebutton.show();\r\n                    ip.controlbar.preview.removeClass('poodll_recording');\r\n                    ip.controlbar.status.removeClass('poodll_recording');\r\n                    ip.controlbar.stoprecbutton.hide();\r\n\r\n\r\n                    ip.controlbar.timer.html('00:00:00');\r\n\r\n                    ip.controlbar.status.addClass('hide');\r\n                    ip.controlbar.progress.show();\r\n\r\n                    ip.controlbar.stepone.empty();\r\n                    ip.controlbar.stepone.append('<i class=\"fa fa-check\" aria-hidden=\"true\"></i>').hide().fadeIn(1000);\r\n\r\n                    self.disable_button(ip.controlbar.stoprecbutton);\r\n\r\n                    break;\r\n\r\n\r\n                case 'stopplayingmode':\r\n                    if (!self.uploaded) {\r\n                        self.enable_button(ip.controlbar.savebutton);\r\n                        self.enable_button(ip.controlbar.startbutton);\r\n                    }\r\n\r\n                    if (!ip.controlbar.progresscanvas.hasClass('hide')) {\r\n                        ip.controlbar.timer.html('00:00:00');\r\n                        ip.controlbar.progresscanvas.addClass('hide');\r\n                        ip.controlbar.progresscanvas.hide();\r\n                    }\r\n                    ip.controlbar.stopbutton.hide();\r\n                    ip.controlbar.playbutton.show();\r\n                    ip.controlbar.startbutton.show();\r\n                    self.enable_button(ip.controlbar.playbutton);\r\n                    self.disable_button(ip.controlbar.stopbutton);\r\n                    break;\r\n\r\n                case 'uploadmode':\r\n\r\n                    self.disable_button(ip.controlbar.startbutton);\r\n                    ip.controlbar.progresscanvas.removeClass('hide');\r\n                    ip.controlbar.progresscanvas.show();\r\n\r\n                    break;\r\n\r\n                case 'savemode':\r\n\r\n                    self.disable_button(ip.controlbar.savebutton);\r\n                    ip.controlbar.stepthree.empty();\r\n                    ip.controlbar.stepthree.append('<i class=\"fa fa-check\" aria-hidden=\"true\"></i>').hide().fadeIn(1000);\r\n                    break;\r\n            }\r\n\r\n        },\r\n\r\n        //insert the control bar and return it to be reused\r\n        insert_controlbar_video: function (element, controlbarid, preview, resource) {\r\n            var controlbar = this.prepare_controlbar(element, controlbarid, preview, resource, 'video');\r\n            return controlbar;\r\n        },\r\n\r\n        //insert the control bar and return it to be reused\r\n        prepare_controlbar: function (element, controlbarid, preview, resource, mediatype) {\r\n            var ip = this.fetch_instanceprops(controlbarid);\r\n            var skin_style = ip.config.media_skin_style;\r\n\r\n            var recorder_class =  'poodll_mediarecorder_video' ;\r\n\r\n            var size_class = 'poodll_mediarecorder_size_auto';\r\n            switch (ip.config.size) {\r\n                case 'small':\r\n                    size_class = 'poodll_mediarecorder_size_small';\r\n                    break;\r\n                case 'big':\r\n                    size_class = 'poodll_mediarecorder_size_big';\r\n                    break;\r\n                case 'auto':\r\n                    size_class = 'poodll_mediarecorder_size_auto';\r\n            }\r\n            var ss = this.pmr.fetch_strings();\r\n            var controls = '<div class=\"screen-main-wrapper poodll_mediarecorderholder_screen ' + recorder_class + ' ' + size_class + '\" id=\"holder_' + controlbarid + '\">';\r\n\r\n            controls += '<div class=\"modal-box poodll_mediarecorderbox_screen screen-wrap\" id=\"' + controlbarid + '\">';\r\n            controls += '<div class=\"style-holder ' + skin_style + '\">';\r\n            var status = this.fetch_status_bar('screen');\r\n            controls += status,\r\n                controls += '<div class=\"hp_slide\" id=\"slide_' + controlbarid + '\">';\r\n            controls += '<div class=\"hp_timer\"></div><canvas class=\"hp_range\"></canvas></div>';\r\n            controls += preview,\r\n                controls += '<div class=\"settingsicon\" id=\"settingsicon_' + controlbarid + '\"><button type=\"button\" class=\"btn btn-info btn-lg\" data-toggle=\"modal\" data-target=\"#myModal\"><i class=\"fa fa-cogs\" aria-hidden=\"true\"></i></button></div>';\r\n            controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_screen poodll_start-recording_screen\"><i class=\"fa fa-desktop\" aria-hidden=\"true\"></i></button> ';\r\n            controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_screen poodll_stop-recording_screen pmr_disabled\" style=\"display: none;\" disabled><i class=\"fa fa-stop\" aria-hidden=\"true\"></i></button>';\r\n            controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_screen poodll_pause-recording_screen pmr_disabled\" style=\"display: none;\" disabled><i class=\"fa fa-pause\" aria-hidden=\"true\"></i></button>';\r\n            controls += ' <button type=\"button\" class=\"poodll_mediarecorder_button_screen poodll_resume-recording_screen pmr_disabled\" style=\"display: none;\" disabled><i class=\"fa fa-microphone\" aria-hidden=\"true\"></i></button>';\r\n            controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_screen poodll_play-recording_screen pmr_disabled\" disabled><i class=\"fa fa-play\" aria-hidden=\"true\"></i></button> ';\r\n            controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_screen poodll_stop-playing_screen pmr_disabled\" style=\"display: none;\" disabled><i class=\"fa fa-stop\" aria-hidden=\"true\"></i></button>';\r\n            controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_screen poodll_save-recording_screen pmr_disabled\" disabled><i class=\"fa fa-upload\" aria-hidden=\"true\"></i></button>';\r\n            controls += '<div style=\"clear:both;\">';\r\n            controls += '<div class=\"task-helper\">';\r\n            controls += '<p class=\"step-1\">' + ss['recui_record'] + '</p>';\r\n            controls += '<p class=\"step-2\">' + ss['recui_play'] + '</p>';\r\n            controls += '<p class=\"step-3\">' + ss['recui_save'] + '</p>';\r\n            controls += '</div>';\r\n            controls += '</div>';\r\n            controls += '</div>';\r\n            controls += this.devsettings.fetch_dialogue_box();\r\n            controls += ip.downloaddialog.fetch_dialogue_box();\r\n            controls += ip.errordialog.fetch_dialogue_box();\r\n            controls += '</div>';\r\n\r\n            $(element).prepend(controls);\r\n\r\n            var controlbar = {\r\n                settingsdialog: $('#' + controlbarid + ' .poodll_dialogue_box_settings'),\r\n                downloaddialog: $('#' + controlbarid + ' .poodll_dialogue_box_download'),\r\n                errorsdialog: $('#' + controlbarid + ' .poodll_dialogue_box_errors'),\r\n                settingsicon: $('#' + controlbarid + ' .settingsicon'),\r\n                stepone: $('#' + controlbarid + ' .step-1'),\r\n                steptwo: $('#' + controlbarid + ' .step-2'),\r\n                stepthree: $('#' + controlbarid + ' .step-3'),\r\n                progresscanvas: $('#' + controlbarid + ' .hp_range'),\r\n                progress: $('#' + controlbarid + ' .hp_slide'),\r\n                timer: $('#' + controlbarid + ' .hp_timer'),\r\n                status: $('#' + controlbarid + ' .poodll_status_screen'),\r\n                preview: $('#' + controlbarid + ' .poodll_preview_screen'),\r\n                startbutton: $('#' + controlbarid + ' .poodll_start-recording_screen'),\r\n                stoprecbutton: $('#' + controlbarid + ' .poodll_stop-recording_screen'),\r\n                stopbutton: $('#' + controlbarid + ' .poodll_stop-playing_screen'),\r\n                pausebutton: $('#' + controlbarid + ' .poodll_pause-recording_screen'),\r\n                resumebutton: $('#' + controlbarid + ' .poodll_resume-recording_screen'),\r\n                playbutton: $('#' + controlbarid + ' .poodll_play-recording_screen'),\r\n                savebutton: $('#' + controlbarid + ' .poodll_save-recording_screen')\r\n            };\r\n\r\n            //settings and error and download dialogs\r\n            //settings is on 'this' because it is shown from skkn events, but errors are from pmr stuff\r\n            ip.downloaddialog.set_dialogue_box(controlbar.downloaddialog);\r\n            ip.errordialog.set_dialogue_box(controlbar.errorsdialog);\r\n            this.devsettings.set_dialogue_box(controlbar.settingsdialog);\r\n\r\n            return controlbar;\r\n        }, //end of fetch_control_bar_screen\r\n\r\n\r\n        register_controlbar_events_video: function (onMediaSuccess, controlbarid) {\r\n            var self = this;\r\n            var pmr = this.pmr;\r\n            var stage = this.stage;\r\n            var ip = this.fetch_instanceprops(controlbarid);\r\n\r\n            //init linear progress\r\n            var hprogress = anim_progress_bar.clone();\r\n            hprogress.init(ip.controlbar.progresscanvas);\r\n\r\n            ip.controlbar.settingsicon.click(function () {\r\n                if (!self.uploaded) {\r\n                    self.devsettings.open();\r\n                } else {\r\n                    ip.downloaddialog.open();\r\n                }\r\n            });\r\n\r\n            ip.controlbar.startbutton.click(function () {\r\n                pmr.do_start_screen(ip, onMediaSuccess);\r\n            });\r\n\r\n            ip.controlbar.stoprecbutton.click(function () {\r\n                pmr.do_stop_audio(ip);\r\n                self.set_visual_mode('pausedmode', controlbarid);\r\n                //timer and status bar\r\n                ip.timer.stop();\r\n                ip.timer.reset();\r\n                self.update_status(controlbarid);\r\n            });\r\n\r\n\r\n            ip.controlbar.stopbutton.click(function () {\r\n                self.set_visual_mode('stopplayingmode', controlbarid);\r\n                //stop playing\r\n                var preview = ip.controlbar.preview.get(0);\r\n                pmr.do_stopplay_audio(ip, preview);\r\n                hprogress.stop();\r\n            });\r\n\r\n            ip.controlbar.playbutton.click(function () {\r\n\r\n                var preview = ip.controlbar.preview.get(0);\r\n                pmr.do_play_audio(ip, preview);\r\n\r\n                ip.controlbar.preview.on('timeupdate', function () {\r\n                    var currentTime = this.currentTime;\r\n                    ip.controlbar.timer.html(ip.timer.fetch_display_time(currentTime));\r\n                });\r\n\r\n\r\n                //do visuals\r\n                self.set_visual_mode('previewmode', controlbarid);\r\n\r\n                //set recording stage\r\n                stage = \"played\";\r\n\r\n                //start animation\r\n                hprogress.clear();\r\n                hprogress.fetchCurrent = function () {\r\n                    var ct = ip.controlbar.preview.prop('currentTime');\r\n                    var duration = ip.controlbar.preview.prop('duration');\r\n                    if (!isFinite(duration)) {\r\n                        duration = ip.timer.finalseconds;\r\n                    }\r\n                    return ct / duration;\r\n                };\r\n                hprogress.start();\r\n\r\n            });\r\n\r\n            ip.controlbar.savebutton.click(function () {\r\n                self.set_visual_mode('savemode', controlbarid);\r\n                log.debug('save');\r\n                if (ip.blobs && ip.blobs.length > 0) {\r\n                    pmr.do_save_audio(ip);\r\n                    self.uploaded = true;\r\n                    self.set_visual_mode('uploadmode', controlbarid);\r\n                    //set recording stage\r\n                    stage = \"saved\";\r\n                } else {\r\n                    ip.uploader.Output(M.util.get_string('recui_nothingtosaveerror', 'filter_poodll'));\r\n                }//end of if self.blobs\r\n                //probably not necessary  ... but getting odd ajax errors occasionally\r\n                return false;\r\n            });//end of save recording\r\n\r\n            window.onbeforeunload = function () {\r\n                self.enable_button(ip.controlbar.startbutton);\r\n                var preview = ip.controlbar.preview;\r\n                if (preview && preview.get(0)) {\r\n                    preview.get(0).pause();\r\n                }\r\n            };\r\n\r\n        }, //end of register_control_bar_events_screen\r\n\r\n\r\n        enable_button: function (button) {\r\n            $(button).attr('disabled', false);\r\n            $(button).removeClass('pmr_disabled');\r\n        },\r\n        disable_button: function (button) {\r\n            $(button).attr('disabled', true);\r\n            $(button).addClass('pmr_disabled');\r\n        },\r\n\r\n    };//end of returned object\r\n\r\n});//total end\r\n\r\n"],"file":"poodll_screenmediaskin.min.js"}