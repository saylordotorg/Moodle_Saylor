{"version":3,"file":"poodll_screenmediaskin.min.js","sources":["../src/poodll_screenmediaskin.js"],"sourcesContent":["define(['jquery',  'core/log', 'filter_poodll/utils_amd', 'filter_poodll/anim_progress_bar', 'filter_poodll/speech_poodll', 'filter_poodll/dlg_devicesettings', 'filter_poodll/upskin_bar'],\r\n    function ($,  log, utils, anim_progress_bar, browserrecognition, settings, upskin_bar) {\r\n    /* jshint ignore:start */\r\n\r\n    \"use strict\"; // jshint ;_;\r\n\r\n    log.debug('PoodLL ScreenRecorder Skin: initialising');\r\n\r\n    return {\r\n\r\n        instanceprops: null,\r\n        pmr: null,\r\n        stage: 'none',\r\n        uploaded: false,\r\n        devsettings: null,\r\n\r\n        //for making multiple instances\r\n        clone: function () {\r\n            return $.extend(true, {}, this);\r\n        },\r\n\r\n        init: function (ip, pmr) {\r\n            this.instanceprops = ip;\r\n            this.pmr = pmr;\r\n            this.devsettings = settings.clone();\r\n            this.devsettings.init(pmr, ip);\r\n            //we do not actually want to show the video camera selection\r\n            this.devsettings.set_media_type('audio');\r\n        },\r\n\r\n\r\n        fetch_instanceprops: function () {\r\n            return this.instanceprops;\r\n        },\r\n\r\n\r\n        onUploadSuccess: function (controlbarid) {\r\n            $('#' + controlbarid + ' > .poodll_save-recording').hide();\r\n            $('#' + controlbarid + ' > .poodll_savedsuccessfully').show();\r\n        },\r\n\r\n        onUploadFailure: function (controlbarid) {\r\n            return;\r\n        },\r\n\r\n        fetch_status_bar: function (skin) {\r\n            var status = '<div class=\"poodll_status_' + skin + '\" height=\"50\">00:00:00</div>';\r\n            return status;\r\n        },\r\n\r\n        fetch_preview_audio: function (skin) {\r\n            var preview = '<audio class=\"audio_preview_screen poodll_preview_' + skin + '\" style=\"display: none;\" width=\"100%\" height=\"100%\" controls playsinline=\"playsinline\" muted></audio>';\r\n            return preview;\r\n        },\r\n        fetch_preview_video: function (skin) {\r\n            var preview = '<video class=\"video_preview_screen poodll_preview_' + skin + '\" width=\"100%\" height=\"300px\" playsinline=\"playsinline\" muted></video>';\r\n            return preview;\r\n        },\r\n        fetch_resource_audio: function (skin) {\r\n            var resourceplayer = '<audio class=\"poodll_resourceplayer_' + skin + '\" style=\"display: none;\" playsinline=\"playsinline\"></audio>';\r\n            return resourceplayer;\r\n        },\r\n        fetch_resource_video: function (skin) {\r\n            var resourceplayer = '<video class=\"poodll_resourceplayer_' + skin + '\" style=\"display: none;\" playsinline=\"playsinline\"></video>';\r\n            return resourceplayer;\r\n        },\r\n        fetch_uploader_skin: function (controlbarid, element) {\r\n            var ip = this.fetch_instanceprops(controlbarid);\r\n            var upskin = upskin_bar.clone();\r\n            upskin.init(ip.config, element, ip.controlbar.progresscanvas, ip.controlbar.timer);\r\n            return upskin;\r\n        },\r\n\r\n\r\n        onMediaError: function (e) {\r\n            console.error('media error', e);\r\n        },\r\n\r\n        onMediaSuccess_video: function (controlbarid) {\r\n            var ip = this.fetch_instanceprops(controlbarid);\r\n\r\n            //clear messages\r\n            ip.uploader.Output('');\r\n\r\n            this.set_visual_mode('recordmode', controlbarid);\r\n            //timer and status bar\r\n            ip.timer.reset();\r\n            ip.timer.start();\r\n            this.update_status(controlbarid);\r\n\r\n            //set recording stage\r\n            this.stage = \"recorded\";\r\n        },\r\n\r\n\r\n        handle_timer_update: function (controlbarid) {\r\n            var ip = this.fetch_instanceprops(controlbarid);\r\n            ip.controlbar.status.html(ip.timer.fetch_display_time());\r\n            if (ip.timer.seconds == 0 && ip.timer.initseconds > 0) {\r\n                ip.controlbar.stoprecbutton.click();\r\n            }\r\n        },\r\n\r\n        update_status: function (controlbarid) {\r\n            var ip = this.fetch_instanceprops(controlbarid);\r\n            ip.controlbar.status.html(ip.timer.fetch_display_time());\r\n        },\r\n\r\n        //set visuals for different states (ie recording or playing)\r\n        set_visual_mode: function (mode, controlbarid) {\r\n            var self = this;\r\n            var ip = this.fetch_instanceprops(controlbarid);\r\n\r\n            switch (mode) {\r\n\r\n                case 'recordmode':\r\n                    ip.controlbar.progress.hide();\r\n                    ip.controlbar.preview.addClass('poodll_recording');\r\n                    ip.controlbar.status.addClass('poodll_recording');\r\n                    ip.controlbar.status.removeClass('hide');\r\n                    self.disable_button(this);\r\n                    self.disable_button(ip.controlbar.playbutton);\r\n                    ip.controlbar.playbutton.show();\r\n                    self.disable_button(ip.controlbar.stopbutton);\r\n                    ip.controlbar.stopbutton.hide();\r\n                    self.disable_button(ip.controlbar.savebutton);\r\n                    ip.controlbar.savebutton.show();\r\n                    self.enable_button(ip.controlbar.stoprecbutton);\r\n                    ip.controlbar.stoprecbutton.show();\r\n                    ip.controlbar.startbutton.hide();\r\n\r\n\r\n                    break;\r\n\r\n                case 'previewmode':\r\n                    ip.controlbar.playbutton.hide();\r\n                    self.enable_button(ip.controlbar.stopbutton);\r\n                    ip.controlbar.stopbutton.show();\r\n                    self.disable_button(ip.controlbar.startbutton);\r\n                    ip.controlbar.startbutton.show();\r\n                    self.disable_button(ip.controlbar.resumebutton);\r\n                    ip.controlbar.resumebutton.hide();\r\n                    self.disable_button(ip.controlbar.playbutton);\r\n                    ip.controlbar.preview.removeClass('poodll_recording');\r\n                    ip.controlbar.status.removeClass('poodll_recording');\r\n                    ip.controlbar.status.removeClass('hide');\r\n\r\n\r\n                    ip.controlbar.status.addClass('hide');\r\n                    if (ip.controlbar.progresscanvas.hasClass(\"hide\")) {\r\n                        ip.controlbar.progresscanvas.removeClass('hide');\r\n                        ip.controlbar.progresscanvas.show();\r\n                    }\r\n\r\n                    if (!$(this).hasClass('played')) {\r\n                        $(this).addClass('played');\r\n                        ip.controlbar.steptwo.empty();\r\n                        ip.controlbar.steptwo.append('<i class=\"fa fa-check\" aria-hidden=\"true\"></i>').hide().fadeIn(1000);\r\n                    }\r\n\r\n\r\n                    break;\r\n\r\n                case 'pausedmode':\r\n\r\n                    self.enable_button(ip.controlbar.startbutton);\r\n                    ip.controlbar.startbutton.show();\r\n                    self.enable_button(ip.controlbar.playbutton);\r\n                    ip.controlbar.playbutton.show();\r\n                    self.disable_button(ip.controlbar.savebutton);\r\n                    ip.controlbar.savebutton.show();\r\n                    ip.controlbar.preview.removeClass('poodll_recording');\r\n                    ip.controlbar.status.removeClass('poodll_recording');\r\n                    ip.controlbar.stoprecbutton.hide();\r\n\r\n\r\n                    ip.controlbar.timer.html('00:00:00');\r\n\r\n                    ip.controlbar.status.addClass('hide');\r\n                    ip.controlbar.progress.show();\r\n\r\n                    ip.controlbar.stepone.empty();\r\n                    ip.controlbar.stepone.append('<i class=\"fa fa-check\" aria-hidden=\"true\"></i>').hide().fadeIn(1000);\r\n\r\n                    self.disable_button(ip.controlbar.stoprecbutton);\r\n\r\n                    break;\r\n\r\n\r\n                case 'stopplayingmode':\r\n                    if (!self.uploaded) {\r\n                        self.enable_button(ip.controlbar.savebutton);\r\n                        self.enable_button(ip.controlbar.startbutton);\r\n                    }\r\n\r\n                    if (!ip.controlbar.progresscanvas.hasClass('hide')) {\r\n                        ip.controlbar.timer.html('00:00:00');\r\n                        ip.controlbar.progresscanvas.addClass('hide');\r\n                        ip.controlbar.progresscanvas.hide();\r\n                    }\r\n                    ip.controlbar.stopbutton.hide();\r\n                    ip.controlbar.playbutton.show();\r\n                    ip.controlbar.startbutton.show();\r\n                    self.enable_button(ip.controlbar.playbutton);\r\n                    self.disable_button(ip.controlbar.stopbutton);\r\n                    break;\r\n\r\n                case 'uploadmode':\r\n\r\n                    self.disable_button(ip.controlbar.startbutton);\r\n                    ip.controlbar.progresscanvas.removeClass('hide');\r\n                    ip.controlbar.progresscanvas.show();\r\n\r\n                    break;\r\n\r\n                case 'savemode':\r\n\r\n                    self.disable_button(ip.controlbar.savebutton);\r\n                    ip.controlbar.stepthree.empty();\r\n                    ip.controlbar.stepthree.append('<i class=\"fa fa-check\" aria-hidden=\"true\"></i>').hide().fadeIn(1000);\r\n                    break;\r\n            }\r\n\r\n        },\r\n\r\n        //insert the control bar and return it to be reused\r\n        insert_controlbar_video: function (element, controlbarid, preview, resource) {\r\n            var controlbar = this.prepare_controlbar(element, controlbarid, preview, resource, 'video');\r\n            return controlbar;\r\n        },\r\n\r\n        //insert the control bar and return it to be reused\r\n        prepare_controlbar: function (element, controlbarid, preview, resource, mediatype) {\r\n            var ip = this.fetch_instanceprops(controlbarid);\r\n            var skin_style = ip.config.media_skin_style;\r\n\r\n            var recorder_class =  'poodll_mediarecorder_video' ;\r\n\r\n            var size_class = 'poodll_mediarecorder_size_auto';\r\n            switch (ip.config.size) {\r\n                case 'small':\r\n                    size_class = 'poodll_mediarecorder_size_small';\r\n                    break;\r\n                case 'big':\r\n                    size_class = 'poodll_mediarecorder_size_big';\r\n                    break;\r\n                case 'auto':\r\n                    size_class = 'poodll_mediarecorder_size_auto';\r\n            }\r\n            var ss = this.pmr.fetch_strings();\r\n            var controls = '<div class=\"screen-main-wrapper poodll_mediarecorderholder_screen ' + recorder_class + ' ' + size_class + '\" id=\"holder_' + controlbarid + '\">';\r\n\r\n            controls += '<div class=\"modal-box poodll_mediarecorderbox_screen screen-wrap\" id=\"' + controlbarid + '\">';\r\n            controls += '<div class=\"style-holder ' + skin_style + '\">';\r\n            var status = this.fetch_status_bar('screen');\r\n            controls += status,\r\n                controls += '<div class=\"hp_slide\" id=\"slide_' + controlbarid + '\">';\r\n            controls += '<div class=\"hp_timer\"></div><canvas class=\"hp_range\"></canvas></div>';\r\n            controls += preview,\r\n                controls += '<div class=\"settingsicon\" id=\"settingsicon_' + controlbarid + '\"><button type=\"button\" class=\"btn btn-info btn-lg\" data-toggle=\"modal\" data-target=\"#myModal\"><i class=\"fa fa-cogs\" aria-hidden=\"true\"></i></button></div>';\r\n            controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_screen poodll_start-recording_screen\"><i class=\"fa fa-desktop\" aria-hidden=\"true\"></i></button> ';\r\n            controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_screen poodll_stop-recording_screen pmr_disabled\" style=\"display: none;\" disabled><i class=\"fa fa-stop\" aria-hidden=\"true\"></i></button>';\r\n            controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_screen poodll_pause-recording_screen pmr_disabled\" style=\"display: none;\" disabled><i class=\"fa fa-pause\" aria-hidden=\"true\"></i></button>';\r\n            controls += ' <button type=\"button\" class=\"poodll_mediarecorder_button_screen poodll_resume-recording_screen pmr_disabled\" style=\"display: none;\" disabled><i class=\"fa fa-microphone\" aria-hidden=\"true\"></i></button>';\r\n            controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_screen poodll_play-recording_screen pmr_disabled\" disabled><i class=\"fa fa-play\" aria-hidden=\"true\"></i></button> ';\r\n            controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_screen poodll_stop-playing_screen pmr_disabled\" style=\"display: none;\" disabled><i class=\"fa fa-stop\" aria-hidden=\"true\"></i></button>';\r\n            controls += '<button type=\"button\" class=\"poodll_mediarecorder_button_screen poodll_save-recording_screen pmr_disabled\" disabled><i class=\"fa fa-upload\" aria-hidden=\"true\"></i></button>';\r\n            controls += '<div style=\"clear:both;\">';\r\n            controls += '<div class=\"task-helper\">';\r\n            controls += '<p class=\"step-1\">' + ss['recui_record'] + '</p>';\r\n            controls += '<p class=\"step-2\">' + ss['recui_play'] + '</p>';\r\n            controls += '<p class=\"step-3\">' + ss['recui_save'] + '</p>';\r\n            controls += '</div>';\r\n            controls += '</div>';\r\n            controls += '</div>';\r\n            controls += this.devsettings.fetch_dialogue_box();\r\n            controls += ip.downloaddialog.fetch_dialogue_box();\r\n            controls += ip.errordialog.fetch_dialogue_box();\r\n            controls += '</div>';\r\n\r\n            $(element).prepend(controls);\r\n\r\n            var controlbar = {\r\n                settingsdialog: $('#' + controlbarid + ' .poodll_dialogue_box_settings'),\r\n                downloaddialog: $('#' + controlbarid + ' .poodll_dialogue_box_download'),\r\n                errorsdialog: $('#' + controlbarid + ' .poodll_dialogue_box_errors'),\r\n                settingsicon: $('#' + controlbarid + ' .settingsicon'),\r\n                stepone: $('#' + controlbarid + ' .step-1'),\r\n                steptwo: $('#' + controlbarid + ' .step-2'),\r\n                stepthree: $('#' + controlbarid + ' .step-3'),\r\n                progresscanvas: $('#' + controlbarid + ' .hp_range'),\r\n                progress: $('#' + controlbarid + ' .hp_slide'),\r\n                timer: $('#' + controlbarid + ' .hp_timer'),\r\n                status: $('#' + controlbarid + ' .poodll_status_screen'),\r\n                preview: $('#' + controlbarid + ' .poodll_preview_screen'),\r\n                startbutton: $('#' + controlbarid + ' .poodll_start-recording_screen'),\r\n                stoprecbutton: $('#' + controlbarid + ' .poodll_stop-recording_screen'),\r\n                stopbutton: $('#' + controlbarid + ' .poodll_stop-playing_screen'),\r\n                pausebutton: $('#' + controlbarid + ' .poodll_pause-recording_screen'),\r\n                resumebutton: $('#' + controlbarid + ' .poodll_resume-recording_screen'),\r\n                playbutton: $('#' + controlbarid + ' .poodll_play-recording_screen'),\r\n                savebutton: $('#' + controlbarid + ' .poodll_save-recording_screen')\r\n            };\r\n\r\n            //settings and error and download dialogs\r\n            //settings is on 'this' because it is shown from skkn events, but errors are from pmr stuff\r\n            ip.downloaddialog.set_dialogue_box(controlbar.downloaddialog);\r\n            ip.errordialog.set_dialogue_box(controlbar.errorsdialog);\r\n            this.devsettings.set_dialogue_box(controlbar.settingsdialog);\r\n\r\n            return controlbar;\r\n        }, //end of fetch_control_bar_screen\r\n\r\n\r\n        register_controlbar_events_video: function (onMediaSuccess, controlbarid) {\r\n            var self = this;\r\n            var pmr = this.pmr;\r\n            var stage = this.stage;\r\n            var ip = this.fetch_instanceprops(controlbarid);\r\n\r\n            //init linear progress\r\n            var hprogress = anim_progress_bar.clone();\r\n            hprogress.init(ip.controlbar.progresscanvas);\r\n\r\n            ip.controlbar.settingsicon.click(function () {\r\n                if (!self.uploaded) {\r\n                    self.devsettings.open();\r\n                } else {\r\n                    ip.downloaddialog.open();\r\n                }\r\n            });\r\n\r\n            ip.controlbar.startbutton.click(function () {\r\n                pmr.do_start_screen(ip, onMediaSuccess);\r\n            });\r\n\r\n            ip.controlbar.stoprecbutton.click(function () {\r\n                pmr.do_stop_audio(ip);\r\n                self.set_visual_mode('pausedmode', controlbarid);\r\n                //timer and status bar\r\n                ip.timer.stop();\r\n                ip.timer.reset();\r\n                self.update_status(controlbarid);\r\n            });\r\n\r\n\r\n            ip.controlbar.stopbutton.click(function () {\r\n                self.set_visual_mode('stopplayingmode', controlbarid);\r\n                //stop playing\r\n                var preview = ip.controlbar.preview.get(0);\r\n                pmr.do_stopplay_audio(ip, preview);\r\n                hprogress.stop();\r\n            });\r\n\r\n            ip.controlbar.playbutton.click(function () {\r\n\r\n                var preview = ip.controlbar.preview.get(0);\r\n                pmr.do_play_audio(ip, preview);\r\n\r\n                ip.controlbar.preview.on('timeupdate', function () {\r\n                    var currentTime = this.currentTime;\r\n                    ip.controlbar.timer.html(ip.timer.fetch_display_time(currentTime));\r\n                });\r\n\r\n\r\n                //do visuals\r\n                self.set_visual_mode('previewmode', controlbarid);\r\n\r\n                //set recording stage\r\n                stage = \"played\";\r\n\r\n                //start animation\r\n                hprogress.clear();\r\n                hprogress.fetchCurrent = function () {\r\n                    var ct = ip.controlbar.preview.prop('currentTime');\r\n                    var duration = ip.controlbar.preview.prop('duration');\r\n                    if (!isFinite(duration)) {\r\n                        duration = ip.timer.finalseconds;\r\n                    }\r\n                    return ct / duration;\r\n                };\r\n                hprogress.start();\r\n\r\n            });\r\n\r\n            ip.controlbar.savebutton.click(function () {\r\n                self.set_visual_mode('savemode', controlbarid);\r\n                log.debug('save');\r\n                if (ip.blobs && ip.blobs.length > 0) {\r\n                    pmr.do_save_audio(ip);\r\n                    self.uploaded = true;\r\n                    self.set_visual_mode('uploadmode', controlbarid);\r\n                    //set recording stage\r\n                    stage = \"saved\";\r\n                } else {\r\n                    ip.uploader.Output(M.util.get_string('recui_nothingtosaveerror', 'filter_poodll'));\r\n                }//end of if self.blobs\r\n                //probably not necessary  ... but getting odd ajax errors occasionally\r\n                return false;\r\n            });//end of save recording\r\n\r\n            window.onbeforeunload = function () {\r\n                self.enable_button(ip.controlbar.startbutton);\r\n                var preview = ip.controlbar.preview;\r\n                if (preview && preview.get(0)) {\r\n                    preview.get(0).pause();\r\n                }\r\n            };\r\n\r\n        }, //end of register_control_bar_events_screen\r\n\r\n\r\n        enable_button: function (button) {\r\n            $(button).attr('disabled', false);\r\n            $(button).removeClass('pmr_disabled');\r\n        },\r\n        disable_button: function (button) {\r\n            $(button).attr('disabled', true);\r\n            $(button).addClass('pmr_disabled');\r\n        },\r\n\r\n    };//end of returned object\r\n\r\n});//total end\r\n\r\n"],"names":["define","$","log","utils","anim_progress_bar","browserrecognition","settings","upskin_bar","debug","instanceprops","pmr","stage","uploaded","devsettings","clone","extend","this","init","ip","set_media_type","fetch_instanceprops","onUploadSuccess","controlbarid","hide","show","onUploadFailure","fetch_status_bar","skin","fetch_preview_audio","fetch_preview_video","fetch_resource_audio","fetch_resource_video","fetch_uploader_skin","element","upskin","config","controlbar","progresscanvas","timer","onMediaError","e","console","error","onMediaSuccess_video","uploader","Output","set_visual_mode","reset","start","update_status","handle_timer_update","status","html","fetch_display_time","seconds","initseconds","stoprecbutton","click","mode","progress","preview","addClass","removeClass","disable_button","playbutton","stopbutton","savebutton","enable_button","startbutton","resumebutton","hasClass","steptwo","empty","append","fadeIn","stepone","stepthree","insert_controlbar_video","resource","prepare_controlbar","mediatype","skin_style","media_skin_style","size_class","size","ss","fetch_strings","controls","fetch_dialogue_box","downloaddialog","errordialog","prepend","settingsdialog","errorsdialog","settingsicon","pausebutton","set_dialogue_box","register_controlbar_events_video","onMediaSuccess","self","hprogress","open","do_start_screen","do_stop_audio","stop","get","do_stopplay_audio","do_play_audio","on","currentTime","clear","fetchCurrent","ct","prop","duration","isFinite","finalseconds","blobs","length","do_save_audio","M","util","get_string","window","onbeforeunload","pause","button","attr"],"mappings":"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"}