define(["jquery","core/log","filter_poodll/anim_progress_bar"],function(a,b,c){"use strict";return b.debug("upskin_bar: initialising"),{element:null,cvs:null,percent:0,progressbar:null,messagearea:null,clone:function(){return a.extend(!0,{},this)},init:function(a,b,d,e){this.config=a,this.element=b,this.cvs=d,this.progressbar=c.clone(),this.messagearea=e},initControls:function(){var a=this;this.progressbar.init(this.cvs,"#BCCCCC"),this.progressbar.fetchCurrent=function(){return a.percent}},initProgressSession:function(a){var b=this;b.percent=0;var c=M.util.get_string("recui_uploading","filter_poodll");a.upload.addEventListener("progress",function(a){a.lengthComputable&&(b.percent=a.loaded/a.total,b.showMessage(c+"("+Math.floor(100*b.percent)+"%)"))}),this.progressbar.start()},deactivateProgressSession:function(){this.progressbar.stopthere(),b.debug("deactivating session")},showMessage:function(a,b){this.messagearea.html(a)}}});