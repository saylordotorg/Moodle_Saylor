define(["jquery","core/log","filter_poodll/anim_progress_bar"],(function($,log,bar){return log.debug("upskin_bar: initialising"),{element:null,cvs:null,percent:0,progressbar:null,messagearea:null,clone:function(){return $.extend(!0,{},this)},init:function(config,element,cvs,messagearea){this.config=config,this.element=element,this.cvs=cvs,this.progressbar=bar.clone(),this.messagearea=messagearea},initControls:function(){var self=this;this.progressbar.init(this.cvs,"#BCCCCC"),this.progressbar.fetchCurrent=function(){return self.percent}},initProgressSession:function(xhr){var self=this;self.percent=0;var uploadingmessage=M.util.get_string("recui_uploading","filter_poodll");xhr.upload.addEventListener("progress",(function(e){e.lengthComputable&&(self.percent=e.loaded/e.total,self.showMessage(uploadingmessage+"("+Math.floor(100*self.percent)+"%)"))})),this.progressbar.start()},deactivateProgressSession:function(){this.progressbar.stopthere(),log.debug("deactivating session")},showMessage:function(msg,msgid){this.messagearea.html(msg)}}}));

//# sourceMappingURL=upskin_bar.min.js.map