{"version":3,"file":"tooltip.min.js","sources":["../src/tooltip.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/*\n * File:        tooltip.js\n * Author:      Osvaldas Valutis (http://osvaldas.info/)\n * Info:        http://osvaldas.info/elegant-css-and-jquery-tooltip-responsive-mobile-friendly\n *\n * Copyright Osvaldas Valutis.\n *\n * This source file is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n * or FITNESS FOR A PARTICULAR PURPOSE. See the MIT license for details: http://opensource.org/licenses/MIT.\n */\ndefine(['jquery'], function($) {\n    return {\n        init: function() {\n            $(document).ready(function () {\n                var targets = $('[rel~=tooltip]');\n\n                targets.bind('mouseenter', function () {\n                    const target = $(this),\n                        tip = target.attr('title'),\n                        tooltip = $('<div id=\"tooltip2\"></div>');\n\n                    if (!tip || tip == '') {\n                        return false;\n                    }\n\n                    target.removeAttr('title');\n                    tooltip.css('opacity', 0)\n                        .html(tip)\n                        .appendTo('body');\n\n                    const init_tooltip = () => {\n                        if ($(window).width() < tooltip.outerWidth() * 1.5) {\n                            tooltip.css('max-width', $(window).width() / 2);\n                        } else {\n                            tooltip.css('max-width', 340);\n                        }\n\n                        var pos_left = target.offset().left + (target.outerWidth() / 2) - (tooltip.outerWidth() / 2),\n                            pos_top = target.offset().top - tooltip.outerHeight() - 20;\n\n                        if (pos_left < 0) {\n                            pos_left = target.offset().left + target.outerWidth() / 2 - 20;\n                            tooltip.addClass('left');\n                        } else {\n                            tooltip.removeClass('left');\n                        }\n\n                        if (pos_left + tooltip.outerWidth() > $(window).width()) {\n                            pos_left = target.offset().left - tooltip.outerWidth() + target.outerWidth() / 2 + 20;\n                            tooltip.addClass('right');\n                        } else {\n                            tooltip.removeClass('right');\n                        }\n\n                        if (pos_top < 0) {\n                            pos_top = target.offset().top + target.outerHeight();\n                            tooltip.addClass('top');\n                        } else {\n                            tooltip.removeClass('top');\n                        }\n\n                        tooltip.css({left: pos_left, top: pos_top})\n                            .animate({top: '+=10', opacity: 1}, 50);\n                    };\n\n                    init_tooltip();\n                    $(window).resize(init_tooltip);\n\n                    const remove_tooltip = () => {\n                        tooltip.animate({top: '-=10', opacity: 0}, 50, () => {\n                            tooltip.remove();\n                        });\n\n                        target.attr('title', tip);\n                    };\n\n                    target.bind('mouseleave', remove_tooltip);\n                    tooltip.bind('click', remove_tooltip);\n                });\n            });\n        }\n    };\n});\n"],"names":["define","$","init","document","ready","bind","target","this","tip","attr","tooltip","removeAttr","css","html","appendTo","init_tooltip","window","width","outerWidth","pos_left","offset","left","pos_top","top","outerHeight","addClass","removeClass","animate","opacity","resize","remove_tooltip","remove"],"mappings":"AA0BAA,mCAAO,CAAC,WAAW,SAASC,SACjB,CACHC,KAAM,WACFD,EAAEE,UAAUC,OAAM,WACAH,EAAE,kBAERI,KAAK,cAAc,eACjBC,OAASL,EAAEM,MACbC,IAAMF,OAAOG,KAAK,SAClBC,QAAUT,EAAE,iCAEXO,KAAc,IAAPA,WACD,EAGXF,OAAOK,WAAW,SAClBD,QAAQE,IAAI,UAAW,GAClBC,KAAKL,KACLM,SAAS,YAERC,aAAe,WACbd,EAAEe,QAAQC,QAAiC,IAAvBP,QAAQQ,aAC5BR,QAAQE,IAAI,YAAaX,EAAEe,QAAQC,QAAU,GAE7CP,QAAQE,IAAI,YAAa,SAGzBO,SAAWb,OAAOc,SAASC,KAAQf,OAAOY,aAAe,EAAMR,QAAQQ,aAAe,EACtFI,QAAUhB,OAAOc,SAASG,IAAMb,QAAQc,cAAgB,GAExDL,SAAW,GACXA,SAAWb,OAAOc,SAASC,KAAOf,OAAOY,aAAe,EAAI,GAC5DR,QAAQe,SAAS,SAEjBf,QAAQgB,YAAY,QAGpBP,SAAWT,QAAQQ,aAAejB,EAAEe,QAAQC,SAC5CE,SAAWb,OAAOc,SAASC,KAAOX,QAAQQ,aAAeZ,OAAOY,aAAe,EAAI,GACnFR,QAAQe,SAAS,UAEjBf,QAAQgB,YAAY,SAGpBJ,QAAU,GACVA,QAAUhB,OAAOc,SAASG,IAAMjB,OAAOkB,cACvCd,QAAQe,SAAS,QAEjBf,QAAQgB,YAAY,OAGxBhB,QAAQE,IAAI,CAACS,KAAMF,SAAUI,IAAKD,UAC7BK,QAAQ,CAACJ,IAAK,OAAQK,QAAS,GAAI,KAG5Cb,eACAd,EAAEe,QAAQa,OAAOd,kBAEXe,eAAiB,WACnBpB,QAAQiB,QAAQ,CAACJ,IAAK,OAAQK,QAAS,GAAI,IAAI,WAC3ClB,QAAQqB,YAGZzB,OAAOG,KAAK,QAASD,MAGzBF,OAAOD,KAAK,aAAcyB,gBAC1BpB,QAAQL,KAAK,QAASyB"}